Summary,Issue key,Issue id,Issue Type,Status,Project key,Project name,Project type,Project lead,Project lead id,Project description,Priority,Resolution,Assignee,Assignee Id,Reporter,Reporter Id,Creator,Creator Id,Created,Updated,Last Viewed,Resolved,Fix versions,Fix versions,Fix versions,Fix versions,Fix versions,Fix versions,Fix versions,Fix versions,Fix versions,Fix versions,Fix versions,Due date,Votes,Labels,Labels,Labels,Labels,Description,Environment,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers Id,Watchers Id,Watchers Id,Watchers Id,Watchers Id,Original estimate,Remaining Estimate,Time Spent,Work Ratio,Σ Original Estimate,Σ Remaining Estimate,Σ Time Spent,Security Level,Inward issue link (Blocks),Inward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Inward issue link (Cloners),Inward issue link (Cloners),Outward issue link (Cloners),Inward issue link (Duplicate),Inward issue link (Duplicate),Outward issue link (Duplicate),Outward issue link (Duplicate),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Custom field (Active Benefit Statement Calculation),Custom field (Active member calculations),Custom field (Actual end),Custom field (Actual start),Custom field (Admin SLT Lead),Custom field (Affected services),Custom field (Approvals),Custom field (Aurora ID),Custom field (Aurora Testing Environment - ClientID),Custom field (Baseline target date),Custom field (Baseline target date),Custom field (Benefit Type),Custom field (Business SME ),Custom field (Calc Area),Custom field (Calc Impact),Custom field (Calc Sign Off),Custom field (Calc Type),Custom field (Calc Type),Custom field (Calc Type),Custom field (Calculation Type),Custom field (Calculation code version number),Custom field (Category),Custom field (Change Request URL),Custom field (Change reason),Custom field (Change risk),Custom field (Change type),Custom field (Check Fix Versions),Custom field (Check Release Versions),Custom field (Client),Custom field (Client),Custom field (Client),Custom field (Client),Custom field (Client ID),Custom field (Client ID [CalcUAT]),Custom field (Coding Completion Due),Custom field (Coding Request Due),Custom field (Coding paused reason),Custom field (Connection Date),Custom field (Dashboard type),Custom field (Data Ready),Custom field (Data issues),Custom field (Deferred Benefit Statement Calculation),Custom field (Deferred member calculations),Custom field (Deployment date),Custom field (Dev Estimate),Custom field (Dev Plan Item),Custom field (Development),Custom field (Epic Color),Custom field (Epic Name),Custom field (Epic Status),Custom field (Feedback iteration (Auto generated)),Custom field (Feedback iteration (automated)),Custom field (Feedback type),Custom field (File Path Location),Custom field (Focus Areas),Custom field (GMPe Implementation date),Custom field (GMPe Method),Custom field (GMPe ticket request),Custom field (Goals),Custom field (Impact),Custom field (Issue Description),Custom field (Issue color),Custom field (Live Delivery Date),Custom field (Locked forms),Custom field (Next pension increase date),Custom field (Number of Members),Custom field (Open forms),Custom field (Parent Epic Name),Custom field (Previous Administrator),Custom field (Process Stage),Custom field (Project overview key),Custom field (Project overview status),Custom field (RAG),Custom field (RAG),Custom field (Rank),Custom field (Readiness review checklist v1),Custom field (Release Calc Type),Custom field (Release Notes),Custom field (Release Notes),Custom field (Release Type),Custom field (Release Version Number),Custom field (Release Version Number),Custom field (Request ID),Custom field (Request Type),Custom field (Request language),Custom field (Request participants),Custom field (Responders),Custom field (Run time inputs),Satisfaction rating,Custom field (Satisfaction date),Custom field (Scheme),Custom field (Scheme),Custom field (Scheme),Custom field (Scheme),Custom field (Scheme Name),Custom field (Scheme Name),Custom field (Sentiment),Custom field (Service),Custom field (Service Desk Issue Type),Custom field (Service Desk Issue Type),Custom field (Service Desk Issue Type Detail),Custom field (Service Desk Issue Type Detail),Custom field (Service Now Incident Number),Custom field (Service Now Incident Number),Custom field (Service Now Incident Number),Custom field (Service Now Incident Number),Custom field (Service Now URL Link),Custom field (Service Now URL Link to Incident raised),Custom field (Service Now URL link),Custom field (Service type),Custom field (Severity),Custom field (Source System),Custom field (Spec Readiness Score),Custom field (Spec Score),Custom field (Spec Sign Off),Custom field (Specification updated),Sprint,Sprint,Sprint,Sprint,Custom field (Start date),Custom field (Story Points),Custom field (Story point estimate),Custom field (Story points),Custom field (Submitted forms),Custom field (Suggested Sequence),Custom field (System),Custom field (System),Custom field (System),Custom field (System type),Custom field (TD1),Custom field (TD1 Date),Custom field (TD2),Custom field (TD2 Date),Custom field (TD3 Date),Custom field (Target end),Custom field (Target start),Team Id,Team Name,Custom field (Test Case Score),Custom field (Test Matrix Readiness Score),Custom field (Test Matrix Readiness Score),Custom field (Test Matrix Score),Custom field (Testing Environment),Custom field (Testpack Query Type),Custom field (Testpack Update Type),Custom field (Time to first response),Custom field (Time to resolution),Custom field (Times in Further Info Required),Custom field (Total forms),Custom field (UAT Completion Due),Custom field (UAT Due Date),Custom field (UAT Feedback iteration),Custom field (Vulnerability),Custom field (Wave),Custom field (Work category),Custom field (Workstream),Custom field (XPS Priority),Custom field ([CHART] Date of First Response),Custom field ([CHART] Time in Status),Custom field (give it a name),Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Parent,Parent key,Parent summary,Status Category,Status Category Changed
PINCS ISSUES RAISED IN UAT,PHX5-907,24967,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,12/Feb/26 2:46 PM,12/Feb/26 3:40 PM,,,,,,,,,,,,,,,0,,,,,,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5842d535,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-10,,,,,,,,,,,,,,blue,,,,,,,,,,,,,0|i00t33:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,12/Feb/26 2:46 PM
Apply 50% spouse entitlement to care part year reval pension,PHX5-906,24964,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,12/Feb/26 2:21 PM,12/Feb/26 3:04 PM,,,,,,,,,,,,,,,0,,,,,"April Woods advised me that the care part year reval pension calculated in the members first pension increase should have a 50% spouse entitlement added. This was confirmed post deployment for UAT so adding as a fix item. 

I have two lines of commented out code in the Public Sector Pinc module ApplyPartYearCareReval function to implement it here:
{{pyrv.SpouseAmount = 0m; //(partYearCareIncrease / 2).Round();}}

{{mcpy.SpouseAmount = 0m; //(partYearCareIncrease / 2).Round();}}",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4561928f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001dl2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24967,PHX5-907,PINCS ISSUES RAISED IN UAT,To Do,12/Feb/26 2:21 PM
Police 1987 Retirement - DB_LSAUsed on Max Pension Option,PHX5-905,24795,Story,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,,,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,11/Feb/26 11:01 AM,11/Feb/26 1:37 PM,,,,,,,,,,,,,,,0,,,,,"Member ID 19519.  Max lump sum and PCLS options give the same lump sum as the commutation factor is below 20, so no tax. Values of cash are correct, but in other values the DB_LSAUsed and DB_LSDBAUsed are outputting as the HMRC PCLS value, but this would overstate the value. Update made to spec to change line 85 to show that the value of DB_TaxfreeLS is the lower of the LSA, DB PCLS or DB MaxLS1987.

!image-20260204-105809.png|width=250,alt=""image-20260204-105809.png""!",,Annabelle Stephenson,Tracy Collins,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-495,,,,,,,,,11/Feb/26 11:03 AM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260204-105809.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/17908,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@70c2fc2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001dl0h,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-02-11 13:10:16.537,,,"11/Feb/26 1:10 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;We calculate both cash values in {{HMRCPCLSDBLSAStrategy}} (the method 1987 uses) but only return the maximum of the two.  If we amend each of the PCLS calcs in the LSA strategies to return 2 decimals instead of 1, then we can access both of these in {{GetLSAOtherValues}}.  (Initially I wanted to just call the relevant function directly in {{GetLSAOtherValues}} but we can’t as don’t have CCF available here.)

PCLS in {{HMRCPCLSDBLSAStrategy}} : 

{noformat}public override (decimal, decimal) PCLS(decimal preComPen, decimal postComPen, decimal lumpSum, decimal ERBuyout)
{
    decimal pcls = PublicSectorFunctions.PCLS(preComPen, CommutationFactor, 2, MemberInfo, McCloudOption);
    decimal schemeMax = Math.Round((lumpSum + (postComPen * 20m))/4m,2);

    return (pcls, schemeMax);
}{noformat}

The other strategies can just return 2 of the same value, eg:

{noformat}public override (decimal, decimal) PCLS(decimal preComPen, decimal postComPen, decimal lumpSum, decimal ERBuyout)
{
    return (lumpSum, lumpSum);
}{noformat}

Change in {{GetLSAOtherValues}} : 

{noformat}(decimal hmrcPCLS, decimal maxLS) = lumpSum == 0 ? (0m, 0m) : PCLS(preComPen, postComPen, lumpSum, erBuyoutLS);

decimal pcls = Max(hmrcPCLS, maxLS);
otherValues.Add(new ElementValue{Key = $""{GetPrefix()}_PCLS"", Value = pcls});

decimal taxFreeLS = Min(lsa, lsdba, hmrcPCLS, maxLS);{noformat}

I’ve set up UAT test 905 in police D>R (ignore incorrect reference to A>R on the linked ticket) however this is currently erroring due to the PI2026 factor issue.  This means I have been unable to run the calc through to determine which figure is actually correct, and I cannot tell from the info admin have provided. (I could work it out manually but that will take more time than it is worth.  We won’t be able to get this ticket passing until the factor/key issue is sorted anyway.)",,,,,,,,,,,,,,,,,,,,,,,,23110,PHX5-861,Issues Raised Post Go Live,To Do,11/Feb/26 11:02 AM
Police D>R  - Rounding on Scheme Pays calcs,PHX5-904,24762,Task,READINESS REVIEW,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,,,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,11/Feb/26 10:10 AM,12/Feb/26 1:46 PM,,,,,,,,,,,,,,,0,,,,,Please add in a rounding to 2dp after the scheme pays debit has been revalued and before the RTF is applied.  Member ID 464033 would want the interim value to display as 24.20,,Annabelle Stephenson,Tracy Collins,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-494,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6e99c034,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi000gm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-02-12 13:46:44.497,,,"12/Feb/26 1:46 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] I just want to flag this one with you as it would need a minor change in {{PublicSectorPensionElementSchemePayStrategy}} which currently has a note saying refactoring is required so no changes to be made.

If we are fine to go ahead, then the change is just to add .Round(2) to the original elementValue.  I think this value is only returned in the info logger so we could do the rounding in there, however rounding could impact the newValue calculation, so I suggest adding the following somewhere in the strategy, above where we calculate newValue : 

{noformat}elementValue.Value = elementValue.Value.Round(2);{noformat}",,,,,,,,,,,,,,,,,,,,,,,,23110,PHX5-861,Issues Raised Post Go Live,To Do,11/Feb/26 10:10 AM
Condense repeated code in client calcs,PHX5-903,24686,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,10/Feb/26 10:59 AM,10/Feb/26 11:05 AM,,,,,,,,,,,,,,,0,,,,,"The client calcs contain a fair bit of code repetition to cover the various member types and options available.  While I don’t think we can do much to condense the bulk of that code, an area that might be eligible is where we combine our options, once we have calculated them.

There are several instances of {{foreach (KeyValuePair<InternalCalculationPensionOptionType, PensionOption> kvp in [some options list])}} where we iterate through the options, adding them to lists.  We also add the BCEs and unauthorised payments to the result.  Perhaps we can create a function that does this for us, given the lists of options and results as inputs.

Example area to look at, from police D>R:

!image-20260210-110537.png|width=874,alt=""image-20260210-110537.png""!",,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10/Feb/26 11:05 AM;18934601-32fa-4c76-9b74-159dc94fd206;image-20260210-110537.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/17736,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3457f39a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00syn:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,20602,PHX5-773,TECHNICAL DEBT,To Do,10/Feb/26 10:59 AM
Police A>R - Rounding of DB Qualifying service,PHX5-902,24653,Task,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,,,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,10/Feb/26 10:22 AM,12/Feb/26 10:34 AM,,,,,,,,,,,,,,,0,,,,,Member ID 109624.  DB qualifying service should be 30 years.  Aurora is outputting 29.9999999 which is then causing the cash to be capped.,,Russell Armstrong,Tracy Collins,,,,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-493,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6782d8bf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi000gv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-02-11 14:04:56.369,,,"11/Feb/26 2:04 PM;640f34fc1273131f2adfede9;Presumably could have impacts in other areas - eligibility for retirement, deferred due dates, lump sum calculation on deferred to retirement

Need to round totalService to an appropriate number of decimal places where those under the threshold due to a minor rounding issue will be classed as the whole number but those genuinely less than the whole number (364/365 days) will not.",12/Feb/26 9:54 AM;640f34fc1273131f2adfede9;Problem is with transfer in service - service held to 5 decimal places on Aurora and is causing the difference from the expected 30 years,"12/Feb/26 10:34 AM;640f34fc1273131f2adfede9;Solution that will go through all calculations is to change PublicSectorTransferIn (around line 4527 in Public Sector Calculation. Convert the additional service to a value in years and days then convert back to a decimal with the full number of decimal places.

The foreach loop becomes

{noformat}decimal additionalService = memberTransferInElement.ElementType == ""PENSSERV"" ? memberTransferInElement.Amount : 0;
				decimal additionalServiceYears = additionalService.RoundDown(0);
				decimal additionalServiceDays = ((additionalService - additionalServiceYears) * 365).Round(0);
				decimal additionalServiceDaysAsDecimal = additionalServiceDays / 365m;
				decimal finalAdditionalService = additionalServiceYears + additionalServiceDaysAsDecimal;
				
				additionalQualifyingService += finalAdditionalService; // NR: Altair calcs when compated to GetAccruedPension use PENSSERV TVIN in all circumstances. Admin confirmed QUALSERV not used. Changing to QUALSERV will knock out A>R calcs with TVIN Elements.
	            additionalFinalService += finalAdditionalService;{noformat}",,,,,,,,,,,,,,,,,,,,,,23110,PHX5-861,Issues Raised Post Go Live,To Do,10/Feb/26 10:22 AM
Police A>R Eligibility to retire,PHX5-901,24652,Task,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,Russell Armstrong,640f34fc1273131f2adfede9,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,10/Feb/26 10:13 AM,11/Feb/26 11:06 AM,,,,,,,,,,,,,,,0,,,,,"Member 386720 is age 56  and has 20 years service but is a Chief Inspector. Although at this age he should have a capped lump sum as under age 60, he should be able to take benefits as over age 55. Calc is not running and displaying following errors

!image-20260202-174420.png|width=416,alt=""image-20260202-174420.png""!",,Russell Armstrong,Tracy Collins,,,,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-492,,,,,,,,,10/Feb/26 10:15 AM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260202-174420.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/17701,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@203c427b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi000gr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-02-11 11:05:50.118,,,"11/Feb/26 11:05 AM;640f34fc1273131f2adfede9;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] I think this is correct as per the Pre Commutation specification. 

|IsConstableOrSargeant|(Rank = ""C1"" OR Rank = ""S1"" OR Rank = ""01"" )|

Rank is S2 so goes to the below and is in the underlined scenario?

IF NOT IsConstableOrSargent
    IF illhealth -- full lump sum [DB_PreCommPension * 25% * CFF]
    IF service >=30 -- full lump sum [DB_PreCommPension * 25% * CCF]
    IF Age >= 60 -- full lump sum [DB_PreCommPension * 25% * CCF]
    +IF Age >= 50 and service<25 -- n/a as deferred pension+
    IF Age >= 50 and service>=25 -- capped lump sum [ DB_PreCommPension * 2.25 ]

Can you clarify with admin please?",,,,,,,,,,,,,,,,,,,,,,,,23110,PHX5-861,Issues Raised Post Go Live,To Do,10/Feb/26 10:13 AM
Create functions for accrual,PHX5-900,24551,Story,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,09/Feb/26 3:33 PM,10/Feb/26 4:01 PM,,,,,,,,,,,,,,,0,,,,,"We can condense the AccruedPension region of Public Sector Calculation if we bring out some of our repeated code into their own functions.  These should sit in PublicSectorFunctions.  Candidates for this are:

# The calculation of the accrualCalcA - F figures,
# The doubling that occurs within the above, and
# Creation and calculation of prospective service tranche and service duration.

Code suggestions for these functions are below.  These new functions would need to be called in {{PublicSectorAccrualDoubleStrategy}}, {{PublicSector1987IllHealthStrategy}} and {{PublicSectorAccrualDeferredDoubleStrategy}}.

+AccrualCalcA - F function:+

{noformat}		public static decimal GetAccrualValues(IMemberInfo MemberInfo, McCloudOption McCloudOption, decimal totalQualifyingService, decimal totalDBQualifyingService, decimal totalService, decimal partTimeService)
		{
	        decimal accrualCalcA = Min(totalQualifyingService, 30);
            decimal accrualCalcB = 60;
            decimal accrualCalcC = Min(GetDoubledService(accrualCalcA, 20), 40);
            decimal accrualCalcD = accrualCalcC == 0 ? 0 : accrualCalcA * accrualCalcB / accrualCalcC;
            decimal accrualCalcE = totalDBQualifyingService;
            decimal accrualCalcF = 0;

            if (totalService != partTimeService)
            {
                decimal initialAccrualCalcF = accrualCalcC == 0 ? totalDBQualifyingService : accrualCalcE * accrualCalcB / accrualCalcD;
                InterimValues.Add($""Initial accrualCalcF | AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", initialAccrualCalcF);
                decimal decimalPartA = (initialAccrualCalcF - (int)initialAccrualCalcF) * 365;
                decimal decimalPartB = Math.Floor(decimalPartA);

                accrualCalcF = (decimalPartB / 365) + (int)initialAccrualCalcF;
            }
            else
            {
                accrualCalcF = accrualCalcC == 0 ? totalDBQualifyingService : accrualCalcE * accrualCalcB / accrualCalcD;
            }

            var infoLogger = new StringBuilder();
            infoLogger.AppendLine($""Member: {MemberInfo.AuroraId}."");
            infoLogger.AppendLine($""McCloudOption: {McCloudOption.ToString()}."");
            infoLogger.AppendLine($""accrualCalcF: {accrualCalcF.ToString()}"");

            InterimValuesLogger.AddWithLogging(infoLogger.ToString(), ""AccrualCalcF"", InterimValuesLogger.LoggingMode.BothInformation);	

            Log.Information($""DeferredDoubleStrategy | accrualCalcA | AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", accrualCalcA.ToString());
            Log.Information($""DeferredDoubleStrategy | accrualCalcB | AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", accrualCalcB.ToString());
            Log.Information($""DeferredDoubleStrategy | accrualCalcC | AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", accrualCalcC.ToString());
            Log.Information($""DeferredDoubleStrategy | accrualCalcD | AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", accrualCalcD.ToString());
            Log.Information($""DeferredDoubleStrategy | accrualCalcE | AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", accrualCalcE.ToString());
            Log.Information($""DeferredDoubleStrategy | accrualCalcF | AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", accrualCalcF.ToString());

			return accrualCalcF;
		}{noformat}

You’ll note that this function uses the next function I will outline below.

+Doubling of service:+

{noformat}		public static decimal GetDoubledService(decimal serviceToBeDoubled, int capForDoubling)
		{
			decimal serviceUpToCap = Min(serviceToBeDoubled, capForDoubling);
			decimal serviceOverCap = serviceToBeDoubled - serviceUpToCap;

			return serviceOverCap * 2 + serviceUpToCap;			
		}{noformat}

The ‘capForDoubling’ refers to the 20 years we currently use in public sector (ie. we double the service above 20 years), in case this needs to change down the line.

+Prospective service:+

{noformat}		public static decimal GetProspectiveService(LocalDate prospectiveStartDate, LocalDate prospectiveEndDate, List<ServicePeriod> servicePeriods, List<ServiceBreak> serviceBreaks)
		{
	        List<ServiceTranche> prospectiveServiceTranche =
            [
                new ServiceTranche { Key = KeyServiceTrancheConstants.ProspectiveKey, EffectiveFrom = prospectiveStartDate, EffectiveTo = prospectiveEndDate },
            ];
	
	        IServiceCalculator prospectiveServiceCalculator = new ServiceBuilder(prospectiveServiceTranche, servicePeriods, serviceBreaks, prospectiveStartDate, prospectiveEndDate)
				.WithUnits(ServiceUnits.PublicSector)
				.WithMethod(ServiceMethod.PublicSector)
				.WithFillType(ServicePeriodFillType.LastPeriodToBeFilled)
				.Build();
	
	        List<ServiceHistoryOverTrancheWithDuration> prospectiveServiceHistory = prospectiveServiceCalculator.Calculate();
	
	        return prospectiveServiceHistory.Where(x => x.TrancheKey == KeyServiceTrancheConstants.ProspectiveKey).Sum(x => x.QualifyingDecimalAmount).Round(2);			
		}{noformat}",,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-473,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6a060247,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sxr:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,20602,PHX5-773,TECHNICAL DEBT,To Do,09/Feb/26 3:33 PM
Notional 'true' elements to be removed from total pension round to 12p.,PHX5-899,24445,Story,Review,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,06/Feb/26 5:01 PM,12/Feb/26 9:31 AM,,,,,,,,,,,,,,,0,,,,,"Any ‘open’ elements which are being passed into the PINCs calc to be increased and have a notional flag as true need to be excluded in the list of elements that make up the members total pension rounding to 12p. They can stay as 1p rounding post increase. 

CIT confirmed to me that notional true elements are automatically removed as values from the payroll output form. ",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@482780b0,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sno:i,,,"Silent ticket as part of PINCs coding, no release note required.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 32,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,"11/Feb/26 5:05 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Created {{RoundTotalExcludingNotional}}function in Public Sector Pinc module. This will take a list of the member pension history, extract any notional and non notional elements into separate lists. 

It will then apply the total pension 12p rounding procedure post increase to the non notional elements only. Then readd the notional elements into the range. ",,,,,,,,,,,,,,,,,,,,,,,,23178,PHX5-863,PINCS,In Progress,10/Feb/26 10:36 PM
Create method for calculating the PYRV increase pro rate fraction,PHX5-898,24444,Story,Ready for UAT,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,06/Feb/26 4:45 PM,12/Feb/26 6:46 AM,,,,,,,,,,,,,,,0,,,,,"Public Sector have specific rules of when the increase rate should be pro rated in pincs. This is also used when calculating the part year care revaluation entitlement. It is broadly based on complete months but the key difference is that the member is entitled to a 1 month pro rate fraction if they retire 16 days after last pension increase date. This then follows on into other months so a 2 month pro rate fraction would be used when the member has retired 1 month and 16 days after the last PI date. 

April advised me to use Annex C in the 2017 public sector PI tables as the pro rate fractions eventually become a factor of 1 when month 12 is reached, the maths never changes. Attached 2017 PI multiplier tables. 

[^Pension_Increase_Multiplier_Tables_2017.xlsx]

",,Andrew Wilson,Steven Wright,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,06/Feb/26 4:56 PM;bfea69ca-e7d9-488d-b01b-103621fa1516;Pension_Increase_Multiplier_Tables_2017.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/17462,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@18aea5c6,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sno:,,,Silent ticket as part of PINCs initial coding. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 32,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-02-12 06:46:12.057,,,"06/Feb/26 4:59 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;In Public Sector Pinc module, created a static function called {{CalculateProRateFraction}}. This is then called in the ApplyPartYearCareRevaluation method.","12/Feb/26 6:46 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e] Some minor points to think about if we are ever looking at this code again:

# The following code is repeated and could be pulled into a sub function that accepts the two keys as inputs.
{noformat} var care = memberPensionHistories.First(x => x.Element.Key == ""CARE"");
            var pyrv = memberPensionHistories.First(x => x.Element.Key == ""PYRV"");

            decimal baseValue = care.MemberAmount ?? 0m;
            decimal partYearCareIncrease = Math.Round(baseValue * ((careRevalRate * partYearFraction) / 100), 2, MidpointRounding.AwayFromZero);

            InterimValues.Add(""PartYearCareRevaluation"", partYearCareIncrease);

            pyrv.MemberAmount = partYearCareIncrease;

            pyrv.SpouseAmount = 0m; //(partYearCareIncrease / 2).Round();{noformat}
# In {{CalculateProRateFraction}}, we silently cap the months at 12. I assume there is no way we should get to this point and have a value bigger than 12? If that is the case, should there be a warning?",,,,,,,,,,,,,,,,,,,,,,,23178,PHX5-863,PINCS,In Progress,06/Feb/26 4:48 PM
PSO - Ensure PSO debit deducted correctly from other elements,PHX5-897,24245,Story,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Feb/26 11:56 AM,05/Feb/26 12:07 PM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5864a7d9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001dl0zv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,22789,PHX5-850,PSO,To Do,05/Feb/26 11:56 AM
PSO - Ensure final total debit is correct,PHX5-896,24243,Story,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Feb/26 11:56 AM,05/Feb/26 12:06 PM,,,,,,,,,,,,,,,0,,,,,"Need some genuine PSO members that we can run through and provide results. Then need to run those results by admin.

Need example with ERFs and multiple elements if possible.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@75c2ec5a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001dl0zr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,22789,PHX5-850,PSO,To Do,05/Feb/26 11:56 AM
PSO Service - get Service Builder working within Divorce module,PHX5-895,24241,Story,In Progress,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Feb/26 11:54 AM,12/Feb/26 10:02 AM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7029cfac,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snq:zzr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 32,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-02-11 15:16:19.098,,,"11/Feb/26 3:16 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;I added this code into the DefaultDivorceCalculator, to set default values for service builder parameters and run the builder:

{noformat} protected virtual bool ShouldCalculateService(PSOElementValue pso)
    {
        return true;
    }

    protected virtual LocalDate GetServiceStartDate(PSOElementValue pso)
    {
        return MemberInfo.DateCommencedPensionableService.Value;;
    }

    protected virtual LocalDate GetServiceEndDate(PSOElementValue pso)
    {
        return pso.DivorceOrderDate;
    }

    protected virtual ServiceUnits GetServiceUnits(PSOElementValue pso)
    {
        return ServiceUnits.YearsAndCompleteMonths;
    }

    protected virtual ServiceMethod GetServiceMethod(PSOElementValue pso)
    {
        return ServiceMethod.Default;
    }

    protected virtual ServicePeriodFillType GetFillType(PSOElementValue pso)
    {
        return ServicePeriodFillType.GapsToBeFilled;
    }

    protected decimal CalculateServiceForElement(PSOElementValue pso)
    {
        if (!ShouldCalculateService(pso))
            return 0;

        var start = GetServiceStartDate(pso);
        var end = GetServiceEndDate(pso);

        var tranche = new ServiceTranche
        {
            Key = ""DivorceService"",
            EffectiveFrom = start,
            EffectiveTo = end
        };

        var builder = new ServiceBuilder(
                new List<ServiceTranche> { tranche },
                ServicePeriods,
                ServiceBreaks,
                start,
                end)
            .WithUnits(GetServiceUnits(pso))
            .WithMethod(GetServiceMethod(pso))
            .WithFillType(GetFillType(pso));

        var calc = builder.Build();
        var history = calc.Calculate();

        return history.Sum(x => x.FinalDecimalAmount);
    }{noformat}

I also have ServicePeriods and ServiceBreaks as Data Input Objects: 

{noformat}public class DefaultDivorceCalculator : BaseStrategy, IDivorceCalculator
{
    public List<ServicePeriod> ServicePeriods { get; }
    public List<ServiceBreak> ServiceBreaks { get; }{noformat}

Now, in public sector calc, I just call the original element values and then “update” them for various public sector requirements, in the CustomPublicSectorDivorceCalculator. This includes overriding  the parameter inputs:

{noformat}    protected override bool ShouldCalculateService(PSOElementValue pso)
    {
        return MemberInfo is PublicSectorMemberInfo;
    }

    protected override LocalDate GetServiceStartDate(PSOElementValue pso)
    {
        return ((PublicSectorMemberInfo)MemberInfo).DateJoinedScheme();
    }

    protected override ServiceUnits GetServiceUnits(PSOElementValue pso)
    {
        return ServiceUnits.PublicSector;
    }

    protected override ServiceMethod GetServiceMethod(PSOElementValue pso)
    {
        return ServiceMethod.PublicSector;
    }

    protected override ServicePeriodFillType GetFillType(PSOElementValue pso)
    {
        return ServicePeriodFillType.LastPeriodToBeFilled;
    }{noformat}

and then just calling the base calc to run the builder:

{noformat}   private void UpdatePSOElementValues(List<PSOElementValue> values)
    {
        foreach (var pso in values)
        {
            pso.Service = CalculateServiceForElement(pso);
            pso.RevalFactor = PIFactor(pso.Key, pso.DivorceOrderDate);
        }
    }{noformat}","11/Feb/26 3:18 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Currently all existing cases remain green, but there is another ticket in the sprint - need to bring through to A>R/ A>D to check real service calcs, but awaiting dev update.",,,,,,,,,,,,,,,,,,,,,,,22789,PHX5-850,PSO,In Progress,12/Feb/26 10:02 AM
PSO Fire - Ensure ElementStrategy returns correct final value for individual element,PHX5-894,24239,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Feb/26 11:47 AM,05/Feb/26 12:05 PM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@42ae05e1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001dl0z,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,8.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,22789,PHX5-850,PSO,To Do,05/Feb/26 11:47 AM
PSO Police - Ensure ElementStrategy returns correct final value for individual element,PHX5-893,24237,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Feb/26 11:47 AM,05/Feb/26 12:05 PM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@38b7ae0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001dl0y,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,8.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,22789,PHX5-850,PSO,To Do,05/Feb/26 11:47 AM
PSO Fire - Ensure SelectStrategy returns correct strategy,PHX5-892,24235,Story,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Feb/26 11:45 AM,05/Feb/26 12:10 PM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@17b8c5a5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snq:zzx,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 32,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,22789,PHX5-850,PSO,To Do,05/Feb/26 11:45 AM
PSO Police - Ensure SelectStrategy returns correct strategy,PHX5-891,24233,Story,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Feb/26 11:45 AM,05/Feb/26 12:10 PM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@402f84f1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snq:zzv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 32,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,22789,PHX5-850,PSO,To Do,05/Feb/26 11:45 AM
PSO Fire - Ensure Factor Table Strategies working,PHX5-890,24229,Story,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Feb/26 11:39 AM,05/Feb/26 12:08 PM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7df8a28a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snq:zzi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 32,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,22789,PHX5-850,PSO,To Do,05/Feb/26 11:39 AM
PSO Police - Ensure Factor Table Strategies working,PHX5-889,24227,Story,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Feb/26 11:38 AM,05/Feb/26 12:08 PM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6eace8d2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snq:zz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 32,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,22789,PHX5-850,PSO,To Do,05/Feb/26 11:38 AM
Part year care reval pension element should be created at retirement or deferment.,PHX5-888,24192,Story,BLOCKED,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,05/Feb/26 10:53 AM,12/Feb/26 12:35 PM,,,,,,,,,,,,,,,0,,,,,"At retirement, members with CARE benefits need to have a 0 value 'Part Year Care Reval Pension element created at retirement which is then used in the PINCs calc. 

For A>D cases, a 0 value deferred element should also be created.  (two keys if member is McCloud eligible).

Mapping for Retirements
1. Legacy option or non McCloud eligible members should have a PYRV key created.
2. Reform option should have MCPY key created.

Mapping for A>D
1. Non McCloud eligible - add PYRV key. 
2. McCloud eligible add two keys - PYRV AND MCPY.



This was an instruction given to me on a call with Iain and April on 05/02/2026, I advised [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] and specs need to be updated.
",,Annabelle Stephenson,Steven Wright,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,PHX5-813,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@362cf2a7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00003ii,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-02-06 12:25:32.944,,,"06/Feb/26 12:25 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;When this is picked up, please note linked ticket 813 where we have removed PYRV being calculated at deferment. (Not sure if that will directly affect how we deal with this one, but good to know)","11/Feb/26 5:22 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Keys we are expecting for the various calc types are as follows (CARE only, not needed for DB):

| |A>D|A>R|D>R|
|Reform|PYRV, MCPY|MCPY|MCPY|
|Legacy|PYRV, MCPY|PYRV|PYRV|
|Non-McCloud|PYRV|PYRV|PYRV|

On the retirement calcs, these elements should exist in both pre-com and residual lists of element values.  On the deferred calc, the element/s is/are to be returned alongside the list of deferred elements.  

If we also have separate spouse elements, then we will want this new element in the Spouse list as well (I think this will only apply to retirement calcs as spouse benefits on A>D are calculated but sit in the final {{ActiveToDeferredResult}} rather than as their own separate elements).



+Retirement calcs:+

Initial thoughts are that, for retirement calcs, we can create these elements similarly to how and when we create the Spouse’s elements. Eg. the following could sit in {{PublicSectorBaseCalculator}} : 

{noformat}public Dictionary<InternalCalculationPensionOptionType, PensionOption> CreatePYRVElements(Dictionary<InternalCalculationPensionOptionType, PensionOption> pensionOptions, McCloudOption mcCloudOption)
{
    foreach(KeyValuePair<InternalCalculationPensionOptionType, PensionOption> kvp in pensionOptions)
    {
        if (kvp.Value.PreCommutedPensionValues.Any(x => x.Key == ""CARE"") || kvp.Value.PreCommutedPensionValues.Any(x => x.Key == ""MCCR""))
        {
            ElementValue carePYRV = new ElementValue {
                Key = mcCloudOption == McCloudOption.Reform ? KeyPensionConstants.McCloudCAREPartYearRevaluation : KeyPensionConstants.CAREPartYearRevaluation,
                Value = 0};

            kvp.Value.PreCommutedPensionValues.Add(carePYRV);
            kvp.Value.ResidualPensionValues.Add(carePYRV);
            kvp.Value.SpousePensionValues.Add(carePYRV);
        }        
    }

    return pensionOptions;
}{noformat}

For it to work, we also need to :

# add two new {{KeyPensionConstants}} in PSConstants module, and
# add {{McCloudOption = mcCloudOption;}} into the {{RetiredCalculator}} as otherwise we are hitting that issue again where mccloud defaults to Legacy.

I think we would call this function in {{RetiredCalculator}} just after where we call {{CreateSpousesElements}}.



+Deferred calcs:+

For deferred calcs I think we can set up a similar function again in {{PublicSectorBaseCalculator}} that creates the element/s as needed, based on the mccloud option.  Instead of passing in and returning the dictionary of pension options, we would pass in our list of deferred element values.

I’d call it in {{ActiveToDeferredResult}} after we call {{CalculateDeferredElementValues}} and before {{SetDueDates}} (as this should allow us to set the same due dates for the PYRV elements as for the CARE elements).

Same as for retirements, I think we’d need to add {{McCloudOption = mcCloudOption;}} into {{ActiveToDeferredResult}}.  However I can see that Steven has already created the {{KeyDeferredElementConstants}} we’d want to use, so nothing more needed there.","12/Feb/26 12:35 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;*Update linked to ticket 813, following conversation with Andrew 12/02:*

We are not proceeding with the changes on 813, which means the deferred CARE results will continue to include PYRV where the inflation rate is known.  More conversations are needed with admin regarding both PYRV and PINCs before we take this further.

I’m changing the status of this ticket to blocked, until we can have those conversations.  While we do need to raise an admin query at some point, there are currently so many still outstanding with admin that, for something like this, we need to know it will get proper consideration and attention.  (Feel free to change status to admin query though, if anyone disagrees this approach.)",,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,To Do,05/Feb/26 10:54 AM
Test Public Sector PINCs module.,PHX5-887,24159,Story,In Progress,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,05/Feb/26 9:37 AM,12/Feb/26 3:00 PM,,,,,,,,,,,,,,,0,,,,,Create tests cases for the public sector specific pinc functions. ,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@33865324,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001da,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 32,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,23178,PHX5-863,PINCS,In Progress,12/Feb/26 3:00 PM
Refactor public sector specific PINC functions into global code.,PHX5-886,24158,Story,Ready for UAT,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,05/Feb/26 9:36 AM,12/Feb/26 9:26 AM,,,,,,,,,,,,,,,0,,,,,"As public sector PINCs coding was underway, there was a build up of additional functions at client level to adjust certain sections of the client level code, i.e. pension increase inputs being changed to obtain the factor automatically as opposed to an increase table being input by admin in Aurora.

For reusability across other public sector clients, testing purposes and to avoid having to all client level PINCs code when changes are needed, we should move the additional functions into a new global module. ",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@224c34f9,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001dki,,,Silent ticket as part of PINCs coding. No release note required.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 32,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,"12/Feb/26 9:23 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Created Public Sector Pinc global module, created a class called PublicSectorPINCs. Moved all the additional public sector specific functions from client level into the module and made them static. Client level code updated to call the global module and set dependency. 

",12/Feb/26 9:26 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Linked ticket to add further tests into the new global module. I have a base set of tests added but needs strengthening. ,,,,,,,,,,,,,,,,,,,,,,,23178,PHX5-863,PINCS,In Progress,05/Feb/26 7:52 PM
Police AA: Don't agree 2015 AA results,PHX5-885,24090,Story,Ready for UAT,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,04/Feb/26 1:19 PM,09/Feb/26 2:05 PM,,,Client 184 Police AA Sprint 32,Client 185 Fire AA Sprint 32,,,,,,,,,,,0,,,,,Please see linked ticket for further details,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,PHX5-839,,,,,PHX5A-473,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@282416,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snq:y,,,Add interest to the last complete CARE year when this is calculated through the Annual Allowance calculation,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 32,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,04/Feb/26 1:19 PM;640f34fc1273131f2adfede9;Added test case to Annual Allowance MAIN but currently unable to export to VS Code to debug,"04/Feb/26 1:19 PM;640f34fc1273131f2adfede9;This is 3 separate issues

# Cash not being output
# Don’t agree 2006 closing pension (PHX5-884)
# Don’t agree 2015 closing pension","04/Feb/26 2:44 PM;640f34fc1273131f2adfede9;Inflation not being applied at 31/03/2025.

In {{PublicSectorCARECalculationFactory}} change 

{noformat}else if (calculationType == CalculationType.AnnualAllowance)
            {
                careBuilder.WithCAREInflation(
                    CAREInflationType.NoInflation, // i.e. factor of 1 + 0 = 1
                    ProRateMethod.None,
                    ProRateMethod.None,
                    0,
                    0,
                    0,
                    inflationAddition);
            }{noformat}

to 

{noformat}else if (calculationType == CalculationType.AnnualAllowance)
	            {
	                careBuilder.WithCAREInflation(
	                    CAREInflationType.FromTableWithAdditionZeroFuture, // i.e. factor of 1 + 0 = 1
	                    ProRateMethod.None,
	                    ProRateMethod.None,
	                    0,
	                    0,
	                    0,
	                    inflationAddition);
	            }{noformat}","05/Feb/26 2:43 PM;640f34fc1273131f2adfede9;Change causes Annual Allowance Spec - 1742802 (1987 Active McCloud, Reform with underpin, Mid Year Date 2nd Check) and Annual Allowance Spec - 1742802 (1987 Active McCloud, Reform with underpin, Mid Year Date) tests in Annual Allowance client calculation to fail - to investigate","06/Feb/26 9:43 AM;640f34fc1273131f2adfede9;Change caused interest to be added to CARE for incomplete years where it is not wanted.

In CARE module added AllOrZero to ProRateMethod

Added the below to either apply full interest for a full year or none for a part year

{noformat}public virtual decimal FinalPeriodAllOrZero(decimal amount, LocalDate startDate, LocalDate endDate)
		{
			decimal monthsInPeriod = Period.Between(startDate, endDate.PlusDays(1), PeriodUnits.Months).Months;
			if (monthsInPeriod < 12)
			{
				return 0m;
			}
			else
			{
				return amount;
			}
		}{noformat}

In ProRateFinalPeriod added

{noformat}case ProRateMethod.AllOrZero :
						return FinalPeriodAllOrZero(amount, startDate, endDate);{noformat}

Included two test in CARE module for this - one for the full period and interest is added, one for a part period where no interest is added.

In Public Sector Calculation in {{PublicSectorCARECalculationFactory}} the careBuilder now uses ProRateMethod.AllOrZero for the final period.

UAT test 839 matches expected results for CARE and other tests now pass",,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,In Progress,05/Feb/26 2:36 PM
Police AA: Don't agree 2006 AA results,PHX5-884,24089,Task,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,,,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,04/Feb/26 1:18 PM,06/Feb/26 3:25 PM,,,,,,,,,,,,,,,0,,,,,Please see linked ticket for further details,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,PHX5-839,,,,,PHX5A-473,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2a352485,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi000fi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,04/Feb/26 1:18 PM;640f34fc1273131f2adfede9;Added test case to Annual Allowance MAIN but currently unable to export to VS Code to debug,"04/Feb/26 1:18 PM;640f34fc1273131f2adfede9;This is 3 separate issues

# Cash not being output
# Don’t agree 2006 closing pension
# Don’t agree 2015 closing pension",05/Feb/26 9:58 AM;640f34fc1273131f2adfede9;Appears to be a 35 day difference in service between Aurora and Altair. Altair value shown on print of 13265.92 uses a service of 14.50137 (as does the value for the year before). Aurora uses service of 14.59726,06/Feb/26 3:25 PM;640f34fc1273131f2adfede9;Added query to linked analysis task to request they check the data across the two systems to check it is consistent,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,To Do,04/Feb/26 1:18 PM
Confirm rounding order of pension elements in PINCs,PHX5-883,24023,Story,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,04/Feb/26 11:16 AM,04/Feb/26 11:20 AM,,,,,,,,,,,,,,,0,,,,,"Police and Fire PINCs will now have a 12p total pension round up post increase. Any additional pennies needed to make up the round to 12p need to be assigned to a pension element in a rounding order. 

The ‘Rounding Order of Elements' section of the PINC calc spec needs to be updated with an element order list. 

I have applied a preliminary rounding order of this for now (left to right priority)

{{""PIP"", ""PIPA"", ""MODI"", ""MLPI"", ""PINJ"", ""CLWRI"", ""CPDI"", ""PO88GMPI"", ""PEN"", ""MCPN"", ""CARE"", ""MCCR"", ""PYRV"", ""MCPY"", ""MODF"", ""INJ"", ""MOD"", ""ADDN"", ""CLWR"", ""PO88GMP"", ""PR88GMP""}}",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6b5eaf42,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001dlr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,23178,PHX5-863,PINCS,To Do,04/Feb/26 11:16 AM
Apply 12p total pension rounding to PINCs,PHX5-882,24022,Story,Ready for UAT,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,04/Feb/26 11:08 AM,05/Feb/26 2:01 PM,,,,,,,,,,,,,,,0,,,,,"Update total pension rounding for PINCs calc to 12p for both Police and Fire.

Rounding procedure is now as follows

GMP - 52p

All other elements - 1p

Total pension round up to nearest 12p. Adjust all other elements as per a rounding order of elements. (Suspect increase elements will be first). ",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@676d738b,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snn:,,,"Silent update, work completed as part of PINCs coding. No release note required.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 31,PHX5 Sprint 32,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,"04/Feb/26 11:12 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Have added a preliminary key order in {{List<string> keyOrder}} and updated {{pincElementValues.RoundTotal(12, keyOrder);}} to set it to 12.",,,,,,,,,,,,,,,,,,,,,,,,23178,PHX5-863,PINCS,In Progress,04/Feb/26 11:14 AM
Refactor final pension elements,PHX5-881,24021,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,04/Feb/26 11:05 AM,04/Feb/26 11:08 AM,,,,,,,,,,,,,,,0,,,,,"Rather than have several list of element values - one each for pre, post, cash , spouses etc, it would make more sense to have a list of objects that are aware of all of these value sat once and linked to one key. It would make our coding easier, and the end saving of results easier on the front end (if that was updated as well).

There is a GAD ticket that involved a change that used a post tac figure from Other Values, rather than just taking a post tax figure from the element itself. This area could also be cleaned up. [https://xps-jira.atlassian.net/browse/PHX5-847|https://xps-jira.atlassian.net/browse/PHX5-847|smart-link]",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,PHX5-847,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@36b7f871,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00str:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,20602,PHX5-773,TECHNICAL DEBT,To Do,04/Feb/26 11:05 AM
Admin to confirm outstanding element groups.,PHX5-880,23938,Story,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,03/Feb/26 3:52 PM,03/Feb/26 3:58 PM,,,,,,,,,,,,,,,0,,,,,"I have grouped the pension elements as per the data spreadsheet here [+Pension Increase Data.xlsx+|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQBNA5z5-ZSkQJCGIB4f4-qwAV7Zg8oBX2Ejx0zZYs0PG98?e=8lBeqY]. The tab called ‘SW programming running Lists’ confirms the elemenets currently grouped. Any increase related key is where the increase for that group will be stored on by the pincs calc and the other will be treat as the base. 

For any elements in red text, I need confirmation from admin/SME of which should be treat as single or groups. Or whether they should be excluded from pincs (could apply 0 increase if needed).

If it is not clear from the naming convention that the element is the one that stores the increase, please make a note of this in the spreadsheet. ",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3ac70ad8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001dm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,23178,PHX5-863,PINCS,To Do,03/Feb/26 3:52 PM
Police AA - CARE only - Closing value is incorrect,PHX5-879,23654,Task,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,,,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,02/Feb/26 2:53 PM,11/Feb/26 11:27 AM,,,,,,,,,,,,,,,0,,,,,"Member ID 501310.  Inputs 06/04/2024 to 05/04/2025.  CARE Pay £30,075.55.  Calc appears to be using the £30,068.69 salary held on record but I cannot agree the 05/04/2025 closing balance.  This should be the last total CARE pension of 524.26, adding the 543.86 (which is the pay input in the process of £30075.55 / 55.3)  = 1068.12 x reval of 2.95% = 1099.63.  Calc is outputting £1075.67.",,Annabelle Stephenson,Naomi Robinson,Russell Armstrong,Tracy Collins,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:ffa445ab-b813-4226-9ed2-507a454e9272,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,PHX5A-472,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1d598ea4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi000gi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-02-06 13:06:28.354,,,"06/Feb/26 1:06 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I’ve set up the test case in Police AA but it’s getting different results from admin.  We are returning their expected figure 1099.63 as at 31/03/25 but we then go on to calculate further CARE for 01/04/25 - 05/04/25. something to do w our CARE periods running 01/04 to 31/03 vs PIP of 06/04 - 05/04?

We’re using period earnings of £417.72 in that final 5 day CARE period. I can’t work out (without debugging) where that value has come from.","06/Feb/26 3:32 PM;640f34fc1273131f2adfede9;[https://xps-jira.atlassian.net/browse/PHX5-885|https://xps-jira.atlassian.net/browse/PHX5-885|smart-link] will have changed the results from when admin ran it. Won’t previously have been applying 2.95% interest to value at 31/03/2025.

 For that member admin were inputting a pro rated salary as at 01/04/2025 that was used for the CARE calculation from 01/04/2025 to 05/04/2025","10/Feb/26 5:22 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Comment added to linked ticket with questions for April.  Our code is calculating CARE up to PIP end date of 05/04/2025, so there are an additional 5 days that account for the discrepancy.  I do think this is correct for PIA calcs, however it would mean that the previous closing balance as at 05/04/2024 of £524.26 (see other ticket) is incorrect, as that is the CARE value as at 31/03/2024.

We want a response from admin before we start looking into that.  I also may have missed something in the code that explains this, as I am not familiar with the AA calcs.  Therefore [~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] could you please confirm if you disagree with this comment or the one on the linked ticket?","11/Feb/26 11:27 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] Have read through the ticket. I agree with you. i think the code is correctly doing an additional 5 days to the closing balance, as it should for PIA calcs, but is potentially assuming the previous closing is one year prior (i.e 05/04 not 31/03). Happy to take a look at the code if needed.",,,,,,,,,,,,,,,,,,,,,23110,PHX5-861,Issues Raised Post Go Live,To Do,02/Feb/26 2:53 PM
PI factor being output as 1 in test cases for a 2026 pinc date.,PHX5-878,23621,Story,Ready for UAT,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,02/Feb/26 10:20 AM,12/Feb/26 6:51 AM,,,,,,,,,,,,,,,0,,,,,PI Factor for excess elements outputting at 1 in test cases. ,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@194c7654,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001dl,,,Silent ticket as part of PINCs coding. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 32,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,"03/Feb/26 3:43 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;PI Factors for 2026 are not available yet.

Instead of calling Factors.GetPublicSectorPIFactor. I have coded to use the CPI Sep increase (which is what PI factors are built on). Then, allow the pincs global module to pro rate based on complete months. In testing, this appears to match the pro rate factors being applied by Altair. 

When 2026 PI factors are ready and loaded to Calculate, can switch to that methodology and see if the test cases still pass green. Or completely switch to using CPIA as with GMP.","11/Feb/26 4:51 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Loaded in PublicSectorPI2026 provisional factors provided by Matt. (See attached).

When switching the {{PublicSectorIncreaseRates}} function in Public Sector Pincs module to call the {{Factors.GetPublicSectorPiFactor}} code in Factors module, this did not break any exsiting test cases at client or global level (including pro rate cases) which backs up that the PublicSectorPI factors follow CPI but just use specific rules of dates when the factor should be pro rated.

This has now been implemented to use in the two client level pinc calcs.",,,,,,,,,,,,,,,,,,,,,,,23178,PHX5-863,PINCS,In Progress,10/Feb/26 10:38 PM
Set up tests cases from upcoming Matrix to Calculate.,PHX5-877,23620,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,02/Feb/26 10:19 AM,03/Feb/26 4:10 PM,,,,,,,,,,,,,,,0,,,,,Awaiting matrix being created from Matt. Individual testing being done using the 2026 Altair PINCS run given by admin. ,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@767064d2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001dli,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,23178,PHX5-863,PINCS,To Do,02/Feb/26 10:19 AM
Arrears calc and output  - Negative adjustments  and May PI clients,PHX5-876,23619,Story,BLOCKED,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,02/Feb/26 10:17 AM,05/Feb/26 9:29 AM,,,,,,,,,,,,,,,0,,,,,"Matt’s meeting notes with Iain and April on 29/01/2026 describe that there are 5 police/fire clients that have a May pension increase date. Altair calculates the arrears as if the PINC had taken place in April and is output for passing to payroll. There is currently nowhere to output arrears calcs in Aurora outputs. 

Is this something that will be done manually until functionality in Aurora is there.",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@33209bc,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001f9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,23178,PHX5-863,PINCS,To Do,02/Feb/26 10:17 AM
Part Year Care Reval,PHX5-875,23618,Story,Review,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,02/Feb/26 10:15 AM,12/Feb/26 11:44 AM,,,,,,,,,,,,,,,0,,,,,What are the specifications/methodology to calculate the part year reval in PINCs. Need info from admin on how calc is done and then investigate time cost to code.,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,03/Feb/26 2:28 PM;bfea69ca-e7d9-488d-b01b-103621fa1516;Part year reval.docx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/17018,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2e97220f,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001dk,,,Silent update as part of pincs coding. No release note required.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 32,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,03/Feb/26 2:27 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;2026 PINC test case 9809502 has part year care reval. Held call with April who gave some advice on the methodology to arrive at the figures. Part year care reval for PI notes attached. ,"03/Feb/26 2:28 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;[^Part year reval.docx]

","12/Feb/26 11:09 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;In Public Sector Pinc module, 

Created {{ApplyPartYearCareRevaluation}}function to deal with the calc logic and obtaining the relevant care reval factor for police and fire. Passing in a schemeType parameter which will allow the client level code to select whether the scheme is Fire or Police. 


It will calculate and add values to the PYRV/MCPY pension element where member qualifies for the additional pension pre increase, then return it as part of creating the member pension histories object. This is then used in the pincs code when applying the increase to each element in pension history.",,,,,,,,,,,,,,,,,,,,,,23178,PHX5-863,PINCS,In Progress,04/Feb/26 3:47 PM
Add 'ExistingValue' properties for member and spouse to PincElementValues in global.,PHX5-874,23617,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,02/Feb/26 10:10 AM,02/Feb/26 11:43 AM,,02/Feb/26 11:43 AM,,,,,,,,,,,,,0,,,,,"Public Sector PINCs calc for Police and Fire has elements that need to be grouped together before applying the percentage increase. For example post88GMP increases element needs to be added to the base post88GMP element before the increase is applied. 

In our current pincs scheme template, we apply the relevant percentage increase to each element ID individually. It therefore makes sense for the code to calculate the increase percentage as normal to take into account any pro rating needed etc then recalculate after PincElementValues is created. 

I am therefore going to use the objects for each pension element that has been created by PincElementValues to do the adjustment of the calc and then resplit out so that the base element remains the same value post increase.

I therefore need PincElementValue object in Pinc Global Module to store the original element values pre increase so that I can access them in the adjustment calc. 

",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@23d032ad,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snj:,,,Silent ticket as part of PINCs calc coding. No release note required.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 31,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_5322007_*|*_10252_*:*_1_*:*_6774_*|*_10354_*:*_1_*:*_2043_*|*_10056_*:*_1_*:*_4090,,"02/Feb/26 11:38 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;In global PincModule

# Added two new Get Sets called ExistingValue and ExistingSpousesValue to {{public class PincElementValue}}.
# In {{CalculateMemberAndSpouses}}function, added two new lines of code to set the values for these new properties as the existing values pre increase. PincParameters already has these set so using these to set it. 

{noformat}pincElementValue.ExistingValue = pincPensionParameters.Amount;
pincElementValue.ExistingSpousesValue = pincPensionParameters.SpousesAmount;{noformat}",,,,,,,,,,,,,,,,,,,,,,,,23178,PHX5-863,PINCS,Done,02/Feb/26 11:43 AM
Set up custom Calculate() in Public Sector Divorce for PSO,PHX5-873,23607,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,02/Feb/26 9:25 AM,05/Feb/26 12:02 PM,,05/Feb/26 12:02 PM,,,,,,,,,,,,,0,,,,,"Refactor Public Sector divorce to use a custom Public Sector Calculate() function based on Base function in global Divorce module, that will accept deferred age date > factor date, factor table dictionary, application strategy and return a list of revalued divorce elements. Separate tickets to write and test compnent strategies, but testing also required for full flow of Public Sector divorce module into member test cases.",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@70014490,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snq:zr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 31,PHX5 Sprint 32,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10250_*:*_1_*:*_0_*|*_10252_*:*_1_*:*_1743_*|*_10354_*:*_1_*:*_3551_*|*_10056_*:*_1_*:*_14608,,,,,,,,,,,,,,,,,,,,,,,,,,22789,PHX5-850,PSO,Done,05/Feb/26 12:02 PM
Review PINC spec and draft initial client level code to use global CPI and PI factors.,PHX5-872,23489,Story,In UAT,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,30/Jan/26 11:53 AM,05/Feb/26 10:16 AM,,,,,,,,,,,,,,,0,,,,,Public Sector PINCS will not use a manual input file in Aurora to enter the pincs percentage increase for each element. They will use the PublicSectorPI and CPI factors in global tables. Need to code logic into the pincs template to calculate the increases using the global tables and not expect an increase file. ,,Andrew Wilson,Steven Wright,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5105ed37,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001e,,,"Silent ticket, drafting initial PINCs code for Public Sector Police and Fire schemes. No release note required.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 31,PHX5 Sprint 32,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-02-02 14:13:42.17,,,"02/Feb/26 11:23 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e; In Police Client ID 184, created two functions in Pension Increase calc called {{PublicSectorIncreaseRates}} and {{GetCPIIncrease}} these will get the CPI factor from global CPIA table or call the Factors.PublicSectorPIFactor code in Factors module. Created a switch to apply CPI factor to post88GMP elements, 0 increase to Pre88GMP and call Factors.PublicSectorPIFactor for all other elements.",02/Feb/26 2:13 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;You might need to divide by 100m rather than by 100,02/Feb/26 2:15 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;You have it set to pro rate excess = true. Should we be pro rating? I thought that was dealt with in the factor?,02/Feb/26 2:15 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e] See couple of comments below,"02/Feb/26 4:04 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;# Have added a test case with GMP and the CPI factor obtained from global tables needs to be an unadjusted decimal as PINCs global applies the rate in a formula which doesn’t require an adjustment. Have amended these lines to just obtain the value which be output as 3.0 for example 

{noformat}reviewDateFactorToUse = Math.Min(reviewDateFactorToUse, 3.0m);
cpiFactor = reviewDateFactorToUse;{noformat}

# Pro rate to excess elements still needs to be applied as I will be passing in the full increase percentage and logic in PINC global will pro rate it where needed. ","02/Feb/26 4:15 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Thanks [~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e]  As discussed, lets go with this for now, so admin can trial run a process ASAP. We have tickets to cover the known issues.",,,,,,,,,,,,,,,,,,,23178,PHX5-863,PINCS,In Progress,30/Jan/26 12:29 PM
Create logic to assign PSO retirement timing factor strategies to each scenario in GAD guidance.,PHX5-870,23487,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,30/Jan/26 11:48 AM,05/Feb/26 1:27 PM,,05/Feb/26 12:01 PM,Client 184 Police A to R Sprint 31,Client 184 Police D to R Sprint 31,Client 185 Fire A to R Sprint 31,Client 185 Fire D to R Sprint 31,,,,,,,,,0,,,,,,,Naomi Robinson,Steven Wright,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@79b90c6,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snq:zi,,,{{PublicSectorDivorceElementFactorStrategySelector}} and SelectStrategy included in Public Sector Divorce,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 31,PHX5 Sprint 32,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-02-03 14:42:21.95,10251_*:*_2_*:*_63132728_*|*_10250_*:*_2_*:*_456052070_*|*_10252_*:*_1_*:*_3464_*|*_10354_*:*_1_*:*_2269_*|*_10056_*:*_1_*:*_15949,,03/Feb/26 2:42 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;{{ IElementFactorStrategy SelectStrategy}},"04/Feb/26 4:44 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;See Steven’s “SelectStrategy” code and underlying strategies. I added {{PublicSectorDivorceElementFactorStrategySelector}}right at the end of the divorce module, as pso are PSOElementValues that are calculated as the calc runs and are expanded as part of the steps within the bespoke {{CustomPublicSectorDivorceCalculator}}. Calculate(), so I had to set up the code to deal with it as such.",,,,,,,,,,,,,,,,,,,,,,,22789,PHX5-850,PSO,Done,05/Feb/26 12:01 PM
Create retirement timing factor strategies for PS divorce debits.,PHX5-869,23454,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,30/Jan/26 11:07 AM,05/Feb/26 12:02 PM,,05/Feb/26 12:02 PM,,,,,,,,,,,,,0,,,,,,,Naomi Robinson,Steven Wright,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2fddaeef,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snq:zx,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 31,PHX5 Sprint 32,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-02-03 14:47:31.462,10250_*:*_1_*:*_0_*|*_10252_*:*_1_*:*_4785_*|*_10354_*:*_1_*:*_2441_*|*_10056_*:*_1_*:*_30683,,"03/Feb/26 2:47 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Steven has copied into Public Sector Divorce. Need to test each individual one, e.g. {{PublicSectorDivorceDeferredImmediateBenefitsRetiringPreAge55Strategy}}",,,,,,,,,,,,,,,,,,,,,,,,22789,PHX5-850,PSO,Done,05/Feb/26 12:02 PM
Scheme Pays from Care record is not being included in calc,PHX5-868,23388,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,29/Jan/26 2:52 PM,05/Feb/26 1:26 PM,,03/Feb/26 3:33 PM,Client 184 Police D to R Sprint 31,Client 185 Fire D to R Sprint 31,,,,,,,,,,,0,,,,,Member ID 46403302.  Care only.  Member has PYRV of £28.20 on elements and a Scheme Pays deduction of £20.26.  Calc is ignoring both and outputting the pension as revalued main CARE £863.22 x 0.563 (ERF) = £485.99,,Andrew Wilson,Naomi Robinson,Russell Armstrong,Tracy Collins,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,PHX5A-478,,,,,,,,,29/Jan/26 4:55 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;SP deduction as expected in calculate one day prior to 55.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16714,30/Jan/26 2:58 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260130-145525.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16747,30/Jan/26 2:58 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260130-145717.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16748,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2ccfc60,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi0000000008,,,Aurora is now sending the Scheme Pays through to the Retirement from Deferred calculation.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 31,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-29 16:55:32.4,11070_*:*_1_*:*_0_*|*_10281_*:*_1_*:*_84182471_*|*_10251_*:*_1_*:*_3188_*|*_10250_*:*_2_*:*_334151006_*|*_10252_*:*_2_*:*_6391_*|*_10354_*:*_2_*:*_1536830_*|*_10056_*:*_1_*:*_5926915_*|*_11103_*:*_1_*:*_2168,,29/Jan/26 4:55 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;See attached document showing this is working under latest PSC module within Calculate. I think we should publish and re-test as there are concerns this is not coming through to Aurora (since some of this fix should have been in the last release).,"29/Jan/26 5:02 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;As commented in Teams 29/01 at 17:02: I can't seem to change this to a story in the usual way - is anyone else able to? Tracy Collins I have attached to this what calculate is doing to show it is working, so I think we should publish this once more and confirm whether it is all coming through or if there is an issue between Aurora and Calculate. I am off tomorrow, but it can go to review once its changed to a story and then published to check if Aurora is working as expected.","30/Jan/26 2:58 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;I’ve checked this in Aurora now it has been published.  Aurora now gets Pre ERF of £895.88 which is the £863.22 previously shown plus the £32.66 revalued PYRV element.  The ERF of 0.563 is then applied giving a final value of £504.38.  The Scheme Pays deduction is not mentioned anywhere in the debug table.  JSON file shows the below.  Added scheme pays I agree with as I assume that is the scheme pays added as an input into the process. 

!image-20260130-145525.png|width=275,alt=""image-20260130-145525.png""!

!image-20260130-145717.png|width=278,alt=""image-20260130-145717.png""!","02/Feb/26 1:48 PM;640f34fc1273131f2adfede9;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] I’ve done some logging on the calculation in an old client and it appears that in Aurora it’s using an empty list for Member.MemberSchemePaysDebits when there is something on the member record. The data loads correctly when we load a Member in Calculate.

This needs a dev fix. In this case it is happening on the main Member record. The example we’ve been given does not have a Linked Member","02/Feb/26 2:06 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Have raised the dev request with Phil, but not sure when the next deployment will be now.",03/Feb/26 3:33 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Dev completed - admin tested and agreed,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,03/Feb/26 3:33 PM
Police A>D - Rounding post weighted accrual service to days,PHX5-867,23355,Story,Ready for UAT,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,29/Jan/26 2:07 PM,11/Feb/26 3:37 PM,,,Client 184 Police A to D Sprint 32,Client 184 Police Partial Ret Sprint 32,Client 185 Fire A to D Sprint 32,Client 185 Fire A to R Sprint 31,Client 185 Fire A to R Sprint 32,Client 185 Fire Partial Ret Sprint 32,,,,,,,0,,,,,"Member ID 508467.  Makes negligible difference to final calcs but for a calc print the service used (Accrual F) needs to relate to whole days.  The calc at the moment is using 27.5665866 which equates to 27 years 206.804119 days service

!image-20260129-142203.png|width=460,alt=""image-20260129-142203.png""!

This should be rounded to 206 days so 27.564383",,Annabelle Stephenson,Tracy Collins,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-488,,,,,,,,,29/Jan/26 2:23 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260129-142203.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16676,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@77721131,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snq:z,,,"Service duration for Accrual Calc F will be rounded down to whole complete days.  This affects all double accrual calculations, both on retirement and deferred calculations.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 32,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-02-03 11:19:17.208,,,"03/Feb/26 11:19 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;We have some code in {{PublicSectorAccrualDoubleStrategy}} in PSC that does this rounding to complete days that should be copied into {{PublicSectorAccrualDeferredDoubleStrategy}}.  This code would replace the current line that calculates accrualCalcF.

{noformat}decimal accrualCalcF = 0;

var totalservice = serviceHistories[ServiceCalcType.TotalService].Sum(x => x.TotalDurationAmount);
var ptservice = serviceHistories[ServiceCalcType.TotalService].Sum(x => x.PartTimeAdjustedDurationAmount);

if (totalservice != ptservice)

{
    decimal initialAccrualCalcF = accrualCalcC == 0 ? totalDBQualifyingService : accrualCalcE * accrualCalcB / accrualCalcD;
    InterimValues.Add($""Initial accrualCalcF | AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", initialAccrualCalcF);
    decimal decimalPartA = (initialAccrualCalcF - (int)initialAccrualCalcF) * 365;
    decimal decimalPartB = Math.Floor(decimalPartA);
  
    accrualCalcF = ((decimalPartB / 365) + (int)initialAccrualCalcF);
}
else
{
    accrualCalcF = accrualCalcC == 0 ? totalDBQualifyingService : accrualCalcE * accrualCalcB / accrualCalcD;
}{noformat}

This has been tweaked slightly to use Math.Floor for the rounding instead of Math.Round, so that we round down to complete days (see figures from admin on linked ticket).  I’ve also amended this line in {{PublicSectorAccrualDoubleStrategy}} which knocked out 1 A>R test (Police A>R Test 22 PPS) that had been baselined on a previous result.  Discrepancy is less than 0.1% so I am updating expected results to pass. No other A>R tests knocked out.

Test case “UAT test 867” on police A>D calc is testing on both accrualCalcF and the resulting accruedPension, and is now passing. A couple of other A>D tests failed following this, i’ve reset expected results so these pass.","10/Feb/26 10:28 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] as discussed, i’ve created [https://xps-jira.atlassian.net/browse/PHX5-900|https://xps-jira.atlassian.net/browse/PHX5-900|smart-link] to set up some reusable functions that will condense this area of code.  I have laid out some code suggestions on that ticket so let me know if you want me to action that now to get this one wrapped up (as it shouldn’t take long, I could probably get that done today).",,,,,,,,,,,,,,,,,,,,,,,23110,PHX5-861,Issues Raised Post Go Live,In Progress,05/Feb/26 3:08 PM
Treatment of notional elements,PHX5-866,23184,Story,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,28/Jan/26 10:06 AM,03/Feb/26 2:29 PM,,,,,,,,,,,,,,,0,,,,,Several notional elements exist in the data. See [pension element report|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQBNA5z5-ZSkQJCGIB4f4-qwAfHEnw0TOuYR7nvjgKlJCa0?e=UmLZiN]. Need clarification from SME on how these should be used in the calculation.,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@35d8d427,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001fm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,23178,PHX5-863,PINCS,To Do,28/Jan/26 10:06 AM
Output requirements,PHX5-865,23182,Story,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,28/Jan/26 10:02 AM,03/Feb/26 4:09 PM,,,,,,,,,,,,,,,0,,,,,"Clarification required from SME on output requirements. Understand that elements held in Altair may have been unrounded i.e. not divisible by 12 to reflect what members are paid. The output for payroll however does need to be divisible by 12. Need to check if we need to stick to this for whatever reason, or if we can just have one output that’s divisible by 12.",,Matt Lilwall,Steven Wright,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3104714c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001g,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-02-03 16:08:35.204,,,"03/Feb/26 4:08 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] I have coded for excess elements to be 1p rounding post increase calc and GMP will be rounded up on all occasions to 52p as per the PINC spec so that it is consistent with Altair. I have not set any total pension rounding to 12p so the writeback of pension elements to Aurora will be unrounded. 

If this needs changing please let me know. I  am not sure if the payroll report produced by Aurora will apply any rounding of the monthly pension to 12p.




",,,,,,,,,,,,,,,,,,,,,,,,23178,PHX5-863,PINCS,To Do,28/Jan/26 10:02 AM
Group base and increase elements together and code logic for adjustment.,PHX5-864,23180,Story,Ready for UAT,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,28/Jan/26 9:50 AM,06/Feb/26 4:46 PM,,,,,,,,,,,,,,,0,,,,,"In Police & Fire schemes, there are various groups of pension elements. Each group consists of at least one base element, which is the original value i.e. value at retirement. The other is the increase which holds the increases that group of base elements has received. The latter is used to apply the increase to.

The ‘Element Grouping’ sheet of the [spec|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQCHpxyJO9HZT4EKSOiuoSj2AXcVgJFLB640TrF4zmtrx_s?e=rCTnyu] is a draft of these base and increase pairs, which is still subject to review by the SME.",,Matt Lilwall,Steven Wright,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@60380c0a,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001f,,,Silent ticket for PINCs. No release note required.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 31,PHX5 Sprint 32,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-02-03 15:51:04.643,,,"03/Feb/26 3:51 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Created a class called {{AssignElementPairs}} which assigns pension element keys to a pair. 

{{CalculatePairingAdjustment}}class then checks whether the member has keys that match a pair. If it does, it combines the element values for the pair, applies the increase, then deducts the original base element value to get a new total increase element value. 

If the member doesn’t have any keys in the pairs. Then it will just apply a standard pension increase to the element and no adjustment carried out. 

I have paired the elements as per the data spreadsheet here [Pension Increase Data.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQBNA5z5-ZSkQJCGIB4f4-qwAV7Zg8oBX2Ejx0zZYs0PG98?e=8lBeqY]. I have created a tab called SW programming running list.  For any elements in red, I need confirmation from admin/SME of any pairs. Creating new specific ticket for this. ",,,,,,,,,,,,,,,,,,,,,,,,23178,PHX5-863,PINCS,In Progress,02/Feb/26 10:07 AM
PINCS,PHX5-863,23178,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,28/Jan/26 9:45 AM,02/Feb/26 8:56 AM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4e37edfb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-13,,,,,,,,,,,,,,dark_green,,,,,,,,,,,,,0|i00shz:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-28 10:01:31.53,,,28/Jan/26 10:01 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Draft PINCs spec and pension element report linked to the epic,"02/Feb/26 8:56 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]  Have we got absolute confirmation from admin that we will never need to run a pension increase at a person level - i.e. there is never any need to know both members when running pincs?

We will very soon code the pincs as a single member process, and there will be no easy coming back from this.",,,,,,,,,,,,,,,,,,,,,,,,,,To Do,28/Jan/26 9:45 AM
Police D>R - Wk 1 Fix - SP not being deducted from CARE benefit,PHX5-862,23143,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,27/Jan/26 3:51 PM,28/Jan/26 4:27 PM,,28/Jan/26 12:48 PM,Client 184 Police AA Version 14,Client 184 Police A to R Version 16,Client 184 Police D to R Version 8,Client 184 Police Partial Ret Version 8,Client 185 Fire AA Version 4,Client 185 Fire A to R Version 13,Client 185 Fire D to R Version 8,Client 185 Fire Partial Ret Version 6,,,,,0,,,,,"Member ID 46403302.  DOR 29/08/2028.  DOR is the day before members 55th birthday, so OK to retire.  Calc is pulling the warning below.  Is this due to the member being 54 years and 364 days at DOR.  Scheme Pays should always be deducted for deferred members if they are old enough to retire.  The warning should only apply on A>R where the member is under age 55 and is therefore deferring their CARE benefits.

!image-20260127-161135.png|width=411,alt=""image-20260127-161135.png""!

Edited to add - Just rerun at 30/08/2028 (members actual 55th birthday).  Warning does not come up but Scheme Pays is still not revalued and deducted from the benefits.",,Andrew Wilson,Naomi Robinson,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-478,,,,,,,,,27/Jan/26 4:12 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260127-161135.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16476,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@343a53f2,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y1zzv,,,"Calc set back one day prior to 55th birthday to allow for deduction at age 55, consistent with other effective dates/ application dates.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 30,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-28 11:07:30.454,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2170544_*|*_10252_*:*_1_*:*_1379193_*|*_10354_*:*_1_*:*_2482_*|*_10056_*:*_1_*:*_71856449,,28/Jan/26 11:07 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Test case added to D to R,"28/Jan/26 11:21 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Added Naomi’s suggest fix:

{noformat} var memberCanRetireFromCARE = MemberInfo.DateOfBirth.PlusYears(55).PlusDays(-1);
	        var beforeNRD = CalculationDate < memberCanRetireFromCARE;
	
	        if (beforeNRD){noformat}

and this appears to then calculate and deduct the scheme pays","28/Jan/26 12:45 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Went over the below update and test case: UAT JIRA PHX5-842 and 862 - Scheme Pays not being deducted.

Note that there is still issue in ticket 846 to resolve on this case, but it is not a scheme pays related matter, so this ticket can be closed.",,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,28/Jan/26 12:48 PM
Issues Raised Post Go Live,PHX5-861,23110,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,27/Jan/26 12:47 PM,27/Jan/26 12:47 PM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@187de877,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-3,,,,,,,,,,,,,,yellow,,,,,,,,,,,,,0|i00shb:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,27/Jan/26 12:47 PM
Police A>R - Wk 1 Fix - Added years not included in service calc,PHX5-860,23109,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Russell Armstrong,640f34fc1273131f2adfede9,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,27/Jan/26 12:31 PM,28/Jan/26 4:27 PM,27/Jan/26 12:39 PM,28/Jan/26 12:18 PM,Client 184 Police A to R Version 16,Client 184 Police Partial Ret Version 8,Client 185 Fire A to R Version 13,Client 185 Fire Partial Ret Version 6,,,,,,,,,0,,,,,Member ID 19934.  No change to outputs since last test run.  Added years of 40 days is still not being included.,,Russell Armstrong,Tracy Collins,,,,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-465,PHX5-811,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2c308693,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y1zzr,,,A missing Effective From or To date will no longer prevent added service being included in the calculation if the Actual Added Years/Days are populated rather than the Prospective Years/Days,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 30,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-28 10:18:01.221,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_431870_*|*_10252_*:*_1_*:*_5088593_*|*_10354_*:*_1_*:*_3493_*|*_10056_*:*_1_*:*_78923818,,"28/Jan/26 10:18 AM;640f34fc1273131f2adfede9;In {{PublicSectorAddedYearsPurchased}} checking if EffectiveTo or EffectiveFrom are null is the first step and if this fails no added years are calculated. These dates aren’t required where ActualAddYears or ActialAddedDays are populated so the check and this warning needs moving.

Even if ActualAddedYears and ActualAddedDays are populated it goes through the pro rating - this is only required where the added service comes from the prospective fields","28/Jan/26 11:50 AM;640f34fc1273131f2adfede9;Changed the order of {{PublicSectorAddedYearsPurchased}} so now

* Checks if ActualAddedYears and AddedDays are populated and if so uses those as the service
* Checks if EffectiveFrom and EffectiveTo are populated and if not outputs the warning
* Uses the ProspectiveAddedYears and AddedDays and pro rates these if needed

Added the test TransferInFactory _AddedPensionPurchased ActualAddedYears and days in PSC to check the actual fields were being used.

In Active to Retirement AMIN amended the input on test UAT Ticket 811 as an EffectiveTo date had been populated that is not present in Aurora which had been allowing the test to pass when it shouldn’t",,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,28/Jan/26 12:18 PM
Police D>R - PYRV element not being revalued and included in calcs,PHX5-859,23074,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,27/Jan/26 11:21 AM,05/Feb/26 1:27 PM,,04/Feb/26 9:14 AM,Client 184 Police A to R Sprint 31,Client 184 Police D to R Sprint 31,Client 185 Fire A to R Sprint 31,Client 185 Fire D to R Sprint 31,,,,,,,,,0,MyPension,,,,"Member ID 242487 DOR 02/08/2062

Deferred PYRV element of £135.60 at DOL is not being revalued or added to the pension at DOR.",,Annabelle Stephenson,Naomi Robinson,Tracy Collins,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:ffa445ab-b813-4226-9ed2-507a454e9272,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,PHX5-846,,PHX5A-343,,,,,,,,,29/Jan/26 4:17 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260129-161301.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16710,29/Jan/26 4:17 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260129-161402.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16709,29/Jan/26 4:17 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260129-161517.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16711,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@601b13c,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi0000000007,,,"Made sure Accrued[CARE]PensionValues add together when calcualting PreComPen, where there are multiple, e.g. in the instance of an additional partial ret figure, rather than only selecting the first. Previously the figures showed in DeferredElementValues but then only the first or default was used for PreCom calcs.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 31,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-27 16:47:44.968,11070_*:*_1_*:*_0_*|*_10251_*:*_1_*:*_64803830_*|*_10250_*:*_1_*:*_5225930_*|*_10252_*:*_1_*:*_165800482_*|*_10354_*:*_1_*:*_6728_*|*_10056_*:*_1_*:*_20054136_*|*_11103_*:*_1_*:*_13204050,,27/Jan/26 4:47 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;See duplicated linked ticket.  This issue will be dealt with under that fix.  Test set up in police D>R “UAT test 859” (as I added it to debug before I realised it was the same issue) that will pass on outcome values once ticket 846 is complete.,29/Jan/26 3:00 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Yep. The issue on 846 would have sometimes missed of the partial reval as it was only picking the top of several deferred elements with the same name. Sometimes it picked only the partial and sometimes it picked only the main value. I am checking all calcs in D>R now have both.,"29/Jan/26 4:17 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;I think this was member 42428701 based on Aurora in-flight processes.

Pre-fix, the Partial Value was being revalued to 149.62 here:

!image-20260129-161301.png|width=461,alt=""image-20260129-161301.png""!

It was then being dropped when calculating PreCom (before ERFs) as the code was only picking the first “AccruedCAREPension” value result:

!image-20260129-161402.png|width=444,alt=""image-20260129-161402.png""!

After the fix, you can see it is now added on:

!image-20260129-161517.png|width=444,alt=""image-20260129-161517.png""!

In this case there are no retirement factors, but we have tested another case and can see that “PreComElementValuesWithRetirementFactors” correctly applies factors. This is test case UAT JIRA PHX5 846 - Two deferred element values for care, one lost at precom phase.",04/Feb/26 9:14 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Admin confirmed tested and OK to close,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,04/Feb/26 9:14 AM
Retirement - Lump sum calcs interim values rounding,PHX5-858,23005,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Russell Armstrong,640f34fc1273131f2adfede9,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,26/Jan/26 4:07 PM,05/Feb/26 1:26 PM,,02/Feb/26 3:26 PM,Client 184 Police D to R Sprint 31,Client 184 Police Partial Ret Sprint 31,Client 185 Fire A to R Sprint 31,Client 185 Fire D to R Sprint 31,Client 185 Fire Partial Ret Sprint 31,,,,,,,,0,,,,,"Member ID 107304.  Lump sum calc is arrived at by Pre Comm X 0.25 X CF.  Altair would round down the Pre Comm x 0.25 calc before multiplying by CF.  

E.g.  Aurora Calc 67595.50 * _0.25*_25.07 = 423654.80 where the value of 67595.50 *0.25 = 16898.875, 

Altair Calc 16898.87 is the value used to reach a gross lump sum of 16898.87 * 25.07 = 423654.67.",,Annabelle Stephenson,Russell Armstrong,Tracy Collins,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-485,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@49419878,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi0000000007i,,,When calculating the full lump sum the result of pension * 0.25 is rounded down to the next penny before multiplying by the commutation factor,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 31,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-27 11:23:10.815,11070_*:*_1_*:*_0_*|*_10251_*:*_1_*:*_2188289_*|*_10250_*:*_1_*:*_6272147_*|*_10252_*:*_1_*:*_254767378_*|*_10354_*:*_1_*:*_68933528_*|*_10056_*:*_1_*:*_908480_*|*_11103_*:*_1_*:*_5258288,,"27/Jan/26 11:23 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Code change required in Public Sector Functions, in the {{FullLumpSum}} function.

{noformat}public static decimal FullLumpSum(decimal preCommutationPension, decimal commutationFactor, int rounding, IMemberInfo memberInfo, McCloudOption mcCloudOption)
{
    InterimValuesLogger.AddWithLogging($""FullLumpSumFormula: PreCommPension * 0.25 * CF = {preCommutationPension:N2} * 0.25 * {commutationFactor} for AuroraId: {memberInfo.AuroraId} | McCloudOption: {mcCloudOption.ToString()}"",
    ((preCommutationPension * 0.25m).Round(rounding) * commutationFactor).Round(rounding), InterimValuesLogger.LoggingMode.BothInformation
    );

    return ((preCommutationPension * 0.25m).Round(rounding) * commutationFactor).Round(rounding);
}{noformat}

Test case “UAT ticket 858” set up in Police A>R, currently failing, and will pass following code change.","30/Jan/26 12:01 PM;640f34fc1273131f2adfede9;FullLumpSum is now 

{noformat}public static decimal FullLumpSum(decimal preCommutationPension, decimal commutationFactor, int rounding, IMemberInfo memberInfo, McCloudOption mcCloudOption)
    {
            InterimValuesLogger.AddWithLogging($""FullLumpSumFormula: PreCommPension * 0.25 * CF = {preCommutationPension:N2} * 0.25 * {commutationFactor} for AuroraId: {memberInfo.AuroraId} | McCloudOption: {mcCloudOption.ToString()}"",
        ((preCommutationPension * 0.25m).RoundDown(rounding) * commutationFactor).Round(rounding), InterimValuesLogger.LoggingMode.BothInformation
        );

        return ((preCommutationPension * 0.25m).RoundDown(rounding) * commutationFactor).Round(rounding);
    }{noformat}

RoundDown() used instead of the suggested Round() as the ticket says to round down and shows this in the example that it is down despite the next digit being a 5. 

Added test FullLumpSumRounding in Public Sector Functions

In publishing some tests in Public Sector Calculation and all retirement calculations started to fail. Checked the difference seemed consistent with the change made (lump sum a few pence out, residual pension 0.01 out) and updated the expected values so these pass",,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,02/Feb/26 3:26 PM
Police PPS1987 D to R higher tier ill health,PHX5-857,22972,Story,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,26/Jan/26 11:28 AM,29/Jan/26 3:21 PM,,,,,,,,,,,,,,,0,,,,,From the spec PPS1987 members need to be able to distinguish between lower tier and higher tier ill health for deferred to retirement. The parameters used in the Deferred to Retirement calculation don’t pass in the new Lower Tier and Higher Tier parameters. Dev change then code change needed in client calculations to use the changed parameters correctly,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@689f44bd,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sfz:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,29/Jan/26 3:21 PM;640f34fc1273131f2adfede9;Ill Health drop down option is now available in deferred to retirement in Calculate,,,,,,,,,,,,,,,,,,,,,,,,14400,PHX5-294,Police - Deferred to Retirement,To Do,26/Jan/26 11:28 AM
A>R Settlement - Spouses pension where Zero cash is taken from CARE,PHX5-856,22872,Story,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,,,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,23/Jan/26 3:41 PM,02/Feb/26 2:25 PM,,,,,,,,,,,,,,,0,MyPension,,,,"Member ID 482244.  On settlement despite the member choosing a zero cash option for CARE the spouses pension being shown on the outputs and writing back to the record is 50% of the Post comm pension if the member had taken PCLS.

!image-20260123-154322.png|width=440,alt=""image-20260123-154322.png""!

!image-20260123-154408.png|width=440,alt=""image-20260123-154408.png""!

Unsure if this is a calc issue.  It might be a dev issue",,Andrew Wilson,Tracy Collins,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-342,,,,,,,,,23/Jan/26 3:44 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260123-154322.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16374,23/Jan/26 3:44 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260123-154408.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16373,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@47992bf5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00003jr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-26 07:32:18.75,,,"26/Jan/26 7:32 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Test case added.



In {{SpousesPensionFactory}}, we always allocate {{CARESpousesPensionStrategy}} to CARE elements. This strategy is designed to always calculate PCLS.

The code needs to be cleverer. Some potential fixes:

# Update the factory to know when to allocate a different CARE strategy - hard to do as would then require matching at a later point as to which to use
# Update spouses code entirely - it is always based on pre elements, should this also be aware of residual?
# Update {{CARESpousesPensionStrategy}} to also be aware of the lump sum option?

Need to think through which of the above is best going forward.","26/Jan/26 9:24 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] 

CORRECT long term solution:

We should not just be passing around ElementValue, instead passing around an object that is aware of both pre and post com pen, and then {{CARESpousesPensionStrategy}} can just make use of the pre existing post com pen.



Essentially, relying on spouses code to redo any post com calculation is always going to cause problems, as it creates an element of matching in the code.

So on the assumption we do not have the time to do the full CORRECT solution, we should move towards it. And the only way to do that is to ensure that {{GetSpousesPensionElements}} also takes in post com pension.

This would involve {{CalculateSpousesElements}} being aware of two sets of elements - pre and post and being able to match them on key.",,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,To Do,23/Jan/26 3:41 PM
Add retirement factor tables for PSO Debits to Calculate Police & Fire.,PHX5-855,22799,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,23/Jan/26 9:00 AM,23/Jan/26 3:14 PM,,23/Jan/26 3:14 PM,,,,,,,,,,,,,0,,,,,Load Police and Fire retirement factor tables for pension debits to Calculate.,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@65724c56,,,,,,,,,,,,,,,,,,,,Confirm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y1zz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 30,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_20981234_*|*_10252_*:*_1_*:*_1839_*|*_10354_*:*_1_*:*_6198_*|*_10056_*:*_1_*:*_48728,,23/Jan/26 2:51 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Police and Fire PSO debit factor tables loaded to UAT client ID’s 184 and 185. ,,,,,,,,,,,,,,,,,,,,,,,,22789,PHX5-850,PSO,Done,23/Jan/26 3:14 PM
Create global reusable retirement factor application strategies for use with divorce debits.,PHX5-854,22797,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,23/Jan/26 6:50 AM,05/Feb/26 12:02 PM,,05/Feb/26 12:02 PM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@cea568e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snq:zy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 31,PHX5 Sprint 32,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-02-03 14:46:42.113,10250_*:*_1_*:*_0_*|*_10252_*:*_1_*:*_275363911_*|*_10354_*:*_1_*:*_3801_*|*_10056_*:*_1_*:*_18915709,,03/Feb/26 2:46 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;{{AgeAttainedElementFactorStrategy}} and {{DivorceNoFactorStrategy}} and {{DivorceSingleFactorTableStrategy}} need to be tested in RetirementFactorBuilder. Not phase 5 specific.,,,,,,,,,,,,,,,,,,,,,,,,22789,PHX5-850,PSO,Done,05/Feb/26 12:02 PM
Set up divorce factor table strategies,PHX5-853,22795,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,23/Jan/26 6:50 AM,05/Feb/26 1:27 PM,,05/Feb/26 12:01 PM,Client 184 Police A to R Sprint 31,Client 184 Police D to R Sprint 31,Client 185 Fire A to R Sprint 31,Client 185 Fire D to R Sprint 31,,,,,,,,,0,,,,,,,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7c38d9d7,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001d,,,"{{GetPublicSectorDivorceFactorTableFinders}}to point to strategies and underlying variety of table strategies for Scheme and Category set up. We have discussed streamlining some repeats as a future potential refactor, but tested to be working as is.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 31,PHX5 Sprint 32,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-02-02 09:23:51.857,10251_*:*_2_*:*_63341507_*|*_10250_*:*_2_*:*_205365669_*|*_10252_*:*_1_*:*_604956566_*|*_10354_*:*_1_*:*_2407_*|*_10056_*:*_1_*:*_268200773,,02/Feb/26 9:23 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Set up within Public Sector Divorce to follow factor date strategies and to feed into a custom Calculate() for public sector. Three story points in light of testing required.,"04/Feb/26 4:38 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Have added a test function to the top of the code and have no issues with running it so far. We have discussed separating out the remainder of testing to cover all scenarios. Code from row 827 of Public Sector Divorce, starting: {{GetPublicSectorDivorceFactorTableFinders}}",,,,,,,,,,,,,,,,,,,,,,,22789,PHX5-850,PSO,Done,05/Feb/26 12:01 PM
Set up divorce factor date strategies,PHX5-852,22793,Story,In Progress,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,23/Jan/26 6:50 AM,06/Feb/26 6:57 AM,,,Client 184 Police A to R Sprint 32,Client 184 Police D to R Sprint 32,Client 184 Police Partial Ret Sprint 32,Client 185 Fire A to R Sprint 32,Client 185 Fire D to R Sprint 32,Client 185 Fire Partial Ret Sprint 32,,,,,,,0,,,,,To calculate deferred age and then factor date for use as “application date” for RTFs on Divorce. To be done in Public Sector Divorce,,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3bfb03fd,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi000000019,,,Public Sector Divorce calculates a “DeferredAgeDate” (such that “immediate” as a rule can be used) and then fed into the factory/ strategy pattern for FactorDate which is set to equal DeferredAgeDate.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 31,PHX5 Sprint 32,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-01-26 10:22:00.856,,,"26/Jan/26 10:22 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Example strategy added.

Just to note, we discussed that this should calculate deferred age and then factor date in one.

Since it requires an “immidiate” date for some members, it did not seem ideal to provide a deferred age, reliant on “AgeAtDate(DivorceOrderDate), which would then have to be converted back to a date format to use the original “DivorceOrderDate” as the factor date. There was room for rounding errors based on years and months which may then convert back to an inaccurate date, due to an unnecessary extra step.

As such, I went directly to factor date as follows:

{noformat}    public class PublicSector1987DBDivorceFactorDateStrategy : BaseFactorDateStrategy, IFactorDateStrategy
    {
        public PublicSector1987DBDivorceFactorDateStrategy(IMemberInfo memberInfo, McCloudOption mcCloudOption, Context context = null) : base(memberInfo, mcCloudOption, context)
        {

        }

        public LocalDate GetFactorDate(IFactorElementValue elementValue)
        {
            PSOElementValue psoElement = elementValue as PSOElementValue;

            Period memberAgeAtOrderDate = MemberInfo.AgeAtDate(psoElement.DivorceOrderDate);
            int ageInYears = memberAgeAtOrderDate.Years;

            decimal serviceToOrderDate = psoElement.Service;

            LocalDate factorDate = (ageInYears, serviceToOrderDate) switch
            {
                // Age < 50
                (< 50, < 25) => MemberInfo.DateOfBirth.PlusYears(60).PlusDays(-1),
                (< 50, >= 30) => psoElement.DivorceOrderDate.PlusDays(-1), // immediate. 
                    // Note: Code goes straight to factorDate because of this. If we did int Deferred Age and then converted back to Divorce Order Date, there is room for conversion error of exact age
                (< 50, >= 25) => MemberInfo.DateOfBirth.PlusYears(50).PlusDays(-1),
                
                // Age < 55
                (< 55, < 25) => MemberInfo.DateOfBirth.PlusYears(60).PlusDays(-1),
                (< 55, >= 25) => psoElement.DivorceOrderDate.PlusDays(-1), // immediate

                // Age >= 55
                (>= 55, _) => psoElement.DivorceOrderDate.PlusDays(-1) // immediate
            };

            return factorDate;
        }
    }{noformat}

[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] I am never sure if Calculate allows for coding shortcuts such as “=>” and also the use of a switch looking for “first possible” in order to remove messy if statements (i.e. it would pick <50, >=30 if true and not then go on to use <50, >=25 which is also true, as it goes with first applicable). Could you please review it for usability in case I am making a mistake with this approach?","26/Jan/26 10:29 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] Either way, service will not be passed in, you will need to calculate it within that function",02/Feb/26 9:22 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Updated within Public Sector Divorce to calculate a “DeferredAgeDate” (such that “immediate” as a rule can be used) and then fed into the factory/ strategy pattern for FactorDate which is set to equal DeferredAgeDate. Three story points in light of testing required.,"03/Feb/26 2:29 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Tests on deferred age dates, the deferred age strategies and deferred age router for 2015 care, all tested here: [https://calculate.uat.xpsplc.com/global-modules/61|https://calculate.uat.xpsplc.com/global-modules/61]","06/Feb/26 6:57 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Minor point, but when you call Tag (I do like the way you have simplified the logging here!), do we need to include an identifier for auroraid, mccloud option and the PSO element key to truly identify what is happening? Otherwise all looks good, and some nice segments of code that really simplify logic that we should try and use elsewhere!",,,,,,,,,,,,,,,,,,,,22789,PHX5-850,PSO,In Progress,26/Jan/26 9:20 AM
Create new reusable structure for Divorce and Factor code,PHX5-851,22791,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,23/Jan/26 6:49 AM,23/Jan/26 8:52 AM,,23/Jan/26 8:46 AM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Steven Wright,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5a3daa10,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y1zy,,,"A new set of global divorce code has been created for use by other schemes. There is now a new Public Sector Divorce module for us to code the public sector specific information such as factor dates and tables.

There is also a new global retirement factor structure that we are using for divorce, but can also be used for scheme pay.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 30,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-01-23 08:52:09.678,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_226946_*|*_10252_*:*_1_*:*_1765_*|*_10354_*:*_1_*:*_2644_*|*_10056_*:*_1_*:*_90184,,"23/Jan/26 8:52 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Peer reviewed whilst Andrew coded in a paired programming session.

Initial structure in place and further refined tickets added to complete the remainder of set up work required before it can be used in Public Sector and other schemes. ",,,,,,,,,,,,,,,,,,,,,,,,22789,PHX5-850,PSO,Done,23/Jan/26 8:46 AM
PSO,PHX5-850,22789,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,23/Jan/26 6:46 AM,23/Jan/26 6:47 AM,,,,,,,,,,,,,,,0,,,,,To cover all the work required to get PSO working,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@297a817b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-6,,,,,,,,,,,,,,green,,,,,,,,,,,,,0|i00sen:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,23/Jan/26 6:46 AM
"Fire D>R - Error message ""Object reference not set to an instance of an object""",PHX5-849,22755,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Russell Armstrong,640f34fc1273131f2adfede9,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,22/Jan/26 3:06 PM,26/Jan/26 2:20 PM,,26/Jan/26 10:02 AM,Client 185 Fire D to R Version 7,,,,,,,,,,,,0,,,,,"Member IDs 78363 and 101225.  Error message received

!image-20260122-150738.png|width=440,alt=""image-20260122-150738.png""!",,Andrew Wilson,Russell Armstrong,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-486,,,,,,,,,22/Jan/26 3:07 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260122-150738.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16195,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4345c988,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y1zzi,,,Fire Deferred to Retirement calculations no longer error when there is only a DB member and no linked CARE member,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 30,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-23 08:23:47.383,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2207006_*|*_10252_*:*_1_*:*_261814837_*|*_10354_*:*_1_*:*_2555_*|*_10056_*:*_1_*:*_62259450,,"23/Jan/26 8:23 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;78363 is a single record but it is FPS 1992.   

We correctly identify this as the salary link record, but our code at the D to R client level assumes that {{deferredNormalMemberInfo}} will always be populated.

We will need to update our client level code to correctly work when we only have a salary link record.",26/Jan/26 9:06 AM;640f34fc1273131f2adfede9;Fire D>R code does not line up with Police D>R code where this has already been resolved. Copy across Police code,26/Jan/26 9:42 AM;640f34fc1273131f2adfede9;Changed date of retirement on test case - calculation was erroring as date of retirement was a few days before the 60th birthday. Test now runs through,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,26/Jan/26 10:02 AM
A>D calculation output change,PHX5-848,22718,Story,In UAT,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,22/Jan/26 1:59 PM,05/Feb/26 1:22 PM,,,Client 184 Police A to D Sprint 32,Client 185 Fire A to D Sprint 32,,,,,,,,,,,0,,,,,"Message from Phil “The Active to Deferred calculation output needs to be changed to include a ""scheme type"" member prefix of Pre 22 / Post 22.  It's a change that's been made for the retirement calcs, and is required to do member letters”",,Andrew Wilson,Russell Armstrong,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5617aa00,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi0000000007v,,,Values added to say which member is Pre22 and which is Post22 to help with letter variables,,,Client 185 Fire A to D Version 10,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 31,PHX5 Sprint 32,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-23 07:25:39.228,,,"23/Jan/26 7:25 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Unable to make the change as there is no property on the underlying object for this:

{{public Dictionary<string, string> MemberToSchemeType { get; set; } = new();}}",23/Jan/26 7:28 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Raised with Phil in main calculate requests chat the need for this update on {{ActiveToDeferredResult}},"23/Jan/26 7:29 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Once that change is made we just need to add the following to Active To Deferred Client code:

{noformat}        if (activeNormalMemberInfo != null)
        {
            result.MemberToSchemeType.Add(activeNormalMemberInfo.AuroraId, ""Post22"");
        }
        if (activeSalaryLinkedMemberInfo != null)
        {
            result.MemberToSchemeType.Add(activeSalaryLinkedMemberInfo.AuroraId, ""Pre22"");
        } {noformat}

just prior to returning result (as per active to retired code).","27/Jan/26 3:44 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;because dev has been set up wrong, we also need to add the line:

{{result.MemberToSchemeType = new  Dictionary<string, string>();}}","29/Jan/26 1:52 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Updated both Police and Fire A to D calc with the required change. Checked existing test cases, and the values are being populated.","29/Jan/26 2:12 PM;640f34fc1273131f2adfede9;Reviewed, agree changes",,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,In Progress,29/Jan/26 1:49 PM
Police A>R Writeback of Cash,PHX5-847,22650,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,22/Jan/26 9:19 AM,10/Feb/26 8:47 AM,,10/Feb/26 8:47 AM,Client 184 Police A to R Sprint 32,Client 184 Police D to R Sprint 32,Client 184 Police Partial Ret Sprint 32,Client 185 Fire A to R Sprint 32,Client 185 Fire D to R Sprint 32,Client 185 Fire Partial Ret Sprint 32,,,,,,,0,MyPension,,,,"Member ID 100869.  The cash amount being written back is the Cash after the deduction of the GAD amount.  It should be the value before that amount is deducted.  In this case the cash written back should be £138,289.11 rather than £136,457.55",,Andrew Wilson,Annabelle Stephenson,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,PHX5-823,,,,PHX5A-475,PHX5A-469,,,,,PHX5-767,PHX5-881,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2b902869,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi0000000007o,,,"* Final cash outputs in pension results will be before deduction for GAD.
* Post-GAD cash amounts will be stored in OtherValues (Key = DB_PostGADLS).
* Post-GAD cash amounts will also reflect deductions for tax.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 31,PHX5 Sprint 32,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-23 10:24:33.789,11070_*:*_2_*:*_341860331_*|*_10251_*:*_2_*:*_74635929_*|*_10250_*:*_2_*:*_80099072_*|*_10252_*:*_1_*:*_542861695_*|*_10354_*:*_1_*:*_2448_*|*_10056_*:*_1_*:*_90293351_*|*_11103_*:*_2_*:*_2346129,,"23/Jan/26 10:24 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Our code in {{ApplyGADContributions}} is deducting GAD from the Cash.

We would have to completely change this function. I think we should just be storing the post GAD value as an other value, rather than updating the cash of the pension option.","26/Jan/26 4:17 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;FYI see linked ticket 823 as covers the same area, so this may be already dealt with.","29/Jan/26 11:32 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;{noformat}pensionOption.Value.OtherValues.Add(new ElementValue { Key = ""DB_PostGADLS"", Value = postGADCash });	{noformat}

I added this line to {{ApplyGADContributions}} in PublicSectorFunctions, and I removed the lines that were there, adding postGADCash to TotalCash and CashValues.

See linked ticket 767 for further coding changes in this function.","29/Jan/26 6:16 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Following code change in comment below, TotalCash value and the relevant element in CashValues are not changed and will show the pre-GAD amount.  Post-GAD amount is to be recorded in OtherValues.

Our existing PSC tests were knocked out by this change, so I have updated various expected results in the “GAD deductions” tests to reflect this.  They are now all passing, testing on both the CashValues and OtherValues.

Same for Police A>R, many tests were knocked out where they were expecting the post GAD value in TotalCash.  All checked, verified and updated.  I need to do the same for all retirement calcs.",03/Feb/26 1:40 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] Query from April raised on ticket [https://xps-jira.atlassian.net/browse/PHX5A-469|https://xps-jira.atlassian.net/browse/PHX5A-469|smart-link].  Please can you review.  Thanks,"03/Feb/26 4:17 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;As per ticket 469 that Tracy has linked below, the postGAD cash is now not reflecting the tax deduction as well. For clarity, we are expecting the following in final pension option results:

* TotalCash = cash before deduction for tax or GAD
* CashElements = as above, cash before deduction for tax or GAD
* OtherValues postTaxLS = cash after deduction for tax only
* OtherValues postGADLS = cash after deduction for both tax and GAD

Currently the GAD code picks up the cash from CashElements to apply the GAD to, but it should use the postTaxLS value instead.  Code change to {{ApplyGADContributions}} in PS Functions as follows:

{noformat}decimal preGADCash = pensionOption.Value.OtherValues.FirstOrDefault(x => x.Key.Equals(""DB_PostTaxLS"")).Value;{noformat}

I’ve brought this through to police A>R and it has not knocked anything out.  I need to set up a retrospective test though as my VPN issues meant I couldn’t do this earlier.","04/Feb/26 7:21 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] We should add a refactor ticket and/or add to existing.

Many tickets are now requiring us to be aware of more than just a single value. So we really need an object to be passed around that knows pre/post, spouses, cash, post tax etc, so it is all in one place, rather than having to look at other values like this.",10/Feb/26 8:47 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Admin tested and confirmed OK to close,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,10/Feb/26 8:47 AM
Two CAREPreCom pensions in D>R and only one being output,PHX5-846,22617,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,21/Jan/26 6:30 PM,05/Feb/26 1:27 PM,,04/Feb/26 11:00 AM,Client 184 Police A to R Sprint 31,Client 184 Police D to R Sprint 31,Client 185 Fire A to R Sprint 31,Client 185 Fire D to R Sprint 31,,,,,,,,,0,MyPension,,,,"Test case in Police D>R: UAT JIRA PHX5-842 - Scheme Pays not being deducted

There seems to be an issue with CAREPreComPen whereby initially there are two deferred element values and then the larger one disappears, leaving the remaining balance after scheme pays deduction at about £4 only.

Deferred elements:

!image-20260121-182817 (8ccb964c-5b20-403a-ba68-e8eb83e83878).png|width=433,alt=""image-20260121-182817.png""!

PreCom elements before combination: (presumably taking first value)

!image-20260121-182858 (a3512b2c-3532-462d-8cbc-3573bd722e21).png|width=433,alt=""image-20260121-182858.png""!

PreCom elements after RTFs/ ERFs:

!image-20260121-192137.png|width=433,alt=""image-20260121-192137.png""!

PreCom elements after combination:

!image-20260121-192159.png|width=433,alt=""image-20260121-192159.png""!",,Annabelle Stephenson,Naomi Robinson,Tracy Collins,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:ffa445ab-b813-4226-9ed2-507a454e9272,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,PHX5-859,,,,,,,,,,,,,21/Jan/26 7:22 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260121-182817 (8ccb964c-5b20-403a-ba68-e8eb83e83878).png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16059,21/Jan/26 7:22 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260121-182858 (a3512b2c-3532-462d-8cbc-3573bd722e21).png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16056,21/Jan/26 7:22 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260121-192137.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16057,21/Jan/26 7:22 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260121-192159.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16058,21/Jan/26 7:35 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260121-193534.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16060,29/Jan/26 4:22 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260129-162143.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16712,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4037258b,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi0000000006,,,"Made sure Accrued[CARE]PensionValues add together when calcualting PreComPen, where there are multiple, e.g. in the instance of an additional partial ret figure, rather than only selecting the first. Previously the figures showed in DeferredElementValues but then only the first or default was used for PreCom calcs.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 31,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-01-22 10:21:18.262,11070_*:*_1_*:*_0_*|*_10251_*:*_1_*:*_64844387_*|*_10250_*:*_1_*:*_88198756_*|*_10252_*:*_1_*:*_538441498_*|*_10354_*:*_1_*:*_1176331_*|*_10056_*:*_1_*:*_55879347_*|*_11103_*:*_1_*:*_13193285,,"21/Jan/26 7:35 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Guessing its these pre22 and post 22 elements? Per Public Sector Revaluation.

!image-20260121-193534.png|width=461,alt=""image-20260121-193534.png""!","22/Jan/26 10:21 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Simple fix for this in Public Sector Functions.  {{GetValue}} function currently returns the first or default value of the element key it is looking for.  With all the various key names we have set up, I am sure that summing the element values up rather than taking first/default won’t knock anything out.

Code change suggestion:

{noformat}return elementValues.Where(x => x.Key == key).Select(x => x.Value).Sum();{noformat}

Replace the current return line in the if statement with the above. Currently this is around line 73 in PSF module.

Expected interim value added to the D>R test that highlighted this “UAT JIRA PHX5-842 - Scheme Pays not being deducted”.  Our many other tests at module and client level should highlight if this change breaks anything.",27/Jan/26 4:58 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I’ve brought this to the top of the backlog as I’ve come across two other backlog tickets that are impacted by this same issue.  Please also close linked ticket 859 when this one is done.,28/Jan/26 12:40 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] I have duplicated this test case so the one with an expected scheme pays deduction passes (for tickets 842 and 862) and then the red one is for this issue on the CARE Pre Com it is actually being deducted from.,"28/Jan/26 3:56 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Have fixed this but there are a few test cases now knocked out by it, which may well have been wrong originally. I have already published PSC 208 and then have seen atleast 2 unexpected cases failing in D>R alongside the ones we expected to update.

Fix shown by test cases UAT JIRA PHX5 846 - Two deferred element values for care, one lost at precom phase and UAT 859 in Police D>R. See linked ticket [https://xps-jira.atlassian.net/browse/PHX5-859|https://xps-jira.atlassian.net/browse/PHX5-859|smart-link] for full detail.","29/Jan/26 4:22 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;As discussed 29/01, test case: Police, D to R Test 2 has been re-baselined as follows:

The old expected CARE value was £990.76.

The new result is £990.76 + £65.64 = £1,056.40.

 After retirement factors it is £678.21.

!image-20260129-162143.png|width=401,alt=""image-20260129-162143.png""!



This is as I expected and all the other results on the test case have stayed the same. ","04/Feb/26 11:00 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Linked ticket and it’s associated admin tickets have been closed, therefore this one can also be closed.",,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,04/Feb/26 11:00 AM
A>R scheme pays debit not being applied,PHX5-845,22616,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,21/Jan/26 5:56 PM,23/Jan/26 7:18 AM,,23/Jan/26 7:18 AM,Client 184 Police A to R Version 12,Client 185 Fire A to R Version 9,,,,,,,,,,,0,,,,,"Separated this out from ticket 842 as a separate issue.

Scheme pays ceased being deducted from the A>R following refactor of accrued pension values - precom elements (i.e. combine element code).

{{ActivePreComPenCalculator}} and {{DeferredPreComPenCalculator}} are returning pensionElementValues rather than PreComElementValues.",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,PHX5A-482,,,,,,,,,,,,,,,,,PHX5A-483,,,21/Jan/26 6:03 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260121-180230.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16045,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@27b4d777,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y1zi,,,{{ActivePreComPenCalculator}} and {{DeferredPreComPenCalculator}}updated to return PreComElementValues which correctly combines to include the scheme pays deduction. Was incorrectly set to return the values before combination.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 30,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1981_*|*_10252_*:*_1_*:*_2205_*|*_10354_*:*_1_*:*_530178_*|*_10056_*:*_1_*:*_7075,,"21/Jan/26 6:03 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;{{ActivePreComPenCalculator}} and {{DeferredPreComPenCalculator}}updated in PSC:

!image-20260121-180230.png|width=461,alt=""image-20260121-180230.png""!

Test case in Police A>R shows the following: UAT JIRA PHX5-845 - Scheme Pays not being deducted",,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,23/Jan/26 7:18 AM
Police D>R - Error message received on running Ill health under age 55,PHX5-844,22582,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Russell Armstrong,640f34fc1273131f2adfede9,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,21/Jan/26 4:36 PM,26/Jan/26 2:02 PM,,26/Jan/26 11:44 AM,Client 184 Police D to R Version 7,,,,,,,,,,,,0,,,,,"Member ID 87123. Error message received as below

!image-20260121-163645.png|width=440,alt=""image-20260121-163645.png""!",,Andrew Wilson,Russell Armstrong,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-334,,,,,,,,,21/Jan/26 4:37 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260121-163645.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16010,23/Jan/26 11:52 AM;5796a187-7241-414b-bea0-2d22260a9bed;image-20260123-115110.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16271,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@35c6097,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y1zr,,,Members retiring through ill-health over age 55 will no longer try to use the additional commutation factor so will not error when the calculation tries to find factors in tables that only go as high as 54 years and 11 months,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 30,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-23 11:37:00.063,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_135203_*|*_10252_*:*_1_*:*_1977_*|*_10354_*:*_3_*:*_91936552_*|*_10056_*:*_1_*:*_64227343_*|*_10356_*:*_1_*:*_245338413_*|*_10355_*:*_1_*:*_12278485,,"23/Jan/26 11:37 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The member is being seen as age 57 at the point of getting the commutation factor, but is using Table {{Table 2 506}}   which does not go above age 55","23/Jan/26 11:52 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;From the spec:

!image-20260123-115110.png|width=883,alt=""image-20260123-115110.png""!

it says that for lower tier, you must be under age 55.",23/Jan/26 11:59 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Have fired a query to admin on the linked ticket,23/Jan/26 3:25 PM;640f34fc1273131f2adfede9;Dev required as inputs in Aurora don’t line up with those that can be used in the calculation in Calculate.,"23/Jan/26 3:40 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:640f34fc1273131f2adfede9] Think we need the dev fix, but I think there is still an issue here for us? Because if this member is lower tier, and we are using the existing tick box for that, then our code should still work?","23/Jan/26 4:01 PM;640f34fc1273131f2adfede9;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] No as it’s lower tier over age 55. If it’s lower tier ill-health it correctly (according to the specification) goes through the lump sum category C which requires the additional commutation factors. This uses factor tables where the maximum age is 55 as anyone over this age isn’t supposed to use the additional commutation factor.

I’ll ask for clarification on the admin ticket about if lower tier ill-health is available over age 55 and if so what category of calculation this should fall under for lump sums as they’ve said higher or lower tier ill-health only impacts on PI eligibility on that ticket","26/Jan/26 11:26 AM;640f34fc1273131f2adfede9;From response on linked analysis ticket if lower tier ill health and over age 55 needs to use category A lump sum -this is the same as  category C as used for lower tier ill health under 55 with the exception of the additional commutation factor is not needed.

In PublicSectorFunctions changed {{NeedAdditionalCommutationFactor}} so one of the conditions that would return true went from {{illHealth == IllHealthType.LowerTier}} to {{illHealth == IllHealthType.LowerTier && ageAtRetirement.Years < 55}}.

Added Need Additional Commutation Factor 10 test to check the scenario where it is IllHealthType.LowerTier and over age 55 returns false.

Change brought into Police D to R and the test for this ticket no longer errors",26/Jan/26 11:32 AM;640f34fc1273131f2adfede9;[https://xps-jira.atlassian.net/browse/PHX5-857|https://xps-jira.atlassian.net/browse/PHX5-857|smart-link] raised for Parameters issue,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,26/Jan/26 11:44 AM
Police A>R - Ill Health enhancement period,PHX5-843,22480,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Russell Armstrong,640f34fc1273131f2adfede9,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,21/Jan/26 1:21 PM,26/Jan/26 1:17 PM,,23/Jan/26 1:53 PM,Client 184 Police A to R Version 15,,,,,,,,,,,,0,,,,,Member ID 387226 Calc is using DOL to age 55 and should be using Scheme closure to age 55 in order to calculate the enhancement (max 7 years),,Andrew Wilson,Russell Armstrong,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-251,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1aff7930,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y1y,,,PPS1987 prospective service for ill-health cases now calculated from the date the DB service ended instead of the date of calculation,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 30,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-22 13:20:06.605,10251_*:*_2_*:*_62083529_*|*_10250_*:*_2_*:*_30565390_*|*_10252_*:*_1_*:*_2589_*|*_10354_*:*_1_*:*_878675_*|*_10056_*:*_1_*:*_80537517,,"22/Jan/26 1:20 PM;640f34fc1273131f2adfede9;Amended {{PublicSector1987IllHealthStrategy}} to add 

{noformat}LocalDate prospectiveServiceStartDate = McCloudOption == McCloudOption.Legacy ?
													DateConstants.LegacyRemedyCareStartDate :
													DateConstants.CareRemedyCareStartDate;{noformat}

replaced CalculationDate.PlusDays(1) with prospectiveServiceStartDate in prospectiveServiceTranche and prospectiveServiceCalculator

Tests in PSC (Ill Health PPS1987 Test 4 to 7) still pass. In Police Active to Retired PPS1987 ill health tests (16 to 18) still pass. UAT 843 test gives 7 years for the enhanced service as expected","23/Jan/26 6:35 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Should this be using the already set up {{CAREStartDate}} which takes into consideration the care start dates and the calculation date?

If so, would need to enter this value to the strategy via the constructor within the factory.",23/Jan/26 1:42 PM;640f34fc1273131f2adfede9;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Change made to use CAREStartDate,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,23/Jan/26 1:53 PM
Police D-R: Scheme Pays Debit not being deducted,PHX5-842,22479,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,21/Jan/26 12:47 PM,26/Jan/26 2:20 PM,,23/Jan/26 7:17 AM,Client 184 Police D to R Version 7,Client 185 Fire D to R Version 7,,,,,,,,,,,0,,,,,"D>R calculation was not set to include scheme pays deduction, as it does not use {{CalculateAccruedPensionValues}} but instead goes via “Public Sector Revaluation” by calling {{RevalueElements();}}.

Scheme pays needs to be added as an element to the list of deferred elements to then go through the retirement factor code and combine elements code.",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,PHX5-830,,,,,PHX5A-478,,,,,,,,,21/Jan/26 6:03 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260121-175418.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16046,21/Jan/26 6:03 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260121-175457.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16047,21/Jan/26 6:32 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260121-182817.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16050,21/Jan/26 6:32 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260121-182858.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16049,21/Jan/26 7:22 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260121-192137.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16054,21/Jan/26 7:22 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260121-192159.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16055,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@18cdfd10,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y1i,,,{{RevalueElements()}}which calculates deferred elements for the D>R now includes scheme pays calc to add in as an element after PI factor. From there it will have an ERF applied and then combine with CAREPreCom.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 30,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-21 12:47:06.361,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_12836756_*|*_10252_*:*_1_*:*_1644_*|*_10354_*:*_1_*:*_2268_*|*_10056_*:*_1_*:*_8209407,,21/Jan/26 12:47 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;I think this was expected after Naomi's amendments to the A>D.  Should be fixed alongside [https://xps-jira.atlassian.net/browse/PHX5-768|https://xps-jira.atlassian.net/browse/PHX5-768|smart-link],21/Jan/26 12:47 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272]  Are you able to confirm this is now fixed?,21/Jan/26 12:47 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Member ID 464033.  Admin have confirmed that the SP is still not pulling through for this member.  This is a CARE only member with no linked records.  Expected SP deduction 20.26 x 1 x (1-0.437) = 11.406,"21/Jan/26 12:47 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Linked ticket 482 relates to an A>R where we are inputting the SP deduction into the process.  The calc picks it up applies no reval (as no date is given in the inputs so assumes no reval is required).  Calc says it is using factor for 1 yr 11 months, but is actually using factor for 1 year.  Should be age attained for factor rather than years early.  Calc expecting 0.913 using 0.944.  SP is not being deducted from CARE benefit.","21/Jan/26 12:47 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;This seems like two or three separate issues.

The first is that some retirement factor table code needs updating to use age attained basis rather than years and months. I can work on that and this will also ultimately be resolved in the new builder we are going to create to also cover PSO. This will be an update the PSC and the SchemePays Strategy.

With regards to Scheme Pays not being deducted at all from the D>R, this mean the D>R needs to point to a certain strategy in the scheme pays module for applying PI factors which it potentially isn’t - someone with D>R knowledge needs to take a look into this/ a separate ticket will be needed and I can pick up separately.

Finally, we got verbal confirmation that scheme pays are always deducted as a total from the DB benefit and not split into reform care and db, which aligns with the spec. There should, however, be a deduction of care scheme pays from the CARE2015 record. [~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] please can you confirm which is the issue? Is it that the CARE2015 member does not have scheme pays being deducted (coders will need to look into this) or that they are saying they thing the PPS1987 schemepays should be split between DB and ReformCARE (spec change). ","21/Jan/26 3:15 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;This ticket is for the balances not being deducted from the D>R.

* Ticket 842 covers the incorrect RTF being applied
* Ticket 845 covers A>R scheme pays not being deducted

D>R calculation was not set to include scheme pays deduction, as it does not use {{CalculateAccruedPensionValues}} but instead goes via “Public Sector Revaluation” by calling {{RevalueElements();}}.

I see there is a comment in the code about this being wrong and needing rework:

!image-20260121-175418.png|width=433,alt=""image-20260121-175418.png""!

In order to contain the “wrong” code, I added the schemepays addition into RevalueElements() as follows: 

!image-20260121-175457.png|width=433,alt=""image-20260121-175457.png""!

I presume this could be an issue for PSO and anything else not included in the Public Sector Revaluation module, but given the code has been flagged as “very very wrong” I figured further tickets will be needed for this.



Test case in Police 184 set up: UAT JIRA PHX5-842 - Scheme Pays not being deducted

I can now see the SchemePays debit is being deducted, but there seems to be a wider issue with CAREPreComPen whereby initially there are two values and then the larger one dissapears, leaving the remaining balance afer scheme pays deduction at about £4 only.

Deferred elements:

!image-20260121-182817.png|width=433,alt=""image-20260121-182817.png""!

PreCom elements before combination: (presumably taking first value)

!image-20260121-182858.png|width=433,alt=""image-20260121-182858.png""!

PreCom elements after RTFs/ ERFs:

!image-20260121-192137.png|width=433,alt=""image-20260121-192137.png""!

PreCom elements after combination:

!image-20260121-192159.png|width=433,alt=""image-20260121-192159.png""!

Added to ticket 846 in backlog.

I have not set expected values for this ticket, albeit I think it shows the scheme pays deduction issue being corrected, as I need someone with D>R knowledge to take a look at what is happening with the CAREPreComPen.","21/Jan/26 6:37 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Update: PublicSectorDeferredRetirementCalculatorSetUp was set to calcType ActiveToDeferred not DeferredToRetired.

These fixes brings the scheme pays element into the D>R but and makes sure an RTF is applied. There is still a ticket regarding RTFs being inaccurate, which is is ticket 830.",22/Jan/26 6:56 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Update 22/01: 830 now also resolved.,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,23/Jan/26 7:17 AM
PSO - temporarily remove deductions until Retirement Timing Factors coded.,PHX5-841,22409,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,21/Jan/26 10:23 AM,21/Jan/26 12:36 PM,,21/Jan/26 11:25 AM,Client 184 Police A to D Version 34,Client 184 Police A to R Version 14,Client 184 Police D to R Version 6,Client 184 Police Partial Ret Version 6,Client 185 Fire A to D Version 7,Client 185 Fire A to R Version 11,Client 185 Fire D to R Version 6,Client 185 Fire Partial Ret Version 4,,,,,0,,,,,"[^RE PSO.msg]

See attached email. Retirement Timing Factors (RTF) for PSO debit deductions have not been coded in time for Day1 go live. Admin and Iain Wilson wish for  PSO deductions to be removed entirely until PSO RTF is coded and tested. ",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,21/Jan/26 10:31 AM;bfea69ca-e7d9-488d-b01b-103621fa1516;RE PSO.msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15905,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@11a4998b,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sbb:,,,"Member pension sharing order debit deductions have now been removed from *all* calculations aside from Annual Allowance for day1 go live until PSO retirement timing factors have been coded, tested and signed off. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 29,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_3160021_*|*_10252_*:*_1_*:*_77152_*|*_10354_*:*_1_*:*_2729_*|*_10056_*:*_1_*:*_9908,,"21/Jan/26 11:07 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;In public sector calculation module, commented out {{elementValues.AddRange(DivorceCalculator.Calculate().ToActiveToDeferredElementValues());}}

which will prevent divorce elements from being calculated and created as elements.",,,,,,,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,21/Jan/26 11:25 AM
Retirement Factor Logic for each KeyPreComConstant (or constituent elements if PSO),PHX5-840,22342,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,20/Jan/26 4:56 PM,21/Jan/26 3:20 PM,,,,,,,,,,,,,,,0,,,,,"The following are a list of PreComConstants which could have individual retirement factors (early or late) applied. Some will only have early, some will have both and usually there is also an ill health alternative, if early.

{noformat}KeyPreComConstants.Cash
KeyPreComConstants.DBPreCom
publicSectorMemberInfo.CarePreComPen // ReformCARE or CARE

KeyPreComConstants.DBPSOPreCom // Made up of MCPN, PEN, etc which take their own factors
KeyPreComConstants.CAREPSOPreCom // Could be reform or CARE2015
KeyPreComConstants.CashPSOPreCom

KeyPreComConstants.DBSchemePayPreCom // strategy coded which needs refactor
KeyPreComConstants.KeyPreComConstants.CARESchemePayPreCom // strategy coded which needs refactor
KeyPreComConstants.KeyPreComConstants.CashSchemePayPreCom // logic unclear{noformat}



Current knowledge:

* DB and CarePreCom Pen take an ERF or LRF as per the “Standard” strategy in PSC. Worth reviewing to see if this remains correct.
* {color:#ff5630}PSO factors are calculated per the attached spreadsheet, which has a few gaps and queries. {color}Factors need to be applied to individual divorce elements as they are based on “order date”. 
* Scheme pays logic has a strategy coded for DB and Care Scheme Pays RTFs, which needs refactoring into this new code.
** {color:#ff991f}It is unclear whether SchemePays Cash receives a factor.{color} Not coded/ not found in spec.
** Aside: Specs also contain information on “Scheme Pays Debit McCloud” but on inquiry with Matt/ April, it is unclear where these will come through Aurora. AA was coded on the assumption these would sit in the same Scheme Pays table as “Scheme Pays Debit” and therefore would not need separate code, based on those conversations in Nov 25.

*Current code:*

We have a Retirement Factor builder, which:

* Takes an erfApplicationDate, lrfApplicationDate, or both
* Takes a erf factor table, lrf factor table, or both
* Takes logic as to how factor table is laid out (by Age or in Y and M early/ late)
* Returns a retirement factor

{color:#ff5630}*Work required:*{color}

* Create code which, takes:
** Scheme type (Police/ Fire)
** Whether calc is illHealth or not
** PreComConstant value or constituent element values (PSO)
** CalcDate
** Divorce Order Date 
** _Service - not known at start_
* Determines the following:
** applicationDate (based on calculating a Deferred Age)
** Factor table to use
** Layout of factor table to use
* This information can be passed into the existing Retirement Factor Builder (“RTB”) to return the factor from the table.
* Once retrieved, extra logic is required in the case of PSO, to calculate a final factor. {color:#ff5630}The logic for this needs to be reviewed as it is unclear whether the RTB needs to be run more than once to achieve this aspect. Looks like it is dividing one factor by another.{color}",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,20/Jan/26 5:24 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;Retirement factor logic for PSO.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15838,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4563b966,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ldn:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-21 06:47:56.83,,,"20/Jan/26 5:26 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;*Useful information:*

Pre Com Specs: 

[PPS Pre Commutation Calc Spec Module V2.01.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQCwJh8UQBhhTplWoCpfrr2mATOZKC7-Q3MEMQtFFQG_uv8?wdOrigin=TEAMS-MAGLEV.p2p_ns.rwc&wdExp=TEAMS-TREATMENT&wdhostclicktime=1768820235596&web=1]

[FPS Pre Commutation Calc Spec Module V1.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQCdxxyPFVGpSbi6uwftm-gNARNAO7lmxt8slWX2bmUMdSc?e=36nC6k]

Factor tables:

[Police_EW_Consolidated_Factors_2025-01.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQDC1INpfnfLQIyeSP48ZtmVAZddYiELzYk3b3xMPd0PWJo?e=DPSQMH&xsdata=MDV8MDJ8fDlhMGFkOTI3ZTBlZDRlNjUyNjc0MDhkZTUzODIyZmUxfGVkYjZhNDNkN2NmMTRlODBhMmQ4NTE4NzQxMWM4NmZifDB8MHw2MzkwNDAwMTU3NDczMzEyMzN8VW5rbm93bnxWR1ZoYlhOVFpXTjFjbWwwZVZObGNuWnBZMlY4ZXlKRFFTSTZJbFJsWVcxelgwRlVVRk5sY25acFkyVmZVMUJQVEU5R0lpd2lWaUk2SWpBdU1DNHdNREF3SWl3aVVDSTZJbGRwYmpNeUlpd2lRVTRpT2lKUGRHaGxjaUlzSWxkVUlqb3hNWDA9fDF8TDJOb1lYUnpMekU1T21Ga05qUXhZMkk0TFRGbE5tUXRORFE0WWkwNE1UbG1MV1kzWW1ZME4yTmhaR0V6WlY5bFkyRTFaRFExTXkwellXRmtMVFJpTTJZdE9XTXdZUzA1TlRKaFpUVmpNV0V5TWpWQWRXNXhMbWRpYkM1emNHRmpaWE12YldWemMyRm5aWE12TVRjMk9EUXdORGMzTVRJNU13PT18ODlkZjk5ODllODlkNDM3ZGFjOWYwOGRlNTM4MjJmZTB8MDk0NDIxYmI5OGMzNDA4MGI0MGUyNmMxMzA4Zjc0NDA%3D&sdata=RlFUMVphRU9mcWpacUt1b0MyeUc4OEJSV2c1bkwxTVdzd2ZKVDd2ZlVLMD0%3D&ovuser=edb6a43d-7cf1-4e80-a2d8-5187411c86fb%2CNaomi.Robinson%40xpsplc.com]

[Fire_E_Consolidated_Factors_2025-01.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQBA7YKzNJuARYgpmldINGReAelrkspbSif9_KqhIwrHNdo?e=WRf6yJ&xsdata=MDV8MDJ8fDlhMGFkOTI3ZTBlZDRlNjUyNjc0MDhkZTUzODIyZmUxfGVkYjZhNDNkN2NmMTRlODBhMmQ4NTE4NzQxMWM4NmZifDB8MHw2MzkwNDAwMTU3NDczNTY1NTh8VW5rbm93bnxWR1ZoYlhOVFpXTjFjbWwwZVZObGNuWnBZMlY4ZXlKRFFTSTZJbFJsWVcxelgwRlVVRk5sY25acFkyVmZVMUJQVEU5R0lpd2lWaUk2SWpBdU1DNHdNREF3SWl3aVVDSTZJbGRwYmpNeUlpd2lRVTRpT2lKUGRHaGxjaUlzSWxkVUlqb3hNWDA9fDF8TDJOb1lYUnpMekU1T21Ga05qUXhZMkk0TFRGbE5tUXRORFE0WWkwNE1UbG1MV1kzWW1ZME4yTmhaR0V6WlY5bFkyRTFaRFExTXkwellXRmtMVFJpTTJZdE9XTXdZUzA1TlRKaFpUVmpNV0V5TWpWQWRXNXhMbWRpYkM1emNHRmpaWE12YldWemMyRm5aWE12TVRjMk9EUXdORGMzTVRJNU13PT18ODlkZjk5ODllODlkNDM3ZGFjOWYwOGRlNTM4MjJmZTB8MDk0NDIxYmI5OGMzNDA4MGI0MGUyNmMxMzA4Zjc0NDA%3D&sdata=eC84RXZvK2tMODgxZ1JrOStIUWZDbVFmOXdHOERCekJLQmJLREZQV1RMbz0%3D&ovuser=edb6a43d-7cf1-4e80-a2d8-5187411c86fb%2CNaomi.Robinson%40xpsplc.com]","21/Jan/26 6:47 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;ActiveToDeferredElementValue is already based on ElementValue with extra fields. We could do the same for PSOElement.
This PSOElementValue would have whatever extra information we need on it - at least the PSO order date. This would allow the PSO code to go through distinct sections, rather than try to do everything at once.","21/Jan/26 6:51 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Service is service at date of order, so will be different for every element. ","21/Jan/26 7:02 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;PSO code would need to get a list of PSOElements and then:

# Calculate service for each
# Calculate deferred age for each
# Calculate application date
# Factor table
# Layout of factor table



Based on this, we could have the following extra fields on PSOElement:

{noformat}public class PSOElementValue : ElementValue
{
    public LocalDate DivorceOrderDate { get; set; }

    public decimal Service { get; set; }

    public int DeferredAge { get; set; }

    public LocalDate ApplicationDate { get; set; }

	public string FactorTable { get; set; }

	public string FactorTableType { get; set; }

    public string PreComKey { get; set; }

    public PSOElementValue()
    {
    }

    public PSOElementValue(string key, decimal elementValue, LocalDate divorceOrderDate)
        : base(key, elementValue)
    {
        DivorceOrderDate = divorceOrderDate;
    }
}
{noformat}","21/Jan/26 7:21 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;We could even make the ER portion of this reusable and make it:

{noformat}public class PSOElementValue : FactorElementValue
{
    public LocalDate DivorceOrderDate { get; set; }

    public decimal Service { get; set; }

    public int DeferredAge { get; set; }

    public PSOElementValue()
    {
    }

    public PSOElementValue(string key, decimal elementValue, LocalDate divorceOrderDate)
        : base(key, elementValue)
    {
        DivorceOrderDate = divorceOrderDate;
    }
}

public class FactorElementValue : ElementValue
{
    public LocalDate ApplicationDate { get; set; }

	public string FactorTable { get; set; }

	public string FactorTableType { get; set; }

    public FactorElementValue()
    {
    }

    public FactorElementValue(string key, decimal elementValue)
        : base(key, elementValue)
    {

    }
}{noformat}",,,,,,,,,,,,,,,,,,,,,,,To Do,20/Jan/26 4:56 PM
Police AA: 2006 lump sum values not being output,PHX5-839,22299,Story,Ready for UAT,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,Russell Armstrong,640f34fc1273131f2adfede9,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,20/Jan/26 11:44 AM,09/Feb/26 1:56 PM,,,Client 184 Police AA Sprint 32,Client 185 Fire AA Sprint 32,,,,,,,,,,,0,,,,,Please see linked ticket for further details,,Matt Lilwall,Russell Armstrong,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,PHX5-884,PHX5-885,,,,,,PHX5A-473,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@670f0aab,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snq:x,,,Lump Sum figures now output for Annual Allowance for NPPS2006 members,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 32,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-02-03 12:50:51.653,,,03/Feb/26 12:50 PM;640f34fc1273131f2adfede9;Added test case to Annual Allowance MAIN but currently unable to export to VS Code to debug,"04/Feb/26 1:17 PM;640f34fc1273131f2adfede9;This is 3 separate issues - cloned this task twice so each issue is separate

# Cash not being output
# Don’t agree 2006 closing pension and lump sum (PHX5-884)
# Don’t agree 2015 closing pension (PHX5-885)","04/Feb/26 1:25 PM;640f34fc1273131f2adfede9;In the PublicSectorAnnualAllowance module the following updates are needed

In {{BaseAnnualAllowanceCalculator}}, add the following into currentYearUpdate

{noformat}ClosingSchemeCash = closingLumpSum.Round(),
				PreviousClosingSchemeCash = openingLumpSum.Round(){noformat}

Add the following into writeBack

{noformat}ClosingSchemeCash = entry.ClosingSchemeCash,
					PreviousClosingSchemeCash = entry.PreviousClosingSchemeCash{noformat}

In {{GetCalcAdjustedUnusedAllowances}} add the following to summary 

{noformat}ClosingSchemeCash = entry.ClosingSchemeCash ?? 0,
					PreviousClosingSchemeCash = entry.PreviousClosingSchemeCash ?? 0,{noformat}",06/Feb/26 9:37 AM;640f34fc1273131f2adfede9;Updates made an lump sums now outputting. Issue with publishing Public Sector Calculation preventing me from moving this to Review as change needed for [https://xps-jira.atlassian.net/browse/PHX5-885|https://xps-jira.atlassian.net/browse/PHX5-885|smart-link] also impacts on Annual Allowance and wasn’t correct the first time and update is stuck in PSC,09/Feb/26 10:46 AM;640f34fc1273131f2adfede9;Update now into Annual Allowance calculation and can see lump sum figures are being output,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,In Progress,05/Feb/26 1:43 PM
Fire A-D: Don't agree CARE pension,PHX5-838,22298,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,20/Jan/26 11:27 AM,21/Jan/26 1:42 PM,,21/Jan/26 1:38 PM,,,,,,,,,,,,,0,,,,,"Please refer to linked ticket. Previously admin were able to agree the result when updating the CARE pay on the Aurora record. However now when they run the calculation and entering the CARE pay as runtime inputs, they don’t agree the result.",,Annabelle Stephenson,Matt Lilwall,Tracy Collins,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-480,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@391b2bf8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00003,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-21 11:33:05.473,10354_*:*_1_*:*_2625345_*|*_10056_*:*_1_*:*_84062842_*|*_10355_*:*_1_*:*_0,,21/Jan/26 11:33 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I’ve gone back to Lynette with a query on this as I think it could be bad data rather than coding,21/Jan/26 1:24 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;April agreed this is a data issue - To be closed,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,21/Jan/26 1:38 PM
Police D>R - Calculation of PCLS for PPS2006 Pension Credit Members,PHX5-837,22232,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,20/Jan/26 8:39 AM,06/Feb/26 3:22 PM,,06/Feb/26 3:22 PM,Client 184 Police D to R Version 3,,,,,,,,,,,,0,,,,,A PPS 1987 pension credit member cannot retire before age 60 (unless in serious ill health) however the code needs amending to allow retirement where DOR is the day before the 60th birthday (as per the change made in A>R).  Is it possible to change the criteria and warning for Pension credit members (identified by sub status) to not make any reference to service but just a straight unable to retire under the age of 60.  Example member ID 81060 ,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,PHX5-816,,,,,PHX5A-332,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@253bb281,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi000g,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-20 08:39:04.797,10354_*:*_2_*:*_3645_*|*_10056_*:*_1_*:*_10179433_*|*_10355_*:*_1_*:*_338927,,20/Jan/26 8:39 AM;640f34fc1273131f2adfede9;Error they are seeing comes from MaxLumpSum in Public Sector Functions. [https://xps-jira.atlassian.net/browse/PHX5-681|https://xps-jira.atlassian.net/browse/PHX5-681|smart-link] will mean changes or a different version of this,"20/Jan/26 8:39 AM;640f34fc1273131f2adfede9;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] can you confirm with admin what category Pension Credit members fall into for lump sum calculations? I believe it’s category A as their Pension Due Date on the Deferred Elements is their 60th birthday so they are not an immediate retirement and Deferred Age = 60

{adf:display=block}
{""type"":""table"",""attrs"":{""isNumberColumnEnabled"":false,""layout"":""center"",""localId"":""6f068d00-0692-494e-84f7-d73539fcd8bb""},""content"":[{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":6},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Commutation options (DB element)""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Name""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Description""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Further comments""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Ill health (unfit for all employments)""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = A""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Ill health (unfit for police work)""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = C""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""For this, member must be under age 55""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Immediate ret = Y, Service>=30, age at dor >=55""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = A""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Immediate ret = Y, Service>=30, age at dor <55""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = C""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Immediate ret = Y, Service>=25 and <30, age at dor >=55""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = A""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Immediate ret = Y, Service>=25 and <30, age at dor >=50, <55""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = B""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Immediate ret = N, Deferred age = 60""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = A""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Immediate ret = N, Deferred age = 50""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = B""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]}]}
{adf}","20/Jan/26 8:39 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:640f34fc1273131f2adfede9] 

Selina has confirmed that pension credit members don’t fit into any of those categories. The [spec|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQD39QisIdBlQKmY-tI7BZZ5Acq-tEffzydDRG8pRbFbAUI?e=hS4xSN] contains a ‘Pension Credit Members’ sheet I hadn’t noticed. There you’ll find ‘DB_PenCredit_LS’. Does this give you enough information?",20/Jan/26 8:39 AM;640f34fc1273131f2adfede9;Changes needed to NeedAdditionalCommutationFactor and DeferredMaxLumpSum?,"20/Jan/26 8:39 AM;640f34fc1273131f2adfede9;Change made to NeedAdditionalCommutationFactor to add 

{noformat}if (subStatus == InferredSubStatus.PensionCredit)
                    {
                        return false;
                    }
                
                else{noformat}

In DeferredMaxLumpSum added 

{{subStatus == InferredSubStatus.PensionCredit ||}} to the beginning of the if statement that goes to the capped lump sum.

Test cases Need Additional Commutation Factor 10 and Deferred Max Lump Sum 7 added

Changes not published as going into a change freeze on S2 tickets",20/Jan/26 8:39 AM;640f34fc1273131f2adfede9;Need to look at 2006 members - lump sum is 4 * pension and no commutation required - will need new pension option strategies and changes to pension option factory. Can’t take a chosen value less than the maximum? Would be pointless as not commutation required?,20/Jan/26 8:39 AM;640f34fc1273131f2adfede9;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] They haven’t got an input for DB_PenCredit_LumpSum_1987_Eligibility - I’ll be able to do something but it will just assume they are all eligible for lump sum,"20/Jan/26 8:39 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:640f34fc1273131f2adfede9] , as discussed I’m checking which these admin want to go with and have asked for an answer asap

(a) calculate lump sum for pension credit members in all cases (b) output zero for these members","20/Jan/26 8:39 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:640f34fc1273131f2adfede9] , admin has confirmed that they want the lump sum to be calculated in all cases for pension credit members.",20/Jan/26 11:34 AM;640f34fc1273131f2adfede9;Members do have RA on the record so lump sum already calculated. Possibly no change needed,06/Feb/26 3:22 PM;640f34fc1273131f2adfede9;Lump Sum is 4 * pension for Pension Credit members. This is the same as for normal members (accrual 1/70 for pension and 4/70 for lump sum). As RA is already on Pension Credit member records no action needed,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,06/Feb/26 3:22 PM
Refactor of SchemePayStrategy in PSC,PHX5-836,22199,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,19/Jan/26 5:20 PM,20/Jan/26 3:30 PM,,,,,,,,,,,,,,,0,,,,,"SchemePayStrategy is really several strategies which should be determined in the factory.

The work has been performed to allow release on 19/01 based on time availability but opens us up to mistakes if someone tweaks the code in future.",,Naomi Robinson,Russell Armstrong,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@14311d43,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00s8n:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-01-20 15:30:20.876,,,20/Jan/26 3:30 PM;640f34fc1273131f2adfede9;Factors should be taken into account when doing this - tables are in different formats (age and period early/late). Tables have been converted to period early/late if based on age to get this out for testing but should really be separate strategies to get the factor in the intended way so table format is maintained,,,,,,,,,,,,,,,,,,,,,,,,20602,PHX5-773,TECHNICAL DEBT,To Do,19/Jan/26 5:20 PM
Retirements - Default LSA/LSDBA 2nd fix,PHX5-835,22198,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,19/Jan/26 4:25 PM,20/Jan/26 11:07 AM,,20/Jan/26 10:22 AM,Client 184 Police A to R Version 13,Client 184 Police D to R Version 5,Client 184 Police Partial Ret Version 5,Client 185 Fire A to R Version 10,Client 185 Fire D to R Version 5,Client 185 Fire Partial Ret Version 3,,,,,,,0,,,,,Calc still errors where no LSA/LSDBA is entered,,Andrew Wilson,Tracy Collins,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2c5adb80,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zzzz,,,"Minor fix to A to R, also a change to allow future calcs run via MyPension to use last available LSA/LSDBA.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 29,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-20 06:36:45.965,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_12813720_*|*_10252_*:*_1_*:*_19346_*|*_10354_*:*_1_*:*_9489_*|*_10056_*:*_1_*:*_51059073,,"20/Jan/26 6:36 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;An issue in the Police A to R. But also, have spotted an issue if run for a future date on mypension. Making a change to ensure that if no factor (lsa/lsdba) is available, we use the last available.","20/Jan/26 10:09 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Updated factors:

{noformat} public static decimal GetAnnualFactor(this List<AnnualFactor> values, string key, int taxYear)
	    {
	
	        if (values.Any(x=> x.Key == key))
	        {
	            decimal factor = values.Where(x=> x.Key == key).GetValue(taxYear);
	
	            if (factor > 0)
	            {
	                return factor;
	            }
	            else
	            {
					int maxYear = values.OrderByDescending(x=> x.Year).First(x=> x.Key == key).Year;
					decimal factorForMaxYear = values.Where(x=> x.Key == key).GetValue(maxYear);
	                Log.Warning($""No annual factor for key = {key} for year = {taxYear}, using factor = {factorForMaxYear} for year {maxYear} instead."");
	                return 0;
	            }
	        }
	        else
	        {
	            Log.Error($""No annual factors available for key = {key}"");
	            return 0;
	        }
	    }{noformat}","20/Jan/26 10:10 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Ensured all retirement levels use the new lsa variables

{{ Parameters fppParameter = new Parameters { FppOverride = FPPToUse , ChosenMcCloudOption = chosenMcCloudOption, LSAMember = lsa, LSDBAMember = lsdba, PIStartDate =   Parameters.DateOfRetirement};}}",,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,20/Jan/26 10:22 AM
Partial Retirement - Error message received,PHX5-834,22129,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,,,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,19/Jan/26 1:01 PM,29/Jan/26 1:46 PM,,29/Jan/26 1:46 PM,,,,,,,,,,,,,0,MyPension,,,,"Member ID 100920.  Error message on running Partial Retirement.  Tried the same member as an actual standard A>R settlement and the calc works fine.



Object reference not set to an instance of an object. at MyCategoryCalculation.Calculate() at Aurora.Calculations.CalculationExtensions.CalculateWithErrors[TCalculation,TParameters,TResult](ICalculation`2 calculation) in C:\a\2\s\Server\Aurora.Calculations\CalculationExtensions.cs:line 38",,Andrew Wilson,Tracy Collins,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,19/Jan/26 1:08 PM;5796a187-7241-414b-bea0-2d22260a9bed;image-20260119-130633.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15700,19/Jan/26 1:08 PM;5796a187-7241-414b-bea0-2d22260a9bed;image-20260119-130640.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15701,19/Jan/26 1:08 PM;5796a187-7241-414b-bea0-2d22260a9bed;image-20260119-130841.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15702,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@44c1e63a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi000009,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-19 13:08:04.294,10252_*:*_1_*:*_0_*|*_10354_*:*_2_*:*_64330000_*|*_10056_*:*_1_*:*_1218603_*|*_10356_*:*_1_*:*_700676235,,"19/Jan/26 1:08 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Caused by underlying object not having =new() on some new fields.

I would hope devs can fix this. If they absolutely can’t, then we will have to add a line to set this up in our client code. However, this will create a nother difference between active retirement and partial which could easily get forgotten/missed/overwritten, so would rather this was fixed at the source in aurora.

!image-20260119-130841.png|width=855,alt=""image-20260119-130841.png""!



!image-20260119-130633.png|width=883,alt=""image-20260119-130633.png""!

!image-20260119-130640.png|width=868,alt=""image-20260119-130640.png""!","19/Jan/26 2:01 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Phil aware of this, so with them.","28/Jan/26 9:51 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21]  Looks like the dev fix has been made, so can probably retest to confirm this can be closed now.",29/Jan/26 1:35 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Tested member 100920 and calc has run in Partial Retirement with no error.  This ticket can be closed,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,29/Jan/26 1:46 PM
Police D-R: Lump sum not being correctly taxed where this exceeds the LSA,PHX5-833,22062,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,16/Jan/26 4:29 PM,05/Feb/26 1:27 PM,,03/Feb/26 3:46 PM,Client 184 Police A to R Sprint 31,Client 184 Police D to R Sprint 31,Client 184 Police Partial Ret Sprint 31,Client 185 Fire A to R Sprint 31,Client 185 Fire D to R Sprint 31,Client 185 Fire Partial Ret Sprint 31,,,,,,,0,MyPension,,,,Please see linked ticket for details,,Andrew Wilson,Annabelle Stephenson,Matt Lilwall,Tracy Collins,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,PHX5A-479,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@66ebac9a,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi0000000003,,,The two Lump Sum Allowance values (LSAMember and LSDBAMember) will be set to 0 where the runtime input values are < 1.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 31,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-20 07:24:57.213,11070_*:*_1_*:*_0_*|*_10251_*:*_1_*:*_72041287_*|*_10250_*:*_1_*:*_24281142_*|*_10252_*:*_1_*:*_685242803_*|*_10354_*:*_1_*:*_1472942_*|*_10056_*:*_1_*:*_414917584_*|*_11103_*:*_1_*:*_3074309,,"20/Jan/26 7:24 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Very hard to fix this one correctly. We can only identify cases where LSA is not input by checking for it being = 0. If it is genuinely zero, there is no way to enter this.

Best we can do is say that they have to enter 0.01 as the LSA (which is what looks like April attempted to do) and ensure this works.","20/Jan/26 7:31 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Can we make the grand assumption that if someone enters an LSA less than £1, that we round it down to zero before we start?","21/Jan/26 12:05 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] FYI I have added this test to client 184 D>R with LSA inputs of 0.01, and I do get taxed results as expected, so this may need to be retested by admin.  I agree that entering an LSA value <£1 is likely the best way around this.  Adding a separate comment with details for this","21/Jan/26 12:08 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;In line with comments below, I agree that admin should enter a figure <£1 for these cases.  My testing has showed the CARE cash being taxed as expected, so I think admin need to retest on latest release.

Coding change suggestion to acknowledge when LSA input/s is/are <£1 and return 0 instead:

{noformat}if (LSAMember < 1 || LSDBAMember < 1)
{
    Log.Information(""Lump Sum Allowance input less than £1. LSA to use is £0."");
    LSAMember = 0;
    LSDBAMember = 0;
}{noformat}

This needs to be added into the PublicSectorLSA module, in {{GetStartingLSA}}, just underneath the if statement that returns an error if the inputs = 0.

Test case “LSA _GetStartingLSATest _LSA values < 1” on PSC is now passing.","21/Jan/26 3:46 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Admin have confirmed on the other ticket that after retesting, tax is being calculated.  So I do think the above is the only code to add (so dropping story points to 1)",03/Feb/26 3:46 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Admin tested and agreed figures,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,03/Feb/26 3:46 PM
Police A-R: Incorrect lump sum results for PCLS option for LSA affected member,PHX5-832,22061,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,16/Jan/26 4:13 PM,05/Feb/26 1:27 PM,,03/Feb/26 3:15 PM,Client 184 Police A to R Sprint 31,Client 184 Police D to R Sprint 31,Client 184 Police Partial Ret Sprint 31,Client 185 Fire A to R Sprint 31,Client 185 Fire D to R Sprint 31,Client 185 Fire Partial Ret Sprint 31,,,,,,,0,MyPension,,,,Please see linked ticket for details,,Andrew Wilson,Annabelle Stephenson,Matt Lilwall,Tracy Collins,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,PHX5A-470,PHX5-822,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@18d208b8,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi000000004,,,"DBPCLS pension options will now use the Default LSA strategy, where PCLS to use = LumpSum already calculated (rather than the max. of the two calculations above).  No tax will be calculated on DBPCLS pension options.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 31,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-19 13:18:12.893,11070_*:*_1_*:*_0_*|*_10251_*:*_1_*:*_64361235_*|*_10250_*:*_1_*:*_658100_*|*_10252_*:*_1_*:*_1133778222_*|*_10354_*:*_2_*:*_248475992_*|*_10056_*:*_1_*:*_163625_*|*_10355_*:*_1_*:*_79680731_*|*_11103_*:*_1_*:*_916007,,"19/Jan/26 1:18 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Query sent to April on linked ticket.  +If she confirms+ that PCLS options should +never+ get a PCELS value, then we need to create a new {{ILSAStrategy}} that only {{PCLSDBPensionOptionStrategy}} will use.  This new strat would need another version of {{GetLSAOtherValues}} that defaults to 0 for PCELS.

Currently {{GetLSAOtherValues}} sits under {{ILSAStrategy}}; I think perhaps we’d have to remove it from there, amend it in {{BaseLSAStrategy}} to be abstract, and then bring it in as an override function in each of the strategies.  The logic would be the same in all of them, except for our new strategy where PCELS = 0. (This would mean a lot of repeated code which I’m sure isn’t necessary - so solution needs to be run by Andrew once we’ve had admin response.)","20/Jan/26 7:20 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;This is likely going to be fixed by a change Iain suggested the other day. In that the PCLS calc in LSA should be the MAX of the two PCLS calcs 

* {{(PreCommPension * 20 * CF) / (20 + (3 * CF))}}
* {{(lumpSum + (postComPen * 20m))/4m}}

This change was suggested for the case where UPS was being calculated as 2p, but would also probably work here as well.

[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]  Can we confirm and ensure the spec gets updated for this change?","20/Jan/26 11:24 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] agreed.  As per April’s comment on the linked ticket, she has now updated the spec, so no further action/chasing required [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] ","20/Jan/26 11:28 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;See ticket 822 for coding instructions on this, as same fix applies to both tickets","02/Feb/26 2:22 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Action has been taken for the issue in this ticket as it does differ from linked ticket 822, but all comments and changes recorded on 822 for ease of review.  Once that has been reviewed and agreed, this ticket can also be closed.",03/Feb/26 3:15 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;This ticket has been agreed by admin and can be closed,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,03/Feb/26 3:15 PM
Police D-R: Incorrect ERF being applied to 2015 scheme benefit,PHX5-831,22060,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Russell Armstrong,640f34fc1273131f2adfede9,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,16/Jan/26 4:06 PM,05/Feb/26 1:27 PM,,03/Feb/26 3:26 PM,Client 184 Police A to R Sprint 31,Client 184 Police D to R Sprint 31,Client 184 Police Partial Ret Sprint 31,Client 185 Fire A to R Sprint 31,Client 185 Fire D to R Sprint 31,Client 185 Fire Partial Ret Sprint 31,,,,,,,0,,,,,,,Andrew Wilson,Annabelle Stephenson,Matt Lilwall,Russell Armstrong,Tracy Collins,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,PHX5A-477,,,,,,PHX5-785,,,21/Jan/26 9:27 AM;b661603b-01c2-4777-a078-ea42f749ddd8;image-20260121-092437.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15872,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@439691e,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi0000000001,,,Add additional log to show value of reduction or increase to pension as a result of early or late retirement,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 31,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-19 08:34:59.844,11070_*:*_1_*:*_0_*|*_10251_*:*_2_*:*_20272372_*|*_10250_*:*_2_*:*_325374659_*|*_10252_*:*_1_*:*_182147086_*|*_10354_*:*_2_*:*_70739188_*|*_10056_*:*_1_*:*_231565409_*|*_10355_*:*_1_*:*_632754754_*|*_11103_*:*_1_*:*_65571037,,16/Jan/26 4:06 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Please see linked ticket for further details,"19/Jan/26 8:34 AM;640f34fc1273131f2adfede9;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] can we please confirm:

This applies to Fire as well?

This applies to Reform CARE benefits in the other schemes for both Police and Fire?

I can’t see that the 1- part of calculating the factor is in the spec for either Police or Fire (but I can see it in the linked guidance) so just want to make sure","19/Jan/26 8:45 AM;640f34fc1273131f2adfede9;Needs a change to {{PublicSectorPensionElementWithLRFStrategy}} for Police (strategy only used for CARE benefits in Police).

If applies to Fire as well (which I believe it does) needs a new strategy based off the standard and changes to the factory to use this in the appropriate scenrios",19/Jan/26 2:28 PM;640f34fc1273131f2adfede9;Should consider [https://xps-jira.atlassian.net/browse/PHX5-785|https://xps-jira.atlassian.net/browse/PHX5-785|smart-link] while doing this  -LRFs need to be 1 + the factor from the table,"20/Jan/26 5:14 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;I have a test case of 419137, which is calculating a late retirement factor of zero and therefore setting all calc results to zero.  I have linked the admin ticket for this",21/Jan/26 9:21 AM;640f34fc1273131f2adfede9;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] I think this would be better linked to 785 - I think it treats the retirement at NRD as a late retirement and isn’t adding 1 to the factor,"21/Jan/26 9:27 AM;640f34fc1273131f2adfede9;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] I don’t think what’s being requested here is correct. I’ve looked at the example in the guidance - 1- the factor is used to calculate the reduction that’s then taken off the pre reduction pension. This comes to exactly the same pension as if you just do pension * factor (in the example below 3000 * 0.568 = 1704). The factor for 0 years and 1 month early is 0.995. If we do 1 - that someone retiring one month early is going to get a pension of 0.005 times their pre reduction pension

!image-20260121-092437.png|width=600,alt=""image-20260121-092437.png""!","21/Jan/26 11:56 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:640f34fc1273131f2adfede9] , yes  I agree with you. I’ve got back to admin for clarification.",26/Jan/26 4:20 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Admin have confirmed that what they need is an output showing the value of the reduction (which would be calculated by 1-ERF).  This is a required output for the Calc Prints.,"27/Jan/26 11:50 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Tracy’s comment below confirms there’s nothing wrong with the calculation, we just need to add an interim value that provides this info.  

The following line of code needs to be added to {{PublicSectorPensionElementStandardStrategy}} and {{PublicSectorPensionElementAgeAttainedStrategy}} in PSC RetirementElements region.  This should be added just underneath the line that calculates the decimal newValue.

{noformat}InterimValuesLogger.AddWithLogging($""Reduction for early retirement: PreCommPension * (1 - ERF) = {elementValue.Value} * {1 - factor}"", (elementValue.Value - newValue), InterimValuesLogger.LoggingMode.BothInformation);{noformat}

A similar line needs adding to {{PublicSectorPensionElementWithLRFStrategy}} : 

{noformat}InterimValuesLogger.AddWithLogging($""Increase for late retirement: PreCommPension * LRF = {elementValue.Value} * {factor}"", (elementValue.Value - newValue), InterimValuesLogger.LoggingMode.BothInformation);{noformat}

[FYI linked ticket 785 has an amend on this LRF strategy as well.  These are related but will both need actioning, ideally together.]



*Please note* that {{PublicSectorPensionElementSchemePayStrategy}} has a note asking for no amends as is awaiting refactoring.  Make sure to speak to Naomi to find out whether we need to add either or both of these lines to that strategy once she is done.

Test case added to PSC (“UAT test 831”) that checks against expected interim value.  Currently failing, will pass once code added.",29/Jan/26 7:18 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] We can make amends to add these interim values.  The comment was to flag a need to refactor if we ever changed the logic. I don’t think this minor change would trigger a refactor.,29/Jan/26 1:40 PM;640f34fc1273131f2adfede9;Change for {{PublicSectorPensionElementWithLRFStrategy}} will need some if statements to output the correct things - this strategy can be using an ERF or LRF,"29/Jan/26 4:50 PM;640f34fc1273131f2adfede9;Added the below to {{PublicSectorPensionElementWithLRFStrategy}} 

{noformat} if (DateOfRetirement <= lrfApplicationDate)
				{
					InterimValuesLogger.AddWithLogging($""Reduction for early retirement: PreCommPension * (1 - ERF) = {elementValue.Value} * {1 - factor}"", (elementValue.Value - newValue), InterimValuesLogger.LoggingMode.BothInformation);	
				}
				else
				{
					InterimValuesLogger.AddWithLogging($""Increase for late retirement: PreCommPension * LRF = {elementValue.Value} * {factor}"", (newValue - elementValue.Value), InterimValuesLogger.LoggingMode.BothInformation);
				}{noformat}

Made the suggested changes to {{PublicSectorPensionElementStandardStrategy}} and {{PublicSectorPensionElementAgeAttainedStrategy}}

Checked the logs and Interim Values looked correct for ERF and LRF tests in Public Sector Calculation and retirement calculations","30/Jan/26 10:51 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Just to question this - if this is required for a calc print, is that format of information going to work? The calc print fudge currently in place is using a letter for the calc print, and getting values for a given key. Would this format work for that? [~accountid:640f34fc1273131f2adfede9] ",30/Jan/26 11:04 AM;640f34fc1273131f2adfede9;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Have you got an example of something else that’s been added or is being used for calc prints so I can see what’s been done? I agree as it is it won’t work as the key will be specific to the calculation,"30/Jan/26 11:23 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:640f34fc1273131f2adfede9] [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] 

Have spoken to Jim. Interim Values will not be available to letters (which is the current fudge for calculation prints)

Getting this information to the letter requires a lot of work, and I would argue that the time would be better spent doing calc prints properly.

So question for admin - as this interim value that will be available to view on screen enough? If this absolutely 100% MUST be on a calc print, then we have a problem, because we cannot do that.","30/Jan/26 11:29 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:640f34fc1273131f2adfede9]  Also - do we need to include the auroraID and mccloud option here? Assuming we could run through the code several times, how will we know what this factor applies to?",30/Jan/26 1:47 PM;640f34fc1273131f2adfede9;Added the value of the reduction/increase due to retirement factors into the existing infologger then changed this to output as both a Log.Information and InterimValue. This includes Aurora ID and McCloud Option already. Log.Information is available to view in Aurora when running a calculation. Published in version 213 of PSC,02/Feb/26 10:46 AM;640f34fc1273131f2adfede9;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] I said the wrong Jira number in the stand up but the above is the question Andrew had for Matt to ask admin to firm up exactly what is required here,"02/Feb/26 11:06 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:640f34fc1273131f2adfede9] [~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21]  I think this is now less a question for admin, and more us telling them - we cannot do it. And this is all we can do. Russell, I think wrap up what you can do and we deliver this as is.",03/Feb/26 3:26 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Admin tested and agree figures,,,,16441,PHX5-606,Issues raised in UAT,Done,03/Feb/26 3:26 PM
Police A-R: Scheme Pays retirement timing factor incorrect value,PHX5-830,22059,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,16/Jan/26 4:02 PM,26/Jan/26 2:20 PM,29/Jan/26 2:47 PM,23/Jan/26 7:15 AM,Client 184 Police A to R Version 12,Client 184 Police D to R Version 7,Client 185 Fire A to R Version 9,Client 185 Fire D to R Version 7,,,,,,,,,0,,,,,Please see linked ticket for further details,,Andrew Wilson,Matt Lilwall,Naomi Robinson,Tracy Collins,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,712020:ffa445ab-b813-4226-9ed2-507a454e9272,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,PHX5-842,,,,,,,,,,,,,PHX5A-482,,,22/Jan/26 6:48 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260122-184743.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16237,22/Jan/26 6:52 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260122-185210.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16238,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1c9a96ae,,,,,,,,,,,,,,,,,,,,Confirm,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y1,,,"Age attain strategy and related tables implemented for non-CARE categories, for Scheme Pays RTFs",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 30,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-19 11:34:54.808,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_103072681_*|*_10252_*:*_1_*:*_2067_*|*_10354_*:*_1_*:*_3663_*|*_10056_*:*_1_*:*_425667559,,19/Jan/26 11:34 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;I think this was expected after Naomi's amendments to the A>D.  Should be fixed alongside [https://xps-jira.atlassian.net/browse/PHX5-768|https://xps-jira.atlassian.net/browse/PHX5-768|smart-link],20/Jan/26 7:16 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272]  Are you able to confirm this is now fixed?,21/Jan/26 8:09 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Member ID 464033.  Admin have confirmed that the SP is still not pulling through for this member.  This is a CARE only member with no linked records.  Expected SP deduction 20.26 x 1 x (1-0.437) = 11.406,"21/Jan/26 10:31 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Linked ticket 482 relates to an A>R where we are inputting the SP deduction into the process.  The calc picks it up applies no reval (as no date is given in the inputs so assumes no reval is required).  Calc says it is using factor for 1 yr 11 months, but is actually using factor for 1 year.  Should be age attained for factor rather than years early.  Calc expecting 0.913 using 0.944.  SP is not being deducted from CARE benefit.","21/Jan/26 12:27 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;This seems like two or three separate issues.

The first is that some retirement factor table code needs updating to use age attained basis rather than years and months. I can work on that and this will also ultimately be resolved in the new builder we are going to create to also cover PSO. This will be an update the PSC and the SchemePays Strategy.

With regards to Scheme Pays not being deducted at all from the D>R, this mean the D>R needs to point to a certain strategy in the scheme pays module for applying PI factors which it potentially isn’t - someone with D>R knowledge needs to take a look into this/ a separate ticket will be needed and I can pick up separately.

Finally, we got verbal confirmation that scheme pays are always deducted as a total from the DB benefit and not split into reform care and db, which aligns with the spec. There should, however, be a deduction of care scheme pays from the CARE2015 record. [~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] please can you confirm which is the issue? Is it that the CARE2015 member does not have scheme pays being deducted (coders will need to look into this) or that they are saying they thing the PPS1987 schemepays should be split between DB and ReformCARE (spec change). ","22/Jan/26 6:48 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Fix for the incorrect tables;

The tables formats for some factors were Y and M when uploaded to calculate but should have remained by age.

The age attained strategy in PSC had the code for tables that use age, which I have brought into SchemePaysStrategy (all tables except CARE).

{noformat}// Table by age
                        // Note: There is an ERF strategy in PSC called ""Age attained strategy"" which is to find a table based on age, same as ""factor"" code below.
                            // There is also an aspect of the RFB which uses an ""Age Attained Basis"" for assigning year and months early. Might consider renaming the strategy as ambigous.
                        factor = new RetirementFactorBuilder(elementValue.Key, DateOfRetirement, MemberInfo.DateOfBirth)
                                    .WithEarlyFactorTableOnly(ERFtable)
                                    .WithEarlyApplicationDateOnly(DateOfRetirement)
                                    .WithSchemeData(SchemeReferenceData)
                                    .WithDecimalPlaces(DecimalPlaces)
                                    .GetFactor();{noformat}

I have updated the 17 RTF test cases in PSC to make sure they each use the correct table format.

A>R tests are now deducting as expected for the cases we have:

!image-20260122-184743.png|width=678,alt=""image-20260122-184743.png""!

The top ticket is member 356429 as mentioned on admin ticket 482. The results now match (RTF: 0.913 and Value: 39.41). We also tested the CARE2015 member who is getting 0.917 as that category uses a different table.

!image-20260122-185210.png|width=744,alt=""image-20260122-185210.png""!",,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,23/Jan/26 7:15 AM
PSO - account for MCPN and MCCR divorce elements in non 2015 schemes.,PHX5-829,22058,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,16/Jan/26 3:44 PM,21/Jan/26 12:36 PM,,21/Jan/26 11:25 AM,Client 184 Police A to R Version 14,Client 184 Police D to R Version 6,Client 184 Police Partial Ret Version 6,Client 185 Fire A to R Version 11,Client 185 Fire D to R Version 6,Client 185 Fire Partial Ret Version 4,,,,,,,0,,,,,"Iain Wilson confirmed there could be 5 different type of divorce debit elements in the data which we will need to deduct from the relevant pre com benefit. 

||*Benefit Type*||*Divorce Element*||*Pre Com Deduction*||
|Legacy|PEN|DB - Pre 2022|
|Reform|PEN|ReformDB - Pre 2015|
|Reform|MCPN|ReformDB - Pre 2015|
|Reform|MCCR|Reform Care 2015-2022|
|2006 Scheme Cash|RA|Accrued Cash|
|Non McCloud Eligible DB|PEN|DB Pre 2015|
|CARE|CARE|Care pension post 2015|",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@c25b3e9,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zzzv,,,"Silent update to get divorce debit elements ready for retirement timing factor coding. PSO debit deductions have been manually set to 0 at the request of admin / Iain Wilson for go live until retirement timing factor  for PSO Debits has been coded, tested and signed off. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 29,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_410034661_*|*_10252_*:*_1_*:*_3033_*|*_10354_*:*_1_*:*_3050_*|*_10056_*:*_1_*:*_1235226,,"21/Jan/26 9:51 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;In Divorce Module:

# Updated {{GetDivorceKeyMappings}} to accept mcCloudOption. Split the categories switch further with IF statements for the 2 McCloud options and an else for non McCloud eligible members. Added the extra divorce element keys. 
# In {{DivorceFromDataPublicSectorCalculator}}. added extra logic to the final part of the function which will check if a previous element key has already been created for the divorce element that has been mapped to be a specific element value name i.e. MCPN > PenPSOPensionDebit. If there are two values of the same name it will sum them. 
# In Public Sector Calculation module, {{CombinePreComElementsStrategy}}set up a deduction of the CarePSOPreCom element from the reform CARE pre com pension (post retirement factor application) - this will be the MCCR element deduction. Rest of the other PSO debit deductions were correct.",,,,,,,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,21/Jan/26 11:25 AM
Police AA: Writeback producing erroneous second record (all zeroes),PHX5-828,22057,Task,Dev required,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,16/Jan/26 3:41 PM,26/Jan/26 4:28 PM,,,,,,,,,,,,,,,0,,,,,Please see linked ticket for further details,,Annabelle Stephenson,Matt Lilwall,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,PHX5A-476,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4aeca342,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00003li,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-19 16:25:15.944,,,"19/Jan/26 4:25 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I think this is a dev issue rather than coding.  I created a test case on police 184 AA calc with the member admin tested in the linked ticket, and am only getting one set of results for each member for each year.  Therefore I think the issue is with the actual writeback rather than the results. [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] is this something you can confirm for me?",,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,To Do,16/Jan/26 3:41 PM
Police D>R - Options output for non McCloud member,PHX5-827,22015,Story,Ready for UAT,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,16/Jan/26 11:30 AM,11/Feb/26 3:37 PM,,,Client 184 Police D to R Sprint 32,Client 185 Fire D to R Sprint 32,,,,,,,,,,,0,MyPension,,,,"Member ID 461056 is a non McCloud NPPS member, with no linked record.  Output shows 9 options although only the DB legacy ones are populated.  If it possible not to show the DB Reform and the Pre 22 CARE reform lines in the output (these are correctly populated with zeros so not a high priority request)",,Annabelle Stephenson,Tracy Collins,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-474,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@13851bb2,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snq:r,,,"Legacy and Reform options will only be returned for McCloud members.  Non-McCloud member options will output as DBZeroLumpSum, for example, rather than seeing both a Legacy and Reform version of ZeroLumpSum.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 32,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-27 11:10:53.163,,,"27/Jan/26 11:10 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Our non-mccloud code currently makes the assumption that there would be a deferred Normal member, but this member proves that is not always the case.  Currently this member is being treated as mccloud, which is why additional options are being provided.

Some defensive coding needed in D>R.

Line 95 ish is an if statement where we start the non-mccloud calcs.  This needs replacing with the following:

{noformat}if ((deferredNormalMemberInfo != null && deferredNormalMemberInfo.McCloud == false) ||
    (deferredSalaryLinkedMemberInfo != null && deferredSalaryLinkedMemberInfo.McCloud == false)){noformat}

A further if statement needs adding around line 145, just before we go into the “normal” bit of the non-mccloud calcs.

{noformat}if (deferredNormalMemberInfo != null)
{
  // GET NORMAL PRE-COM
  ...
}{noformat}

Test case “UAT test 827 _non-mccloud” set up in Police D>R, checking on some arbitrary expected values for the relevant options.  Currently failing where those options are not found.  This will pass following code changes.

These same changes have been copied into the Fire D>R calc. A lot of tests in both clients failed, as were looking for eg LegacyDBZeroLumpSum instead of DBZeroLumpSum. Updated all of these.","10/Feb/26 11:07 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] as discussed, I’ve created [https://xps-jira.atlassian.net/browse/PHX5-903|https://xps-jira.atlassian.net/browse/PHX5-903|smart-link] to look at condensing some areas of client code when we can. Logged under technical debt.

Let me know if anything further required on this ticket to get it over the line.  Thanks",,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,In Progress,06/Feb/26 2:36 PM
LSA - Allow LSA/LSDBA inputs to default if not entered,PHX5-826,22014,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,16/Jan/26 11:16 AM,19/Jan/26 5:17 PM,,16/Jan/26 4:33 PM,Client 184 Police A to R Version 12,Client 184 Police D to R Version 4,Client 184 Police Partial Ret Version 4,Client 185 Fire A to R Version 9,Client 185 Fire D to R Version 4,Client 185 Fire Partial Ret Version 2,,,,,,,0,,,,,"CIT have requested that LSA and LSDBA should default to the standard values if they are not input (saving time on running calcs).

Calcs response

!image-20260116-111803.png|width=440,alt=""image-20260116-111803.png""!

PK has advised today (16/01) that MyPension calcs wont run due to this issue.",,Andrew Wilson,Tracy Collins,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,16/Jan/26 11:18 AM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260116-111803.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15621,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1a0ceb6d,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zzzi,,,"If LSA and LSDBA are entered as zero. They will now default to values taken from global factor tables.

The global factor tables hold a value for each tax year, so this will need to be updated even if the value has not changed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 29,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-16 13:56:45.225,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_9205970_*|*_10252_*:*_1_*:*_21821_*|*_10354_*:*_1_*:*_9111_*|*_10056_*:*_1_*:*_9357247,,16/Jan/26 1:56 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Uploaded new LSDBA global factor table. LSA already existed,"16/Jan/26 2:46 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] We will have to warn admin - if someone genuinely wants to enter 0 as the lsa as an input, they will not be able to. My only way to determine if it has been entered or not is to compare to zero, and if it is zero, I replace it with the defult value.","16/Jan/26 4:11 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;New function added to factor code:

{noformat}public static decimal GetAnnualFactor(this List<AnnualFactor> values, string key, int taxYear)
    {

        if (values.Any(x=> x.Key == key))
        {
            decimal factor = values.Where(x=> x.Key == key).GetValue(taxYear);

            if (factor > 0)
            {
                return factor;
            }
            else
            {
                Log.Error($""No annual factor for key = {key} for year = {taxYear}"");
                return 0;
            }
        }
        else
        {
            Log.Error($""No annual factors available for key = {key}"");
            return 0;
        }
    }{noformat}

Following code added at client level:

{noformat}decimal lsa = Parameters.LumpSumAllowance;
        decimal lsdba = Parameters.LumpSumDeathBenefitAllowance;

        if (lsa == 0)
        {
            lsa = GlobalReferenceData.AllYearlyFactors.GetAnnualFactor(""LSA"", Parameters.DateOfRetirement.PreviousInstanceOfDayOfYear(4, 6).Year);
        }

        if (lsdba == 0)
        {
            lsdba = GlobalReferenceData.AllYearlyFactors.GetAnnualFactor(""LSDBA"", Parameters.DateOfRetirement.PreviousInstanceOfDayOfYear(4, 6).Year);
        }{noformat}

Updated:

* Police A to R
* Police D to R
* Police Partial
* Fire A to R
* Fire D to R
* Fire Partial

All test cases still run with no new fails.",,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,16/Jan/26 4:33 PM
Police AA: Calc error when run for a CARE only member,PHX5-825,22013,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,16/Jan/26 11:12 AM,21/Jan/26 1:30 PM,,21/Jan/26 1:30 PM,,,,,,,,,,,,,0,,,,,Calc errors when run for a CARE only member. See linked ticket for further details.,,Andrew Wilson,Annabelle Stephenson,Matt Lilwall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,PHX5A-472,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@adcb779,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-19 10:08:25.438,10354_*:*_2_*:*_587828_*|*_10056_*:*_1_*:*_254767088_*|*_10356_*:*_1_*:*_0_*|*_10355_*:*_1_*:*_76030975,,19/Jan/26 10:08 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;See comment on linked ticket - I have asked admin for more information as I have not been able to recreate the error,"19/Jan/26 11:19 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;I took a look at this, and it was hitting an error due to total service not being set. This was caused by interim values on the memberinfo objects. Removing those debug lines allowed it to run without those errors. Impossible to tell if that would have caused the issue admin are seeing.",19/Jan/26 1:59 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Phil has looked at error logs and cannot see any further information.,"19/Jan/26 3:33 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Talking to Naomi. Apparently when we had issues around christmas, we were told the calc only works for salary linked members, and for it to run, a member has to have a salary link record.

This member does not have any member linking.

Sounds like this is a front end issue, but we will need to explain to them","20/Jan/26 7:15 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Have spoken to Phil, Given it is likely caused by a missing member link, it is going to be with them or data team. For now, putting this to With Dev whilst Phil and team investigate.","21/Jan/26 1:28 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Phil says this should have been fixed by devs:

“We potentially need to do a data job too.  We had to make a code change to get the process to run, but the process now relies on the member having a main member ID, so these will probably need to be updated for all the CARE only members.”",,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,21/Jan/26 1:30 PM
Police A-R: Rounding issue in results,PHX5-824,22012,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,16/Jan/26 10:59 AM,23/Jan/26 10:17 AM,,23/Jan/26 10:17 AM,,,,,,,,,,,,,0,,,,,Values displaying in pension outputs are now showing as 6 decimal places. Please see linked ticket for further details.,,Annabelle Stephenson,Matt Lilwall,Tracy Collins,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-471,,,,,,,,,19/Jan/26 11:22 AM;18934601-32fa-4c76-9b74-159dc94fd206;image-20260119-111918.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15696,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5b4b331c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi000d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-19 11:22:17.062,10252_*:*_1_*:*_0_*|*_10354_*:*_1_*:*_19976385_*|*_10056_*:*_1_*:*_256551846,,"19/Jan/26 11:22 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;This could be to do with scheme pays changes, as the only unrounded values I’m seeing in interim test results (checked a handful of existing tests and I set up one in A>R for this ticket) is pre-com element DBSchemePayPreCom.  (Having issues exporting and debugging at the mo so this is as far as I can get.)

!image-20260119-111918.png|width=669,alt=""image-20260119-111918.png""!

There are a few functions within SchemePays module that are not currently rounding.  We need to consider which one/s of these should be rounding and which shouldn’t.","19/Jan/26 3:47 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Am now able to debug and I do think scheme pays is the issue.  I think we need to amend line 168 in SchemePays module to read:

{noformat}var revaluedSchemePay = (memberSchemePayDebit.DebitAmount * factor).Round(2);{noformat}",23/Jan/26 10:17 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Admin have confirmed that this issue has been fixed and have closed their ticket.  Therefore I am closing this one to keep us in sync.,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,23/Jan/26 10:17 AM
Police A-R: Additional calc outputs,PHX5-823,22006,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,16/Jan/26 9:44 AM,05/Feb/26 1:27 PM,,29/Jan/26 9:54 PM,Client 184 Police A to R Sprint 31,Client 184 Police D to R Sprint 31,Client 184 Police Partial Ret Sprint 31,Client 185 Fire A to R Sprint 31,Client 185 Fire D to R Sprint 31,Client 185 Fire Partial Ret Sprint 31,,,,,,,0,MyPension,,,,"# Additional “post tax, post GAD” lump sum value needed in calc output.
# Commuted GAD

Please see linked ticket for further details",,Annabelle Stephenson,Matt Lilwall,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,PHX5-767,PHX5-847,PHX5A-469,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7a73189d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi000f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-19 16:11:01.433,10250_*:*_1_*:*_0_*|*_10252_*:*_1_*:*_867660757_*|*_10354_*:*_1_*:*_1304311_*|*_10056_*:*_1_*:*_281089886,,"19/Jan/26 4:11 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;* Post tax value is output already in OtherValues: DB_PostTaxLS or CARE_PostTaxLS
* Post GAD value can be added to OtherValues.  The following code needs to be added to PSC {{RetirementResults Calculate( ... )}} within the foreach loop where we hit PublicSectorFunctions.ApplyGADContributions (code to be added directly after that line, approx line 1627 in the version I’m looking at)

{noformat}ElementValue postGADCash = new ElementValue {Key = ""DB_PostGADLS"", Value = pensionOption.Value.TotalCash};

pensionOption.Value.OtherValues.Add(postGADCash);	{noformat}

* Commuted GAD value: due to the way we have coded this, on admin’s instruction that zero lump sum options +cannot+ be taken when there is GAD to be deducted, we do not actually calculate this “commuted” value as part of GAD.  Admin have previously agreed that, in order to get the zero cash option results, they will enter the GAD amount as the target cash.  This means that, before GAD is applied, the option will return cash = GAD amount, and post-com pension = pre-com - GAD / ccf.  (Only after GAD is applied will the cash drop to 0.)  In this case, the value returned in CommutedPensionValues will already contain the “commuted” GAD value (GAD / ccf).
** In other words, I do not think any extra coding is required here, but that admin need reminding that the zero cash option is not available when there is GAD, and instead they must run the calc in line with the agreed process to see the commuted GAD figure in the results.","26/Jan/26 4:20 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;UPDATE: see linked ticket 847 where it is requested that TotalCash on pension options be +_before_+ deduction of GAD. So instead of coding suggestion above, amends are needed to {{ApplyGADContributions}} in PSFunctions to store and return the relevant values.","29/Jan/26 9:54 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;This ticket covers both of the issues in the two linked tickets, 767 and 847.  I have added all details and story points to those two tickets, so this one can be closed.",,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,29/Jan/26 9:54 PM
Police A>R PCLS calc,PHX5-822,22005,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,16/Jan/26 9:19 AM,10/Feb/26 8:47 AM,,10/Feb/26 8:47 AM,Client 184 Police A to R Sprint 32,Client 184 Police D to R Sprint 32,Client 184 Police Partial Ret Sprint 32,Client 185 Fire A to R Sprint 32,Client 185 Fire D to R Sprint 32,Client 185 Fire Partial Ret Sprint 32,,,,,,,0,MyPension,,,,"Comment from Andrew

Just spoken to Iain, we should actually be using the maximum of {{(PreCommPension * 20 * CF) / (20 + (3 * CF))}} and  (lump sum + (postcomPen * 20))/4 when working out the PCLS for LSA purposes.

This should still be relatively easy to do. Just need to make the strategy aware of the commutation factor, which is does not currently know. But this can be set easily enough in the factory.",,Andrew Wilson,Annabelle Stephenson,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-463,,,,,,PHX5-832,,,02/Feb/26 5:38 PM;18934601-32fa-4c76-9b74-159dc94fd206;image-20260202-173514.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16915,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7ef7151e,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi000000009,,,"The DB PCLS value used for LSA calculations is now the maximum of :

* (PreComPension * 20 * CF) / (20 + (3 * CF)) and 
* (LumpSum + (PostComPen * 20))/4",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 31,PHX5 Sprint 32,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-19 17:04:51.498,11070_*:*_1_*:*_0_*|*_10251_*:*_1_*:*_64353829_*|*_10250_*:*_1_*:*_271147866_*|*_10252_*:*_1_*:*_929288310_*|*_10354_*:*_1_*:*_2301733_*|*_10056_*:*_1_*:*_284848146_*|*_11103_*:*_1_*:*_935754,,"19/Jan/26 5:04 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;As Andrew said, pretty simple change.  The following code needs to be added into *PublicSectorLSA* module in {{HMRCPCLSDBLSAStrategy}}, to replace the current override PCLS function there:

{noformat}public override decimal PCLS(decimal preComPen, decimal postComPen, decimal lumpSum, decimal ERBuyout)
{
    decimal pcls = PublicSectorFunctions.PCLS(preComPen, CommutationFactor, 2, MemberInfo, McCloudOption);
    decimal schemeMax = Math.Round((lumpSum + (postComPen * 20m))/4m,2);

    return Max(pcls, schemeMax);
}{noformat}

The CommutationFactor input will need to be brought into the HMRC strategy (copy how it was done for {{Fire2006DBLSAStrategy}}) which will mean changes required in {{PensionOptionLSAFactory}}. 

Add the following line to {{PensionOptionLSAFactory}} (underneath where we get the careCommPercentage, currently around line 361) and then send dbCommutationFactor into each of the HMRC strats in the factory.

{noformat}decimal dbCommutationFactor = memberInfo.CommutationFactor(KeyPreComConstants.DBPreCom, SchemeReferenceData, calculationDate, 3, illHealth);{noformat}

*Note that* while looking at the LSA factory, it seems the {{Fire2006DBLSAStrategy}} is using the {{careCommutationPercentage}} rather than a DB CCF which is not right. So the dbCommutationFactor also needs sending in to the Fire strats instead of careComm%","28/Jan/26 10:01 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] It would be the max of the two values, not the minimum","28/Jan/26 10:05 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] thank you, good spot. amended","02/Feb/26 1:56 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+Coding changes:+

I have made the changes in *PublicSectorLSA* as outlined in my previous comment:

* updating {{HMRCPCLSDBLSAStrategy}}
* bringing DB comm factor into the LSA factory
* updating the factor used for {{Fire2006DBLSAStrategy}} in the LSA factory

These updates corrected the issues for DBSchemeMaximum pension options, but caused problems with DBPCLS pension options.  As per linked tickets 832/470, no tax is expected under DBPCLS option.  

I have therefore updated the LSA factory to use the {{DefaultDBLSAStrategy}} for this option instead of HMRC.  This sets the PCLS to use in LSA OtherValues as the original PCLS already calculated, rather than re-calculating as in HMRC strategy.  This means that PCLS - TaxFreeLS always = 0, and therefore so does PCELS.

+Testing:+

Updated expected results for some of the “LSA _PensionOptionLSAFactory …” tests on PSC module, to reflect that we now expect Default strategy for DBPCLS options.  I also amended test “LSA _DefaultDBLSAStrategyTest _FPS1992 _DBPCLS > LSA” that had previously been using the HMRC testing function.  All PSC tests passing.

Two tests that I’d set up in Police A>R for these tickets 822 and 832 were failing, checking on the values admin have quoted.  Both are now passing following my changes.

*Note:* see ticket 832’s release notes as well, though all coding and testing info for both tickets is held here.","02/Feb/26 5:38 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] April has updated the spec: 

!image-20260202-173514.png|width=834,alt=""image-20260202-173514.png""!

which agrees with my changes.  The important takeaway is that PCELS for the DB PCLS option will always be 0.  Hopefully this is sufficient but do let me know if any further info needed.  I can confirm that April and I discussed and agreed what the various terms mentioned mean, so we know we are on the same page.",,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,10/Feb/26 8:47 AM
Care Pension is never calculated if there is no existing Member Care data.,PHX5-821,21970,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,15/Jan/26 5:14 PM,15/Jan/26 5:25 PM,,,,,,,,,,,,,,,0,,,,,"If there is no existing Care Benefits data in the member record, no Care pension is calculated for that specific Aurora ID. When the code reaches {{PublicSectorCARECalculationFactory}} in Public Sector Calculation module, it begins the foreach loop where it starts cycling through each MemberCareBenefitType in the existing member data. Since there is none to cycle through, it just skips the loop where all care calculation code takes place and returns 0. We need some code to be able to deal with when there’s no existing data and ensure it still goes through the Care module code as we have some there that deals with creating the table from scratch. Likely will only be new scheme joiners getting their first year of data calculated that will be affected by this.

Will admin always calculate the first year themselves? How do we know what MemberCareBenefitType to apply it if it isn’t already there? We have a default in to apply unknown currently.",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@17a4aa50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00s0z:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,"15/Jan/26 5:24 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] Hi Tracy, Matt. Could you add this scenario in the description to the list of known calculation defects please. Have added as technical debt task so unlikely will be looked at before go live. ",,,,,,,,,,,,,,,,,,,,,,,,20602,PHX5-773,TECHNICAL DEBT,To Do,15/Jan/26 5:14 PM
Police A>R Ill Health Enhancement,PHX5-820,21935,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,15/Jan/26 3:26 PM,02/Feb/26 2:37 PM,,02/Feb/26 2:37 PM,,,,,,,,,,,,,0,,,,,Enhancement should reflect potential service between close of scheme ie 01/04/2022 or 01/04/2015 and NRD rather than date of leaving and NRD.  In this case both Legacy and reform should give the maximum 7 years.  Member ID 387226,,Tracy Collins,,,,,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7ec737db,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y000000000hu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_1552237584,,02/Feb/26 2:36 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;This is a duplicate of [https://xps-jira.atlassian.net/browse/PHX5-843|https://xps-jira.atlassian.net/browse/PHX5-843|smart-link] which has already been amended and close,,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,02/Feb/26 2:37 PM
Police D>R Error - MCPN was not present in the dictionary,PHX5-819,21923,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Russell Armstrong,640f34fc1273131f2adfede9,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,15/Jan/26 2:43 PM,16/Jan/26 10:05 AM,,16/Jan/26 9:14 AM,Client 184 Police D to R Version 3,Client 185 Fire D to R Version 3,,,,,,,,,,,0,,,,,"Error received on all members with MCPN element, whether produced by the A>D or data migrated.",,Russell Armstrong,Tracy Collins,,,,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-468,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@17454bb8,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zzz,,,Fixed error for “The given key 'MCPN' was not present in the dictionary.”,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 29,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-15 15:06:53.928,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_3706767_*|*_10252_*:*_1_*:*_3133_*|*_10354_*:*_1_*:*_3169_*|*_10056_*:*_1_*:*_668274,,15/Jan/26 3:06 PM;640f34fc1273131f2adfede9;Error in {{NotEligibleRevaluationStrategy}} in Public Sector Revaluation. Dictionary is filtered based on which McCloud Option is being used but the list of deferred elements isn’t. Needs to look more like {{EligibleRevaluationStrategy}},"15/Jan/26 3:40 PM;640f34fc1273131f2adfede9;{{NotEligibleRevaluationStrategy}} amended to the below so only tries to add the new element to the list of revalued elements if the key is present in the dictionary

{noformat}List<ElementValue> revaluedElements = new List<ElementValue>();

			foreach(DeferredElementValue deferredElement in DeferredElements)
	    	{
				if (DeferredToPreComKeyMap.Any(x=>x.Key == deferredElement.DeferredElement.Key))
		 
	     		{
	           		revaluedElements.Add(new ElementValue
					   {
							Key = DeferredToPreComKeyMap[deferredElement.DeferredElement.Key],
							Value = deferredElement.Value
					   });
					
				}
			}
			return revaluedElements;{noformat}",15/Jan/26 3:55 PM;640f34fc1273131f2adfede9;Example member given (10256101) no longer gives this error in Calculate however is not eligible to retire and fails validation. Updated the test case to expect the error,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,16/Jan/26 9:14 AM
Police A-R: Don't agree service on legacy option (possibly missing overtime),PHX5-818,21890,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,15/Jan/26 2:10 PM,02/Feb/26 11:33 AM,,02/Feb/26 11:33 AM,,,,,,,,,,,,,0,,,,,Please see information in linked ticket. April doesn’t agree the service on the legacy option and this appears to be caused by overtime not being included.,,Annabelle Stephenson,Matt Lilwall,Tracy Collins,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-464,,,,,,PHX5-811,,,22/Jan/26 5:41 PM;18934601-32fa-4c76-9b74-159dc94fd206;Public Sector Data Query - RE PHX5A-464 (PHX5-818).msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16203,23/Jan/26 2:14 PM;18934601-32fa-4c76-9b74-159dc94fd206;Response from Neil on data.msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16306,21/Jan/26 3:43 PM;18934601-32fa-4c76-9b74-159dc94fd206;image-20260121-154234.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16009,28/Jan/26 10:13 AM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260128-101213.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16543,28/Jan/26 10:13 AM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260128-101257.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16542,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2520b7ad,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi0000000007x,,,"* Dev and code change so that overtime comes through to calculation from both “main” and “linked” members.
* Added years service calculation amended to pro-rate the service for non ill-health members, where calculation date is before the contract due date.  If ill-health or beyond due date, full service from added years is returned.
* Added years service will be calculated when the data is in the “actual” fields or the “prospective” fields.  Warning will be returned if data is held in both, but calculation will continue to run on the “actual” data.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 30,PHX5 Sprint 31,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-21 15:43:37.284,11070_*:*_1_*:*_0_*|*_10281_*:*_3_*:*_61402406_*|*_10251_*:*_1_*:*_140160384_*|*_10250_*:*_3_*:*_275275754_*|*_10252_*:*_3_*:*_7013_*|*_10354_*:*_5_*:*_540883229_*|*_10056_*:*_1_*:*_12837760_*|*_10356_*:*_1_*:*_169590347_*|*_10355_*:*_1_*:*_71487040_*|*_11103_*:*_1_*:*_24111193,,"21/Jan/26 3:43 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Our code looks for the “prospective” values when calculating overtime from a MemberExternalFundDetail record, which this member does not have. 

!image-20260121-154234.png|width=669,alt=""image-20260121-154234.png""!

I’ve asked April whether this is a data issue or not.  If not, we’ll need to revisit how overtime is calculated.","22/Jan/26 1:42 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Following April’s comment on the linked ticket, confirming that we need to look at the “actual” values in this table, for both added years and overtime, I have amended transfer in calculator {{PublicSectorAddedYearsPurchased}} in Public Sector Calculation.

{{GetService()}} now uses the ActualAddedYears and Days if they are not null, otherwise it uses the ProspectiveAddedYears and Days as coded originally.

The “else if” iteration in the foreach loop now does this:

{noformat}// use actual added service if available
if (memberExternalFundDetail.ActualAddedYears != null || memberExternalFundDetail.ActualAddedDays != null)
{
    int yearsPurchased = memberExternalFundDetail.ActualAddedYears ?? 0;
    int daysPurchased = memberExternalFundDetail.ActualAddedDays ?? 0;
    periodAsDecimal = yearsPurchased + (daysPurchased / 365m);
}
// otherwise use prospective
else
{
    int yearsPurchased = memberExternalFundDetail.ProspectiveAddedYears ?? 0;
    int daysPurchased = memberExternalFundDetail.ProspectiveAddedDays ?? 0;
    periodAsDecimal = yearsPurchased + (daysPurchased / 365m);
}{noformat}

and the next “else” in that loop does this:

{noformat}decimal finalPeriodAsDecimal = 0;

// use actual added service if available
if (memberExternalFundDetail.ActualAddedYears != null || memberExternalFundDetail.ActualAddedDays != null)
{
    int actualYearsPurchased = memberExternalFundDetail.ActualAddedYears ?? 0;
    int actualDaysPurchased = memberExternalFundDetail.ActualAddedDays ?? 0;
     
    finalPeriodAsDecimal = actualYearsPurchased + (actualDaysPurchased / 365m);
}
// otherwise use prospective
else
{
    int potentialYearsPurchased = memberExternalFundDetail.ProspectiveAddedYears ?? 0;
    int potentialDaysPurchased = memberExternalFundDetail.ProspectiveAddedDays ?? 0;

    LocalDate startDateOfPurchase = memberExternalFundDetail.EffectiveFrom.Value;
  ///// ...
  ///// [original code pro-rating the prospective svc] /////
  ///// ...
    finalPeriodAsDecimal = proRatedYearsPurchased + (proRatedExactDays / 365m);{noformat}

No test cases at PSC knocked out which makes sense as we had just been ignoring the “Actual” figures previously","22/Jan/26 5:32 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;This has turned into a data query, as it turns out that this issue is actually in respect of Added Years and not overtime, and it seems overtime is getting recorded in two places, one of which is the same place that actual added years service gets recorded.

Attached email has been sent to Data and Admin teams.  It may be that a new data mapping is required.

This means that the code below will not work, as it duplicates overtime service for any members with “actual” figures rather than “prospective”.  I have ideas of solutions but it all depends on what data/admin teams come back with, so I’m blocked on this for now.

My code below caused tests to fail at A>R calc (which is how I realised there was a data issue) so I am going to reverse my changes in PSC until we know how to proceed.[^Public Sector Data Query - RE PHX5A-464 (PHX5-818).msg] ","23/Jan/26 2:13 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Okay a couple of things going on here, I’ll try to summarise it all in this comment.

*Overtime.*  This data is held under MemberAdditionalHistoryData and is calculated in the transfer calculator {{PublicSectorOvertime}}.  The data is also held in ExternalFundDetails (see attached email from Neil) with type ADDED_YRS

*Purchased added years.*  This data is held in ExternalFundDetails with type PERIODCONTS and LUMPSUMPAY.  It is calculated in the transfer calculator {{PublicSectorAddedYearsPurchased}}.  If the calculation date is before the contract due date, then the added service is to be pro-rated.

# *Overtime:*
## *Issue raised:* member 35220501 (linked ticket 464) was not getting 10 days of overtime service counted.
## *Reason for issue:* The overtime data is coming through from the ExternalFundDetails table, but not from the MemberAdditionalHistoryData table.  Neil has confirmed the data is coming through to Aurora in both, and I realised that MemberAdditionalHistoryData is only coming through to the calcs on the “main” member, not the “linked” one.  _Andrew has raised this with the devs._
## *Coding fix:* none.  _Devs fix requested._
## *Member testing:*  Test “UAT Ticket PHX5-818 No overtime service calculated” is currently failing as is not finding any data to calculate overtime on.  Replica test “UAT Ticket PHX5-818 No overtime service calculated (copy - members swapped)” has the same inputs but with the “main” and “linked” members swapped over.  It is passing on the same expected results, as the overtime data is found in the “main” member.  +_Both tests will pass following dev fix._+
# *Purchased added years:* (all changes in {{PublicSectorAddedYearsPurchased}} in PSC)
## *Initial issue raised:* on linked ticket 811, member 1993401 was not getting additional service from their added years contract.  An error message was received indicating a start or end date was missing from the data; I have tested on the same member and have not got that error, however no added years service is returned.
## *Reason for issue:* I don’t know about the error, as I can see both dates on the member input and am not getting the error myself.  Regarding the expected service however, this is because this member’s data is held in ActualAddedYears / Days fields, rather than in ProspectiveAddedYears / Days (which we currently calculate against).
## *Coding fix:*  I have amended the code to use Actual figures if available, Prospective figures otherwise, and to return a warning message if both Actual and Prospective are available. 
{noformat}// use actual added service if available
if (memberExternalFundDetail.ActualAddedYears != null || memberExternalFundDetail.ActualAddedDays != null)
{
    if (memberExternalFundDetail.ProspectiveAddedYears != null || memberExternalFundDetail.ProspectiveAddedDays != null)
    {
        // return a warning if both actual and prospective data is held. calc will run on actual data
        Log.Warning(""Added Service record has both prospective and actual service data.  Please check record."");
    }
    yearsPurchased = memberExternalFundDetail.ActualAddedYears ?? 0;
    daysPurchased = memberExternalFundDetail.ActualAddedDays ?? 0;
    periodAsDecimal = yearsPurchased + (daysPurchased / 365m);
}
// otherwise use prospective
else
{
    yearsPurchased = memberExternalFundDetail.ProspectiveAddedYears ?? 0;
    daysPurchased = memberExternalFundDetail.ProspectiveAddedDays ?? 0;
    periodAsDecimal = yearsPurchased + (daysPurchased / 365m);
}{noformat}
## *Member testing:*  “UAT Ticket 811” is for member 1993401 that admin tested against.  +This is expecting service from added years and is now passing.+
## *Further issues:*  my investigation on overtime highlighted some other issues with the added years calculator:
### we are calculating on all types of data in the table, not just added years; and
### we are not pro-rating the service in the correct instances. 
## *Reason for issues / coding fixes:*  
### There was no check on the fund type to determine whether the entry was for added years or for overtime.  I have now added this, to discount any overtime records.
{noformat}foreach (var memberExternalFundDetail in MemberExternalFundDetails.Where(m => m.ExternalFundType != ""ADDED_YRS"")){noformat}
### We were pro-rating the service when member +is+ ill-health AND when they are in 1987/1992 schemes, I am not sure why.  I have amended the code to pro-rate when the contract due date falls after the calculation date AND the member is +not+ ill-health. (So if the member _is_ ill-health, OR the contract due date has already passed, we do not pro-rate.) 
{noformat}if (IllHealth == IllHealthType.None && memberExternalFundDetail.DueDate > DateOfRetirement)
{
    InterimValuesLogger.AddWithLogging($""Added Service contract not completed. Added Service is pro-rated | AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", InterimValuesLogger.LoggingMode.BothInformation);
  ///// code then carries on with pro-rating logic. no changes there /////{noformat}
## *Member testing:* 
### Defensive coding so no member to show this, but test added at PSC level “TransferInFactory AddedPensionPurchased defensive check” that receives data type ADDED_YRS (overtime) so returns 0 service - +this is passing+.
### Existing PSC test “TransferInFactory _AddedPensionPurchased PPS1987 ill health” had been set up to ensure no pro-rating for ill-health member, however the data used meant that the pro-rated figures = the full figures, so it was erroneously passing.  I have amended the data so that it fails without my code change, and +is currently passing+.

Additionally, at client level, “Police A>R Test 28 PPS Added 60ths” had been baselined against earlier results, and failed following my code updates.  This is expected, as this member has added years, so I have therefore updated the expected results to match the new ones - +now passing+.","28/Jan/26 10:13 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] I have retested this in the front end post Dev fix but the reckonable service for Legacy is still calculating at 25 years and 112 days.

!image-20260128-101213.png|width=874,alt=""image-20260128-101213.png""!

!image-20260128-101257.png|width=874,alt=""image-20260128-101257.png""!","29/Jan/26 2:03 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;The reason this table wasn’t coming through on “main” members was because the code to map across MemberAdditionalHistoryData was incomplete.  A few minor changes made in MemberData and ModelConversion modules, which now allows for this table in both main and linked members.  Please review long comment below from last week for full details of original investigation and changes.

(Worth noting that this addn history table is referred to as both MemberAdditionalHistoryData and AdditionalHistoryData.  Not sure if this is dev wording or something we can change BUT the affected test cases are all passing so I’m not worried about it.)",02/Feb/26 11:33 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Admin retested and happy that this is now working as expected.  Ticket can be closed,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,02/Feb/26 11:33 AM
D>R Validation,PHX5-817,21857,Story,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,,,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,15/Jan/26 11:53 AM,12/Feb/26 10:44 AM,,,,,,,,,,,,,,,0,,,,,Review Police D>R validation - I think this will currently go through the same validation as the A>R but this may not be appropriate or there may be additional conditions to add,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2d49ee8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi000h,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,"16/Jan/26 9:27 AM;640f34fc1273131f2adfede9;Concerns were around the PPS1987 conditions. Looking at the code more and the conditions for the due dates given in A to D I think it’s not far off.

Concerns are - members where their due date is their 50th birthday - date of retirement has to be the day before their 50th birthday? Not currently covered

Members where their due date is their 60th birthday - date of retirement has to be the day before their 60th birthday? Not currently covered

Line 104 of the PPS1987 D>R spec suggests lower tier ill-health retirement is only available under age 55 - is this correct? - had a reply on this on another ticket. Lower tier ill-health is available over age 55 but uses category A for calculating lump sum so no change needed for this part",,,,,,,,,,,,,,,,,,,,,,,,14400,PHX5-294,Police - Deferred to Retirement,To Do,15/Jan/26 11:53 AM
Police D>R - Calculation of PCLS for Pension Credit Members,PHX5-816,21824,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,15/Jan/26 11:22 AM,20/Jan/26 10:57 AM,,20/Jan/26 9:01 AM,Client 184 Police D to R Version 5,,,,,,,,,,,,0,,,,,A PPS 1987 pension credit member cannot retire before age 60 (unless in serious ill health) however the code needs amending to allow retirement where DOR is the day before the 60th birthday (as per the change made in A>R).  Is it possible to change the criteria and warning for Pension credit members (identified by sub status) to not make any reference to service but just a straight unable to retire under the age of 60.  Example member ID 81060 ,,Andrew Wilson,Russell Armstrong,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,PHX5-837,,PHX5-778,,,,,PHX5A-332,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@77ac4933,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zzzx,,,Changes to calculation of lump sums for Police 1987 Pension Credit members to match the specification,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 29,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-15 11:22:37.855,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_83046309_*|*_10252_*:*_1_*:*_62535_*|*_10354_*:*_1_*:*_4492_*|*_10056_*:*_1_*:*_339306079,,15/Jan/26 11:22 AM;640f34fc1273131f2adfede9;Error they are seeing comes from MaxLumpSum in Public Sector Functions. [https://xps-jira.atlassian.net/browse/PHX5-681|https://xps-jira.atlassian.net/browse/PHX5-681|smart-link] will mean changes or a different version of this,"15/Jan/26 11:22 AM;640f34fc1273131f2adfede9;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] can you confirm with admin what category Pension Credit members fall into for lump sum calculations? I believe it’s category A as their Pension Due Date on the Deferred Elements is their 60th birthday so they are not an immediate retirement and Deferred Age = 60

{adf:display=block}
{""type"":""table"",""attrs"":{""isNumberColumnEnabled"":false,""layout"":""center"",""localId"":""6f068d00-0692-494e-84f7-d73539fcd8bb""},""content"":[{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":6},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Commutation options (DB element)""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Name""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Description""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Further comments""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Ill health (unfit for all employments)""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = A""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Ill health (unfit for police work)""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = C""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""For this, member must be under age 55""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Immediate ret = Y, Service>=30, age at dor >=55""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = A""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Immediate ret = Y, Service>=30, age at dor <55""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = C""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Immediate ret = Y, Service>=25 and <30, age at dor >=55""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = A""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Immediate ret = Y, Service>=25 and <30, age at dor >=50, <55""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = B""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Immediate ret = N, Deferred age = 60""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = A""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Immediate ret = N, Deferred age = 50""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = B""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]}]}
{adf}","15/Jan/26 11:22 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:640f34fc1273131f2adfede9] 

Selina has confirmed that pension credit members don’t fit into any of those categories. The [spec|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQD39QisIdBlQKmY-tI7BZZ5Acq-tEffzydDRG8pRbFbAUI?e=hS4xSN] contains a ‘Pension Credit Members’ sheet I hadn’t noticed. There you’ll find ‘DB_PenCredit_LS’. Does this give you enough information?",15/Jan/26 11:22 AM;640f34fc1273131f2adfede9;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] They haven’t got an input for DB_PenCredit_LumpSum_1987_Eligibility - I’ll be able to do something but it will just assume they are all eligible for lump sum,"15/Jan/26 11:22 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:640f34fc1273131f2adfede9] , as discussed I’m checking which these admin want to go with and have asked for an answer asap

(a) calculate lump sum for pension credit members in all cases (b) output zero for these members","15/Jan/26 11:22 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:640f34fc1273131f2adfede9] , admin has confirmed that they want the lump sum to be calculated in all cases for pension credit members.",19/Jan/26 9:03 AM;640f34fc1273131f2adfede9;Changes needed to NeedAdditionalCommutationFactor and DeferredMaxLumpSum?,"19/Jan/26 11:04 AM;640f34fc1273131f2adfede9;Change made to NeedAdditionalCommutationFactor to add 

{noformat}if (subStatus == InferredSubStatus.PensionCredit)
                    {
                        return false;
                    }
                
                else{noformat}

In DeferredMaxLumpSum added 

{{subStatus == InferredSubStatus.PensionCredit ||}} to the beginning of the if statement that goes to the capped lump sum.

Test cases Need Additional Commutation Factor 10 and Deferred Max Lump Sum 7 added

Changes not published as going into a change freeze on S2 tickets",19/Jan/26 1:34 PM;640f34fc1273131f2adfede9;Need to look at 2006 members - lump sum is 4 * pension and no commutation required - will need new pension option strategies and changes to pension option factory. Can’t take a chosen value less than the maximum? Would be pointless as not commutation required?,20/Jan/26 8:39 AM;640f34fc1273131f2adfede9;[https://xps-jira.atlassian.net/browse/PHX5-837|https://xps-jira.atlassian.net/browse/PHX5-837|smart-link] created to look at PPS2006 members separately,"20/Jan/26 8:41 AM;640f34fc1273131f2adfede9;Changes made to {{SchemeMaximumDBPensionOptionStrategy}}, {{PCLSDeferredDBPensionOptionStrategy}} and {{SchemeMaximumDBDeferredPensionOptionStrategy}} to pass  MemberInfo.SubStatus into the relevant functions. Additional test added for each of these to test Pension Credit member","20/Jan/26 8:59 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;One to clean up later, but we are already passing in memberINfo to {{DeferredMaxLumpSum}}, so no need to separately pass in sub status. We can just use memberInfo.SubStatus.",,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,20/Jan/26 9:01 AM
Fire A-D: Incorrect accrual rate for 2006 Retained Member,PHX5-815,21821,Story,Ready for UAT,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,15/Jan/26 10:10 AM,05/Feb/26 2:13 PM,,,Client 185 Fire A to D Sprint 32,Client 185 Fire A to R Sprint 32,Client 185 Fire Partial Ret Sprint 32,,,,,,,,,,0,MyPension,,,,,,Annabelle Stephenson,Matt Lilwall,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,PHX5A-467,,,,,,,,,20/Jan/26 9:52 AM;18934601-32fa-4c76-9b74-159dc94fd206;image-20260120-095158.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15770,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@13db4983,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snq:i,,,Fire Modified Retained members will get accrual rate 1/60th.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 32,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-20 09:52:14.362,,,15/Jan/26 10:10 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Please see linked ticket for further details,"20/Jan/26 9:52 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;One line change in public sector calculation module.  Move the “NFPS2006RET” case in {{AccruedPensionCalculatorFactory}} as per below:

!image-20260120-095158.png|width=588,alt=""image-20260120-095158.png""!","05/Feb/26 1:35 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Change made as per below (currently at line 5519 in PSC).  Test case “UAT test 815” on Fire A>D calc is now passing, checking on an interim value confirming the accrual rate.",,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,In Progress,05/Feb/26 10:55 AM
Update Pension Option code to deal with case where Max cash is chosen,PHX5-814,21787,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,15/Jan/26 8:34 AM,15/Jan/26 8:37 AM,,,,,,,,,,,,,,,0,,,,,"For CARE - we should actually have three pension options:

# zero cash
# Max tax free cash - this would be minimum of PCLS and lsa
# Max cash - the maximum with no lsa restriction

We currently do 1 and 3 (agreed with Iain this is correct to do for now)

We had created pension option names to tie in with the DB maximum choice (for when a member chooses maximum cash, and we need to pass the lsa down the line), so we can reuse these (with perhaps a rename) to deal with this.

LSA code deals with these, but we have not yet updated pension option code to create these pension options.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@22c291e4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00s13:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,16739,PHX5-655,Target Lump Sum,To Do,15/Jan/26 8:34 AM
Fire A-D: PYRV element writeback issue,PHX5-813,21721,Story,BLOCKED,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,14/Jan/26 2:28 PM,12/Feb/26 1:35 PM,,,Client 184 Police A to D Sprint 32,Client 185 Fire A to D Sprint 32,,,,,,,,,,,0,,,,,Please see linked ticket for details.,,Annabelle Stephenson,Matt Lilwall,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,PHX5A-451,,,,,,PHX5-888,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1fe7168f,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snp:,,,"Any PYRV due beyond the date of deferment will not be calculated within the deferment process.  The CARE element returned will be the “base” CARE accrued up to date of deferment only.

[Please note there is another outstanding ticket to deal with calculating PYRV.  That has not been accounted for here.]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 32,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-20 15:57:58.0,,,"20/Jan/26 3:57 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Possible solution to this but might need its own public sector strategy rather than amending {{DefaultRunningTotalsStrategy}} as presumably that could impact all other clients?

To be clear, the issue is not in the way any of the CARE elements are calculated, but in the final figures stored and returned.  Additionally, this only affects +retrospective active to deferred+ calculations, where DOL was in the previous tax year for which we now have an available inflation rate.  Admin are requesting that the TotalPension figure returned for that final care period only includes any inflation accrued _up to the date of leaving_.  This means that “previous inflation” that would usually get calculated at the CARE year end, should not be included in TotalPension.

Potential code change as follows:

{noformat}public virtual List<MemberCareCalc> CalculateCARERunningTotals(List<MemberCareCalc> MemberCare, CAREPeriod carePeriod)
{
    List<MemberCareCalc> sortedMemberCare = MemberCare.OrderBy(x => x.EffectiveFrom).ToList();

    decimal RollingTotal = sortedMemberCare.Where(x => x.IsNew == false).Select(x => x.TotalPension).DefaultIfEmpty(0).Last();

    for (int i = 0; i < sortedMemberCare.Count; i++)
    {
        // identify the current and previous care histories
        var CareHist = sortedMemberCare[i];
        var previousCareHist = i > 0 ? sortedMemberCare[i - 1] : null;

        // continue with calculating inflation as normal
        if (CareHist.IsNew || CareHist.SalaryOnly())
        {
            if (CareHist.InflationRate > 0)
            {
                CareHist.PreviousInflation = (RollingTotal * (CareHist.InflationRate / 100)).Round(2);
            }
            else
            {
                CareHist.PreviousInflation = 0;
            }

            RollingTotal = (RollingTotal + CareHist.PreviousInflation + CareHist.PeriodPension + CareHist.AccruedInflation).Round(2);
            
            // determine whether the current CareHist is a partial period
            bool isPartialPeriod = false;

            // we only want to consider this on the final care period
            if (previousCareHist != null && i == sortedMemberCare.Count - 1)
            { 						
                LocalDate fullPeriodEndDate = new LocalDate();

                switch (carePeriod)
                {
                    case CAREPeriod.Yearly:
                        fullPeriodEndDate = previousCareHist.EffectiveTo.Value.PlusYears(1);
                        break;
                    case CAREPeriod.Monthly:
                        fullPeriodEndDate = previousCareHist.EffectiveTo.Value.PlusMonths(1);
                        break;
                }

                isPartialPeriod = fullPeriodEndDate != CareHist.EffectiveTo;												
            }
            
            // if not a full period, then we do not want to include the PYRV in the total pension. it will still exist under PreviousInflation however
            CareHist.TotalPension = isPartialPeriod ? RollingTotal - CareHist.PreviousInflation : RollingTotal;
        }
    }

    return sortedMemberCare;
}{noformat}

This change would mean bringing CAREPeriod into each of the {{CalculateCARERunningTotals}} calcs in the various running total strategies.  I found 7 instances in CARE module that would need updating, but I think the rest of the changes are isolated within the actual function itself.

I do think this ticket is technically ready, but probably a conversation needed with Andrew to confirm whether we want a new strategy for this.","05/Feb/26 4:06 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I’ve made changes in VS that I’m happy with, but PYRV does not get returned as its own element. Waiting on admin response on the linked ticket before I confirm my changes.","06/Feb/26 10:54 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;see linked ticket 888 - admin have confirmed that we need a nil-value PYRV element that will be used in retirement/PINCs process, so I am proceeding on this basis.  This means I want to return the CARE element (excluding PYRV) only.","11/Feb/26 11:15 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;As per linked ticket 888, PYRV needs its own element created.  I have therefore just made amends that will return the ‘base’ CARE figures without any PYRV beyond date of deferment.

Test case “UAT test 813” in Fire A>D set up for this, which is now passing on the CARE element value.  “UAT Member - 5032603” is a near replica of this test, which had been baselined on previous figures, but is now matching the prints we had from admin. I’ve updated all client calcs with tests to latest PSC and nothing else knocked out by this.

+Code change in CARE module:+

New strategy {{PublicSectorRunningTotalsStrategy}} created, very similar to the existing {{DefaultRunningTotalsStrategy}} but it only applies inflation where the CARE period is ‘complete’.

{noformat}public class PublicSectorRunningTotalsStrategy : IRunningTotalsStrategy
{
    public CAREPeriod CAREPeriod { get; set; }

    public PublicSectorRunningTotalsStrategy(CAREPeriod carePeriod)
    {
        CAREPeriod = carePeriod;
    }

    public virtual List<MemberCareCalc> CalculateCARERunningTotals(List<MemberCareCalc> MemberCare)
    {
        List<MemberCareCalc> sortedMemberCare = MemberCare.OrderBy(x => x.EffectiveFrom).ToList();

        decimal RollingTotal = sortedMemberCare.Where(x => x.IsNew == false).Select(x => x.TotalPension).DefaultIfEmpty(0).Last();

        for (int i = 0; i < sortedMemberCare.Count; i++)
        {
            // identify the current and previous care histories
            var CareHist = sortedMemberCare[i];
            var previousCareHist = i > 0 ? sortedMemberCare[i - 1] : null;

            // continue with calculating inflation as normal
            if (CareHist.IsNew || CareHist.SalaryOnly())
            {
                // determine whether the CareHist is a partial period
                bool isPartialPeriod = false;

                LocalDate fullPeriodEndDate = new LocalDate();

                switch (CAREPeriod)
                {
                    case CAREPeriod.Yearly:
                        fullPeriodEndDate = previousCareHist.EffectiveTo.Value.PlusYears(1);
                        break;
                    case CAREPeriod.Monthly:
                        fullPeriodEndDate = previousCareHist.EffectiveTo.Value.PlusMonths(1);
                        break;
                }

                isPartialPeriod = fullPeriodEndDate != CareHist.EffectiveTo;

                // calculate inflation for all complete CARE periods
                if (!isPartialPeriod)	
                {
                    if (CareHist.InflationRate > 0)
                    {
                        CareHist.PreviousInflation = (RollingTotal * (CareHist.InflationRate / 100)).Round(2);
                    }
                    else
                    {
                        CareHist.PreviousInflation = 0;
                    }
                    RollingTotal = (RollingTotal + CareHist.PreviousInflation + CareHist.PeriodPension + CareHist.AccruedInflation).Round(2);
                }
                // if partial period, no inflation included
                else
                {
                    // for consistency, i'm setting accrued inflation to 0 so that the TotalPension correctly reflects the sum of accrued CARE to date
                    CareHist.AccruedInflation = 0;
                    RollingTotal = (RollingTotal + CareHist.PeriodPension).Round(2);
                }
                 
                CareHist.TotalPension = RollingTotal;
            }
        }
        return sortedMemberCare;
    }
}		{noformat}

+Code changes in CARE Builder:+

Carrying through from the CARE module, we need a public sector specific builder that will use the new running totals strategy.

{noformat}public CAREBuilder WithPSCAREMethod(CAREMethod careMethod, CAREPeriod carePeriod)
{
    if (CARECalculation.InflationStrategy is null)
    {
        Log.Error(""care inflation needs to be set before CARE method"");
    }
     
    CARECalculation.CAREMethod = new BuilderCARETemplate(CARECalculation.InflationStrategy);
    CARECalculation.CAREMethod.CreateMemberCAREListStrategy = new DefaultCreateMemberCAREListStrategy();
    CARECalculation.CAREMethod.ValidateStrategy = new DefaultValidateStrategy();
    CARECalculation.CAREMethod.RunningTotalsStrategy = new PublicSectorRunningTotalsStrategy(carePeriod);


    switch (careMethod)
    {
        case CAREMethod.SalariesFromCARE:

            CARECalculation.CAREMethod.CreateMemberCAREListStrategy = new CARESalaryOnlyCreateMemberCAREListStrategy();
            CARECalculation.CAREMethod.ValidateStrategy = new SkipValidateStrategy();
            break;
        default:
             
            break;
    }

    return this;
}	{noformat}

(This is identical to {{WithCAREMethod}} we were previously using, except for the running totals strategy.)

+Coding change to PSC:+

Just one line in {{PublicSectorCARECalculationFactory}} to call the PSCAREMethod.

{noformat}  careBuilder
      .WithPSCAREMethod(CAREMethod.Default, CAREPeriod.Yearly){noformat}","12/Feb/26 12:28 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;*Update following conversation with Andrew 12/02:*

I am reverting back to calling .WithCAREMethod in PSC rather than the new .WithPSCAREMethod, so there will be no changes to results.  A wider conversation with admin regarding how we deal with PYRV and PINCs is needed.

So the changes I have made to the CARE modules are still present, and if we decide in future to continue down this route, we can point back to .WithPSCAREMethod.

(Note that a lot of test case results need updating with this change, so if we do go back to PS method, all the client calc dependencies need updating and results reviewed.)",,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,To Do,12/Feb/26 1:35 PM
Police AA: Writeback issue,PHX5-812,21687,Story,Dev required,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,14/Jan/26 11:05 AM,04/Feb/26 2:32 PM,,,,,,,,,,,,,,,0,,,,,Please see details on linked ticket. There is an issue when writing back AA results to the Active Salary linkage closed DB record.,,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,PHX5A-466,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@389a172f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00003l,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-21 08:33:27.92,,,"21/Jan/26 8:33 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;One to run by the devs first. If we are producing results, then it is a question of why the front end is not writing these back. It could still ultimately be because we are not providing something in the correct format, but we cannot know what is wrong until devs investigate.","26/Jan/26 1:54 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Looking at ActiveToRetiredResult, there is a new property:

{{public Dictionary<string, List<MemberFinalPensionableSalaryOutput>> FinalPensionableSalaries { get; set; } = new();}}

So it looks like we are being expected to populate this per member (where string here is auroraID).

There is no code that currently does this. Should be a fairly quick win to add this at the client level.",27/Jan/26 10:26 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Ignore this - wrong calc type - although possible an issue on A to R.,04/Feb/26 2:32 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Raised with Phil that dev need to take an initial look at this,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,To Do,14/Jan/26 11:05 AM
Police A-R: Added Years service not being included,PHX5-811,21686,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,14/Jan/26 10:44 AM,27/Jan/26 12:35 PM,,26/Jan/26 11:44 AM,Client 184 Police A to R Version 15,,,,,,,,,,,,0,,,,,"Added Years not being included in service calculation. The producing the following warning:

!image-20260114-105208 (3992538a-c1c9-4e00-94c4-c2d152ee520c).png|width=1198,alt=""image-20260114-105208.png""!

Based on the data I’m not sure what’s triggering this. Please could you debug and confirm. Further details in linked ticket.",,Andrew Wilson,Annabelle Stephenson,Chris Marshall,Matt Lilwall,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,PHX5A-465,PHX5-818,,,,,PHX5-860,,,14/Jan/26 10:55 AM;862ca789-6c5f-4d0a-b054-60929f0a27a7;image-20260114-105208 (3992538a-c1c9-4e00-94c4-c2d152ee520c).png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15421,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@afdcdc8,,,,,,,,,,,,,,,,,,,,Confirm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y01,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 29,PHX5 Sprint 30,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-22 14:59:19.054,10281_*:*_1_*:*_2816_*|*_10251_*:*_3_*:*_57597822_*|*_10250_*:*_3_*:*_570782606_*|*_10253_*:*_1_*:*_241091842_*|*_10252_*:*_2_*:*_8490_*|*_10354_*:*_2_*:*_330882_*|*_10056_*:*_1_*:*_168206038,,"22/Jan/26 2:59 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Added to {{PublicSectorAddedYearsPurchased : BaseTransferInServiceCalculator, ITransferInServiceCalculator}}

{noformat}                    if ((memberExternalFundDetail.ActualAddedYears ?? 0) > 0 || (memberExternalFundDetail.ActualAddedDays ?? 0) > 0)
                    {
                        int yearsPurchased = memberExternalFundDetail.ActualAddedYears ?? 0;
                        int daysPurchased = memberExternalFundDetail.ActualAddedDays ?? 0;
                        decimal periodAsDecimal = yearsPurchased + (daysPurchased / 365m);
   
                        additionalFinalService += periodAsDecimal;
                    }
                   
                    else if (memberExternalFundDetail.EffectiveFrom == null || memberExternalFundDetail.EffectiveTo == null){noformat}

the additional pension purchased is now included in

{{return new ElementValue { Key = AccruedPensionKey, Value = grossPension + additionalPensionPurchased };}}",23/Jan/26 6:41 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Looks like the change was accidentally reversed out.,"23/Jan/26 12:36 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I’m still unsure what the original change Chris made was, or why they were getting this error, but with my changes from linked ticket 818, this test at A>R level is running with no errors, and returning an added service value.

There were a couple of issues with the added years calculation that I identified while looking at ticket 818, all of which are covered in comments there.  I therefore think this has been resolved within my changes and nothing further required on this ticket.

I added a couple of expected results to test UAT Ticket 811 - passing.","26/Jan/26 11:04 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Update to add: additional expected results added to UAT Ticket 811, to show that service from added pension is used to calculate additional pension",,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,26/Jan/26 11:44 AM
Police client 184 failing tests to investigate,PHX5-810,21653,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,,,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,14/Jan/26 9:49 AM,06/Feb/26 4:27 PM,,06/Feb/26 4:27 PM,,,,,,,,,,,,,0,,,,,"A>R
test _GAD conts _reform PPS1987

A>D
Police A>D Test 12
Police A>D Test 14

D>R
LSA _RBCEs and UPs _reform DB and CARE
UAT 776 - Tax Free cash

AA
Annual Allowance Template - Test Case 4 - 10644102 - CARE only, SchemePays
Annual Allowance Template - Test Case 5 and 10 - 35237601/ 35237602 With CARE (Spec: 1987 Ill Health)",,Andrew Wilson,Annabelle Stephenson,Chris Marshall,Russell Armstrong,Steven Wright,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,640f34fc1273131f2adfede9,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@388202b9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-14 10:10:18.848,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_2011070519,,"14/Jan/26 10:10 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;test _GAD conts _reform PPS1987

Data difference is that we now have inputs for MemberAnnualAllowances on Member object that we didn’t before.

The linked member in 176 has a lot more rows in MemberMcCloudTaxContributions, however, these rows are not on the database, so can only assume they were added manually",14/Jan/26 11:27 AM;640f34fc1273131f2adfede9;UAT 776 - Tax Free cash - no expected values set up in 176 but they are in 184 - have copied Member JSON and the Logs into Excel and compared and they are identical - need to look at this as scheme ID is throughout the Member object and should be different between the two clients?,"14/Jan/26 11:50 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:640f34fc1273131f2adfede9] Scheme ID will be different, so would expect that to have changed.","14/Jan/26 12:02 PM;640f34fc1273131f2adfede9;LSA _RBCEs and UPs _reform DB and CARE has an additional element of MCPY on the Linked Member but don’t think this is used as not anywhere in Public Sector Constants

Client 176 has the McCloud section on the member record for the Linked Member - this is not present on client 188. This doesn’t appear to have been added manually on 176 as shows updated by Aurora Import - this could impact on GAD contributions owed - this doesn’t impact on results being output - data isn’t showing in front end but has loaded in Calculate.

Expected Values are not the same between the two clients - output for client 184 matches client 176 but expected values are different","14/Jan/26 1:38 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Police A>D Test 12 and 14, needed to remove latest Care line from data and that caused some of the failing outcome value tests to pass again. Down to 2 outcome values failing on test 12 and 1 on 14. (No change since move from client 176).",06/Feb/26 2:38 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] do you know if this one can be closed now?,06/Feb/26 2:44 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] Yes this can be closed now,,,,,,,,,,,,,,,,,,,,,Done,06/Feb/26 4:27 PM
Police A-R: Rounding issue with commuted pension,PHX5-809,21554,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,13/Jan/26 2:48 PM,26/Jan/26 3:57 PM,,26/Jan/26 3:57 PM,,,,,,,,,,,,,0,,,,,Please see linked ticket for further details.,,Annabelle Stephenson,Matt Lilwall,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,PHX5A-463,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1cbe1550,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000000i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-26 11:31:30.8,10252_*:*_1_*:*_0_*|*_10354_*:*_1_*:*_1387227_*|*_10056_*:*_1_*:*_1109977225,,"26/Jan/26 11:31 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Looking at the figures on admin’s linked ticket, I think these unrounded values were coming from the {{LumpSumAfterTax}} function in Public Sector Functions, which is no longer being used following changes to PCLS/LSA code.

I do not see any unrounded values in our results so I think we can close this / send back for re-testing. (Leaving as “ready” in case anyone disagrees)","26/Jan/26 3:56 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;in fact i’ve just seen that admin have commented on the linked ticket saying they have successfully re-tested this and its resolved, so i’m closing",,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,26/Jan/26 3:57 PM
Refactor Police D>R calculation,PHX5-808,21483,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,13/Jan/26 11:04 AM,13/Jan/26 11:05 AM,,,,,,,,,,,,,,,0,,,,,"There is a lot of repetition throughout the D>R calculation code (on Police specifically, however this could apply to more / all of the client level calcs)",,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3131c832,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rz3:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,20602,PHX5-773,TECHNICAL DEBT,To Do,13/Jan/26 11:04 AM
Fire retirement calcs: error message member inputs,PHX5-807,21449,Story,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,13/Jan/26 9:51 AM,03/Feb/26 4:39 PM,,,,,,,,,,,,,,,0,,,,,"Refer to linked ticket 781.  The same fixes applied for Police D>R need applying to each of the Fire retirement calculations.  These are to reflect that the calculation inputs may not always include one normal member and one salary linked member.  *However, this may be more complicated on Fire where there is the possibility of retained members - not yet sure how that will work.*

We need to confirm with admin all of the possible member input combinations for the fire retirement calcs, making them aware that Partial Retirement is its own calc.  We will need to set up tests for each of these and confirm no errors. 

We may want to replicate some of the structural changes made to Police D>R (under ticket 781) depending on admin response.",,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,PHX5-781,,,,,,,,,03/Feb/26 1:51 PM;18934601-32fa-4c76-9b74-159dc94fd206;Fire retirement calculations - member input query.msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16985,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3a42a651,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vir,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,13/Jan/26 10:10 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Readiness review: we need to raise the relevant questions with admin team,"13/Jan/26 11:03 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;A list of member input scenarios has been sent to Tracy to test and report back on any errors.  If no errors, then potentially no further code changes required at this stage","03/Feb/26 1:51 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[^Fire retirement calculations - member input query.msg]

input query to admin",,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,To Do,13/Jan/26 9:51 AM
Police A>R: error message member inputs,PHX5-806,21448,Story,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,13/Jan/26 9:50 AM,03/Feb/26 3:50 PM,,,,,,,,,,,,,,,0,,,,,"Refer to linked ticket 781.  The same fixes applied for Police D>R need applying for Police A>R (separate ticket created for Fire).  These are to reflect that the calculation inputs could be just one active normal member, or just one active salary linked.

Changes required in ModelConversion {{ActiveNormalMemberData}} and {{ActiveSalaryLinkedMemberData}} to ensure that only active member data is returned, either CARE (normal) or DB (salary linked).  (See the structure of the equivalent deferred functions.)

Changes required in PublicSectorMemberInfo {{ActiveNormalMemberInfo}} and {{ActiveSalaryLinkedMemberInfo}} again to ensure only active member info is returned, correctly assigned to either the normal or salary linked member depending on CARE/DB.

Changes +_may_+ be required in A>R calculation as per the changes made to D>R in ticket 781.  However we need to consider what the Partial Retirement calc will cover, and whether all the same re-structuring is necessary here.

In other words, we need to know what combinations of member inputs should be expected for A>R calc, vs what could be expected on Partial Retirement calc.",,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,PHX5-781,,,,,,,,,03/Feb/26 3:50 PM;18934601-32fa-4c76-9b74-159dc94fd206;ActiveToRetiredResult.json;https://xps-jira.atlassian.net/rest/api/3/attachment/content/17084,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@211278ec,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vii,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,"13/Jan/26 10:04 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Readiness review as we need to check the expected inputs with admin, highlighting that A>R and partial retirement calcs are separate.",13/Jan/26 11:02 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;List of member input scenarios has been sent to Tracy for her to test and report on any errors.  The result of this could mean no coding changes are required.,"03/Feb/26 2:21 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Isobel confirmed A>R inputs can include:

* an active CARE (normal) membership and an active DB (salary linked) membership (the standard case)
* active CARE and deferred DB (only CARE results returned)
* active CARE and pensioner or exit DB (only CARE results returned)
* active CARE only

Therefore we do need to replicate the changes made for D>R in A>R, but right now for Police only as I am querying Fire separately (expecting more possibilities due to the ‘special’ membership type).



+Coding changes required in PublicSectorMemberInfo+ (easier to just show entire function to copy and paste in, rather than the numerous tweaks):

{noformat}public static IMemberInfo ActiveNormalMemberInfo(Member member, Dictionary<string, LinkedMemberData> linkedMembers, string schemeType)
{
    if (linkedMembers != null)
    {
        foreach (KeyValuePair<string, LinkedMemberData> linkedMember in linkedMembers)
        {
            if (linkedMember.Value.Category.Contains(""CARE"") && linkedMember.Value.InferredStatus == InferredStatus.Active)
            {
                return new PublicSectorMemberInfo(linkedMember.Value, linkedMember.Key, schemeType);
            }
        }
    }
    if (member.CurrentCategory.Category.Key.Contains(""CARE"") && (member.CurrentStatus == InferredStatus.Active))
    {
        return new PublicSectorMemberInfo(member, schemeType);
    }
    else
    {
        return null;
    }
}

public static IMemberInfo ActiveSalaryLinkedMemberInfo(Member member, Dictionary<string, LinkedMemberData> linkedMembers, string schemeType)
{
    if (linkedMembers != null)
    {	
        foreach (KeyValuePair<string, LinkedMemberData> linkedMember in linkedMembers)
        {
            if (!linkedMember.Value.Category.Contains(""CARE"") && linkedMember.Value.InferredSubStatus == InferredSubStatus.SalaryLinkageClosedDB)
            {
                return new PublicSectorMemberInfo(linkedMember.Value, linkedMember.Key, schemeType);
            }
        }
    }

    if (!member.CurrentCategory.Category.Key.Contains(""CARE"") && member.CurrentSubStatus == InferredSubStatus.SalaryLinkageClosedDB)
    {
        return new PublicSectorMemberInfo(member, schemeType);
    }
    else
    {
        return null;
    }	
}{noformat}



+Changes in ModelConversion+ (as above, showing full functions for copying in):

{noformat}public static MemberData ActiveNormalMemberData(Member member, Dictionary<string, LinkedMemberData> linkedMembers)
{   
    if (linkedMembers != null)
    {
        foreach (KeyValuePair<string, LinkedMemberData> linkedMember in linkedMembers)
        {
            if (linkedMember.Value.Category.Contains(""CARE"") && linkedMember.Value.InferredStatus == InferredStatus.Active)
            {
                var originalDataLinked = linkedMember.Value.ToMemberData();
                return NormaliseMemberData(originalDataLinked);

            }
        }
    }

    if (member.CurrentCategory.Category.Key.Contains(""CARE"") && member.CurrentStatus == InferredStatus.Active)
    {
        var originalData = member.ToMemberData();    
        return NormaliseMemberData(originalData);
    }
    else
    {
        return null;
    }				
}

public static MemberData ActiveSalaryLinkedMemberData(Member member, Dictionary<string, LinkedMemberData> linkedMembers)
{
    List<ServiceBreak> serviceBreaks = member.ServiceBreaks?.ToList() ?? new List<ServiceBreak>(); //member.ServiceBreaks.ToList();	// select the service breaks from the active record
     
    if (linkedMembers != null)
    {
        foreach (KeyValuePair<string, LinkedMemberData> linkedMember in linkedMembers)
        {
            if (linkedMember.Value.InferredSubStatus == InferredSubStatus.SalaryLinkageClosedDB && linkedMember.Value.InferredStatus == InferredStatus.Active)
            {
                MemberData salaryLinkMember = linkedMember.Value.ToMemberData();    // create the salary-linked member data
                salaryLinkMember = NormaliseMemberData(salaryLinkMember);           // make sure null values for lists are now empty lists
                salaryLinkMember.ServiceBreaks.AddRange(serviceBreaks);             // add the serviceBreaks list from the active record

                return salaryLinkMember;
            }
        }
    }

    if (member.CurrentSubStatus == InferredSubStatus.SalaryLinkageClosedDB && member.CurrentStatus == InferredStatus.Active)
    {
        var originalData = member.ToMemberData();    
        return NormaliseMemberData(originalData);
    }
    else
    {
        return null;
    }				
}{noformat}



+Changes in Police A>R:+

See attached json file with the code to replace the current {{ActiveToRetiredResult Calculate()}} function.  There is a lot of re-ordering to do so again I’ve just included the whole function.  400 ish lines which is why I’ve not just pasted into the comment.[^ActiveToRetiredResult.json] 



We don’t have test cases set up specifically for these changes, but all of the existing cases continuing to pass should be sufficient to know our changes are okay.",,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,To Do,13/Jan/26 9:50 AM
Police A-R LSA outputs on settlement,PHX5-805,21447,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,,,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,13/Jan/26 9:36 AM,23/Jan/26 10:11 AM,,23/Jan/26 10:11 AM,,,,,,,,,,,,,0,,,,,,,Tracy Collins,,,,,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-331,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@12b17700,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002xi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_866126686,,23/Jan/26 10:11 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Admin have confirmed that the DB issue has been fixed.  Therefore I am closing this one to keep us in sync.,,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,23/Jan/26 10:11 AM
Fire A-R: Ill Health Higher Tier Enhancement not being applied,PHX5-804,21446,Story,BLOCKED,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,Russell Armstrong,640f34fc1273131f2adfede9,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,13/Jan/26 9:22 AM,09/Feb/26 2:07 PM,,,,,,,,,,,,,,,0,,,,,"AuroraID 52450202 is a calc that’s been run as ill health higher tier. The IllHealthHigherTierEnhancement_2015 is not being included in the member’s service.

!image-20260113-093004.png|width=1019,alt=""image-20260113-093004.png""!

See linked ticket for further details.",,Andrew Wilson,Annabelle Stephenson,Matt Lilwall,Russell Armstrong,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,PHX5-616,,PHX5-749,,PHX5A-391,,,,,,,,,13/Jan/26 9:31 AM;862ca789-6c5f-4d0a-b054-60929f0a27a7;image-20260113-093004.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15299,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@67190e27,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snq:v,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 32,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-13 09:35:56.614,,,13/Jan/26 9:35 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Should be fixed by [https://xps-jira.atlassian.net/browse/PHX5-749|https://xps-jira.atlassian.net/browse/PHX5-749|smart-link] ,26/Jan/26 1:13 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Comment added to linked ticket asking admin to re-test.  Can close this once they’ve confirmed,02/Feb/26 4:00 PM;640f34fc1273131f2adfede9;I don’t think this will be resolved by 749. The Pre Commutation Specifications for FPS and PPS show different enhancements for FPS to PPS. I think the calculation currently applies the ill health enhancement using {{PublicSector2015IllHealthHigherTierStrategy}} but this is using the PPS logic. I think a new strategy is needed for Fire 2015 ill health with changes to {{PensionElementCalculatorFactory}} to use this in the correct scenarios,"09/Feb/26 2:07 PM;640f34fc1273131f2adfede9;Added new strategy {{PublicSector2015FireIllHealthHigherTierStrategy}} and made changes to {{AccruedPensionCalculatorFactory}} to use this however looking at the analysis ticket further I have more questions. 

It appears the specification is incorrect - the example calculation is using a much higher pension than the [CARE_Main_Basic + CARE_TVIN_Basic] given in the specification (possibly including DB pension as well?) and there are comments on the analysis ticket suggesting that the ill health enhancement is not included in the lump sum calculation, just the CARE pension actually accrued.",,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,To Do,09/Feb/26 2:07 PM
"Police A>R - ""Other Value Key required""",PHX5-803,21413,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Russell Armstrong,640f34fc1273131f2adfede9,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,13/Jan/26 8:25 AM,15/Jan/26 1:33 PM,,13/Jan/26 10:10 AM,Client 172 Fire A to R Version 7,Client 176 Police A to R Version 10,Client 184 Police Partial Ret Version 3,Client 185 Fire Partial Ret Version 1,,,,,,,,,0,,,,,"Member ID 382657.  Calc errors after calculation has run.  I believe that this field on the CARE results may be the problem.

!image-20260113-082825.png|width=440,alt=""image-20260113-082825.png""!",,Andrew Wilson,Russell Armstrong,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-462,,,,,,,,,13/Jan/26 8:28 AM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260113-082825.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15266,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@41539ab7,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zzv,,,Resolve “Other Value Key required” error,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-13 08:55:16.335,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1313908_*|*_10252_*:*_1_*:*_15100_*|*_10354_*:*_1_*:*_61249_*|*_10056_*:*_1_*:*_2868230,,"13/Jan/26 8:55 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Issue will be here:

{noformat}public class NilGADElementStrategy : BaseGADElementStrategy, IGADElementStrategy
	{
	    public NilGADElementStrategy(MemberData memberData, IMemberInfo memberInfo, McCloudOption mcCloudOption, Context context = null) : base(memberData, memberInfo, mcCloudOption, context)
	    {
	
	    }
	
	    public ElementValue GetGADElement()
	    {
	        // add log.info? something like no GAD to return
	        return new ElementValue();
	    }
	}{noformat}

We are returning a new Element Value, where we need to return 

{noformat}new ElementValue {
	            Key = KeyGADConstants.GADContributionOwedCash, 
	            Value = 0};{noformat}",13/Jan/26 9:35 AM;640f34fc1273131f2adfede9;Suggested change made. Added a Nil GAD Element test in PSC to check the output. Published v176 of PSC. Updated dependency in Fire and Police Active to Retired and Partial Retirement calculation in clients 184 and 185. Added a test for this in Police Active to Retirement but I think this is an issue that can only be tested properly in Aurora. The error doesn’t take place in Calculate before the change,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,13/Jan/26 10:10 AM
Fire A-D: CARE pay runtime input issue,PHX5-802,21347,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,12/Jan/26 3:43 PM,19/Jan/26 4:30 PM,,15/Jan/26 11:05 AM,Client 184 Police A to D Version 32,Client 184 Police A to R Version 11 ,Client 185 Fire A to D Version 5,Client 185 Fire A to R Version 8,,,,,,,,,0,,,,,,,Annabelle Stephenson,Matt Lilwall,Steven Wright,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,PHX5A-395,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7e1cbaf7,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vk,,,Fixed an issue that was causing the active to deferred calculation to error with members who joined the scheme after 01/04/2022 and the latest row of Care Benefits table data on record has an effective from date mid Care Year. Example member ref: 527203. Firefighters scheme.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,PHX5 Sprint 29,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-13 14:08:35.038,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_159775111_*|*_10252_*:*_1_*:*_335519_*|*_10354_*:*_1_*:*_9609480_*|*_10056_*:*_1_*:*_69747296,,"12/Jan/26 3:45 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Calc doesn’t run when CARE pay entered as a runtime input. It does run when record is updated with CARE pay first, so looks to be an issue with the runtime input. Please see linked ticket for further details.","13/Jan/26 2:08 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;This seems less to do with the inputs, and more to do with the fact that in this case the CARE starts after the hard-coded CARE start date of 01/04/22. The CARE start date for this member is 10/07/2023 and, due to how the Yearly Series are populated, the CARE code was not assigning a salary for 2024/25.  (Therefore the calc only returns the correct CARE when admin manually amend the member’s existing CARE on record before running their tests.)

Changes required within *CARE global module*, {{DefaultCreateMemberCAREListStrategy}}.  Currently, when there is any existing care on record, this code uses the latest start date available (10/07/2023) to determine the next CARE period in the series, by adding either a year or a month to this date.  This creates next CARE period 10/07/2024 - 31/03/2025, which then does not get populated with a salary as there is no salary history with this same start date.

I have amended the switch in default method {{CreateMemberCAREList}} (CARE global module, approx line 906 onwards) to only add a year to the latestStartDate when the _day before the latestStartDate_ has the same day and month as the CARE day and month passed in (31 and 3 for public sector).  If this is not the case (as in this test: 09/07 != 31/03) then we return the NextInstanceOfDayOfYear of 31/03, plus 1 day (in this case, 10/07/23 → 31/03/24 +1d = 01/04/24).

I applied similar logic to the monthly series in the switch, to only use latestStartDate.PlusMonths(1) when the day of latestStartDate = CARE day from inputs.

This code has also been copied into the virtual {{CreateMemberCAREList}} in {{CARETemplate}}.

Test added to CARE module “CreateMemberCAREList _mid-year start date” which checks the new CARE period start dates.","13/Jan/26 5:55 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I have made the necessary coding changes for this and tested at CARE module level, but ideally we need to bring this up to Fire A>D and also add a test there that mimics what admin were testing.  This can be picked up by anyone in my absence to get this ticket over the line","14/Jan/26 4:47 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;# Updated the Police and Fire 184/185 A>D client level calcs to V178 of Public Sector Calculation which included Annabelle’s updates in Care Module.
# Added Fire Member Aurora ID: 52720301 as a test in Fire A>D. Now running through without error and Care history calculating ok. 
# All test cases in the A>D still passing.
# Unable to bring through to the A>R calcs currently as there is coding from Andrew that breaks some retirement cases. I ran all the police A>R tests through with this change in VS code and still green apart from those previously failing as expected.

",,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,15/Jan/26 11:05 AM
Fire A-D: Calc errors when run from DB record. Only calculates CARE when run from CARE,PHX5-801,21346,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,12/Jan/26 3:26 PM,14/Jan/26 3:20 PM,,14/Jan/26 3:20 PM,,,,,,,,,,,,,0,,,,,,,Matt Lilwall,Tracy Collins,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-394,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2918bb37,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi0i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-12 15:57:59.263,10354_*:*_1_*:*_4138044_*|*_10056_*:*_1_*:*_64756294_*|*_10355_*:*_1_*:*_0,,12/Jan/26 3:57 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;This relates to the Linked member table.  This member is not showing as linked so each record will calculate in isolation.,14/Jan/26 3:20 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;This has been confirmed as a data issue with the linked member table.  We will provide admin with a temporary workaround pending an update to the whole linked member process.  We will raise a new ticket if any calcs work is needed further down the line.,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,14/Jan/26 3:20 PM
Fire A-R: Incorrect commutation factor being used,PHX5-800,21343,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,12/Jan/26 3:13 PM,28/Jan/26 4:27 PM,29/Jan/26 2:47 PM,23/Jan/26 3:15 PM,Client 185 Fire A to R Version 13,Client 185 Fire Partial Ret Version 6,,,,,,,,,,,0,,,,,Incorrect cash commutation factor being used. Age at DOR: 51y 2m. Expected factor for factor table x-505: 25.7. Actual factor: 25.617. See linked analysis ticket for further details.,,Annabelle Stephenson,Chris Marshall,Matt Lilwall,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,PHX5A-392,,,,,,,,,22/Jan/26 4:00 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20260122-155930.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16199,22/Jan/26 4:00 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20260122-155951.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/16200,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2d2b1ed7,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y1zx,,,Factor table X-505 updated and loaded,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 30,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-21 14:04:51.866,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2257300_*|*_10252_*:*_1_*:*_91074524_*|*_10354_*:*_1_*:*_1299787_*|*_10056_*:*_1_*:*_772172411,,"21/Jan/26 2:04 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;This is an issue with the actual factors loaded rather than the code.  We only have complete years for X-505 rather than each of the monthly increments.  Russell suggested this was because that’s all we had at the time.

X-505 table with all monthly increments here [Fire_E_Consolidated_Factors_2025-01.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EUDtgrM0m4BFiCmaV0g0ZF4B6WuSyltKJ_38qqEjCsc12g?e=Drgac6&wdLOR=c3543A1D2-5257-4879-B5EF-B591359A315A] needs loading to fire client (which I assume is just a 1 story point, I’ve not loaded factors myself before)","22/Jan/26 4:00 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Updated table X-505 to full table. When running UAT Test 800 the factor is still showing as 25.617. However as we are aware the factors can take time to filter through in UAT debugged test in VS Code and correct factor of 25.70 is output.

!image-20260122-155930.png|width=617,alt=""image-20260122-155930.png""!

!image-20260122-155951.png|width=403,alt=""image-20260122-155951.png""!",,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,23/Jan/26 3:15 PM
Fire A-R: Max Lump Sum issue,PHX5-799,21310,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,12/Jan/26 2:29 PM,28/Jan/26 9:48 AM,,28/Jan/26 9:48 AM,,,,,,,,,,,,,0,MyPension,,,,"Under the max lump sum option, the difference between the LSA and the max is being commuted back into extra lump sum. See linked ticket for further details.",,Andrew Wilson,Matt Lilwall,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-361,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@41d70386,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi000000000i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,PHX5 Sprint 29,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-26 09:50:18.695,10252_*:*_1_*:*_0_*|*_10354_*:*_1_*:*_5223_*|*_10056_*:*_1_*:*_3854281,,26/Jan/26 9:50 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] [~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21]  The linked Analyst ticket has a comment saying resolved. Does that mean we can close this ticket?,28/Jan/26 9:24 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Yes.  I have reviewed the outputs and am happy for you to close this ticket,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,28/Jan/26 9:48 AM
Retirement PSO - Need RTF to apply to the PSO,PHX5-798,21277,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,12/Jan/26 1:47 PM,05/Feb/26 12:02 PM,,05/Feb/26 12:02 PM,,,,,,,,,,,,,0,,,,,"Member ID 143464

Admin comments below

!image-20260112-140335.png|width=457,alt=""image-20260112-140335.png""!",,Andrew Wilson,Annabelle Stephenson,Naomi Robinson,Tracy Collins,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:ffa445ab-b813-4226-9ed2-507a454e9272,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,PHX5A-460,,,,,,,,,12/Jan/26 2:03 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260112-140335.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15161,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1b4a7d7e,,,,,,,,,,,,,,,,,,,,Confirm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snq:zv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 31,PHX5 Sprint 32,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-19 14:49:37.458,10281_*:*_1_*:*_3681_*|*_10251_*:*_2_*:*_6732_*|*_10250_*:*_3_*:*_248447924_*|*_10252_*:*_2_*:*_5756_*|*_10354_*:*_3_*:*_1137359304_*|*_10056_*:*_1_*:*_603328727_*|*_10355_*:*_1_*:*_78156758,,"19/Jan/26 2:49 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;_[Rather confused as the testing figures admin have provided are nowhere near what UAT is doing currently, but I can see the new_ {{ICombineElementsStrategy}} _code changes in PSC are no longer deducting PSO or scheme pays debits from element values, which must be why.  (Naomi let me know that this is because the debits now get factors applied first before deducting, but this is not happening in the latest client calcs - nothing is being deducted currently.)  I have based my deductions on the figures admin have provided above, along with debugging our code as it currently stands.]_

Picking apart figures manually, our pre-com element before any deduction is £31615.19, vs admin’s £31613.36.  The PSO figures deducted to get to the final elements of £19721.23 (our figure) and £19719.40 (admin’s) are £11893.96 for both calcs.

The issue therefore is not in the factor applied to the PSO, but in the calculation of the pre-com element before deducting the PSO.  (I cannot absolutely confirm this at this stage, as I can only base this on the very few figures in the snips from admin above.)

Picking this apart further, I can see the difference in pre-com values is due to the LSI figure differing from aurora.  Comment added to linked admin ticket to ask them to look into this further and raise a ticket for LSI if required.  If they do that, we can close this one.","20/Jan/26 12:55 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Lynette has replied on other ticket confirming the issue is in fact the retirement timing factor, as this gets applied as well as the PI reval (so expecting 11893.96 x 1.28 = 15224.14)",23/Jan/26 6:49 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Splitting this ticket out into component parts,23/Jan/26 6:52 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;reducing story points as the work has been split into other tickets. Leaving this ticket so that we can use it to confirm the original issue is resolved,03/Feb/26 2:31 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;“Apply Factors” code has been set up in {{CustomPublicSectorDivorceCalculator}}Calculate() to apply the RTF. {{elementValues = ApplyFactors(elementValues);}}which will tie back into PSC,,,,,,,,,,,,,,,,,,,,22789,PHX5-850,PSO,Done,05/Feb/26 12:02 PM
Fire A>R Age addition using Police method in error,PHX5-797,21244,Task,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,,,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,12/Jan/26 1:13 PM,03/Feb/26 11:29 AM,,,,,,,,,,,,,,,0,,,,,"Member ID 143464

Comments from admin

* We do not agree age addition calc for number of reasons, first being that what altair did and posted to care screen was never right, so what has gone to aurora data is already incorrect and will nee manually changing. And then the above for final year is incorrect because age addition factor is wrong as it needs to be age at the start of current scheme year in years and months whereas the aurora calc has just done whole years (factor for 63 is 2.91%)
* fire does not do the months over NPA until the assumed age addition calc  
* assumed age addition has separate factor table where it would be age 63 at the start of the scheme year and 9 months over NPA in last scheme year (table 406)

Manual Calc below 

!image-20260112-131729.png|width=336,alt=""image-20260112-131729.png""!",,Annabelle Stephenson,Tracy Collins,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-461,,,,,,,,,12/Jan/26 1:17 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260112-131729.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15127,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1bf64b3b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00003kr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-26 14:23:50.949,,,"26/Jan/26 2:23 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I think we need a new RunningTotalsStrategy in the CARE module; {{AgeAdditionRunningTotalsStrategy}} is the calculation method which we’re currently calling for both police and fire.

The existing strategy contains {{CalculateCARERunningTotals}}, {{CalculateNormalAgeAddition}} and {{CalculateAssumedAgeAddition}}.  Calculate running totals will work as is for both police and fire, but we need new versions of the other two functions.

For Fire, {{CalculateNormalAgeAddition}} needs to : 

* Calculate ageAtPeriodNormal based on years and months at care period start date
* Select ageAdditionFactorNormal based on this age, looking at both years and months in the factor table
* Default monthsOverNPA to 12, *or*
* Remove monthsOverNPA and amend normalCredit to apply the factor in full

{{CalculateAssumedAgeAddition}} will need to : 

* Calculate ageAtPeriodAssumed based on years and months at care period start date
* Select ageAdditionFactorAssumed based on this age, looking at both years and months
* (No change to monthsToRetirement or assumedCredit)

Factor tables to use are X-404 for normal age addition, and X-406 for assumed.  I can see that we are already correctly picking up X-404 in {{PublicSectorCARECalculationFactory}} in PSC, but we need to also get X-406. Suggested code fix for this, in the factory, to replace how we are currently calling the age addition factors (currently around line 5390):

{noformat}List<DecimalFactor> factorsToUse = new List<DecimalFactor>();

if (publicSectorMemberInfo.TypeOfScheme() == OverallSchemeType.Police) 
{ 
    factorsToUse = schemeReferenceData.DecimalLookups(""A403"").ToList(); 
}
else if (publicSectorMemberInfo.TypeOfScheme() == OverallSchemeType.Fire) 
{ 
    factorsToUse = schemeReferenceData.DecimalLookups(""X-404"").ToList(); 
    factorsToUse.AddRange(schemeReferenceData.DecimalLookups(""X-406"").ToList()); 
}
else 
{ 
    Log.Error(""Unknown Scheme Type. Do not know what Age Addition Table to use""); 
}

careBuilder.WithAgeAddition(memberInfo.DateReachesAge(60), memberInfo.DateOfBirth, factorsToUse);{noformat}

If we do set up a new strategy, then we need to make sure we call the correct one in the CARE builder {{WithAgeAddition}}.  If we pass OverallSchemeType in here, we can return one strategy for police and another for fire.

I’ve set up the test case for this on Fire A>R but not set any expected results, as I don’t know where the starting figures for admin’s manual calc came from, so we won’t be able to match them. ",,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,To Do,12/Jan/26 1:13 PM
Police A>R Settlement - LSA - Care cash receiving a deduction,PHX5-796,21136,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,12/Jan/26 8:42 AM,10/Feb/26 8:47 AM,,10/Feb/26 8:47 AM,Client 184 Police A to R Sprint 32,Client 184 Police D to R Sprint 32,Client 184 Police Partial Ret Sprint 32,Client 185 Fire A to R Sprint 32,Client 185 Fire D to R Sprint 32,Client 185 Fire Partial Ret Sprint 32,,,,,,,0,MyPension,,,,"Member ID 387414.  The final CARE lump sum is showing as £4,315.27, not the £13,596.22 which was input as the target lump sum. Legacy Option chosen",,Andrew Wilson,Annabelle Stephenson,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-331,,,,,,PHX5-776,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7acade4a,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00000001,,,"Full CARE target cash input will be returned for Legacy target pension option.

The CARE target cash value will still be pro-rated between CARE and ReformCARE on the Reform target pension options.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 31,PHX5 Sprint 32,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-15 08:28:10.737,11070_*:*_1_*:*_0_*|*_10251_*:*_1_*:*_1817200_*|*_10250_*:*_1_*:*_5930931_*|*_10252_*:*_1_*:*_611139859_*|*_10354_*:*_1_*:*_4662943_*|*_10056_*:*_1_*:*_1219786191_*|*_11103_*:*_1_*:*_57340452,,15/Jan/26 8:28 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;{{CARETargetMaxPCLS}} is restricting to LSA - when it should not be.,"26/Jan/26 1:02 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;It’s not LSA, it is getting restricted by the {{CARETargetMaxPCLS}} code, that pro-rates the target CARE cash input against CARE pre-com pension and Reform CARE pre-com pension.  In other words, we proportionally split the target cash based on how much of the CARE pension due is pre-22, and how much is post-22.

The code is trying to do this for both reform and legacy options, which means legacy target CARE is incorrect as legacy pre 22 CARE should be 0.  Suggested code change as follows, that will ensure only the relevant CARE values are being considered.

{noformat}  decimal carePreComPension = elementValues.GetValue(PreComPenKey);

  var additionalCAREKey = PreComPenKey == KeyPreComConstants.ReformCAREPreCom ? KeyPreComConstants.CAREPreCom : KeyPreComConstants.ReformCAREPreCom;

  decimal reformCAREPreCom = McCloudOption == McCloudOption.Legacy ? 0 : elementValues.GetValue(additionalCAREKey);

  decimal totalCAREPension = carePreComPension + reformCAREPreCom;{noformat}

This will sit in the {{CARETargetMaxPCLS}} function in PSC, currently around line 3950.  

Test has been set up in police A>R “UAT ticket 796”, currently failing on cash value for legacy option.  Should pass once fix implemented.","02/Feb/26 4:12 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I’ve made the changes in PSC as per the comment below.  Also had to make a minor change to the testing function {{CARETargetMaxPCLSStrategy}} as it wasn’t running properly after the first change.

UAT test 796 set up in police A>R is now passing, testing on the target results for both reform and legacy options.  Nothing else knocked out.",10/Feb/26 8:47 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Admin tested and confirmed OK to close,10/Feb/26 8:47 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Admin tested and confirmed OK to close,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,10/Feb/26 8:47 AM
Refactor SchemeEarlyRetirementFactor in RetirementFactorBuilder,PHX5-795,21031,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,09/Jan/26 4:10 PM,12/Jan/26 6:37 AM,,,,,,,,,,,,,,,0,,,,,"In Retirement Factor Builder module. The SchemeEarlyRetirementFactorStrategy > Get Factor function is currently allowing too many broad scenarios to be allowed to go through the GetInterpolatedFactor code{{ }}
{{retirementFactor = earlyDecimalFactors.GetInterpolatedFactor(yearsEarly, monthsEarly).Round(decimalPlaces);}}

The IF statement {{ if (earlyDecimalFactors.Any(x => x.Year >= yearsEarly) && earlyDecimalFactors.Any(x => x.Year <= yearsEarly + 1))}}For example retirement factor table starts at age 55y0m and member age at retirement is 54y4m. The IF statement is returning true for this scenario because the logic is too broad. It gets to the Interpolation code and throws an exception because there’s no factor available. 

We need to tighten the IF statement to only allow the correct scemnario’s to go through the Interpolation code and the rest should hit a log.error which is more useful to admin. See below refactored code that needs testing. 

{noformat}    public decimal GetFactor(string elementKey, NodaTime.Period earlyLatePeriod, int decimalPlaces)
	{
		decimal retirementFactor = 1.0m;

		int yearsEarly = earlyLatePeriod.Years;
		int monthsEarly = earlyLatePeriod.Months;

		bool hasCurrentYear = earlyDecimalFactors.Any(x => x.Year == yearsEarly);
		bool hasNextYear = earlyDecimalFactors.Any(x => x.Year == yearsEarly + 1);

		// If both years exist, interpolation is always valid - even for 0 months  
		if (hasCurrentYear && hasNextYear)
		{
			retirementFactor = earlyDecimalFactors.GetInterpolatedFactor(yearsEarly, monthsEarly).Round(decimalPlaces);

			Log.Information($""Calculated retirement factor for {elementKey}: {yearsEarly}y {monthsEarly}m early, factor = {retirementFactor}"",""RetirementFactor"");

			return retirementFactor;
		}

		// Missing current year (e.g. 54y4m when table starts at 55)
		if (!hasCurrentYear)
		{
			Log.Error($""Calculation Stopped: No early retirement factor present for years = {yearsEarly}"");
		}

		// Missing next year (e.g. 65y2m when table ends at 65)
		if (!hasNextYear)
		{
			Log.Error($""Calculation Stopped: No early retirement factor present for years = {yearsEarly + 1}"");
		}

		return retirementFactor;
	}{noformat}",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,PHX5-749,,,,,,,,,,,PHX5-775,PHX5-748,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7253546d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rfz:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,20602,PHX5-773,TECHNICAL DEBT,To Do,09/Jan/26 4:10 PM
Update AA so that historical lines to update populate all data,PHX5-794,21004,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,09/Jan/26 1:44 PM,12/Jan/26 2:37 PM,,12/Jan/26 11:34 AM,Client 176 Police Annual Allowance Version 7,,,,,,,,,,,,0,,,,,"Aurora is giving today’s date and 0 values for prior year Annual Allowance updates where Adjusted Unused Annual Allowance is the only figure being updated/ written back. Looks messy and confusing in Aurora, so Public Sector Annual Allowance needs updating to populate full AA line for each relevant period, so admin can see the relevant date, etc.",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@680a7a13,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zy,,,Annual allowances for previous 3 years were only populating AUAA figure for write back. Updated to populate all values for Aurora readability.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 28,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-01-09 14:24:42.853,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1943_*|*_10252_*:*_1_*:*_2079_*|*_10354_*:*_1_*:*_334943_*|*_10056_*:*_1_*:*_4124,,"09/Jan/26 1:47 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Updated PSAA calc as follows:

{noformat}for (int i = 0; i < adjustedLastThreeUnusedAnnualAllowances.Count && i < 3; i++)
        {
            var entry = adjustedLastThreeUnusedAnnualAllowances[i];

            var writeBack = new AnnualAllowanceUpdate // set all to the same as the Aurora entry for ease of viewing and comprehension on Aurora front end. Only updae AUAA
            {
                MemberAnnualAllowanceId = entry.MemberAnnualAllowanceId,
                StartDate = entry.StartDate,
                EndDate = entry.EndDate,
                PreviousClosingDbPension = entry.PreviousClosingDbPension,
                ClosingDbPension = entry.ClosingDbPension,
                PensionInputAmount = entry.PensionInputAmount,
                AnnualAllowance = entry.AnnualAllowance,
                UnusedAnnualAllowanceAmount = entry.UnusedAnnualAllowanceAmount, 
                AdjustedUnusedAnnualAllowance = entry.CalcAdjustedUnusedAnnualAllowance, // updated value for writeback
                TaxableExcess = entry.TaxableExcess
            };

            listOfAnnualAllowanceUpdates.Add(writeBack);
        }{noformat}",09/Jan/26 2:24 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] I’m sure you have - but just to check - did you manage to test this works?,12/Jan/26 11:34 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Yes checked on three tests in Aurora which all work ok. Will continue to check whilst also debugging other calcs.,,,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,Done,12/Jan/26 11:34 AM
Police A>D - FPS output as NULL rather than empty list,PHX5-793,21003,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,09/Jan/26 1:43 PM,19/Jan/26 4:27 PM,,09/Jan/26 3:23 PM,Client 176 Police A to D Version 31,Client 185 Fire A to D Version 5,,,,,,,,,,,0,,,,,"Raised by Phil - if a calc runs it causes the aurora process to error when it tries to display the results, as the final pensionable salaries are being output as NULL rather than an empty list.  We've spoken to Andrew about it, and I think he is going to look at it. MEMBER ID 327947",,Andrew Wilson,Tracy Collins,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-365,,,,,,,,,09/Jan/26 3:09 PM;5796a187-7241-414b-bea0-2d22260a9bed;image-20260109-150918.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14956,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@51963f3d,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zz,,,A to D result updated to return Final salaries per member.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-09 15:09:24.526,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1847094_*|*_10252_*:*_1_*:*_6703_*|*_10354_*:*_1_*:*_2855_*|*_10056_*:*_1_*:*_3467907,,"09/Jan/26 3:09 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Updated A to D code with a map function:

{noformat}    public List<MemberFinalPensionableSalaryOutput>	MapFinalSalaryOutput(List<FinalPensionableSalary> FinalPensionableSalaries)
    {
        return FinalPensionableSalaries
        .Select(x =>new MemberFinalPensionableSalaryOutput
        {
            EffectiveFrom = x.EffectiveFrom,
            SalaryType = x.Type,
            Salary = x.Amount
        }).ToList();
    }{noformat}

Code for active salary link member:

{noformat}result.FinalPensionableSalaries.TryAdd(activeSalaryLinkedMemberInfo.AuroraId, MapFinalSalaryOutput(activeSalaryLinkedNonMcCloudResult.FinalPensionableSalary));
{noformat}

this is under legacy and reform with a try, so it won’t fail if added twice

and a line for the normal member:

{{result.FinalPensionableSalaries.TryAdd(activeNormalMemberInfo.AuroraId, MapFinalSalaryOutput(result.FinalPensionableSalary));}}

After the updated, existing text cases output these values:

!image-20260109-150918.png|width=341,alt=""image-20260109-150918.png""!",,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,09/Jan/26 3:23 PM
Police A>R Settlement - Pension Element Cash value = 0,PHX5-792,21000,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,09/Jan/26 1:06 PM,16/Jan/26 8:42 AM,,16/Jan/26 8:42 AM,,,,,,,,,,,,,0,,,,,"Member ID 355938.

Reform option chosen. 

-1.  Pension element values on pension screen are only showing as MCPN value, MCCR amounts are not showing.- 2. Cash taken on MCPN line is not showing the value from cash taken on retirement details table above. 

!image-20251218-174241.png|width=416,alt=""image-20251218-174241.png""!

Point 1 covered under [https://xps-jira.atlassian.net/browse/PHX5-782|https://xps-jira.atlassian.net/browse/PHX5-782|smart-link] ",,Andrew Wilson,Tracy Collins,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,PHX5-782,,,,,PHX5A-308,,,,,,,,,09/Jan/26 1:06 PM;5796a187-7241-414b-bea0-2d22260a9bed;image-20251218-174241.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14922,09/Jan/26 1:06 PM;5796a187-7241-414b-bea0-2d22260a9bed;image-20251218-174241.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14923,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@46c9a91b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000003z9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-16 08:34:33.285,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_588937769,,"09/Jan/26 1:06 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Point 1 - definitely our problem if we are not populating/calculating this element.

For point 2: Initial question is whether the table can deal with negative values. Maybe the front end is doing a min of zero when populating this.

We should find out on our side if we calculate this value in the results, if we do, then it is pointing to a dev change to allow the output table to be correct.

My worry here is that we will hit the whole issue of the cash being negative in the first place. We need to know ASAP if this is going to be an issue, as it requires a substantial dev change to resolve this.","09/Jan/26 1:06 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;For testing purposes:

35593801  NPPS2006   Was DB Active SalaryLinkageClosedDB
35593802  CARE 2015	 Was DB Active Normal","09/Jan/26 1:06 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;issue is in ActiveToRetired code:

{noformat}	            foreach (KeyValuePair<InternalCalculationPensionOptionType, PensionOption> kvp in activeSalaryLinkedLegacyOptions)
	            {
	                allActiveSalaryLinkOptions.TryAdd(ConvertKey(kvp.Key), kvp.Value);
	            }
	
	            foreach (KeyValuePair<InternalCalculationPensionOptionType, PensionOption> kvp in activeSalaryLinkedReformOptions)
	            {
	                allActiveSalaryLinkOptions.TryAdd(ConvertKey(kvp.Key), kvp.Value);
	            }{noformat}

When we add the legacy options, it adds the TargetLumpSumCommuted option, and so when it tries to add the same thing for reform, it fails.

We need logic so that we take the TargetLumpSumCommuted pension option for the chosen McCloud option","09/Jan/26 1:06 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Updated relevant code to:

{noformat}foreach (KeyValuePair<InternalCalculationPensionOptionType, PensionOption> kvp in activeSalaryLinkedLegacyOptions)
            {
                if (kvp.Key == InternalCalculationPensionOptionType.TargetLumpSumCommuted)
                {
                    if (chosenMcCloudOption == McCloudOption.Legacy)
                    {
                        allActiveSalaryLinkOptions.TryAdd(ConvertKey(kvp.Key), kvp.Value);
                    }
                }
                else
                {
                    allActiveSalaryLinkOptions.TryAdd(ConvertKey(kvp.Key), kvp.Value);
                }
            }

            foreach (KeyValuePair<InternalCalculationPensionOptionType, PensionOption> kvp in activeSalaryLinkedReformOptions)
            {
                if (kvp.Key == InternalCalculationPensionOptionType.TargetLumpSumCommuted)
                {
                    if (chosenMcCloudOption == McCloudOption.Reform)
                    {
                        allActiveSalaryLinkOptions.TryAdd(ConvertKey(kvp.Key), kvp.Value);
                    }
                }
                else
                {
                    allActiveSalaryLinkOptions.TryAdd(ConvertKey(kvp.Key), kvp.Value);
                }
            }{noformat}

Test case added:

UAT 782 - Missing MCCR element      with an expected value on the MCCR element. Test case now passes

A to R, Police and Fire, D to R Police and Fire client calcs all updated.","09/Jan/26 1:06 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Raising the cash = 0 issue with devs, as am unable to replicate this issue on our side.","09/Jan/26 1:06 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;I have double checked what the code was at the point the calculation was run. On the 18th December, the Client code was on version 5, which was using version 123 of Public Sector Calcs. In version 123, the code was using the correct key for cash. If for any reason, they had used the previously released version (4) which used version 114 of Public Sector Calcs, then the key was incorrect, and it would have led to the element cash being 0.",16/Jan/26 8:34 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] This is now working and April has signed off the admin ticket.  This one can be closed,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,16/Jan/26 8:42 AM
Police A-D - Don't agree service when member has > 25 years,PHX5-791,20999,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,09/Jan/26 12:59 PM,26/Jan/26 2:57 PM,,23/Jan/26 6:31 AM,Client 184 Police A to D Version 35,Client 185 Fire A to D Version 8,,,,,,,,,,,0,,,,,,,Andrew Wilson,Annabelle Stephenson,Matt Lilwall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,PHX5A-345,PHX5-497,PHX5-520,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1010de71,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y1v,,,"Double accrual strategy for deferred will now take total service into account when determining calculation method, and when calculating the double accrual.  This replicates the double accrual logic for A>R, in line with the accrual specification.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 30,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-12 07:28:56.911,10281_*:*_1_*:*_2789_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_2_*:*_4212945_*|*_10252_*:*_2_*:*_804832432_*|*_10354_*:*_3_*:*_594137_*|*_10056_*:*_1_*:*_243629667_*|*_10355_*:*_1_*:*_70616508,,"09/Jan/26 1:00 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Please see linked ticket for further details, including breakdown of expected service after doubling, plus debug file.",12/Jan/26 7:28 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Test case added to client 176 AtoD for debugging,"12/Jan/26 7:38 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;With initial look, our code is set to only look at DB service when considering total qualifying service.

Our total service matches their 25 years and 2 days, but when we only look at DB service, this brings it down to 22 years.

If we are meant to be including CARE service here, this feels like a major change to the logic.","12/Jan/26 8:39 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;In {{PublicSectorAccrualDeferredDoubleStrategy}}

Two issues here:

# When calling {{publicSectorMemberInfo.GetDeferredAge}} we are currently passing in DBQualifying service, so the check against 25 years to work out deferred age is using 22 years instead of 25 years 2 days. If we passed in total qualifying service, then deferred age would be treated as 50
# When calculating double accrual for deferred age = 50, when calculating accrualCalcA we are again using just total DB qualifying (unlike the code in {{PublicSectorAccrualDoubleStrategy}} which is used by A to R calcs) . If we were to use total qualifying (which we calculate as the correct 25 days and 2 days), then accrual figures are far closer to those given in the ticket.","21/Jan/26 4:55 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] As you’ve noted, including CARE is a major change in logic.  I remembered going over this repeatedly when coding this strategy initially so had a look back and linked a couple of relevant tickets.

Ticket 520 is where the strategy was originally coded, which shows our agreement that the service used should be DB only.  All of the tests I set up under that ticket were either directly from the A>D test matrix or from members we ran through Altair.

Ticket 497 is one that you and Naomi worked on, where again it was considered and then agreed in the comments that this strategy should use just DB service.

If I bring this change into PSC, 6 tests fail, on figures that I thought had already been accepted.  As some of these tests are based on the actual A>D tests, I assume that if we brought changes through to client level then tests there would fail too.

So I’m not saving these changes for now, I am going back to admin as I think this contradicts a lot of what we’ve been testing against and signing off so far.","21/Jan/26 5:12 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;and, thinking about this more, it doesn’t make sense to use total service (db + care) as then the pension amounts for legacy and reform would always be the same!","22/Jan/26 12:33 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Further to my comment replies below, I have investigated further and spoken with April and Lynette.  I do now understand and agree the logic of this change (use total service for GetDeferredAge, accrualCalcA and accrualCalcC, but use DB service only for accrualCalcE)

However it will knock out 6 test cases at PSC level that were set up to test this strategy, as they were based on the results in the A>D test matrix.  Admin have confirmed that in fact none of those figures were signed off and they know that altair struggles with this part of the calculation.  I am therefore content to update the expected results in these tests with a new baseline.

Code change areas in {{PublicSectorAccrualDeferredDoubleStrategy}} :

{noformat}decimal totalQualifyingService = serviceHistories[ServiceCalcType.TotalService].Sum(x => x.QualifyingDecimalAmount);
...
int deferredAge = publicSectorMemberInfo.GetDeferredAge(CalculationDate, totalQualifyingService);{noformat}

{noformat}decimal accrualCalcA = Min(totalQualifyingService, 30);
decimal accrualCalcB = 60;
decimal accrualCalcC = Min(Max(0, accrualCalcA - 20) * 2 + ((accrualCalcA > 20) ? 20 : 0), 40);
decimal accrualCalcD = accrualCalcC == 0 ? 0 : accrualCalcA * accrualCalcB / accrualCalcC;
decimal accrualCalcE = totalDBQualifyingService;
decimal accrualCalcF = accrualCalcC == 0 ? accrualCalcE : accrualCalcE * accrualCalcB / accrualCalcD;{noformat}

6 failing tests updated in PSC:  “AccruedPensionDeferredDoubleStrategy _A>D …” tests 1, 3 and 5

4 failing tests updated in police A>D: “Police A>D Test 1”, “Police A>D Test 3”, “Police A>D Test 5” and “UAT 791 - service > 25 years”

This impact makes sense, as it is the same set of members affected at both levels",,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,23/Jan/26 6:31 AM
Police D>R - 'An item with the same key has already been added' error,PHX5-790,20984,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,09/Jan/26 10:54 AM,19/Jan/26 4:49 PM,,13/Jan/26 10:11 AM,Client 172 Fire A to R Version 7,Client 176 Police A to R Version 10,Client 184 Police D to R Version 2,Client 184 Police Partial Ret Version 3,Client 185 Fire D To R Version 2,Client 185 Fire Partial Ret Version 1,,,,,,,0,,,,,D-R calculation failing with ‘an item with the same key has already been added’ error. Full debug attached in linked ticket.,,Andrew Wilson,Annabelle Stephenson,Matt Lilwall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,PHX5A-344,PHX5-781,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@265c0184,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi,,,Bug fix across all retirement calculations (police and fire).  This error will no longer flag when we do not have both a normal member and salary linked member input.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-12 06:53:03.415,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_69280613_*|*_10252_*:*_1_*:*_26708677_*|*_10354_*:*_1_*:*_2962_*|*_10056_*:*_1_*:*_245337512,,12/Jan/26 6:53 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Test case added to aid with debugging.,"12/Jan/26 6:57 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Not sure if causing this error, but running the test case with just a main member and no linked member gets an error, because salary link data is null

{{LocalDate latestExistingCareSalaryLink = GetLatestCareEffectiveDate(activeSalaryLinkedMemberData.MemberCare);}}

needs to be:

{noformat}			if (deferredSalaryLinkedMemberData != null)
			{
				LocalDate latestExistingCareSalaryLink = GetLatestCareEffectiveDate(deferredSalaryLinkedMemberData.MemberCare);
			}{noformat}

this needs to be on all copies of this code - active/deferred fire/police.

This member has no linked members, so would go through with a single main member.

Making this change in debug allows the code to fully run through with no errors.","12/Jan/26 4:02 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Ticket 781 was also raised for this error message, however occurring for a different reason.  Under 781 it was due to us trying to create multiple members because we weren’t taking member status into account.  Under this ticket, it is as Andrew has noted below, due to using potentially null data.

Fix implemented in client 176 D>R calculation (which has since moved to client 184):

{noformat}  LocalDate latestExistingCare = new LocalDate();
  LocalDate latestExistingCareSalaryLink = new LocalDate();

  if (deferredNormalMemberData != null)
  {
      latestExistingCare = GetLatestCareEffectiveDate(deferredNormalMemberData.MemberCare);
  }

  if (deferredSalaryLinkedMemberData != null)
  {
      latestExistingCareSalaryLink = GetLatestCareEffectiveDate(deferredSalaryLinkedMemberData.MemberCare);
  }      {noformat}

Test “UAT 790 - Key Error” is now passing.

Same fix has been added to client 184 A>R and partial retirement, and 185 A>R, D>R and partial retirement.  Added tests to the A>Rs, expecting no errors.",,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,13/Jan/26 10:11 AM
"Police A>D - CARE Pre 22 Element should have a ""Payment Due Date"" of SPA",PHX5-789,20974,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,09/Jan/26 9:29 AM,19/Jan/26 5:14 PM,,19/Jan/26 4:47 PM,Client 184 Police A to D Version 33,Client 185 Fire A to D Version 6,,,,,,,,,,,0,,,,,Any CARE element should have a Payment Due Date of SPA.  Example member 415443,,Steven Wright,Tracy Collins,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-256,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@34832d2,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zzi,,,"In Active to Deferred calculations, deferred element ‘MCCR’ will now have PensionDueDate of the members State Pension Date. Previously outputting the same date as legacy and other non care elements relevant to the category of membership. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,PHX5 Sprint 29,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-11 14:47:31.429,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_365275038_*|*_10252_*:*_1_*:*_38884_*|*_10354_*:*_1_*:*_179258830_*|*_10056_*:*_1_*:*_1472620,,"11/Jan/26 2:47 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Solution coded in VS, dropping to concentrate on S1 ticket. ","15/Jan/26 5:09 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;McCloud Care Pension deferred element key ‘MCCR’ needs to use the StatePensionDate strategy when outputting the pension due date for all categories.

# In Public Sector Calculation, updated DeferredDueDateFactory to be a dictionary based on the KeyDeferredElementConstants so that different elements could be assigned to the different strategies. i.e. McCloudCarePension ‘MCCR’ will use the SPA due date strategy and LegacyDB ‘PEN’ will continue to use the PPS1987 Due Date strategy. 
# Updated the SetDueDates function {{activeToDeferredElementValue.PensionDueDate}} = to use the dictionary now.
# Updated the {{PPS1987DueDateStrategy}}test function to call {{DeferredDueDateFactory}}as a dictionary now when setting the strategy. Updated all existing test cases to accept a deferred element key and a state pension age date. All passing again as expected. 
# Added test case PPS1987DueDateStrategy _A>D Test 8 McCloud Care Element SPA Due Date to test that deferred key MCCR would return State Pension Date.","15/Jan/26 5:10 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Have not published PSC and updated dependency in the A>D calcs yet, will do it tomorrow as I expect there will be other updates going in before the next release.",,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,19/Jan/26 4:47 PM
Police A>D - Reform elements should be updated as Notional,PHX5-788,20973,Story,Ready for UAT,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,09/Jan/26 9:24 AM,05/Feb/26 2:13 PM,,,Client 184 Police A to D Sprint 32,Client 185 Fire A to D Sprint 32,,,,,,,,,,,0,,,,,"On the DB record the calc writes back Legacy DB, Reform DB and Reform Pre 22 CARE.  Both Reform elements should write back with the Notional flag set to “YES”.  Example member 415443",,Andrew Wilson,Annabelle Stephenson,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-256,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4760d304,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00snq:,,,Deferred elements for reform will receive “true” notional flag.  All other deferred elements return a “false” flag.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 32,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-12 07:21:24.461,,,"12/Jan/26 7:21 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;For this to fully work it will require a dev change - which I am not sure we will get for day 1 delivery now.

However, the code is in place for us to set the notional flag where required.","12/Jan/26 11:43 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Update {{IDeferredElementStrategy}} to have a bool Notional flag (in same place as {{DeferredElementKey}})

Ensure that each strategy sets the notional property to the value of this flag

Update the factory to pass in the correct value for the notional input.",04/Feb/26 2:33 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Raised with Phil that work will be required outside of the calc for this to tie together with the front end and saving notional flag,"05/Feb/26 1:56 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;{noformat}bool IsNotional { get; set; }{noformat}

added to {{IDeferredElementStrategy}} in PSC, brought through as an input to each of the strategies and added to the {{ActiveToDeferredElementValue}} that they return.

{{DeferredElementFactory}} updated to take “false” as the strategy input in all cases, except the reform options, which pass in “true”.

Test case “UAT test 788” on Police A>D calc is now passing, testing on the notional flags returned on the deferred element values.",,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,In Progress,05/Feb/26 1:59 PM
Rounding on pension results,PHX5-787,20804,Bug,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,08/Jan/26 11:44 AM,08/Jan/26 11:48 AM,,,,,,,,,,,,,,,0,,,,,"Pension figures (pre-com, residual) are no longer being rounded and therefore have a long string of DPs in the results.  We were rounding previously so seems we’ve lost a .Round or two.  Spotted on Police A>R but presumably affects all calc types.",,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2f4a51e0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i0m,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10708,PHX5-195,General Calculation Items,To Do,08/Jan/26 11:44 AM
"D>R - ""Part year reval"" deferred element",PHX5-786,20802,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Russell Armstrong,640f34fc1273131f2adfede9,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,08/Jan/26 11:11 AM,16/Jan/26 4:38 PM,,16/Jan/26 4:38 PM,Client 184 Police D to R Version 3,Client 185 Fire D to R Version 3,,,,,,,,,,,0,,,,,"Please see Andrew’s comment below, plus details from admin in linked ticket:

!image-20260108-111356.png|width=1099,alt=""image-20260108-111356.png""!",,Matt Lilwall,Russell Armstrong,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,PHX5A-343,,,,,,,,,08/Jan/26 11:14 AM;862ca789-6c5f-4d0a-b054-60929f0a27a7;image-20260108-111356.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14683,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@755c7848,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zzzr,,,PYRV and MCPY elements will be included in calculations,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 29,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-16 14:50:43.343,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_3898546_*|*_10252_*:*_1_*:*_72580_*|*_10354_*:*_1_*:*_70193_*|*_10056_*:*_1_*:*_704368676,,16/Jan/26 2:50 PM;640f34fc1273131f2adfede9;Add PYRV and MCPY to {{KeyDeferredElementConstants}}. Add to the Reform dictionary in {{PublicSectorRevaluationFactories}} so MCPY and PYRV get mapped to {{KeyAccruedPensionConstants.AccruedCAREPension}}. Only adding to MCPY Reform dictionary as other two don’t include pre 22 CARE which I understand this element is in relation to,"16/Jan/26 3:54 PM;640f34fc1273131f2adfede9;Added {{public const string McCloudCAREPartYearRevaluation = ""MCPY"";}} and {{public const string Post22CAREPartYearRevaluation = ""PYRV"";}} to {{KeyDeferredElementConstants}} in Public Sector Constants

Added {{deferredToAccruedKeyMap.Add(KeyDeferredElementConstants.Post22CAREPartYearRevaluation, KeyAccruedPensionConstants.AccruedCAREPension);}} to all options in the dictionary in {{RevaluationFactory}} and added {{deferredToAccruedKeyMap.Add(KeyDeferredElementConstants.McCloudCAREPartYearRevaluation, KeyAccruedPensionConstants.AccruedCAREPension);}}to the Reform dictionary. Added tests to ensure the correct element came out for the two new constants",,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,16/Jan/26 4:38 PM
Police D>R - CARE late retirement adjustment / age addition factor issue,PHX5-785,20801,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Russell Armstrong,640f34fc1273131f2adfede9,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,08/Jan/26 10:54 AM,05/Feb/26 1:26 PM,,04/Feb/26 10:58 AM,Client 184 Police D to R Sprint 31,,,,,,,,,,,,0,,,,,"The CARE late retirement adjustment/age adjustment factor is either incorrect or being incorrectly applied. Either 1 needs to be added to the factor before being applied or the factor table needs to be updated to add 1 to each value:

!image-20260108-105818.png|width=916,alt=""image-20260108-105818.png""!

Please see linked ticket for details from admin.",,Annabelle Stephenson,Matt Lilwall,Russell Armstrong,Tracy Collins,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,PHX5A-341,PHX5-831,PHX5A-344,,,,PHX5A-343,,,08/Jan/26 10:59 AM;862ca789-6c5f-4d0a-b054-60929f0a27a7;image-20260108-105818.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14682,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1d50a669,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi0000000007y,,,Add 1 to LRFs for Police CARE benefits on deferred to retirement,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 31,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-19 14:23:19.51,11070_*:*_1_*:*_0_*|*_10251_*:*_1_*:*_9036082_*|*_10250_*:*_1_*:*_68965_*|*_10252_*:*_1_*:*_844698342_*|*_10354_*:*_1_*:*_3042_*|*_10056_*:*_1_*:*_1053614222_*|*_11103_*:*_1_*:*_4873053,,"19/Jan/26 2:23 PM;640f34fc1273131f2adfede9;Look at alongside [https://xps-jira.atlassian.net/browse/PHX5-831|https://xps-jira.atlassian.net/browse/PHX5-831|smart-link]  -will be same {{PublicSectorPensionElementWithLRFStrategy}} that needs amending. For ERF should be 1 - the factor, for LRF 1 + the factor","27/Jan/26 3:47 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;The issue raised on 831 was unclear but actually was not a calculation error, just a request for some extra info for letters.  This issue RE the LRF here is different, as the actual factor being applied is incorrect.

The factor tables return the value to get the late retirement enhancement, rather than the element value _plus_ the enhancement.  In other words, as Russell stated below, we need 1 + LRF. (But to be clear, we do not want 1 - ERF on the other ticket.)

GetPensionElement in {{PublicSectorPensionElementWithLRFStrategy}} in PSC needs a one line amend:

{noformat}decimal newValue = (elementValue.Value * (1 + factor)).Round(Rounding);{noformat}

(currently sitting approx line 3250 in PSC).","29/Jan/26 4:56 PM;640f34fc1273131f2adfede9;In {{PublicSectorPensionElementWithLRFStrategy}} added 

{noformat}if (DateOfRetirement >= lrfApplicationDate)
			{
				factor = 1 + factor;
			}{noformat}

Added LRF tests 1 and 2 in Public Sector calculation to make sure this made sense - test 1 retires at LRF application date and returns a result based on a factor of 1 when the factor in the table is 0",04/Feb/26 10:58 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Admin tested and confirmed OK to close,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,04/Feb/26 10:58 AM
"AA Ill Health Issue. Total service >25 years sets NRA to 50, giving 0 prospective service for enhancement.",PHX5-784,20724,Story,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,07/Jan/26 5:10 PM,10/Feb/26 10:56 AM,,,,,,,,,,,,,,,0,,,,,"Queried with Charlotte as {{MemberInfo}}logic sets NRA to 50 if above 25 years service. The test case member has 27 years service.

Setting NRA to 50 reduces NRD from 2034 to 2024 which then means no prospective service for an AA date in 2025 and therefore no ill health enhancement. 

This feels like an ill health issue moreso than specifically AA so I need to get clarity on what AA calc should be doing before refactoring memberInfo or illhealth calc code within PSC.

The spec doesn’t suggest any differences to other calcs.

I also see on the test case given, even after calculating illhealth, the result selected the normal closing pension rather than ill health amount, either in error or suggesting an underpin. 

We require more detail in the spec explanation to code this.

Raised with Matt to pass to Charlotte 07/01/2026.",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@61a6da7f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y000000000i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,To Do,07/Jan/26 5:10 PM
Police A>D Care writeback no longer working correctly,PHX5-783,20721,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,07/Jan/26 4:32 PM,12/Jan/26 5:00 PM,,12/Jan/26 11:21 AM,,,,,,,,,,,,,0,,,,,George has tested using member 111167 and the CARE is no longer writing back to the record.  Please investigate.,,Steven Wright,Tracy Collins,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-286,PHX5-716,,,,,,,,09/Jan/26 4:37 PM;bfea69ca-e7d9-488d-b01b-103621fa1516;589521a5-10a3-4efd-925b-1629a4bccf40 (c0b1e1f5-d5fe-4152-bdc2-af8e30f888be).png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14992,09/Jan/26 4:37 PM;bfea69ca-e7d9-488d-b01b-103621fa1516;589521a5-10a3-4efd-925b-1629a4bccf40.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14990,09/Jan/26 4:37 PM;bfea69ca-e7d9-488d-b01b-103621fa1516;image-20260109-163710.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14993,12/Jan/26 10:07 AM;bfea69ca-e7d9-488d-b01b-103621fa1516;image-20260112-100729.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15059,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@496a29b8,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zv,,,The Developers fixed an issue with the MemberCare tables not outputting or writing back in the DB Active To Deferred V2 Process. George Walles in CIT confirmed now working as expected in UAT. Test member ref: 242001,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-09 16:37:32.616,10281_*:*_1_*:*_6505_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_2_*:*_89741899_*|*_10252_*:*_2_*:*_6720_*|*_10354_*:*_3_*:*_16489459_*|*_10056_*:*_1_*:*_62387328_*|*_10356_*:*_1_*:*_240281580,,"09/Jan/26 4:37 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Care tables are outputting as expected when testing in Calculate but not displaying in Aurora when running the DB Active To Deferred V2 Process. Referred to Phil King on 09/01/2026. 


!589521a5-10a3-4efd-925b-1629a4bccf40 (c0b1e1f5-d5fe-4152-bdc2-af8e30f888be).png|width=580,alt=""589521a5-10a3-4efd-925b-1629a4bccf40.png""!

!image-20260109-163710.png|width=609,alt=""image-20260109-163710.png""!","12/Jan/26 10:07 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] Devs advised a fix was applied to UAT on Friday 9th. I asked George Walles to test and he advised they were outputting and writing back as expected now. Sending ticket for close. 

!image-20260112-100729.png|width=630,alt=""image-20260112-100729.png""!",12/Jan/26 10:08 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Note: have not added any code fix versions to the ticket as no coding update was needed. ,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,12/Jan/26 11:21 AM
Police A>R Settlement - MCCR not updating in Pension Element values,PHX5-782,20720,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,07/Jan/26 4:09 PM,19/Jan/26 4:49 PM,,09/Jan/26 3:32 PM,Client 172 Fire A to R Version 7,Client 176 Police A to R Version 9,Client 184 Police D to R Version 2,Client 185 Fire D To R Version 2,,,,,,,,,0,,,,,"Member ID 355938.

Reform option chosen. 

1.  Pension element values on pension screen are only showing as MCPN value, MCCR amounts are not showing. -2. Cash taken on MCPN line is not showing the value from cash taken on retirement details table above.- 

!image-20251218-174241.png|width=416,alt=""image-20251218-174241.png""!",,Andrew Wilson,Tracy Collins,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,PHX5-792,,,,,,,PHX5A-308,,,,,,,,,07/Jan/26 4:11 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20251218-174241.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14602,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@e7ff710,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zr,,,MCCR elements now outputting for retirement settlement cases.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-08 07:18:39.778,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_85599709_*|*_10252_*:*_1_*:*_8613383_*|*_10354_*:*_1_*:*_8356_*|*_10056_*:*_1_*:*_71627310,,"08/Jan/26 7:18 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Point 1 - definitely our problem if we are not populating/calculating this element.

For point 2: Initial question is whether the table can deal with negative values. Maybe the front end is doing a min of zero when populating this.

We should find out on our side if we calculate this value in the results, if we do, then it is pointing to a dev change to allow the output table to be correct.

My worry here is that we will hit the whole issue of the cash being negative in the first place. We need to know ASAP if this is going to be an issue, as it requires a substantial dev change to resolve this.","08/Jan/26 9:57 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;For testing purposes:

35593801  NPPS2006   Was DB Active SalaryLinkageClosedDB
35593802  CARE 2015	 Was DB Active Normal","08/Jan/26 11:32 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;issue is in ActiveToRetired code:

{noformat}	            foreach (KeyValuePair<InternalCalculationPensionOptionType, PensionOption> kvp in activeSalaryLinkedLegacyOptions)
	            {
	                allActiveSalaryLinkOptions.TryAdd(ConvertKey(kvp.Key), kvp.Value);
	            }
	
	            foreach (KeyValuePair<InternalCalculationPensionOptionType, PensionOption> kvp in activeSalaryLinkedReformOptions)
	            {
	                allActiveSalaryLinkOptions.TryAdd(ConvertKey(kvp.Key), kvp.Value);
	            }{noformat}

When we add the legacy options, it adds the TargetLumpSumCommuted option, and so when it tries to add the same thing for reform, it fails.

We need logic so that we take the TargetLumpSumCommuted pension option for the chosen McCloud option","08/Jan/26 11:54 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Updated relevant code to:

{noformat}foreach (KeyValuePair<InternalCalculationPensionOptionType, PensionOption> kvp in activeSalaryLinkedLegacyOptions)
            {
                if (kvp.Key == InternalCalculationPensionOptionType.TargetLumpSumCommuted)
                {
                    if (chosenMcCloudOption == McCloudOption.Legacy)
                    {
                        allActiveSalaryLinkOptions.TryAdd(ConvertKey(kvp.Key), kvp.Value);
                    }
                }
                else
                {
                    allActiveSalaryLinkOptions.TryAdd(ConvertKey(kvp.Key), kvp.Value);
                }
            }

            foreach (KeyValuePair<InternalCalculationPensionOptionType, PensionOption> kvp in activeSalaryLinkedReformOptions)
            {
                if (kvp.Key == InternalCalculationPensionOptionType.TargetLumpSumCommuted)
                {
                    if (chosenMcCloudOption == McCloudOption.Reform)
                    {
                        allActiveSalaryLinkOptions.TryAdd(ConvertKey(kvp.Key), kvp.Value);
                    }
                }
                else
                {
                    allActiveSalaryLinkOptions.TryAdd(ConvertKey(kvp.Key), kvp.Value);
                }
            }{noformat}

Test case added:

UAT 782 - Missing MCCR element      with an expected value on the MCCR element. Test case now passes

A to R, Police and Fire, D to R Police and Fire client calcs all updated.","08/Jan/26 2:27 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Raising the cash = 0 issue with devs, as am unable to replicate this issue on our side.","09/Jan/26 6:46 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;I have double checked what the code was at the point the calculation was run. On the 18th December, the Client code was on version 5, which was using version 123 of Public Sector Calcs. In version 123, the code was using the correct key for cash. If for any reason, they had used the previously released version (4) which used version 114 of Public Sector Calcs, then the key was incorrect, and it would have led to the element cash being 0.",09/Jan/26 1:08 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Separated out the cash = 0 issue to PHX5-792,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,09/Jan/26 3:32 PM
"Police D>R Error ""An item with the Same Key has already been added""",PHX5-781,20719,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,07/Jan/26 3:34 PM,19/Jan/26 4:49 PM,,13/Jan/26 10:25 AM,Client 184 Police D to R Version 2,,,,,,,,,,,,0,,,,,"Member ID 464033.  Member has 3 records.  01 Pensioner, 02 Deferred and 03 Exit.  Admin used the 02 record to run the calc and got the following error.

!image-20260107-151942.png|width=250,alt=""image-20260107-151942.png""!

There is no Main Member ID suggesting the records are not and should not be linked.",,Andrew Wilson,Annabelle Stephenson,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-340,,,,,,PHX5-790,PHX5-806,PHX5-807,07/Jan/26 3:38 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260107-151942.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14600,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@28b3ce3,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002v,,,"Police Deferred Retirement calculations will now run when:

* there is only one deferred member record input (no other member inputs)
* there is one deferred member and one or more pensioner/exit member(s) input

(and will continue to run when there are two deferred members (one normal, one salary linked) - no change). 



[Fix is due to be replicated on Police Active Retirement calculations, and both Fire Active and Deferred retirement calculations.  Currently only applies to Police D>R.]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-08 07:24:21.501,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_359469360_*|*_10252_*:*_1_*:*_2920_*|*_10354_*:*_1_*:*_7737709_*|*_10056_*:*_1_*:*_80363203,,08/Jan/26 7:24 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Our code that identifies which member is which for D to R is only reliant on category. So could be an issue if we are sent more than just the deferred record. May need to update our logic to take the status into consideration also.,"08/Jan/26 5:57 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+PublicSectorMemberInfo module (where we get IMemberInfo):+ 

* I replicated and tweaked the .Contains(“CARE”) logic that was present in  {{DeferredNormalMemberInfo}} and {{DeferredSalaryLinkedMemberInfo}}, as it was only being applied to the linkedMembers and was incorrect in the salary linked one (should be !Contains as salary linked can’t be CARE).

{noformat}if (member.CurrentCategory.Category.Key.Contains(""CARE"")) //in NormalMember
if (!member.CurrentCategory.Category.Key.Contains(""CARE"")) //in SalaryLinkedMember{noformat}

So deferredNormalMemberInfo only returns info from CARE members, and deferredSalaryLinkedMemberInfo only returns info from DB members.



* I introduced two checks against InferredStatus in these two same functions

{noformat}if ... && (linkedMember.Value.InferredStatus == InferredStatus.Deferred)){noformat}

which ensures that only memberInfo for deferred members is returned.



+ModelConversions module (where we deal with MemberData):+ 

* I copied the .Contains(“CARE”) logic into {{DeferredNormalMemberData}} and {{DeferredSalaryLinkedMemberData}} so that again normal only returns CARE data, and salary link only returns DB data.
* I also copied the InferredStatus checks implemented in PublicSectorMemberInfo into these data functions.



+Police D>R calculation+

Some structural changes needed in here to take into account all the different combinations of member inputs we could have.  I have run these by Isobel in admin who has confirmed my understanding. Possible combinations for deferred retirement calcs are:

# One deferred normal (CARE) member, one deferred salary linked (DB) member [the basic case]
# One deferred normal member only
# One deferred salary linked member only
# One deferred normal member, one or more pensioner or exit salary-linked members [case that raised this ticket]
# One deferred salary linked member, one or more pensioner or exit normal members

In other words, we need to allow for +both+ a deferred normal member and a deferred salary link member to exist, and allow for just +one+ of these to exist.

(It does not matter which way around these are entered as inputs (ie. which is the main and which is linked) as our code already checks for this.)

I’ve reordered the D>R code so that we:

# Run the non-mccloud calcs.  _If_ a deferred salary link member exists, we run salary link calcs
## _and if_ a normal member also exists, we run the normal calcs;
# Or (for mccloud members) _if_ a deferred salary link member exists, we run salary link calcs 
## _and if_ a normal member also exists, we run the normal calcs;
# Otherwise (again for mccloud members) _if_ a deferred normal member exists, we run the normal calcs.

Although we are now in client 184, I have also copied my latest changes into client 176 as I changed my mind on the structure so it will likely be much easier to check from there.



+Testing:+

I’ve added 4 tests to client 176 D>R, one replicating the test that raised this ticket (case 4), and the other three covering cases 2, 3 and 5.  The existing D>R tests already cover case 1.

All of these are passing with no errors logged.  I added expected results that verify the correct sets of memberInfo are being created based on the member inputs.","12/Jan/26 4:04 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I am creating new tickets for us to consider these same changes for A>R calc on Police, and also to consider both A>R and D>R for Fire (as I think the inclusion of retained members makes this more complicated so will need admin input).",,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,13/Jan/26 10:25 AM
"Police D>R - ""Minimum retirement age not met error"" incorrectly applying to ill health case",PHX5-780,20718,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,07/Jan/26 3:34 PM,19/Jan/26 4:49 PM,,14/Jan/26 6:26 AM,Client 184 Police A to R Version 11 ,Client 184 Police D to R Version 2,Client 185 Fire A to R Version 8,Client 185 Fire D To R Version 2,,,,,,,,,0,,,,,"Please see linked ticket for further details. The error stating that the member has not reached minimum retirement age should not apply as it’s an ill health retirement. 

Not sure if it’s a red herring but there are several places in the debug where isIllHealth = false

!image-20260107-153733.png|width=361,alt=""image-20260107-153733.png""!",,Andrew Wilson,Matt Lilwall,Russell Armstrong,Steven Wright,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,640f34fc1273131f2adfede9,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,PHX5A-334,,,,,,,,,07/Jan/26 3:37 PM;862ca789-6c5f-4d0a-b054-60929f0a27a7;image-20260107-153733.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14599,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@739c1472,,,,,,,,,,,,,,,,,,,,Confirm,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zzw,,,Fixed an issue with retirement eligibility checks for all categories in retirement related calculations. Retirement validations were previously not picking up whether the retirement was ill health or non ill health. This caused an error with Police Member 8712301 D>R retiring on ill health grounds and was stopping the calc when it shouldn’t. Retirement calcs will now pick up whether the input is ill health or non ill health and stop the calc if eligibility rules are not met. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-12 07:05:45.11,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_18352532_*|*_10252_*:*_1_*:*_93843598_*|*_10354_*:*_1_*:*_2964_*|*_10056_*:*_1_*:*_408609464,,"12/Jan/26 7:05 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;See [https://xps-jira.atlassian.net/browse/PHX5-749|https://xps-jira.atlassian.net/browse/PHX5-749|smart-link]

The code to identify ill health cases is incorrect

{{IllHealthType illHealth = Parameters.SeriousIllHealthRetirement ? IllHealthType.HigherTier : Parameters.IllHealthRetirement ? IllHealthType.LowerTier : IllHealthType.None;}}

should be updated to use the new ill health inputs","13/Jan/26 4:03 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Cannot move {{IllHealthType illHealth}} in D>R client level code to the new ill health inputs as they are not available in the D>R Inputs from Devs. D>R will remain with the old parameter ill health inputs of {{Parameters.IllHealthRetirement}} and {{Parameters.SeriousIllHealthRetirement}}.

# In Public Sector Calculation > {{BuildDeferredPreComPenCalculator}}. When calling {{PublicSectorDeferredRetirementCalculatorSetUp}}, updated the parameter IllHealthType.None to IllHealth. This was hardcoding all Deferred to Retired calcs to be non ill health cases despite the parameter input being used, it was overriding it before hitting the RetirementValidationStrategies.
# In all {{RetirementValidationStrategy}}classes i.e. {{PPS1987RetirementValidationStrategy}}, FPS1992, CARE2015 etc. Updated the IF Statement from {{if (IllHealth == 0)}} to be {{if (IllHealth == IllHealthType.None)}} We were using the enum but the code was passing in either None, LowerTier or HigherTier. It was therefore just skipping straight over the IF statement for all cases and hitting the Else in PPS1987 for all cases (should only be hit for non ill health D>R cases), it was then doing a check on service and age of member and deciding whether they could retire. It was never hitting the IsActive logic etc. Now fixed. 
# Added test case RetirementValidationStrategy 1987 Deferred Ill Health Test case to check a PPS 1987 Deferred Status Lower Ill Health Retirement would be allowed to retire and it was. All other test cases still green because test cases use the enum for ill health in PSC, just not when running at client level. ","13/Jan/26 4:29 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Just to further add [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a], my update affects all retirement calcs, (A>R and D>R’s). It has fixed the specific test case member in the linked ticket for D>R.  ",15/Jan/26 11:12 AM;640f34fc1273131f2adfede9;Not a valid test? Spec says Lower Tier ill health retirement only available under age 55 but member is over age 55. Will now fail as can’t calculate an additional commutation factor over age 55,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,14/Jan/26 6:26 AM
Refactor PSO,PHX5-779,20680,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,07/Jan/26 1:53 PM,07/Jan/26 1:55 PM,,,,,,,,,,,,,,,0,,,,,PSO was coded along similar lines to Scheme Pays.  However Scheme Pays has since been refactored. We should ensure that PSO code is also brought in line to match.,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@a87f536,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qzr:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,20602,PHX5-773,TECHNICAL DEBT,To Do,07/Jan/26 1:53 PM
Police D>R - Eligibility for Pension credit members,PHX5-778,20679,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Russell Armstrong,640f34fc1273131f2adfede9,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,07/Jan/26 1:49 PM,19/Jan/26 4:49 PM,,15/Jan/26 11:57 AM,Client 184 Police D to R Version 2,,,,,,,,,,,,0,,,,,A PPS 1987 pension credit member cannot retire before age 60 (unless in serious ill health) however the code needs amending to allow retirement where DOR is the day before the 60th birthday (as per the change made in A>R).  Is it possible to change the criteria and warning for Pension credit members (identified by sub status) to not make any reference to service but just a straight unable to retire under the age of 60.  Example member ID 81060 ,,Matt Lilwall,Russell Armstrong,Tracy Collins,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,PHX5-816,,,,,,,PHX5A-332,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7d3cf2c7,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zzxi,,,Pension Credit members will no longer give errors around length of service that prevent retirement calculations,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,PHX5 Sprint 29,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-09 10:26:28.52,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_91569880_*|*_10252_*:*_1_*:*_29850_*|*_10354_*:*_2_*:*_42009_*|*_10056_*:*_1_*:*_160786646_*|*_10355_*:*_1_*:*_430597813,,09/Jan/26 10:26 AM;640f34fc1273131f2adfede9;Error they are seeing comes from MaxLumpSum in Public Sector Functions. [https://xps-jira.atlassian.net/browse/PHX5-681|https://xps-jira.atlassian.net/browse/PHX5-681|smart-link] will mean changes or a different version of this,"09/Jan/26 10:29 AM;640f34fc1273131f2adfede9;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] can you confirm with admin what category Pension Credit members fall into for lump sum calculations? I believe it’s category A as their Pension Due Date on the Deferred Elements is their 60th birthday so they are not an immediate retirement and Deferred Age = 60

{adf:display=block}
{""type"":""table"",""attrs"":{""isNumberColumnEnabled"":false,""layout"":""center"",""localId"":""6f068d00-0692-494e-84f7-d73539fcd8bb""},""content"":[{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":6},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Commutation options (DB element)""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Name""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Description""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Further comments""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Ill health (unfit for all employments)""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = A""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Ill health (unfit for police work)""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = C""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""For this, member must be under age 55""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Immediate ret = Y, Service>=30, age at dor >=55""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = A""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Immediate ret = Y, Service>=30, age at dor <55""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = C""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Immediate ret = Y, Service>=25 and <30, age at dor >=55""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = A""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Immediate ret = Y, Service>=25 and <30, age at dor >=50, <55""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = B""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Immediate ret = N, Deferred age = 60""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = A""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Immediate ret = N, Deferred age = 50""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Category = B""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]}]}
{adf}","14/Jan/26 11:45 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:640f34fc1273131f2adfede9] 

Selina has confirmed that pension credit members don’t fit into any of those categories. The [spec|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQD39QisIdBlQKmY-tI7BZZ5Acq-tEffzydDRG8pRbFbAUI?e=hS4xSN] contains a ‘Pension Credit Members’ sheet I hadn’t noticed. There you’ll find ‘DB_PenCredit_LS’. Does this give you enough information?",14/Jan/26 1:02 PM;640f34fc1273131f2adfede9;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] They haven’t got an input for DB_PenCredit_LumpSum_1987_Eligibility - I’ll be able to do something but it will just assume they are all eligible for lump sum,"14/Jan/26 2:22 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:640f34fc1273131f2adfede9] , as discussed I’m checking which these admin want to go with and have asked for an answer asap

(a) calculate lump sum for pension credit members in all cases (b) output zero for these members","15/Jan/26 9:42 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:640f34fc1273131f2adfede9] , admin has confirmed that they want the lump sum to be calculated in all cases for pension credit members.","15/Jan/26 11:30 AM;640f34fc1273131f2adfede9;Cloned this issue to look at the actual PCLS calculation and make sure this is correct.

Changes to latest data removed the Date Pensionable Service Commenced from the Pension Credit member record. Work done under [https://xps-jira.atlassian.net/browse/PHX5-681|https://xps-jira.atlassian.net/browse/PHX5-681|smart-link] stopped the calculation erroring at the previous point but was no erroring in {{PublicSectorServiceFactory}} due to this date being null. Amended logic for serviceStartDate as below so for Pension Credit members the schemeServiceEndDate is used (should result in 0 service) and no error checking is applied to DateCommencedPensionableService

{code:json} LocalDate serviceStartDate = new LocalDate ();

        if (memberInfo.SubStatus == InferredSubStatus.PensionCredit)
        {
            serviceStartDate = schemeServiceEndDate;
        }
        else
        {
            if (!memberInfo.DateCommencedPensionableService.HasValue)
            {
                Log.Error(""No DCPS - cannot calculate service"");
            }
            serviceStartDate = memberInfo.DateCommencedPensionableService.Value;
        }{code}

Later in the factory changed {{memberInfo.DateCommencedPensionableService.Value}} to {{memberInfo.DateCommencedPensionableService ?? serviceStartDate}} as without this change the Pension Credit member was still erroring as was trying to use the null value",,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,15/Jan/26 11:57 AM
Police D>R - Incorrect ERF based on wrong age at DOR,PHX5-777,20612,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Russell Armstrong,640f34fc1273131f2adfede9,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,07/Jan/26 10:56 AM,19/Jan/26 4:49 PM,,14/Jan/26 1:20 PM,Client 184 Police D to R Version 2,Client 185 Fire A to R Version 8,,,,,,,,,,,0,,,,,"Early Retirement Factor from table A406. Expected: 0.633, based on  “age in years and completed months on day pension commences” i.e. 55y 2m. Actual: 0.635. The calculation is using 55y 3m instead of 55 2m.

Early Retirement Factor for lump sum from table B407. Expected: 0.847, based on “age in years and completed months on day pension commences” i.e. 55y 2m. Actual: 0.849. I can’t reconcile where this factor is coming from. Please check the factor table loaded to Calculate, as I can’t see the factor of 0.849 (might be looking in the wrong place).

[PPS ERLR Factor Calc Spec Module V1.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQA6sqjXJlKbTZPoMzGLOLZXAbiCb3kQv6_8BRkcNoGVN_o?e=dyC7dc]

!image-20260107-113129.png|width=1423,alt=""image-20260107-113129.png""!

[Decimal Factors|https://calculate.uat.xpsplc.com/Clients/176/factors/decimal/15]

See linked ticket in analysis Jira for further details.",,Matt Lilwall,Russell Armstrong,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,PHX5A-335,,,,,,,,,07/Jan/26 11:07 AM;862ca789-6c5f-4d0a-b054-60929f0a27a7;9628001CalcOutput.json;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14527,07/Jan/26 11:31 AM;862ca789-6c5f-4d0a-b054-60929f0a27a7;image-20260107-113129.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14560,14/Jan/26 10:47 AM;b661603b-01c2-4777-a078-ea42f749ddd8;image-20260114-104709.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15419,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@18b1f01,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz1:,,,Fix issue with ERFs being used for 1 month later than expected for NPPS 2006 deferred retirements,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 27,PHX5 Sprint 28,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-07 11:39:53.238,10281_*:*_1_*:*_4348_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_595057559_*|*_10252_*:*_2_*:*_36532_*|*_10354_*:*_2_*:*_9124890_*|*_10056_*:*_1_*:*_148958,,07/Jan/26 11:39 AM;640f34fc1273131f2adfede9;Table B407 needs looking at - jumps from factor at 55y0m to factor at 56y0m but there are factors for every other month,07/Jan/26 1:33 PM;640f34fc1273131f2adfede9;Table A406 and B407 both reloaded - were both set up incorrectly. Still need to look into why the wrong age is being calculated when looking for the factors,"08/Jan/26 11:10 AM;640f34fc1273131f2adfede9;Change made to {{PublicSectorPensionElementAgeAttainedStrategy}} . Was  as below but have removed .WithAgeAttainedBasis() as this was causing it to round up to the next month but age is needed in complete years and months

{code:json}decimal factor = new RetirementFactorBuilder(elementValue.Key, DateOfRetirement, MemberInfo.DateOfBirth )
                            .WithEarlyFactorTableOnly(ERFtable)
                            .WithEarlyApplicationDateOnly(DateOfRetirement)
                            .WithSchemeData(SchemeReferenceData)
                            .WithDecimalPlaces(DecimalPlaces)
                            .WithAgeAttainedBasis()
                            .GetFactor();{code}

Updated ERF tests 6, 7 and 8 as were looking at the factors for the age rounded up to the next month instead of in complete years and months.

Changing{{PublicSectorPensionElementAgeAttainedStrategy}} will impact on Fire A>R for NFPS2006 as well. Checked the guidance for the ERRFs for this category and it says to use age in years and complete months. 

I would expect the change to fix the results for test 8 in Fire A>R - these are currently slightly too high as I would expect where the ERF is being base on a higher age","14/Jan/26 10:47 AM;640f34fc1273131f2adfede9;Now returning factor for 55y and 2m

!image-20260114-104709.png|width=402,alt=""image-20260114-104709.png""!",,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,14/Jan/26 1:20 PM
Police D>R - Tax free cash amount on Max cash,PHX5-776,20611,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,07/Jan/26 10:42 AM,19/Jan/26 4:49 PM,,19/Jan/26 4:48 PM,Client 184 Police D to R Version 2,,,,,,,,,,,,0,,,,,"Member ID 356002.  Member is PPS1987 only, no McCloud.  I agree the PCLS outputs but don’t agree the Max Cash being output.  Should be 

Max Cash = 1250.18/4 X 21.4 = 6688.46

Commuted amount = 1250.18/4 = 312.54

Residual = 1250.18 - 312.54 = 937.64

Tax free amount = (20 x 937.64 + 6688.46)/4 = 6360.32

Taxable = 6688.46 - 6360.32 = 328.14

Tax = 328.14 x 0.4 = 131.26

Final Cash payable = 6688.46 - 131.26 = 6557.20

So, I think the issue is that the calc is using the taxed cash in the calculation of Tax free lump sum to output rather than the full max cash payable.

Just to confirm, given the calcs above, the Full pension, cash and residual are correct, it is just the figures in “Other Values” which are incorrect.",,Andrew Wilson,Annabelle Stephenson,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-324,PHX5-796,,,,,PHX5A-389,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@14ed8c3,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zzy,,,"For PPS1987 and FPS1992, the maximum scheme cash calculated is returned before tax, and the associated LSA values are calculated on this before tax amount.

So there is no longer double counting of tax. And The pre tax figure is output on a quote so that it can be used as the input for the settlement. As agreed, target cash figures input for settlement should be pre tax amounts.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,PHX5 Sprint 29,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-12 13:55:50.076,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_6968588_*|*_10252_*:*_1_*:*_33088969_*|*_10354_*:*_1_*:*_2486_*|*_10056_*:*_1_*:*_504113022,,"12/Jan/26 1:55 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;need to know what PCLS they are expecting us to be using for LSA.

The spec says to use a different amount to the rest of the calculation.","12/Jan/26 4:04 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;{{SchemeMaximumDBPensionOptionStrategy}} calculates the maximum cash, but stores the post tax lump sum on the pension option

When we get to calculate the LSA, we are taking the total cash of the pension option, but this is the post tax value.

We do not have the pre tax value available.

So we will need some refactoring here to enable this to work.","13/Jan/26 3:46 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] 



As discussed, 6 of your test cases will need updating.

I have updated and published LSA code.

We also need to  update PSC:

{{SchemeMaximumDBPensionOptionStrategy}} - remove the post tax code:

{noformat}public PensionOption GetPensionOption(List<ElementValue> elementValues, decimal totalService, decimal lsa, decimal lsdba)
	    {
	        decimal dbPreComPension = elementValues.GetValue(PreComPenKey);
	
	        decimal erBuyoutLS = elementValues.GetValue(ERBuyoutConstants.ERBuyoutLS);
	
	        decimal maximumLumpSum = PublicSectorFunctions.MaxLumpSum(MemberInfo, McCloudOption, IllHealth, CalculationDate, DBCommutationFactor, totalService, dbPreComPension, Rounding);
	        maximumLumpSum = Math.Min(Math.Min(maximumLumpSum, lsa), lsdba);
	
	        decimal dbPostComPen = PublicSectorFunctions.PostCommutationPension(dbPreComPension, maximumLumpSum, DBCommutationFactor, Rounding).Sum(x => x.Value);
	
	        InterimValues.Add($""MaximumDBPensionOption | DBPreComPension | AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", dbPreComPension);
	        InterimValues.Add($""MaximumDBPensionOption | MaximumLumpSum | AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", maximumLumpSum);
	        InterimValues.Add($""MaximumDBPensionOption | DBPostComPen | AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", dbPostComPen);
	        InterimValues.Add($""MaximumDBPensionOption | DBCommutedToLumpSum | AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", dbPreComPension - dbPostComPen);
	
	        return new PensionOption
	        {
	            PreCommutedPensionValues = PublicSectorFunctions.CreateSingleElementValue(FinalPensionKey, dbPreComPension),
	            TotalCash = Math.Round(maximumLumpSum, Rounding),
	            CashValues = PublicSectorFunctions.CreateSingleElementValue(FinalPensionKey, Math.Round(maximumLumpSum, Rounding)),
	            ResidualPensionValues = PublicSectorFunctions.CreateSingleElementValue(FinalPensionKey, dbPostComPen)
	        };
	    }{noformat}

{{DBTargetPensionOptionStrategy}}

remove the middle case for target over PCLS but less than maximum:

{noformat}if (DBTargetCash > dbMaxSchemeLumpSum)	
	        {
	            Log.Warning(""Target cash is greater than maximum cash."");
	            dbCash = Min(dbMaxSchemeLumpSum, lsa, lsdba);
	            dbPostComPen = PublicSectorFunctions.PostCommutationPension(dbPreComPension, dbCash, DBCommutationFactor, Rounding).Sum(x => x.Value);
	        }
	        else
	        {
	            dbCash = Min(DBTargetCash, lsa, lsdba);
	            dbPostComPen = PublicSectorFunctions.PostCommutationPension(dbPreComPension, dbCash, DBCommutationFactor, Rounding).Sum(x => x.Value);
	        }     {noformat}","13/Jan/26 4:56 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Changes applied to PSC, 6 tests failed.  4 of these had been set up specifically to test LSA, the other 2 were testing the {{DBTargetPensionOptionStrategy}}.

Luckily for the LSA ones, I had my original workings that showed the LSA figures (PCELS, taxFreeLS, etc) calculated on both the lump sum before tax, and the LS after tax.  So I was able to update the expected results with the LSA results from the LS before tax, which all passed.

I checked the figures in the other 2 tests thoroughly before updating the expected results, I agree the new figures.

Published and brought changes through to Police 184 D>R.  We are now passing on all of the above expected values in test “UAT 776 - Tax Free cash”.  I also had to tweak some figures in test “LSA _RBCEs and UPs _reform DB and CARE” that have changed, I followed them through and agree the new ones so have updated. All passing.","13/Jan/26 5:52 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] end of the day and I’m struggling to think of anything more helpful for the release notes, so please do update if you have some better wording.  I have only added fix version 184 D>R but this will actually impact both clients and all calcs.  Not sure if we should include them all?","14/Jan/26 1:55 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;When updating A to R level with this new code, some cases are knocked out. Some no longer have UPLS, but this is because after removing the code that applied tax, it is going through code that limits the cash to the lsa.

We should not be doing this - see ticket [https://xps-jira.atlassian.net/browse/PHX5-772|https://xps-jira.atlassian.net/browse/PHX5-772|smart-link] 

So worth doing both of these tickets before reviewing the test cases for impact",,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,19/Jan/26 4:48 PM
"Fire A>R NFPS 2006 scheme, applying ERF where not applicable",PHX5-775,20607,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,07/Jan/26 9:46 AM,13/Jan/26 12:00 PM,,12/Jan/26 11:21 AM,Client 172 Fire A to R Version 7,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Chris Marshall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-795,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3bf7791,,,,,,,,,,,,,,,,,,,,Confirm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zyi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 27,PHX5 Sprint 28,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-09 14:19:37.788,10251_*:*_2_*:*_237592561_*|*_10250_*:*_2_*:*_191656632_*|*_10252_*:*_1_*:*_2963_*|*_10354_*:*_1_*:*_2745_*|*_10056_*:*_1_*:*_18233,,"09/Jan/26 12:38 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Updated code with 

{noformat}	decimal factor = 0m;

		if (DateOfRetirement < erfApplicationDate)
		{
	        factor = new RetirementFactorBuilder(elementValue.Key, DateOfRetirement, MemberInfo.DateOfBirth )
	                            .WithEarlyFactorTableOnly(ERFtable)
	                            .WithEarlyApplicationDateOnly(DateOfRetirement)
	                            .WithSchemeData(SchemeReferenceData)
	                            .WithDecimalPlaces(DecimalPlaces)
	                            .GetFactor();
			
		}
		else 
		{
		    factor = 1.0m;
		}{noformat}

The ERF was being applied to all member up to age 65 where is should stop at age 60 for A>R 2006 scheme.

Liaised with admin and reply stated 

the way its just been explained to me is that when a member chooses to initiate early retirement in the 2006 scheme, its as if they have gone from deferred and the same factors apply from 55-60 but i think these would have to stop applying from 60 onwards. The only time they don't have to apply erf is if force initiate the early retirement which hardly ever happens

ok so when a member leaves in the 2006 scheme between the ages of 55-60 they would be supposed to get a deferred pension as they have not reached NPA, however, as they are entitled to a deferred pension which is immediately payable subject to a reduction, the calculation is just done there and then from active to retirement with the deferred reduction applying. If they left after 60 no reduction would apply. does that make sense? 

Also added code to factor ‘ReformCARE’ when applying ERF based on ticket
[[PHX5-707] ERF for fire A>R CARE service need to be rounded up if there is a part month - Jira|https://xps-jira.atlassian.net/browse/PHX5-707]


{noformat}			if ((publicSectorMemberInfo.TypeOfScheme() == OverallSchemeType.Fire) && 
    			(MemberInfo.Category.Contains(""CARE"") || elementValue.Key == KeyPreComConstants.ReformCAREPreCom)){noformat}","09/Jan/26 2:19 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] Sorry, can you give me more of an idea where this code change is please?","09/Jan/26 2:27 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Apologies, line 3068 public sector calc module

The amendment for CARE is on line 2978 of the same module","09/Jan/26 4:17 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] Sorry, still don’t see the changes you mention in the ticket in the code. Have you made them yet?","12/Jan/26 6:39 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  Can you point me towards the test cases for this please? If we cannot refactor now, we need to ensure that test cases are set up to ensure that the refactor later does not knock this out.","12/Jan/26 9:00 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Regarding the test case for ERF ticket test ERF test 11 specifically failed when updating the code and I confirmed that the ERF is correct.

The code change stopped existing tests passing for police which was incorrect adding the fire scheme to the code sorted this. ERF test 11 was incorrect due to how the erf should have been worked out so I amended that to show the correct ERF",,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,12/Jan/26 11:21 AM
Refactor BasePensionElementStrategy,PHX5-774,20603,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,07/Jan/26 9:21 AM,07/Jan/26 9:22 AM,,,,,,,,,,,,,,,0,,,,,"{{PublicSectorPensionElementStandardStrategy}} is growing with a lot of conditional logic.

There are a lot of if statements around {{erfApplicationDate}}.

The calculation of this date should be its own strategy and factory pattern and become an input to the PensionElementStrategy.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@8d22dc7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qxz:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,20602,PHX5-773,TECHNICAL DEBT,To Do,07/Jan/26 9:21 AM
TECHNICAL DEBT,PHX5-773,20602,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,07/Jan/26 9:20 AM,07/Jan/26 9:25 AM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@713f2333,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-14,,,,,,,,,,,,,,dark_orange,,,,,,,,,,,,,0|i00qxr:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,07/Jan/26 9:20 AM
Police A>R - Max lump sum restricted,PHX5-772,20564,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,06/Jan/26 3:54 PM,23/Jan/26 10:10 AM,,23/Jan/26 10:10 AM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Annabelle Stephenson,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-319,,,,,,,,,06/Jan/26 3:59 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260106-155810.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14423,06/Jan/26 3:59 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260106-155842.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14422,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@31b8e67d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00003i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,PHX5 Sprint 29,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-08 12:52:39.095,10281_*:*_1_*:*_2408_*|*_10250_*:*_2_*:*_3838906_*|*_10252_*:*_2_*:*_9871_*|*_10354_*:*_3_*:*_340073861_*|*_10056_*:*_1_*:*_7145455_*|*_10355_*:*_1_*:*_336662832,,"06/Jan/26 3:59 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Member ID 107304 - Member exceeds LSA but both Max lump sum and PCLS are showing the same figures, so no UPLS tax is being calculated. PCELS value is being output and at correct value.  

Altair calc shows

!image-20260106-155810.png|width=400,alt=""image-20260106-155810.png""!

!image-20260106-155842.png|width=400,alt=""image-20260106-155842.png""!",08/Jan/26 12:52 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Hi [~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] I’ve tagged April in a comment on the linked ticket as I have some queries 🙂 ,"14/Jan/26 7:06 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Will need to look into more, but initial guess is that we are restricting pension to lsa in the pension option. We may need to remove this min calculation and only use lsa to limit values in the lsa calculation.",15/Jan/26 8:12 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;A note here - Post 2015 CARE should not be restricted to LSA in pension option,23/Jan/26 10:09 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Admin have confirmed that this issue has been fixed and have closed their ticket.  Therefore I am closing this one to keep us in sync.,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,23/Jan/26 10:10 AM
Extra outputs for Calculation Prints,PHX5-771,20549,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,06/Jan/26 1:27 PM,19/Jan/26 4:49 PM,,12/Jan/26 11:20 AM,Client 172 Fire A to R Version 7,Client 176 Police A to R Version 9,Client 184 Police D to R Version 2,Client 185 Fire D To R Version 2,,,,,,,,,0,,,,,,,Andrew Wilson,Chris Marshall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5fadd85,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zzr,,,"There is a new result to populate on retirements:

MemberToSchemeType

It is now populated with

Key                          Value

12345                      Pre22

12346                      Post22

Where key is auroraID.

This is to enable calculation prints to use this key for tags on letters.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 28,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-01-12 11:20:20.739,10281_*:*_1_*:*_442079114_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_614817_*|*_10252_*:*_2_*:*_63680472_*|*_10354_*:*_2_*:*_8156_*|*_10056_*:*_1_*:*_298469,,"07/Jan/26 7:16 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Waiting for an update from Jim. The new dictionary is not automatically newed up. Jim is sorting this. As soon as we get the update we can add

if (activeSalaryLinkedMemberInfo != null)
{
	result.MemberToSchemeType.Add(activeSalaryLinkedMemberInfo.AuroraId, ""Pre22"");
}

if (activeNormalMemberInfo != null)
{
	result.MemberToSchemeType.Add(activeNormalMemberInfo.AuroraId, ""Post22"");
}



Need to update all retirement calculations for all clients, and DIS calcs.","12/Jan/26 10:04 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Police A to R updated

Fire A to R updated

Police D to R updated

Fire D to R updated

Police DIS updated

I have checked existing text cases (where available) and these are not populated.",12/Jan/26 11:20 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;All looks good to me,,,,,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,12/Jan/26 11:20 AM
GAD - implement strategy pattern,PHX5-770,20546,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,06/Jan/26 12:24 PM,19/Jan/26 4:49 PM,,07/Jan/26 6:32 AM,Client 172 Fire A to R Version 6,Client 176 Police A to R Version 8,Client 184 Police D to R Version 2,Client 185 Fire D To R Version 2,,,,,,,,,0,,,,,"Work completed under linked ticket 382 did not allow for GAD under TargetCommuted pension option (awaiting Andrew’s return and advice).  Andrew suggested a strategy pattern to use that would tidy up the code, and advised on the McCloud defaulting to Legacy issue.",,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,PHX5-756,PHX5-382,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@116be4bc,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qu7:,,,"Following last release, GAD contributions are now being correctly added/deducted for Target Cash pension options, as well as all other options.  GAD value to use is stored in OtherValues (GADOwedCash).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 27,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_15251773_*|*_10252_*:*_1_*:*_1811_*|*_10354_*:*_1_*:*_2187_*|*_10056_*:*_1_*:*_184996,,"06/Jan/26 4:37 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Coding changes:

* Removed some functions I’d added to *PS Functions*, its only the one GAD function {{ApplyGADContributions}} there now (haven't bothered republishing this up the stack yet as no change to this function we're actually using)
* Introduced {{IGADElementStrategy}} in *PSCalculation* with a default and nil strategy, which return a new element value (if GAD conts present)
* Added {{GADElementFactory}} to select the strategy based on Category.  this is called in PublicSectorDeferredRetirementCalculatorSetUp and PublicSectorPensionOptionCalculatorSetUp
* Minor change within {{RetiredCalculator}} to separate retrieving the GAD element and then applying it to the pension options

Testing:

* The tests that were in *PSFunctions* have been moved up to *PSCalculation*. These use testRetirementResultsLegacy testing function and they cover various data scenarios:
** Duplicate contributions of same type (warning message returned)
** No GAD contributions (info message returned)
** Settled contributions (only unsettled conts included)
* There are also tests on the actual calculation/application of the GAD conts to the pension options:
** ‘Simple case’ - legacy, covers all the pension options
** Reform TargetCommuted (contains both DB and CARE values, GAD deducted only from DB)
** Negative contributions owed (in other words, GAD conts due to member so +added+ rather than deducted from cash)
** GAD conts to be deducted exceed target cash amount (warning message returned, cash = 0)
* Tests at client levels showing the correct GAD amount deducted from pension options:
** *Police A>R* - “test _GAD conts _reform PPS1987”
** *Police D>R* - “GAD conts _legacy NPPS”
** *Fire A>R* - “GAD conts _legacy NFPS”",,,,,,,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,07/Jan/26 6:32 AM
Police A>R - Deferred care Scheme Pays deduction,PHX5-769,20511,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,06/Jan/26 11:31 AM,19/Jan/26 5:12 PM,,19/Jan/26 4:45 PM,Client 184 Police A to R Version 12,Client 185 Fire A to R Version 9,,,,,,,,,,,0,,,,,Member ID 107304. If the member is too young to take the Care benefits and the Care benefits are being shown as a deferred benefits (ie no ERF is being applied) the Scheme Pays amounts should not be deducted from the values output,,Andrew Wilson,Naomi Robinson,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-318,,,,,,PHX5A-363,PHX5-768,,13/Jan/26 10:29 AM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260113-101315.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15332,13/Jan/26 10:29 AM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260113-102709.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15333,13/Jan/26 10:31 AM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260113-103109.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15335,19/Jan/26 12:25 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260119-122522.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15698,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@41df85,,,,,,,,,,,,,,,,,,,,Confirm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zz9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,PHX5 Sprint 29,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-13 10:29:02.137,10251_*:*_2_*:*_148602454_*|*_10250_*:*_2_*:*_378547590_*|*_10252_*:*_1_*:*_505513806_*|*_10354_*:*_1_*:*_221091_*|*_10056_*:*_1_*:*_93276341,,"13/Jan/26 10:29 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Hi [~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] Just to confirm, I am setting the code so that the CAREPreCom value remains equal to the AccruedCAREPension value of 7244.99 rather than deducting 711.90 to become 6533.09. 

So this:

!image-20260113-101315.png|width=400,alt=""image-20260113-101315.png""!

!image-20260113-103109.png|width=372,alt=""image-20260113-103109.png""!

becomes this:

!image-20260113-102709.png|width=385,alt=""image-20260113-102709.png""!



Could you confirm that PENPreCom will continue to deduct DBSchemePayPensionDebit, so PENPRECom would be 67,595.50 - 1489.64 = 66,105.86?","13/Jan/26 3:38 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Added logic to calculate NRD using MemberInfo (feeds in from Public Sector MemberInfo in PSC).

Added check if under NRA.

If so, added warning and to add CARE elements with value of 0. We still want a value added prevent calcs erroring for calculating no scheme pay for either CARE or DB, since calc expects to need to calculate one or the other where Scheme Pays are present on the member record.

This code is within the CARE strategy of the Scheme Pays global module and tested in there: CARESchemePayTest: Member under CARE NRA.

To confirm, Public Sector Member Info sets CARE NRAs at the date they reach their NRD, rather than at state pension age, as for other categories, so this check is deemed accurate.

{noformat}        if (beforeNRD)
        {
            Log.Warning($""Member too young to take CARE benefits: CARE Scheme Pays of £{buckets.CareTotal:N2} not deducted from deferred element values, for AuroraId {MemberInfo.AuroraId}."");

            results.Add(new ElementValue
            {
                Key = KeyAccruedPensionConstants.CARESchemePayPensionDebit,
                Value = 0
            });

            // PrevPIP handled separately so CARE calculator only does the singular job of calculating care scheme pays. The prev pip will only be included where calcType is Annual Allowance, as instructed in the factory
            results.Add(new ElementValue
            {
                Key = KeyAccruedPensionConstants.CARESchemePayPensionDebitSincePrevPIP,
                Value = 0
            });
        }
{noformat}","13/Jan/26 4:20 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;In addition to the below, I have also added a test case for the member admin identified into the Police A>R Client 184.

Test case: UAT Ticket - PHX5-769 Scheme Pay Deductions Under CARE Age

Tests for warning message that member is to young for care pension, that CARESchemePaysDeduction is £0 in the deferred element results and that the PreComPen has no deduction for scheme pays.","14/Jan/26 6:34 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] Code all fine, my worry now is that we have very Public Sector specific code in a generic SchemePays module. The fact that it is named {{CareSchemePayCalculator}} will not help us in the future, as people are likely to use that just for any CARE scheme pays.

Need to establish if this is generic enough for others to use. If not, I would rename it as PublicSectorCARESchemePayCalculator to make it clear.

If we were doing this properly and it didn’t cause us a headache of dependency - this would then be in its own public sector scheme pays module. Probably need a ticket in tech debt epic to cover this part.","14/Jan/26 6:37 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Actually - just scanning through the rest of this module - it is already Public Sector specific. Certainly {{SchemePayCalculatorFactory}} is not reusable outside of Public Sector.

We definitely need a tech debt ticket to separate out global scheme pay logic from public sector.","14/Jan/26 12:27 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Hi Andrew. I have considered this further and am checking whether all public sector calcs should have this logic (i.e. AA calcs too). If yes, I will set up a ticket for non PS calc logic to be moved out of this module.

If, in fact, A>R differs from AA, I will update this code to have distinct strategies. 

Have queried with [~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] today and so noting here for the record. Need to confirm whether CARE scheme pays are not deduced from CAREPreCom for members under 60 in AA calcs as well as A>R.","19/Jan/26 12:20 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;I have added in the SchemePaysStrategy in PSC which we have agreed needs a total refactor to split out all the “if” logic, but per Friday we said this would have to do, to get the calcs running. I have added 17 test cases across various possible options for application dates and tables. It is very hard to test as we only have specs giving the factors and ages to apply from and minimal test cases, so I have set expected values purely by what the spec appears to be asking for.

I am not yet sure how i will refactor the strategy/ have various schemepays strategies, but when I do so, can update Apply RTF to make sure the factory is called to then select the correct one and the tests pass.

What I have done does not produce and errors but I it has been done to meet the requirement by today rather than being best practice.","19/Jan/26 12:25 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Further note: Applied only to Scheme Pays and A>R: 

!image-20260119-122522.png|width=461,alt=""image-20260119-122522.png""!",,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,19/Jan/26 4:45 PM
Police A>R - Scheme pays debit RTF to be applied,PHX5-768,20510,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,06/Jan/26 11:03 AM,19/Jan/26 5:12 PM,,19/Jan/26 4:44 PM,Client 184 Police A to R Version 12,Client 185 Fire A to R Version 9,,,,,,,,,,,0,,,,,"Member ID 107304.  As per spec, 1987 SP debits should be revalued and then an RTF (in this case 0.236) should be applied if the member is under 60 at DOR.  Expected deduction

!image-20260106-113016.png|width=440,alt=""image-20260106-113016.png""!",,Naomi Robinson,Tracy Collins,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-318,PHX5-769,,,,,PHX5A-362,,,06/Jan/26 11:30 AM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260106-113016.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14354,13/Jan/26 4:43 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20260113-163926.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15383,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@197ead6a,,,,,,,,,,,,,,,,,,,,Confirm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zzzy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 29,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-13 16:43:19.228,10281_*:*_1_*:*_327699_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_46378_*|*_10252_*:*_2_*:*_530823031_*|*_10354_*:*_3_*:*_458823124_*|*_10056_*:*_1_*:*_94832305_*|*_10355_*:*_1_*:*_58707650,,"13/Jan/26 4:43 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Hi [~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21]. This ticket asks for an RTF  to be applied to scheme pay debits.

It says in the ticket “per the spec” but on the A>R spec I can only find the below, relating to Care deferred elements on the 1987 tab.

!image-20260113-163926.png|width=400,alt=""image-20260113-163926.png""!

Is it possible to confirm which spec has the details of which RTF factor to apply as I couldn’t find the info when searching the specs, but have probably missed it. I checked A>R, AA and Divorce (other debits) specs.

*Current calc:*

At the moment, the Scheme Pays deferred element has no reduction applied, only an PI factor enhancement.

On retirement, that deferred element value will be added to the AccruedCAREPension/ AccruedDBPension values (deferred element outputs) to get a total PENPreCom or CAREPreCom (pension element outputs), which has an ERF or LRF applied the whole figure. 

Looks like the spec is saying to apply the RTF at the deferred element stage, so I want to check:

# What factors are used for the RTF
# If a member has an RTF applied to the deferred element will this therefore also factor into the A>D calc?
# When the member retires do they also get an ERF on the pension element?
# Does this apply to CARE and DB Scheme Pays

Side note: When coding AA, we were told that CARESchemePayDeductions apply to CARE categories and CAREPreComPen (main members) and DBSchemePayDeductions apply as a total against PENPreCom (no split for ReformCAREPreCom). If this is not the case we’d need a spec for this aspect.

Many thanks.",14/Jan/26 9:20 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] The Pre Com spec contains details of the Retirement Timing factor applicable to Scheme Pays.  The DB scheme Pays should be reduced if the member is under age 60 even though the scheme benefits do not get reduced.  The reduction on CARE relates to State Pension Age (which I think ties in with the actual ERF).,"19/Jan/26 4:41 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Fixed along with 769 and SchemePayStrategy in PSC, which selects an ERF (RTF) for SchemePays only rather than a factor for the whole precom. Combined with [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452]'s refactoring of PSC to allow for multiple retirement factors. There are 17 tests in PSC to check the factor table, years early/late and final element value for all categories, normal and ill health, early and late.",,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,19/Jan/26 4:44 PM
Police A>R - GAD conts - Full pension value should be adjusted where there is no cash,PHX5-767,20509,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,06/Jan/26 10:22 AM,05/Feb/26 1:27 PM,,03/Feb/26 10:52 AM,Client 184 Police A to R Sprint 31,Client 184 Police D to R Sprint 31,Client 184 Police Partial Ret Sprint 31,Client 185 Fire A to R Sprint 31,Client 185 Fire D to R Sprint 31,Client 185 Fire Partial Ret Sprint 31,,,,,,,0,,,,,"Member ID 111315.  For the legacy zero/target cash options admin would expect to see the full pension reduced by the annual of the conts to be paid (conts/CommFac).  The letter currently shows 

!image-20260106-102514.png|width=440,alt=""image-20260106-102514.png""!

Where the Max pension figure is the total pension (as per our calcs) £40,552.93 less the PSO debit £6,388.99 less the annual conts deduction figure of £76.57.",,Annabelle Stephenson,Tracy Collins,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,PHX5-823,,,,PHX5A-317,PHX5-847,,,,,,,,08/Jan/26 1:22 PM;18934601-32fa-4c76-9b74-159dc94fd206;GAD zero cash example.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14717,06/Jan/26 10:26 AM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260106-102514.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14321,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3f4f66c8,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi0000000007z,,,"For zero cash options, the GAD value owed will be commuted as pension:

* The commuted GAD value will be deducted from residual pension.  
* Commuted GAD amount will be stored under CommutedPensionValues.  
* Cash value (pre-GAD) will be maximum of 0 and GAD value owed.  
* Post GAD cash value in OtherValues will always be 0.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 31,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-06 19:09:24.439,11070_*:*_1_*:*_0_*|*_10251_*:*_1_*:*_12708773_*|*_10250_*:*_1_*:*_64715286_*|*_10252_*:*_1_*:*_10917739_*|*_10354_*:*_2_*:*_167954452_*|*_10056_*:*_1_*:*_26919021_*|*_10355_*:*_1_*:*_1806013048_*|*_11103_*:*_1_*:*_7689,,"06/Jan/26 7:09 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] this was how I’d set up GAD initially (to apply a “commuted” GAD value to the pension when cash = 0), and then Iain told you they can’t do that.  I’ve tried to find details of that but unfortunately I think we discussed in a call rather than IM (around 18th/19th December).  

After speaking with Iain and April, we were of the understanding that if a member wants zero cash, then admin would have to enter the GAD conts amount as the target cash, which would then result in the correct pension value.

Do you recall this the same way?  If so then I’ll pass this back to April.","08/Jan/26 1:22 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[^GAD zero cash example.xlsx]

example calc showing what the code is doing currently",26/Jan/26 4:07 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;comment added to linked ticket asking April about this,"29/Jan/26 9:40 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;* Added this to all of the DB pension options results in *PSC*, so that the CCF is available later in the pension option:

{noformat}OtherValues = new List<ElementValue>
{
    new ElementValue { Key = ""DB_CommutationFactor"", Value = DBCommutationFactor }
}{noformat}

 

* Amended {{ApplyGADContributions}} in *PS Functions*.  Please review the changes on ticket 847 as well, if not already done so, as these are all in the same function.
* If cash = 0, we need to deduct the commuted GAD value from the residual pension.  The TotalCash to return is the maximum of 0 and the GAD cash owed, and the postGADLS value is 0.

{noformat}decimal preGADCash = pensionOption.Value.CashValues.FirstOrDefault(x => x.Key == KeyPensionConstants.McCloudDBPension || x.Key == KeyPensionConstants.NonMcCloudDBPension).Value;
decimal postGADCash = preGADCash;

// deal with zero cash and target = 0 options
if (preGADCash == 0)
{
    // calculate and store the pre GAD cash values, to be returned as TotalCash
    preGADCash = Max(preGADCash, gadElementOwed);
    pensionOption.Value.CashValues.FirstOrDefault(x => x.Key == KeyPensionConstants.McCloudDBPension || x.Key == KeyPensionConstants.NonMcCloudDBPension).Value = preGADCash;
    pensionOption.Value.TotalCash = pensionOption.Value.CashValues.Sum(x => x.Value);
  
    postGADCash = Min(0, preGADCash - gadElementOwed);
  
    // calculate and store the residual pension post GAD
    decimal dbCommutationFactor = pensionOption.Value.OtherValues.Where(x => x.Key == ""DB_CommutationFactor"").Select(x => x.Value).FirstOrDefault();
    decimal postCommutationPension = pensionOption.Value.ResidualPensionValues.FirstOrDefault(x => x.Key == KeyPensionConstants.McCloudDBPension || x.Key == KeyPensionConstants.NonMcCloudDBPension).Value;
  
    decimal postGADPension = PostCommutationPension(postCommutationPension, gadElementOwed, dbCommutationFactor, 2).Sum(x => x.Value);
    pensionOption.Value.ResidualPensionValues.FirstOrDefault(x => x.Key == KeyPensionConstants.McCloudDBPension || x.Key == KeyPensionConstants.NonMcCloudDBPension).Value = postGADPension;
  
    InterimValuesLogger.AddWithLogging($""GAD contributions deduction from Pension | PensionOption: {pensionOption.Key}"", $""{postCommutationPension} - {(gadElementOwed/dbCommutationFactor).Round(2)} = {postGADPension}"", InterimValuesLogger.LoggingMode.BothInformation);
}
else // all other pension options
{						
    postGADCash = preGADCash - gadElementOwed;	
    InterimValuesLogger.AddWithLogging($""GAD contributions deduction from Cash | PensionOption: {pensionOption.Key}"", $""{preGADCash} - {gadElementOwed} = {postGADCash}"", InterimValuesLogger.LoggingMode.BothInformation);				
}{noformat}

* Commuted pension values in the pension option get updated automatically based on the values of pre- and post-com pensions, so no coding needed for that.

 

+Testing:+

I set up test “UAT test 767 _GAD on zero cash option” in police A>R, testing on zero cash option and target option values.  It is passing.

As expected, some Police A>R tests failed after my updates, where they were testing residual pension values on zero cash or target cash options.  I have gone through and updated the expected values for these, making sure the changes are in respect of GAD only.  I need to do the same on all the other retirement calcs.",30/Jan/26 11:09 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;All retirement calcs now been updated with latest PSC dependency (v211) and all affected tests checked and updated,"30/Jan/26 2:34 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452]  as discussed, i’ve added some additional comments into the GAD function to explain why we use residual pension values.  Do you think this is sufficient?  Not published yet but saved in PSFunctions.

{noformat}// calculate and store the residual pension post GAD
// before GAD, pre-com pension = residual pension when cash = 0, except on NPPS where cash is inversely commuted for residual pension	
// so post GAD pension is calculated on the residual pension, not the pre-com{noformat}



* Test “GAD deductions _reform DB CARE” at PSC level confirms the code works where we have both DB and CARE in an option (TargetCommuted).  Essentially CARE is completely ignored for any GAD changes, so any CARE elements are unchanged and totalled with the new DB elements as expected.  (TotalCash = 21000 DB (preGAD amount) + 5250 CARE = 26250)



* “Police A>R Test 8 NPPS” in police A>R tests on the residual pension values for the zero cash option.  As a NPPS member, for the zero cash option, the accrued cash already due to the member is inversely commuted for additional pension, so residual pension > pre-com pension.  This test highlights that we must apply the GAD adjustment to the residual pension rather than the pre-commuted pension.  
** In ReformDBZeroLumpSum pre-com pension = 7238.83; residual pension = 8477.78
** Total commuted pension is the value of the inversely commuted cash (7238.83 pre-com - 8477.78 residual = -1399.48) plus the inversely commuted GAD (3321.53 GAD / 20.69 = 160.53)
** -1399.48 + 160.53 = -1238.95",03/Feb/26 10:52 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Admin tested and confirmed OK to close,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,03/Feb/26 10:52 AM
Police A>R - GAD conts calcs using previous year,PHX5-766,20508,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,06/Jan/26 9:39 AM,19/Jan/26 4:49 PM,,07/Jan/26 10:08 AM,Client 172 Fire A to R Version 6,Client 176 Police A to R Version 8,Client 184 Police D to R Version 2,Client 185 Fire D To R Version 2,,,,,,,,,0,,,,,Member ID 111315.  Calc is using the conts value held at 31 Aug 2024 of £1897.67 but should be using £1970.26 held at 23 Aug 2025.  Calc should use the value at the latest date.,,Andrew Wilson,Annabelle Stephenson,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-317,,,,,,,,,07/Jan/26 10:06 AM;18934601-32fa-4c76-9b74-159dc94fd206;image-20260107-100302.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14494,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6890ce22,,,,,,,,,,,,,,,,,,,,Confirm,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y00007m,,,Code fix implemented to order the list of GAD contributions and return only the latest ones.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 27,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-06 18:54:41.929,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_847419_*|*_10252_*:*_1_*:*_17022_*|*_10354_*:*_1_*:*_3108170_*|*_10056_*:*_1_*:*_29479925,,"06/Jan/26 6:54 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Simple fix.  I’d falsely been under the impression that McCloudTax contributions would be a final set of values, rather than a history of yearly values (due to lack of data to look at on Aurora and no test cases).

As we want only the latest contributions in a full history, my warning for duplicate contributions no longer applies, and I have amended {{GetGADElement()}} (in PSC, {{DefaultGADElementStrategy}}) to order the list by EffectiveFrom:

{noformat}List<MemberMcCloudTaxContribution> memberMcCloudTaxContributions = 
    MemberData.MemberMcCloudTaxContributions
    .Where(x => x.Settled == false)
    .OrderByDescending(x => x.EffectiveFrom)
    .ToList();{noformat}","07/Jan/26 6:38 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] All looks good for that fix. However, was just looking at where you pick the cont out of this ordered list, and saw:

{{if (memberMcCloudTaxContributions.Any(x => x.ContributionType == contributionPair.Key || x.ContributionType == contributionPair.Value))}}

When would the type ever be equal to the value? Wouldn’t it only ever be equal to the key?","07/Jan/26 10:06 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] I set up two dictionaries of pairs of contribution types (see snip), so that line is checking whether the current contribution matches either of the types in the pairs.  “Value” here actually refers to just a second contribution type

!image-20260107-100302.png|width=616,alt=""image-20260107-100302.png""!",,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,07/Jan/26 10:08 AM
Police A>R - PSO debit not being deducted from DB pension,PHX5-765,20472,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Russell Armstrong,640f34fc1273131f2adfede9,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,05/Jan/26 4:39 PM,12/Jan/26 1:16 PM,,12/Jan/26 1:16 PM,,,,,,,,,,,,,0,,,,,"Member ID 111315.  Debug shows no evidence of PSO calc to be deducted from DB, only CARE (which correctly shows as zero).  PSO not being deducted from DB pension figures.",,Andrew Wilson,Russell Armstrong,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-316,,,,,,,,,12/Jan/26 1:15 PM;b661603b-01c2-4777-a078-ea42f749ddd8;image-20260112-131525.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15126,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@d15a348,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zzm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-07 11:04:08.673,10250_*:*_1_*:*_0_*|*_10252_*:*_1_*:*_13677318_*|*_10354_*:*_2_*:*_5638_*|*_10056_*:*_1_*:*_152452876_*|*_10356_*:*_1_*:*_426374243,,07/Jan/26 11:04 AM;640f34fc1273131f2adfede9;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] I believe this needs Dev - not sure if it will be the same in Aurora but in Calculate if I load the 1987 record (which has the Divorce Details and Divorce Elements on the record) as the LinkedMember then I can see Divorce Details and Divorce Elements in the JSON and these appear to be used in the calculation. If I load this record as the Member then they are empty lists and there’s nothing in the logs about divorce. Can you raise on the Dev channel please as I don’t have access,"12/Jan/26 9:27 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The devs have made their change, so should be able to check this is working now.","12/Jan/26 1:15 PM;640f34fc1273131f2adfede9;Divorce Elements now look to be picked up tin the calculation 

!image-20260112-131525.png|width=402,alt=""image-20260112-131525.png""!",,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,12/Jan/26 1:16 PM
Refactor of Scheme Pays to remove if logic from PSC,PHX5-764,20402,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,05/Jan/26 12:51 PM,12/Jan/26 2:58 PM,,06/Jan/26 3:58 PM,Client 172 Fire Annual Allowance Version 1,Client 172 Fire A to R Version 5,Client 176 Police Annual Allowance Version 5,Client 176 Police A to R Version 7,,,,,,,,,0,,,,,"Move logic for calcType.AnnualAllowance to SchemePays module to avoid filtering in accrued pension values.

Move logic for CARE results to Scheme Pays module so only McCloud.None and categories containing care get any care value and all other calcs get DB.",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@c55feb3,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qni:zr,,,Refactoring of Scheme Pays to contain all logic in Scheme Pays. PSC updated to not rely on if statements in accrued pension values or pension elements.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 27,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_7916087_*|*_10252_*:*_1_*:*_2012_*|*_10354_*:*_1_*:*_2324_*|*_10056_*:*_1_*:*_3480,,"05/Jan/26 12:57 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;I have changed the logic so you will either get a care or a db result rather than both. Previously you got both results and one would be zero, but this was misleading as it is not possible to have both.

I have also added separate logic to ensure PrePip values are only added for Annual Allowance calcs, which would be relevant for the associated care or db result, if an AA calc.

Tests added for multiple scenarios to test the Care and DB strategies directly as well as at the factory level. Tests include addedSchemePays logic too.

I believe this logic is all sound on the basis that PSC uses “GetValue” when looking for the KVP in all cases, as does the Annual Allowance module and this already incorporates a return of 0 if key is not in the list. It should never be the case that the list is completely empty, as it will always return a care result for care and a db result for db. If there are no scheme pays, the result explicitly returns the correct key and a value of 0.

[https://calculate.uat.xpsplc.com/global-modules/8|https://calculate.uat.xpsplc.com/global-modules/8]",05/Jan/26 3:02 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Brought through to PSC so I could test in AA. All results still matching along the chain to the AA calcs.,,,,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,Done,06/Jan/26 3:58 PM
Police Client 176 D>R Test case failed when updating dependency,PHX5-763,20313,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,31/Dec/25 4:46 PM,02/Jan/26 12:00 PM,,02/Jan/26 12:00 PM,,,,,,,,,,,,,0,,,,,"Test case 2 failed when updating from v146 to v156 of PSC for publish and release to testing. 

Previously had a warning saying ""No early retirement factor for 8 years and 10 months early. Defaulted to 1."" and now errors and says no ERF for years = 58. 

Potentially correct that it should now fail as a previous factor of 1 wouldn’t have made sense. Review needed to check if test case should be updated for new expected results?",,Naomi Robinson,Russell Armstrong,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3dfcc630,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qni:y,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 27,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-01-02 11:31:21.641,10250_*:*_1_*:*_0_*|*_10252_*:*_1_*:*_48937_*|*_10354_*:*_1_*:*_3711_*|*_10056_*:*_1_*:*_155497784,,02/Jan/26 11:31 AM;640f34fc1273131f2adfede9;Factor tables A406 and B407 are incorrect - have values for 0 years to 10 years early but should be from age 55 to age 65. Need reloading,02/Jan/26 11:58 AM;640f34fc1273131f2adfede9;Reloaded tables - test now doesn’t return the error,,,,,,,,,,,,,,,,,,,,,,,14400,PHX5-294,Police - Deferred to Retirement,Done,02/Jan/26 12:00 PM
Review of Client 172 Fire A>R test cases required as 20/23 failing,PHX5-762,20312,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,31/Dec/25 4:42 PM,12/Jan/26 3:32 PM,,12/Jan/26 3:32 PM,,,,,,,,,,,,,0,,,,,Once parameters were updated for various new inputs multiple test cases failed across all calcs and needed updating. Looks like this calc hasn’t been updated but someone needs to check why failing and determine if any further issues.,,Chris Marshall,Naomi Robinson,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@62a3a628,,,,,,,,,,,,,,,,,,,,Confirm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:y,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 28,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-01-12 15:03:02.882,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_368472683_*|*_10252_*:*_1_*:*_253732460_*|*_10354_*:*_1_*:*_2584_*|*_10056_*:*_1_*:*_410368968,,"12/Jan/26 3:03 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Following test failures in fire A>R and reasons. Moving to done now

Test 5 - DBZeroLimpSum not matching Altair
Test 10 - Target LS not calculated so no commuted pension
Test 11 - DBZeroLimpSum not matching Altair
Test 12 - Shown as NFPS but service dates back to 1999
Test 16 - service looks incorrect based on expected result
Test 17 - CARE Altair looks incorrect
Test 18 - Post 22 care IH is a lot higher than Altair result
Test 20 - Legacy DB and post 22 CARE IH figures not matching
Test 21 - Post 22 CARE IH figures not matching",,,,,,,,,,,,,,,,,,,,,,,,13856,PHX5-223,Fire - Active to Retirement,Done,12/Jan/26 3:32 PM
DB target lump sum rework,PHX5-761,20279,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,31/Dec/25 11:03 AM,26/Jan/26 3:20 PM,,26/Jan/26 3:20 PM,,,,,,,,,,,,,0,,,,,"Picked up when testing LSA on NFPS2006.  The strategy for DB target cash ({{DBTargetPensionOptionStrategy}}) is used for both Police and Fire, on the 1987/1992 schemes and the new 2006 schemes.  It considers both the dbMaxPCLS and the dbMaxSchemeLumpSum.  However the latter is not available on either NPPS2006 or NFPS2006.

We need to consider this broadly and whether we need a separate target strategy, or perhaps a check on Category within the current strategy.  It might be that no change is needed, I haven’t properly got my head around this yet.

*Update:*

Just realised another problem with Target DB strategy.  It works on the assumption that the SchemeMaximum cash would always be greater than the PCLS cash; however that is actually only the case when the commutation factor is above 20.  When the factor is below 20, the reverse is true, and therefore the current logic for DB target doesn’t hold up",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-738,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@18001ba8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y000000000hr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-06 15:40:34.271,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_2261839900,,06/Jan/26 3:40 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;if fire is different it should be a different strategy. The whole point if the pattern is that category logic is in the factory not the strategy,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,26/Jan/26 3:20 PM
Police A>R - Spouses Pension not populating Pension Element,PHX5-760,20246,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,,,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,30/Dec/25 8:55 AM,29/Jan/26 2:39 PM,,29/Jan/26 2:39 PM,,,,,,,,,,,,,0,,,,,The Aurora Dev team have found the following issue. The Spouse pension from the pension summary form stage in the process is not populating the pension element value.,,Andrew Wilson,Tracy Collins,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-315,,,,,,,,,13/Jan/26 10:54 AM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260113-105443.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15339,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@25078f3d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000003i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-06 15:25:24.562,10354_*:*_1_*:*_3662_*|*_10056_*:*_1_*:*_1116874209_*|*_10355_*:*_1_*:*_0,,06/Jan/26 3:25 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] Any more detail than this? Reading that it sounds like there is a problem with the process - which would be a dev issue.  Unless they are saying it is due to the data coming from the calc being incorrect?,"07/Jan/26 8:58 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] This one was passed to us by CIT so will probably need a wider conversation between a coder, CIT and Dev.  The full description on the CIT Jira CIT 713 is

*“CIT 713 -* *A to R settlement - DB retirement process v2 - 176* - Pension screen. Spouse value writing to retirement details table, but not to pension element table. *PK has said this is likely a calc issue - “*_so we're fully expecting the spouse pension to have the same element key as the member pension, but it doesn't, so it doesn't get written back.  In order for it to work, if the main pension element is called eg CARE Pension, then all the other bits need to be the same.  Cash Taken is, but SpouseCAREPrecom doesn't seem to exist anywhere, as we can't match it, and it's not going in.  Calc Issue I guess””_","07/Jan/26 9:17 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Ok, understand. I spotted and fixed this issue just before the christmas holiday. So should hopefully just need CIt to get latest copy of code and retest.",07/Jan/26 3:04 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;CIT are retesting and I will confirm if this is fixed or still an issue,"13/Jan/26 10:54 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;George confirmed OK to close

!image-20260113-105443.png|width=381,alt=""image-20260113-105443.png""!",,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,29/Jan/26 2:39 PM
Police A>R - RBCE data not output by calc,PHX5-759,20245,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,30/Dec/25 8:53 AM,13/Jan/26 11:10 AM,,13/Jan/26 11:10 AM,,,,,,,,,,,,,0,,,,,"The Aurora Dev team have made a change to the DB retirement process V2, so that the RBCE data output from the calc will writeback to the process. when they tested the process this did not happen, so phil king said it looks like the RBCE data is not output by the calc. ",,Annabelle Stephenson,Tracy Collins,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-314,,,,,,,,,13/Jan/26 10:52 AM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20260113-105237.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15337,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3c50237c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000003z,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-07 11:04:53.96,10281_*:*_1_*:*_2537_*|*_10250_*:*_1_*:*_10481889_*|*_10252_*:*_1_*:*_727192_*|*_10354_*:*_2_*:*_61648531_*|*_10056_*:*_1_*:*_637051137_*|*_10355_*:*_1_*:*_0,,07/Jan/26 11:04 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] I have set up the test for this in client 176 A>R and I am getting the RBCEs returned as expected.  I think the only thing I did differently from the inputs I saw on the linked ticket was enter values for LSA and LSDBA.  Are you able to ask admin to run their test again?,"13/Jan/26 10:52 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;George confirmed OK to close

!image-20260113-105237.png|width=381,alt=""image-20260113-105237.png""!",,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,13/Jan/26 11:10 AM
AA Non McCloud erroring,PHX5-758,20212,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,24/Dec/25 4:39 PM,12/Jan/26 2:58 PM,,07/Jan/26 6:44 AM,Client 172 Fire Annual Allowance Version 1,Client 176 Police Annual Allowance Version 5,,,,,,,,,,,0,,,,,Update code for non mccloud as an error.,,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@202f05b0,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qni:x,,,"{{ MergeAnnualAllowanceResults(annualAllowanceUpdates, activeNonMcCloudSalaryLinkedResult);}} added in as was missing.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 27,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_32661_*|*_10252_*:*_1_*:*_1735_*|*_10354_*:*_1_*:*_1127537936_*|*_10056_*:*_1_*:*_9125,,"06/Jan/26 5:52 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;commented out some old code which was combining results and used the {{ MergeAnnualAllowanceResults(annualAllowanceUpdates, activeNonMcCloudSalaryLinkedResult);}} logic. Now results agree.",,,,,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,Done,07/Jan/26 6:44 AM
"AA calcs isIllHealth showing as false, when true",PHX5-757,20211,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,24/Dec/25 4:39 PM,12/Jan/26 2:58 PM,,08/Jan/26 7:11 AM,Client 172 Fire Annual Allowance Version 1,Client 176 Police Annual Allowance Version 5,,,,,,,,,,,0,,,,,Ill health on AA is coming up as false for “isIllHealth” even when an ill health tier is selected.,,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4b221327,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qni:v,,,One line code update in Client calc: {{IllHealthType illHealth = (int)Parameters.IllHealthOption == 2 ? IllHealthType.HigherTier : (int)Parameters.IllHealthOption == 1 ? IllHealthType.LowerTier : IllHealthType.None;}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 27,PHX5 Sprint 28,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_86985785_*|*_10252_*:*_1_*:*_1909_*|*_10354_*:*_1_*:*_1124471850_*|*_10056_*:*_1_*:*_7334,,07/Jan/26 5:09 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Amended logic in main calc to: {{IllHealthType illHealth = (int)Parameters.IllHealthOption == 2 ? IllHealthType.HigherTier : (int)Parameters.IllHealthOption == 1 ? IllHealthType.LowerTier : IllHealthType.None;}} runs ok now.,,,,,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,Done,08/Jan/26 7:11 AM
McCloudOption defaulting to Legacy,PHX5-756,20104,Bug,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,23/Dec/25 12:51 PM,12/Feb/26 1:56 PM,,,,,,,,,,,,,,,0,,,,,"GAD has been coded under [https://xps-jira.atlassian.net/browse/PHX5-382|https://xps-jira.atlassian.net/browse/PHX5-382|smart-link] however there is an outstanding issue that I need Andrew’s help on.

We require the McCloudOption, however when calling this within {{RetiredCalculator}} it defaults to Legacy every time (at every level, in all tests).  This has not previously been an issue as prior to this we have not needed to access McCloudOption at that calc level.  I have therefore had to use another method to determine the McCloudOption, which works for every calc type except for TargetLumpSumCommuted.

I have passed the other ticket to review, with a caveat in the release notes that admin cannot yet test on TargetLumpSumCommuted, and they will see a warning message.

*UPDATE:* No longer required for GAD as another fix has been used.  This is still an issue affecting some interim values and could impact a calc at some point, but isn’t an urgent bug,",,Annabelle Stephenson,Naomi Robinson,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,PHX5-382,,,,,,PHX5-770,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2d10ea10,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01ya,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-01-07 13:28:07.439,,,"24/Dec/25 4:12 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Discussing with Naomi has confirmed this issue is not GAD specific, but just luckily has not impacted any of our other calcs so far.  While not affecting figures, the issue is also highlighted in interim results on some test cases, where the McCloud option shows as Legacy when the figures are in fact for Reform.

Agreed with Naomi to close ticket 382 where GAD has been coded for everything except TargetLumpSumCommuted pension options.  

This open ticket can then be used to resolve the McCloud default bug, and then do a couple of small tweaks to the GAD code so that it works fully.","07/Jan/26 1:28 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Happy to look into this as I can see the issue occurring, although would need to investigate why. Have put a slightly higher story point estimate as might need some unpicking.","12/Feb/26 1:56 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;FYI for when we get to this, part of a code suggestion for [https://xps-jira.atlassian.net/browse/PHX5-888|https://xps-jira.atlassian.net/browse/PHX5-888|smart-link] includes adding _McCloudOption = mcCloudOption;_ into the top section of {{RetiredCalculator}} in PSC.  This allows the correct mccloud option to be pulled through into the retirement calc.

888 is currently blocked and we may decide to take a different approach, so don’t assume this will be actioned as part of that.

We would also need to copy _McCloudOption = mcCloudOption;_ into all of the other calcs at this level (in the {{PublicSectorCalculator}} region), eg {{DeathInServiceCalculator}}, {{DeferredPreComPenCalculator}} etc",,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,To Do,23/Dec/25 12:51 PM
Retirement spouse pension values knocked out unintentionally by PI pre retirement code,PHX5-755,20035,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,22/Dec/25 5:37 PM,05/Jan/26 10:58 AM,,24/Dec/25 2:31 PM,Client 172 Fire A to D Version 3,Client 172 Fire A to R Version 4,Client 176 Police A to D Version 10,Client 176 Police A to R Version 6,,,,,,,,,0,,,,,"The change to match the spouse pension keys with the pension option key for pre commuted values i.e. MCCR, MCPN etc had caused a change in some spouse pension values in police A>R test cases. This is because the pension option pre commuted values were now being passed into the spouse calc factories instead of the spouse pre com elements we used to have that didn’t have any retirement factor applied. This was causing a change in CARE spouse related pension’s because spouse care pension is based on pre retirement factor.

",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,PHX5-751,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@22c704c1,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qnb:,,,Silent update to fix an issue with some spouse pension value calculations in retirement calculations that had been knocked out in linked ticket 751. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 26,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_61477419_*|*_10252_*:*_1_*:*_4035_*|*_10354_*:*_1_*:*_2052_*|*_10056_*:*_1_*:*_12512,,"23/Dec/25 10:41 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;# Added SpouseKeyMap for mapping KeyPensionConstants to KeyPreComConstants in Public Sector Death Module. This is needed to map pension option keys. E.G MCCR, MCPN, PEN etc to SpouseCarePreCom, SpousePenPreCom etc.
# In Public Sector Calculation module, updated CreateSpousesElements function to accept the original pre com elements which are based on the values of the KeyPreComConstants (SpouseCarePreCom etc).
# Updated CalculateSpousesElements function to cycle through all the pension option pre commuted values that have been calculated  and match the KeyPreComConstants pre com elements with the pension option key names, before sending original pre com key values e.g SpouseCarePreCom into the spouse strategy calcs. It then finally renames the keys to match the pension option keys i.e MCCR, MCPN, PEN etc. ",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,24/Dec/25 2:31 PM
Police A>D - Pension Outputs,PHX5-754,19912,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Russell Armstrong,640f34fc1273131f2adfede9,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,19/Dec/25 11:40 AM,22/Dec/25 3:36 PM,,22/Dec/25 3:36 PM,,,,,,,,,,,,,0,,,,,"Dev fix has not made a difference to the outputs shown. 

!image-20251219-114113.png|width=344,alt=""image-20251219-114113.png""!

Member ID 415443 ",,Russell Armstrong,Tracy Collins,,,,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-256,PHX5-693,,,,,,,,19/Dec/25 11:41 AM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20251219-114113.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/13910,19/Dec/25 12:14 PM;b661603b-01c2-4777-a078-ea42f749ddd8;image-20251219-121238.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/13911,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@346cca10,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:uzzzi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 26,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-12-19 12:14:05.781,10250_*:*_1_*:*_0_*|*_10252_*:*_1_*:*_2960_*|*_10354_*:*_2_*:*_8394_*|*_10056_*:*_1_*:*_3601725_*|*_10356_*:*_1_*:*_269520515,,"19/Dec/25 12:14 PM;640f34fc1273131f2adfede9;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Employer History is being passed into the calculations run in Aurora as null - set the warning to check if count was 0 and it errored, changed it to check if == null and it gave the warning I’d set up. Needs dev attention as works in Calculate whichever way around I set the Member and LinkedMember

!image-20251219-121238.png|width=498,alt=""image-20251219-121238.png""!",22/Dec/25 3:36 PM;640f34fc1273131f2adfede9;Calculation was still not providing the correct outputs once Employer History was updated. Member Flags was not being  loaded correctly when running the calculation in Aurora. Devs now fixed and re ran member and missing previously missing outputs now showing,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,22/Dec/25 3:36 PM
Police A>R - Dev requirement - Inputs for CPD/APB,PHX5-753,19911,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,,,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,19/Dec/25 11:27 AM,06/Jan/26 4:59 PM,,06/Jan/26 4:59 PM,,,,,,,,,,,,,0,,,,,Admin need 2 inputs added to the A>R process to input Legacy CPD/APB and Reform CPD/APB,,Tracy Collins,,,,,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-309,,,,,,PHX5A-298,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3ca37379,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y00007i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10354_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_14761,,,,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,06/Jan/26 4:59 PM
Police A>R - Public sector PI2026 not present,PHX5-752,19901,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,19/Dec/25 9:50 AM,05/Jan/26 4:15 PM,,05/Jan/26 4:15 PM,,,,,,,,,,,,,0,,,,,"Error message 

!image-20251217-113626.png|width=250,alt=""image-20251217-113626.png""!",,Steven Wright,Tracy Collins,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-301,,,,,,,,,19/Dec/25 9:51 AM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20251217-113626.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/13875,19/Dec/25 9:52 AM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20251219-095250.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/13876,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@579ed952,,,,,,,,,,,,,,,,,,,,Confirm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qni:z,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 27,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-03 14:01:36.698,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_165541249_*|*_10252_*:*_1_*:*_13254_*|*_10354_*:*_1_*:*_2338199_*|*_10056_*:*_1_*:*_1306910360,,"19/Dec/25 9:52 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Extract from Phase 5 calcs chat

!image-20251219-095250.png|width=304,alt=""image-20251219-095250.png""!","03/Jan/26 2:01 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Hi [~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21]I’ve tested this member in Calculate and it runs through without error. I believe the scheme pays code was causing this error by trying to select the PI factor for a future table that does not exist yet. This is now safeguarded against by using the min of calculation year or latest pi table year. Can you retest this member please and let me know if this ticket can be closed.

Steven.",05/Jan/26 11:20 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;[~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e] Thanks for this.  I have rerun in Aurora and the calc is now running with no errors.  You can close your ticket.,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,05/Jan/26 4:15 PM
PI Pre Retirement: Spouses Pensions,PHX5-751,19868,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,19/Dec/25 6:47 AM,02/Jan/26 12:56 PM,,23/Dec/25 11:26 AM,Client 172 Fire A to R Version 4,Client 172 Fire D to R Version 1,Client 176 Police A to R Version 6,Client 176 Police D to R Version 1,,,,,,,,,0,,,,,"For now this line in the base strategy is commented out:

{{pensionOption.SpousePensionValues = GetPensionIncreaseElement(pensionOption.SpousePensionValues);}}

The code fails, because the elements have a key of: {{SpousePENPreCom}}

The spouses final element keys should match the members from {{KeyPensionConstants}}

To fix this, we need to update {{SpousesPensionFactory}}. It is already set up to send a key through to each {{SpousesPensionStrategy}} however, it is sending the wrong one.

It might actually make more sense to not set the key up front but instead take it direct from the main members pension. The main member already has the correct logic. So just take it as an input to the Spouses pension calculation.

This just means we need to send through the pre com pension after it has been through pension options.",,Andrew Wilson,Steven Wright,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-755,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3b649107,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:uzzy,,,Updated spouses pension elements to have the same key as the equivalent members pension.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 26,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-23 11:26:40.552,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_25874786_*|*_10252_*:*_1_*:*_30045_*|*_10354_*:*_1_*:*_2349_*|*_10056_*:*_1_*:*_5754239,,"23/Dec/25 11:26 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Work completed by AW on 19/12/2025. CreateSpouseElements function in Public Sector Calculation was updated to send through the pre commuted values after it has been through pension options. 

This actually caused some spouse pension values in the police A>R to be knocked out by the change but fix implemented in linked ticket 755. Test cases in police A>R also updated to have the new spouse pension key names. Needs to be done across the other retirement calcs.",,,,,,,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,23/Dec/25 11:26 AM
"PSO - check pension elements where it will be deducted from, check ERF application in retirements calcs.",PHX5-750,19800,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,18/Dec/25 1:44 PM,02/Jan/26 5:05 PM,,02/Jan/26 4:35 PM,Client 172 Fire A to R Version 5,Client 176 Police A to R Version 7,,,,,,,,,,,0,,,,,"We need to check that any pension sharing order debit is being deducted from the associated pension elements in retirement calculations and an ERF is applied where applicable. 


Police A>R Test Case to use [318207.docx|https://xpsplc.sharepoint.com/:w:/s/ProjectPhoenix/IQC5R_ENQNVERanFuexYKY_hAS8N4MCnKytEdWaaK36pXtw?e=0c9Umg]

ERF being applied in admins calc was for 4y9m early from factor table A401. 0.813.",,Chris Marshall,Naomi Robinson,Steven Wright,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:ffa445ab-b813-4226-9ed2-507a454e9272,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24/Dec/25 11:23 AM;5e266667-8b87-4eb6-9386-71980feac557;image-20251224-112104.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14115,24/Dec/25 11:23 AM;5e266667-8b87-4eb6-9386-71980feac557;image-20251224-112152.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14116,24/Dec/25 4:33 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251224-163316.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14150,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5dc20077,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:uzzxi,,,Members with “PEN” divorce elements in non 2015 categories and “CARE” divorce elements in the 2015 categories are now being revalued and deducted from the DB or Care Pre Commutation Element before retirement factors are applied in an Active to Retired calculation. The same methodology is also being applied when calculating the spouse pension.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 26,PHX5 Sprint 27,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-23 16:32:22.934,10251_*:*_2_*:*_18712897_*|*_10250_*:*_2_*:*_777477254_*|*_10252_*:*_1_*:*_18680_*|*_10354_*:*_1_*:*_2896_*|*_10056_*:*_1_*:*_509757805,,"23/Dec/25 4:32 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;PSO debit is not being deducted 



{noformat}[0] ={Aurora.Calculations.ElementValue}





[1] ={Aurora.Calculations.ElementValue}





[2] ={Aurora.Calculations.ElementValue}





[3] [ElementValue] ={Aurora.Calculations.Pension.ActiveToDeferred.ActiveToDeferredElementValue}





Raw View


{noformat}

{noformat}


{noformat}

[3] [ElementValue] ={Aurora.Calculations.Pension.ActiveToDeferred.ActiveToDeferredElementValue}
This element value seems to be the issue as the element value is not output but the ActietoDeferredElelmentValue","24/Dec/25 11:23 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Updated Public Sector Constants 

!image-20251224-112104.png|width=444,alt=""image-20251224-112104.png""!

Updated Public Sector calc from PSOPensionDebit to Divorce for pre com elements pension & spouse pension

!image-20251224-112152.png|width=1800,alt=""image-20251224-112152.png""!

PSODebit is now factored into the pension amounts.

Further ticket needed to investigate the PSO debit coding for A>D and will create once reviewed


","24/Dec/25 4:33 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;I am not sure this change has been saved in PSC as I can still see .PSOPensionDebit. 

Also not sure if this will change anything as it just seems the constant name has been updated, but the logic remains the same.

Side note:

I have updated the Scheme Pays logic as for CARE2015 members the scheme pays comes off CAREPreCom rather than DBPreComPen.

Is it worth considering if the same applies to PSO? 

I have put a TODO in the code in case this needs to be picked up after Christmas.

!image-20251224-163316.png|width=774,alt=""image-20251224-163316.png""!","02/Jan/26 4:30 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Divorce Module previously had ‘CARE’ and ‘PEN' divorce elements from the member data mapping to a single ‘Divorce’ element key. It will also only currently look for ‘PEN' in the non Care2015 records and 'CARE' in the Care2015 records. Chris said this is correct because 'CARE’ would be used for a post2015 divorce and 'PEN’ for pre 2015.  To make sure the relevant PSO gets deducted from the right pre com benefit, I updated the element key names to make them distinguishable and also added in a Cash name for NPPS2006 category. 

Public Sector Constants module updated to have 3 new PSO debit names for the 3 different types of PSO elements. 

CalculatePreComElements function in PublicSectorCalculator updated to deduct the different PSO values from the associated pre com elements. Because CarePreComPen element is then used to create the reform care pension element, I maintained Naomi’s logic about only creating a deduction for CAREPSO if the key being calculated is KeyPreComConstants.CAREPreCom. This will filter out and keep the PSO debit at 0 when the code is calculating reform for the CarePreComPen. This was not actually needed due to the switch in the Divorce Module only creating a CarePSO for the 2015 categories but I thought I would add to that logic for readability and to avoid confusion. Therefore for a reform calc only a PEN divorce type will be deducted from the DB benefit and not the reform care. Any post 22 care or non mcloud members will have a Care pso deducted as normal. This is in line with schemepays. 

","02/Jan/26 4:34 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Discussed with Steven over Teams on 02/01 and we agreed to keep all logic for Scheme Pays and PSO aligned so that we could clearly see when 1. CARE deductions were applicable and 2. To show where PSO logic and Scheme Pays logic aligned and differed.

We discussed the Spouse deductions with Annabelle and determined Spouses have PSO deductions but not scheme pays, per the specs, and so the logic in PSC flows to make that obvious in {{public List<ElementValue> CalculatePreComElements(List<ElementValue> deferredElementValues)}}.

I have checked the logic behind the “Pen” (DB) and “CARE” PSO constants which appears sound.",,,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,02/Jan/26 4:35 PM
Fire A>R - Error message,PHX5-749,19767,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,18/Dec/25 12:29 PM,13/Jan/26 12:00 PM,,13/Jan/26 6:33 AM,Client 172 Fire A to R Version 7,Client 176 Police A to R Version 10,,,,,,,,,,,0,,,,,"Error message received for member 524502

!image-20251218-122950.png|width=344,alt=""image-20251218-122950.png""!",,Andrew Wilson,Steven Wright,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,PHX5-795,,,,,PHX5-804,,,,,,,,,,PHX5A-307,,,18/Dec/25 12:29 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20251218-122950.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/13809,12/Jan/26 6:31 AM;5796a187-7241-414b-bea0-2d22260a9bed;image-20260112-063113.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/15026,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7d13e02f,,,,,,,,,,,,,,,,,,,,Confirm,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zx,,,"Active To Retired calculations will now use the 'Ill Health Option' runtime input when identifying whether the member is retiring on normal grounds, or lower/higher tier ill health. This replaces use of the old Ill Health Retirement and Serious Ill Health Retirement sliders.  These should not be used going forwards when running Active to Retired calcs. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-07 07:36:08.577,10251_*:*_2_*:*_223158602_*|*_10250_*:*_2_*:*_53647045_*|*_10252_*:*_1_*:*_1860_*|*_10354_*:*_1_*:*_4919659_*|*_10056_*:*_1_*:*_1891560877,,07/Jan/26 7:36 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Looks like yet another case of us trying to get a factor that does not exist. We should update RetirementFactorBuilder to give us a more meaningful message as well as fixing the actual issue here.,"09/Jan/26 4:25 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Added this member as a test case in Calculate with the same inputs. Member is 54y 4m at DOR and factor table for DB benefit starts at age 55y 0m.

The calc is no longer erroring since originally tested in Aurora. Update has previously been applied to Public Sector Calculation module so that ill health calcs for NFPS 2006 category will now go through  {{PublicSectorPensionElementUnreducedStrategy}}instead of {{PublicSectorPensionElementAgeAttainedStrategy}}. This means it’s no longer running through the early retirement factor code for DB benefit which was causing the error. It is trying to interpolate for a factor that isn’t available. 

I don’t believe this member would be being run through the A>R calc if they weren’t an ill health case due to being in NFPS 2006 category and retiring under age 55 (unable to retire).","09/Jan/26 4:28 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] See comment below Tracy, I’m sending this ticket in for review and close. The member should run through fine now since you originally tested due to updates applied since then. (as long as parameter input for ill health retirement case is applied.)","12/Jan/26 6:31 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e]  If this is ill health, then that is possibly where the confusion is. The code at the client level needs updating. It currently has:

{{       IllHealthType illHealth = Parameters.SeriousIllHealthRetirement ? IllHealthType.HigherTier : Parameters.IllHealthRetirement ? IllHealthType.LowerTier : IllHealthType.None;}}

But it needs to be updated to use the new ill health option:

!image-20260112-063113.png|width=844,alt=""image-20260112-063113.png""!

Need to update for all - active/deferred police/fire.

May impact [https://xps-jira.atlassian.net/browse/PHX5-780|https://xps-jira.atlassian.net/browse/PHX5-780|smart-link]","12/Jan/26 4:00 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Fire A>R and Police A>R client code updated.

# Removed{{IllHealthType illHealth = Parameters.SeriousIllHealthRetirement ? IllHealthType.HigherTier : Parameters.IllHealthRetirement ? IllHealthType.LowerTier : IllHealthType.None;}}
# Replaced it with:

{noformat}		switch (Parameters.IllHealthOption)
        {
            case IllHealthOption.IllHealthLowerTier:
                 illHealth = IllHealthType.LowerTier;
            break;
            case IllHealthOption.IllHealthHigherTier:
                illHealth = IllHealthType.HigherTier;
			break;	
        }{noformat}

# Updated the ill health test cases in both clients to use the new parameter input. No impact on results.",,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,13/Jan/26 6:33 AM
Fire A>R - NFPS DB ERF incorrect,PHX5-748,19765,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,18/Dec/25 11:16 AM,13/Jan/26 12:00 PM,,12/Jan/26 11:22 AM,Client 172 Fire A to R Version 7,,,,,,,,,,,,0,,,,,"Calc is currently using the factor for 57 and 4 months but has only attained age 58 and 3 months. 

!image-20251218-100057.png|width=250,alt=""image-20251218-100057.png""!",,Chris Marshall,Tracy Collins,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-306,,,,,,PHX5-795,,,18/Dec/25 11:22 AM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20251218-100057.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/13775,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1e327ca1,,,,,,,,,,,,,,,,,,,,Confirm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:z,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-09 12:41:38.222,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_99031004_*|*_10252_*:*_1_*:*_259961837_*|*_10354_*:*_1_*:*_4099_*|*_10056_*:*_1_*:*_1546916389,,"09/Jan/26 12:41 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;See ticket [PHX5 Sprint 28 - Implementation Services Phase 5 - Scrum Board - Jira|https://xps-jira.atlassian.net/jira/software/projects/PHX5/boards/69?selectedIssue=PHX5-775]

Put in review but may need to be deleted",,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,12/Jan/26 11:22 AM
Test AA calcs for legacy / reform differences,PHX5-747,19690,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,17/Dec/25 6:44 PM,12/Jan/26 2:58 PM,,06/Jan/26 3:55 PM,Client 172 Fire Annual Allowance Version 1,Client 176 Police Annual Allowance Version 5,,,,,,,,,,,0,,,,,"Whilst AA calc in police 176 (version 1) does have legacy and reform instructions coded, there are no test cases clearly exemplifying a difference as they each only give one DB and one CARE result. Need to establish what the difference should be and test.",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@f165fec,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qnh:,,,Testing reform vs legacy underpin in calculate for salary linked member.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 26,PHX5 Sprint 27,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10281_*:*_1_*:*_3385_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1106154821_*|*_10252_*:*_1_*:*_30935_*|*_10354_*:*_2_*:*_597482684_*|*_10056_*:*_1_*:*_7135,,"24/Dec/25 4:42 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;We received reform test case with underpin this week and changes were coded in straight after a discussion with Charlotte (Tuesday) about what was needed for the underpin.

Test case was out of date as now a pensioner and new case provided Weds 24th. Testing to be completed.","06/Jan/26 11:58 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Test name: Annual Allowance Spec - 1742802 (1987 Active McCloud, Reform with underpin, Mid Year Date)) 

Differences in calc:

# CARE added to the reform figure is £14,584.41 which comes from the CARE benefits table in Aurora to 31/03/2023 plus reval to DoR, not £14,268.64 per the spec calc. Spec is giving care value at 01/04/2024 but DoR is 31/12/2024 so uplift seems correct. Will note difference in release notes for admin to review.

AA calc itself and underpin for legacy vs reform is working as expected, so calc deemed complete in this respect.",,,,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,Done,06/Jan/26 3:55 PM
Fire A>R - Calcs do not run for member at day before 50th birthday,PHX5-746,19657,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,17/Dec/25 4:05 PM,05/Jan/26 4:15 PM,,05/Jan/26 4:15 PM,,,,,,,,,,,,,0,,,,,"Member 17072.  2 error messages received

!image-20251217-155000.png|width=250,alt=""image-20251217-155000.png""!

!image-20251217-155019.png|width=250,alt=""image-20251217-155019.png""!

Member is 50 (DOR is day prior to 50th birthday) and member has over 30 years service",,Steven Wright,Tracy Collins,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-304,,,,,,,,,17/Dec/25 4:06 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20251217-155000.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/13707,17/Dec/25 4:06 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20251217-155019.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/13706,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6b6e975f,,,,,,,,,,,,,,,,,,,,Confirm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qni:zi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 27,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-03 17:18:45.542,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_161696581_*|*_10252_*:*_1_*:*_2721_*|*_10354_*:*_1_*:*_3686_*|*_10056_*:*_1_*:*_1465395717,,"03/Jan/26 5:18 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] I’ve tested member 17072 using the same DOR and they are running through ok so I suspect a code update may have been made separate to this ticket. Could you retest and let me know if this can be closed. Thanks, Steven",05/Jan/26 11:43 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;[~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e] This member now runs in Aurora for DOR 25/10/2025 so I think this issue has been fixed and you can close your ticket.,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,05/Jan/26 4:15 PM
Police A>R - Deferred CARE cash amount,PHX5-745,19620,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Russell Armstrong,640f34fc1273131f2adfede9,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,17/Dec/25 2:05 PM,26/Jan/26 2:20 PM,,23/Jan/26 3:11 PM,Client 184 Police A to R Version 15,Client 184 Police D to R Version 7,Client 185 Fire A to R Version 12,Client 185 Fire D to R Version 7,,,,,,,,,0,,,,,For members under age 55 (403471) we are now outputting the deferred CARE pension but it is still calculating a cash figure which would not be required.  Please remove the cash figure from the outputs.,,Andrew Wilson,Russell Armstrong,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-303,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2a1379ac,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y1zv,,,Where a retirement quotation is run for a member under age 55 (not retiring on ill health) the CARE PCLS options will output a 0 cash amount,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 30,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-12 07:19:05.56,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_86953297_*|*_10252_*:*_1_*:*_79393246_*|*_10354_*:*_1_*:*_2841_*|*_10056_*:*_1_*:*_3033210964,,"12/Jan/26 7:19 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] Can you add more clarity on this. The description mentions deferred CARE, but the calculation chosen is A to R. I’m not sure what the inputs are for this one. The analyst tickets says “as per results matrix”. But with no link, I don’t know which matrix that is.","21/Jan/26 4:38 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Ok, so the issue here is that they are using pension option strategies to quote a deferred figure.

We should identify this case in the pension option factory, and instead of using existing strategies for the zero and PCLS options, we should use the zero strategy for the PCLS option as well - for all the CARE options.","23/Jan/26 2:19 PM;640f34fc1273131f2adfede9;In {{PensionOptionCalculatorFactory}} added {{bool eligibleForCareRetirement = illHealth != IllHealthType.None || memberInfo.AgeAtDate(calculationDate).Years >= 55;}} This sets the CARE retirement eligibility to be true where they are either ill-health or age 55 or over.

Changes made throughout the factor to check if {{eligibleForCareRetirement }} is true and if so continue to use the {{PCLSCAREPensionOptionStrategy}} and if not use {{PublicSectorZeroCashPensionOptionStrategy}}



Added tests PensionOptionCalculatorFactoryKeys CARE2015 under 55, PensionOptionCalculatorFactoryKeys NFPS2006 Under 55, PensionOptionCalculatorFactoryKeys PPS1987, Reform under 55, PensionOptionCalculatorFactoryKeys PPS1987, deferred Reform under 55 to check where CARE and under age 55 Zero Cash strategy is used for PCLS option",23/Jan/26 2:49 PM;640f34fc1273131f2adfede9;Dependency updated in Fire and Police Retirement calculations.  UAT 745 test in Police A to R updated to check for 0 TotalCash amounts.,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,23/Jan/26 3:11 PM
Deferred to retired pre 22 CARE options outputting DB spouse pension,PHX5-744,19618,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,17/Dec/25 1:54 PM,02/Jan/26 12:56 PM,,19/Dec/25 11:30 AM,Client 176 Police D to R Version 1,,,,,,,,,,,,0,,,,,,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@57c7115d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:uzy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 26,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10250_*:*_1_*:*_0_*|*_10252_*:*_1_*:*_164094566_*|*_10354_*:*_1_*:*_13786_*|*_10056_*:*_1_*:*_54366,,19/Dec/25 11:31 AM;640f34fc1273131f2adfede9;Fixed by work done under [https://xps-jira.atlassian.net/browse/PHX5-751|https://xps-jira.atlassian.net/browse/PHX5-751|smart-link] ,,,,,,,,,,,,,,,,,,,,,,,,14400,PHX5-294,Police - Deferred to Retirement,Done,19/Dec/25 11:30 AM
DtoR all Pre 22 CARE values are 0,PHX5-743,19568,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,17/Dec/25 9:27 AM,02/Jan/26 12:56 PM,,19/Dec/25 3:35 PM,Client 176 Police D to R Version 1,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Russell Armstrong,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@f1aa4a9,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:uzx,,,Fixes an issue where all pre 22 CARE values were output as 0 values,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 25,PHX5 Sprint 26,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-17 12:48:11.72,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_7545826_*|*_10252_*:*_1_*:*_3227_*|*_10354_*:*_1_*:*_4865_*|*_10056_*:*_1_*:*_88406,,"17/Dec/25 11:33 AM;640f34fc1273131f2adfede9;Problem was in PublicSectorMemberInfo.CarePreComPen. This is being used in CalculatePreComElements.

It was previously 

{code:json}if (SubStatus == InferredSubStatus.Normal)
            {
                return KeyPreComConstants.CAREPreCom;
            }
            else
            {
                return KeyPreComConstants.ReformCAREPreCom;
            }{code}

but InferredSubstatus is always Normal on Deferred records and can’t be used to determine which are the post 22 and pre 22 records so amended to 

{code:json} if (IsActive && SubStatus == InferredSubStatus.Normal)
	            {
	                return KeyPreComConstants.CAREPreCom;
	            }
	            else  if (Category.Contains(""CARE""))
				{
					return KeyPreComConstants.CAREPreCom;
				}
				else
	            {
	                return KeyPreComConstants.ReformCAREPreCom;
	            }{code}

Similar change made to SpouseCarePreComPen",17/Dec/25 12:48 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:640f34fc1273131f2adfede9] Just to double check - is there definitely not one size fits all way to determine which member we have? Both of these methods seem somewhat flawed.,"17/Dec/25 12:55 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] In fact, given this logic is proliferating everywhere, I think we need a property on PublicSecotrMember info for IsPost22Member which has the logic in. That way if it ever changes, we only have to update in one place.","19/Dec/25 11:28 AM;640f34fc1273131f2adfede9;Added IsPre22member to PublicSectorMemberInfo 

{noformat}public bool IsPre22Member
		{
		        get
		        {
		            if (IsActive && SubStatus == InferredSubStatus.Normal)
		            {
		                return false;
		            }
		            else  if (Category.Contains(""CARE"") || !McCloud)
					{
						return false;
					}
					else
		            {
		                return true;
		            }
		        }
		}{noformat}

Used this to set CarePreComPen and SpouseCarePreComPen.

Looked at if I could set something up at an appropriate level to use this to select the correct members for setting normal and salary linked MemberData and MemberInfo but difficult due to different data available at different stages",,,,,,,,,,,,,,,,,,,,,14400,PHX5-294,Police - Deferred to Retirement,Done,19/Dec/25 3:35 PM
LSA - set MemberUnauthorisedPayment and RelevantBenefitCrystallisationEvent,PHX5-742,19561,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,17/Dec/25 8:26 AM,02/Jan/26 12:56 PM,,19/Dec/25 2:40 PM,Client 172 Fire A to R Version 4,Client 176 Police A to R Version 6,Client 176 Police D to R Version 1,,,,,,,,,,0,,,,,"There is a new RetirementResults object that has fields for {{RelevantBenefitCrystallisationEvent}} and {{MemberUnauthorisedPayment}}. These should have been set correctly.

Client level code needs to be updated to ensure that these values go through to the final ActiveToRetiredResults (similar for deferred retirements)",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-741,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@397e8a1a,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzhzw,,,"BenefitCrystallisationEvents and UnauthorisedPayments added to final retirement result object for Police and Fire A>R calculations, and Police D>R calculation.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 26,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-18 13:44:29.646,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_79207464_*|*_10252_*:*_1_*:*_2223_*|*_10354_*:*_1_*:*_4616_*|*_10056_*:*_1_*:*_105047512,,"18/Dec/25 1:44 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;In both Police and Fire A>R calcs, I have added 3x instants of {{result.BenefitCrystallisationEvents.Add(}} and {{result.UnauthorisedPayments.Add(}} at the 3 different calc sections that return the retirement results.

For the mccloud option in A>R, where we return both active and salary linked results, I had to first create lists of the RBCEs and unauthorised payments that combined the reform and legacy ‘elements’ for both, as follows, before adding to the result object.

{noformat}  List<RelevantBenefitCrystallisationEvent> activeNormalRBCEs = activeNormalLegacyRetirementResults.BenefitCrystallisationEvents;
  activeNormalRBCEs.AddRange(activeNormalReformRetirementResults.BenefitCrystallisationEvents);

  List<RelevantBenefitCrystallisationEvent> activeSalaryLinkedRBCEs = activeSalaryLinkedLegacyRetirementResults.BenefitCrystallisationEvents;
  activeSalaryLinkedRBCEs.AddRange(activeNormalReformRetirementResults.BenefitCrystallisationEvents);	

  List<MemberUnauthorisedPayment> activeNormalUnauthorisedPayments = activeNormalLegacyRetirementResults.MemberUnauthorisedPayments;
  activeNormalUnauthorisedPayments.AddRange(activeNormalReformRetirementResults.MemberUnauthorisedPayments);		

  List<MemberUnauthorisedPayment> activeSalaryLinkedUnauthorisedPayments = activeSalaryLinkedLegacyRetirementResults.MemberUnauthorisedPayments;
  activeSalaryLinkedUnauthorisedPayments.AddRange(activeSalaryLinkedReformRetirementResults.MemberUnauthorisedPayments);	{noformat}



For D>R calcs, we require a dev change, as the {{DeferredToRetiredResult}} does not contain dictionaries for RBCEs or unauthorised payments.  I have added the relevant lines to the police D>R anyway (calc not yet set up for fire), commented out.  So these can be easily added back in once dev change comes through.",19/Dec/25 11:37 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Dev D>R update has come through so I’ve added my changes back into police D>R.,,,,,,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,19/Dec/25 2:40 PM
LSA Test cases,PHX5-741,19559,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,17/Dec/25 8:18 AM,02/Jan/26 12:56 PM,,02/Jan/26 12:49 PM,Client 172 Fire A to R Version 4,Client 172 Fire D to R Version 1,Client 176 Police A to R Version 6,Client 176 Police D to R Version 1,,,,,,,,,0,,,,,"Tests required:

{{PensionOptionLSAFactory}}

Given members category, do we set up the correct lsa strategies - with the correct keys.  Might be possible to set up a test at the PSC level, using {{PensionOptionCalculatorFactory}} to set up the member’s pension options, and then calling {{PensionOptionLSAFactory}}, and flagging if there are any pension options in {{PensionOptionCalculatorFactory}}  that are not in {{PensionOptionLSAFactory}}. This would be a very bespoke test, and would need a case for every path in {{PensionOptionCalculatorFactory}}  (every category, mccloud option, ill health choice), but it would cover us if changes are made to {{PensionOptionCalculatorFactory}} .

{{GetLSAFromPensionOption}}

Simple test cases required. Given a list of pension options and a key, do we return the correct LSA and LSDBA. If they key is not found, so we return the existing lsa and lsdba.

{{GetStartingLSA}}

This will be harder to set up, every test case will need a {{Dictionary<InternalCalculationPensionOptionType, PensionOption>}} of pension options, and the correct pension options will need to be pre updated with lsa values in other values. We are less interested in what the figures are, and just that for a given pension option, we have taken the lsa from the correct previous option.   So to be sure on this, if the dictionary contained every single pension option - each with a different lsa and lsdba (could have 101, 102, 103, 104 etc), then for a given key, to we pick out the correct one?

{{GetMemberUnauthorisedPayments}}

Given a pension option, do we return the correct {{List<MemberUnauthorisedPayment>}}

* If has db, should return db
* if has care shoudl return care
* if has both, should return both

But only if values > 0

{{GetRelevantBenefitCrystallisationEvents}}

Given a pension option, do we return the correct {{List<RelevantBenefitCrystallisationEvent>}} For now we are returning just one value.  There is no current way to store both care and db, so we are summing them up. If there is a requirement to have both, then there will need to be a table change, and this function and its tests will need to change.

{{LSAStrategy}}

There are currently four strategies, we need to test each one of these, as they have different logic for UPLS and PCLS

* {{DefaultDBLSAStrategy}}
* {{Fire2006DBLSAStrategy}}
* {{HMRCPCLSDBLSAStrategy}}
* {{CARELSAStrategy}}

Each of these strategies will use the base {{GetLSAOtherValues}} to calculate the LSA figures. So these tests should also cover whether we are calculating the correct values.

{{testRetirementResults}}

This has been set up to allow us to test a full pension option calculation. With all options and lsa end to end. We should have quite a few test cases at this level across different categories and mccloud options.",,Andrew Wilson,Annabelle Stephenson,Naomi Robinson,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,PHX5-742,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@79d93135,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:uzzx,,,"* 4x strategies created for LSA, which are assigned to pension options in a factory (eg. {{LegacyDBZeroLumpSum}} uses {{HMRCPCLSDBLSAStrategy}})
* The strategies calculate and populate the relevant LSA values, storing these in OtherValues within a pension option
* The ‘starting’ LSAs to use for each option are determined by pension option type: either we use the original LSA/LSDBA from runtime inputs, or, when calculating CARE benefits, we take the relevant remaining LSA/LSDBA from the associated DB benefit.
* When UPLS Tax is due, a {{MemberUnauthorisedPayment}} is created
* Two {{RelevantBenefitCrystallisationEvent}} are created regardless of any tax due.  These reflect the LSA used in the chosen option, and the LSDBA used in the chosen option.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 26,PHX5 Sprint 27,,,,,8.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-19 14:30:53.53,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_950822572_*|*_10252_*:*_1_*:*_3044_*|*_10354_*:*_1_*:*_248737613_*|*_10056_*:*_1_*:*_192759239,,"19/Dec/25 2:30 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Following linked item [https://xps-jira.atlassian.net/browse/PHX5-742|https://xps-jira.atlassian.net/browse/PHX5-742|smart-link], we also need to test that code within this ticket.  

We have got the RBCEs and unauthorised payments being added to the final client level results, but we have not yet tested those results coming through to make sure they all tie up with the right member etc.","22/Dec/25 8:08 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Test functions all set up in Public Sector Calculation, ready for tests to be added.  +Don’t forgot to test ticket 742 as well+","31/Dec/25 6:02 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I’ve set up testing functions and tests that cover everything in the description above, which does a good job of explaining what each function should do (so no need to go into detail again here).  Tests are all at *PublicSectorCalculation* level, and are preceded with “LSA”.

* LSA _CARELSAStrategyTest x3
* LSA _DefaultDBLSAStrategyTest x2
* LSA _Fire2006DBLSAStrategyTest x3
* LSA _GetLSAFromPensionOptionTest x2
* LSA _GetMemberUnauthorisedPaymentsTest x2
* LSA _GetRelevantBenefitCrystallisationEventsTest x2
* LSA _GetStartingLSATest x3
* LSA _HMRCPCLSDBLSAStrategyTest x3
* LSA _PensionOptionLSAFactory x13

I’ve also added a test (“LSA _fullRetirementResults _PPS1987 legacy”) that uses testRetirementResultsLegacy to show the entire process, including the creation of RBCEs and unauthorised payments.

For ticket 742, we need a final check at client level that checks any RBCEs and unauthorised payments created go to the right member.  I have added test (“LSA _unauthorised payments and RBCEs”) to *PPS A>R* for this.

I added a warning to {{GetLSAOtherValues}} in *PublicSectorLSA* that flags if {{postTaxLS}} < 0 after the tax is deducted, and returns 0 (instead of a negative).  One of the {{Fire2006DBLSAStrategy}} tests covers this warning.

I amended {{GetRelevantBenefitCrystallisationEvents}} to create two RBCEs, one for the LSA and another for the LSDBA, rather than adding the two values together.","02/Jan/26 11:03 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;There are some areas that we have coded in line with the specs, however I am anticipating bug fixes down the line from admin once they start testing.  I am noting these here, just so we have a record confirming that everything we’ve done is in line with specs.

* UPLS will never be created for CARE benefits (as UPLS = 0 in the CARE strategy)
* Tax amounts due on target DB cash are equal to those due for max DB cash, as we calculate against a maximum ‘PCLS’ figure that does not take the actual target amount into account
* No tax due under Default strategy, which is used across NPPS2006","02/Jan/26 12:22 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Have reviewed the release notes, description above and associated code/ testing and Annabelle’s comments below.

My two queries were:

# Based on this comment and the GetStartingLSA tests: ""The ‘starting’ LSAs to use for each option are determined by pension option type: either we use the original LSA/LSDBA from runtime inputs, or, when calculating CARE benefits, we take the relevant remaining LSA/LSDBA from the associated DB benefit."" 

My question: I can't quite tell - how does it know which of the two to use - in the scenario where it would be expecting a run time input but admin fail to enter it, would the code fail or would it revert to doing something else?

Discussion with Annabelle: Agreed that there should be defensive coding for this. Added an if statement in GetStartingLSA that will return an error if either LSA figure has not been entered. 

# {{GetRelevantBenefitCrystallisationEvents}}

""Given a pension option, do we return the correct {{List<RelevantBenefitCrystallisationEvent>}} For now we are returning just one value.  There is no current way to store both care and db, so we are summing them up. If there is a requirement to have both, then there will need to be a table change, and this function and its tests will need to change.""

My question: I assume no changes have been made and this is still a total as I can't see a split?

Discussion with Annabelle: Confirmed that this was updated so that GetRelevantBenefitCrystallisationEvents splits out the two values into two separate RBCEs. Rather than DB vs CARE, it is for the two separate allowance types, LSA and LSDBA, which aligns with requirements.

Final point of discussion was whether to have the three bullet points below recorded in backlog. Agreed that these items were not in the spec so are not outstanding requirements. I have included a comment on each of these in the retirement calc release notes (see “Fix Versions” for associated release notes), so admin can determine if in scope and testing required and raise comments as necessary. We can then review for scope creep.

Happy to send to closed.","02/Jan/26 12:44 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] 

# If statement and error message added into GetStartingLSA in PublicSectorLSA.  Test added at PublicSectorCalculation level to show this.
# GetRelevantBenefitCrystallisationEvents +has been amended+ so that it splits out the two values into two separate RBCEs.  This has nothing to do with DB vs CARE, rather it is for the two separate allowance types: LSA and LSDBA",,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,02/Jan/26 12:49 PM
PI Pre Retirement - Tie new factory in to process,PHX5-740,19557,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,17/Dec/25 8:00 AM,02/Jan/26 12:56 PM,,23/Dec/25 3:04 PM,Client 172 Fire A to R Version 4,Client 172 Fire D to R Version 1,Client 176 Police A to R Version 6,Client 176 Police D to R Version 1,,,,,,,,,0,,,,,"# Ensure the PIDate is sent in correctly. Is this just salary date? This will need to be set at the client level (which knows the salary date)
# Ensure that the factory is set up for retirements - call from the new {{PublicSectorPensionOptionCalculatorSetUp.}}. This will need to set a new {{IPIPaymentStrategy}} object on the calculator.
# Ensure that the new PI payment code ({{IPIPaymentStrategy}}) is called for every pension option. - update {{RetiredCalculator}} to call for each pension option
# Need to ensure it works for spouses pension
# 2006 and 2015 look like they use different logic for the calculation, so need to create new strategies and update the factory
# Need to ensure that the notional flag is set. There is already code to know whether an element is notional or not ({{GetPINotionalFlag}}). The devs have added the following to pension option:{{List<NotionalElementIndicator> NotionalElements}}

where 

{{NotionalElementIndicator is:}}

{noformat}public class NotionalElementIndicator
{
    public string Key { get; set; }
    public bool IsNotional { get; set; }
}{noformat}

We need to populate this for the PI elements - and ensure defaulted to N for all other elements.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1358f9b8,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:uwi,,,"PI Pre Retirement code tied into calculations.

PI elements created for all member and spouses elements. Value will be zero when PI date is same as retirement date.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 26,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_105969536_*|*_10252_*:*_1_*:*_10247844_*|*_10354_*:*_1_*:*_5171_*|*_10056_*:*_1_*:*_80713636,,,,,,,,,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,23/Dec/25 3:04 PM
PI Pre Retirement - Set up Test Cases,PHX5-739,19555,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,17/Dec/25 7:59 AM,02/Jan/26 12:55 PM,,31/Dec/25 2:05 PM,Client 172 Fire A to R Version 4,Client 176 Police A to R Version 6,,,,,,,,,,,0,,,,,"Tests required:

{{EligiblePIPaymentStrategy}}

Given a factor and a set of pension elements, do the correct elements get created with the correct:

*  pi amount
* notional flag (to be coded)
* post comm amount on original element

{{NonEligiblePIPaymentStrategy}}

Given a factor and a set of pension elements, do the correct elements get created with the correct:

*  pi amount
* notional flag (to be coded)
* post comm amount on original element

{{PIPaymentFactory}}

Given a member’s category, DOB, ill health status, PIStartdate and calculation date:

* Is piFactor correct
* Have we correctly chosen eligibility",,Andrew Wilson,Steven Wright,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7d849205,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:uzzt,,,PI Pre Retirement Calcs will output some information logs in Aurora. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 26,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-31 14:04:05.341,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1031234174_*|*_10252_*:*_1_*:*_108628847_*|*_10354_*:*_1_*:*_3637_*|*_10056_*:*_1_*:*_91015320,,"19/Dec/25 9:05 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;have added the following:



{noformat}public string TestPIPaymentFactory(List<Aurora.Model.Global.Calculations.GlobalDecimalReferenceValue> publicSectorPiFactors, LocalDate calculationDate, LocalDate piStartDate, string category, McCloudOption mcCloudOption, IllHealthType illHealth)
    {
            IMemberInfo memberInfo = new PublicSectorMemberInfo(GetTestMember(), ""Police"") { Category = category };
            Parameters parameters = new Parameters{PIStartDate = piStartDate};

        return PublicSectorFactories.PIPaymentFactory(new List<Aurora.Model.Global.Calculations.GlobalDecimalReferenceValue>(), calculationDate, parameters, memberInfo, mcCloudOption, illHealth).GetType().ToString();
    }

    public PensionOption NonEligiblePIPaymentStrategy(decimal piFactor, PensionOption pensionOption)
    {
        IMemberInfo memberInfo = new PublicSectorMemberInfo(GetTestMember(), ""Police"") {  };

        NonEligiblePIPaymentStrategy nonEligiblePIPaymentStrategy = new NonEligiblePIPaymentStrategy(piFactor, 2, memberInfo, McCloudOption.None);

        return nonEligiblePIPaymentStrategy.UpdatePensionOption(pensionOption);
    }

    public PensionOption EligibleProRatedPIPaymentStrategy(decimal piFactor, PensionOption pensionOption)
    {
        IMemberInfo memberInfo = new PublicSectorMemberInfo(GetTestMember(), ""Police"") {  };

        EligibleProRatedPIPaymentStrategy eligibleProRatedPIPaymentStrategy = new EligibleProRatedPIPaymentStrategy(piFactor, 2, memberInfo, McCloudOption.None);

        return eligibleProRatedPIPaymentStrategy.UpdatePensionOption(pensionOption);
    }

    public PensionOption EligiblePIPaymentStrategy(decimal piFactor, PensionOption pensionOption)
    {
        IMemberInfo memberInfo = new PublicSectorMemberInfo(GetTestMember(), ""Police"") {  };

        EligiblePIPaymentStrategy eligiblePIPaymentStrategy = new EligiblePIPaymentStrategy(piFactor, 2, memberInfo, McCloudOption.None);

        return eligiblePIPaymentStrategy.UpdatePensionOption(pensionOption);
    }{noformat}","31/Dec/25 2:04 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Various test cases added to Public Sector Calculation to test the PI payment factory and the PI strategies. Added some Log Information / InterimValues to the code for testing / admin logs. 

Added a date of birth input to the factory tests so that I can test the under 55 rule for ill health cases in PPS1987 and FPS1992.",,,,,,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,31/Dec/25 2:05 PM
Police A>R - Capped Cash,PHX5-738,19521,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,16/Dec/25 4:44 PM,19/Jan/26 4:49 PM,,08/Jan/26 4:52 PM,Client 172 Fire A to R Version 7,Client 176 Police A to R Version 9,Client 184 Police D to R Version 2,Client 185 Fire D To R Version 2,,,,,,,,,0,,,,,For member 244229 max lump sum is capped correctly but PCLS is not.  Member is an Inspector under age 60 with less than 30 years service.,,Andrew Wilson,Annabelle Stephenson,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-299,PHX5-761,,,,,,,,06/Jan/26 5:47 PM;18934601-32fa-4c76-9b74-159dc94fd206;image-20260106-174041.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14456,07/Jan/26 11:50 AM;5796a187-7241-414b-bea0-2d22260a9bed;image-20260107-115018.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14562,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@41494cec,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:i,,,Police 1987 and Fire 1992 now also limit the PCLS option to the scheme maximum.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-06 17:47:43.171,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_102669417_*|*_10252_*:*_1_*:*_64178066_*|*_10354_*:*_1_*:*_1584910632_*|*_10056_*:*_1_*:*_233327269,,"06/Jan/26 5:47 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;As per linked ticket [https://xps-jira.atlassian.net/browse/PHX5A-299|https://xps-jira.atlassian.net/browse/PHX5A-299|smart-link], this is a *spec change* and not a fix.  Not sure if the Parent needs amending to reflect this?

!image-20260106-174041.png|width=669,alt=""image-20260106-174041.png""!

where DB_MaxLS is the cash from {{SchemeMaximumDBPensionOptionStrategy}}.  

I think the code change is needed in *Public Sector Calculation*, in {{PCLSDBPensionOptionStrategy}}, to call {{MaxLumpSum}} and cap dbCash against this (as well as the LSAs, as it’s doing currently)

*Note for Annabelle* (if someone else actions this ticket, please remind me of this) : linked to ticket 761, and might mean DB target strat +doesn’t+ need a rework, as SchemeMax cash will always be >= PCLS.","07/Jan/26 11:38 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;because the {{PCLSDBPensionOptionStrategy}} strategy is used by categorie snot 1987, we should create a new strategy based obn this that caps at scheme max - which is only used for 1987 cases.","07/Jan/26 11:48 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Looking at code, only PPS1987 and FPS1992 use this strategy, so if Fire also need this update, we can still update the original strategy rather than create a new one","07/Jan/26 11:50 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Fire also need the update: 

!image-20260107-115018.png|width=882,alt=""image-20260107-115018.png""!","08/Jan/26 4:07 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;{{PCLSDBPensionOptionStrategy}} has been updated to calc the maximum and use this also in the min check:

{noformat}decimal maximumLumpSum = PublicSectorFunctions.MaxLumpSum(MemberInfo, McCloudOption, IllHealth, CalculationDate, DBCommutationFactor, totalService, dbPreComPension, Rounding);

	        decimal dbCash = PublicSectorFunctions.PCLS(dbPreComPension, DBCommutationFactor, Rounding, MemberInfo, McCloudOption);

			dbCash = Min(dbCash, lsa, lsdba, maximumLumpSum);{noformat}

Had to pass in calc date and ill health flag through to this strategy, so factory code also updated to pass in these inputs

{{PCLSDBPensionOptionStrategy}} test function also updated, and a new test case added “PCLSDBPensionOptionStrategy Scheme Maximum” to cover this exact case.

Three GAD test cases also updated where cash was over the scheme maximum.",,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,08/Jan/26 4:52 PM
Police A>R - Scheme pays debits not being deducted,PHX5-737,19520,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,16/Dec/25 4:20 PM,07/Jan/26 2:56 PM,,07/Jan/26 2:56 PM,,,,,,,,,,,,,0,,,,,"Members 107304, 515277 and 447474.  I think the calc is only picking up scheme pays debits from the linked record not the main record, as it is picking up one debit for member 447474.",,Andrew Wilson,Peter Dimsdale,Steven Wright,Tracy Collins,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,PHX5A-300,PHX5-728,,,,,,,,17/Dec/25 12:18 PM;e877e79e-92ff-477a-bcc6-11ceb71bd905;image-20251217-121841.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/13601,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3ea66dfa,,,,,,,,,,,,,,,,,,,,Confirm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-12-17 09:50:41.029,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_249788745_*|*_10252_*:*_1_*:*_2576_*|*_10354_*:*_2_*:*_9570_*|*_10056_*:*_1_*:*_156699033_*|*_10356_*:*_1_*:*_1488605526,,"17/Dec/25 9:50 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Two stages to this:

# Sounds like we are not being sent scheme pays for both members- potential dev fix
# Need to ensure we are deducting from correct accrued pension - should be covered by [[PHX5-728] Refactor Scheme Pays logic - Jira|https://xps-jira.atlassian.net/browse/PHX5-728]","17/Dec/25 12:18 PM;712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f;the main record doesn’t pull the data through, but the linked member does:

main record json: 

!image-20251217-121841.png|width=368,alt=""image-20251217-121841.png""!",17/Dec/25 3:55 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Also applies for FIRE - Member ID 17072 - member has Scheme pays deductions on both records,"18/Dec/25 11:52 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Referred to devs on 18/12/2025, MemberSchemePayDebits data on main member not being passed in.",19/Dec/25 11:21 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Data now being passed in on Calculate after dev fix. This can now be tested in Aurora. ,"04/Jan/26 7:33 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] Hi Tracy,  I’ve added member ref 107304 as a test case to calculate and I can see the revalued scheme pay debits for both records being deducted after Naomi’s recent code updates.

Can see this is with admin to test in the linked ticket so let me know if any further action needed here.

Thanks,

Steven","07/Jan/26 2:45 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Tracy confirmed in the sprint planning meeting 07/01/2026 that the scheme pays debit was now deducting and this can now be closed. A further ticket was potentially being raised. 

No code updates applied so no fix versions required.",,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,07/Jan/26 2:56 PM
Annual allowance calcs to be tested and updated to account for calcs not at 5th April annual run (CARE reval),PHX5-736,19435,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,16/Dec/25 11:10 AM,12/Jan/26 2:58 PM,,08/Jan/26 7:12 AM,Client 172 Fire Annual Allowance Version 1,Client 176 Police Annual Allowance Version 5,,,,,,,,,,,0,,,,,"Need to test and run through Public Sector Annual Allowance to ensure it runs as expected and all defensive coding has worked as expected for part years.

Unsure if any prorating required which is not coded for. Only code so far relates to calc end date working for less than 1 year.

Two story points to test and identify and areas to update. May expand if new strategies or pro-rating needed.

Coding requirement: change prior year end date to be 05/04 not one year prior to calc date. Update opening balance pi factors which follow different rules to pi factors for current year reval.",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2dd8838e,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:uzzr,,,"various issues corrected to get values inc CARE inflation correct for part year calcs:

priorYearEndDate: Changed prior year end date to be 05/04 not one year prior to calc date. 

piFactorIssue: Updated opening balance pi factors which follow different rules to pi factors for current year reval - method added to Factors

CARE inflation: new strategy for Zero Inflation",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 26,PHX5 Sprint 27,PHX5 Sprint 28,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-01-08 07:12:41.945,10281_*:*_2_*:*_21839638_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_82048624_*|*_10253_*:*_1_*:*_8139_*|*_10252_*:*_2_*:*_1812108554_*|*_10354_*:*_3_*:*_130464_*|*_10056_*:*_1_*:*_7528,,"06/Jan/26 3:13 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Added new PI function for opening balances where retirement date is very early in year. PI factor revals for the current period work on next Monday after 05/04. For prior year revals, it uses 05/04 date so a different logic was needed to get opening PI factors.

Two tests:

# Annual Allowance Spec - 1742802 (1987 Active McCloud, Reform with underpin, Mid Year Date) - no issues regarding mid year aspect of calc. We do have a query over the Care reval but it seems the AA matches the A>R for how CARE is treated. Run for 31/12/2024.
# Test 2 for 07/05/2024 edge case dates passes.

Pro-rate aspect of AA calc working fine so queries are just on CARE revals for non 05/04/dates.","06/Jan/26 5:56 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Remaining query:

As with A>R and A>R CARE is uplifted from 05/04 to retirement date, if factor is known and in calculate.

Spec calc does not uplift on the basis the rate would not be known. Since the example was for 31/12/2024 DoR, the rate is now know and applied. 

We have queried whether CARE should never be uplifted for mid-year DoR, even if rate is known and uploaded. If this is the case it differs from the A>R and A>D and is not on the spec, so is a new requirement.","07/Jan/26 1:12 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Confirmed with Chalotte not to apply inflation after last value in the care table.

There is an error message in CAREBuilder to prevent no Inflation Strategy being set.

I have added a CARENoInflation to CAREBuilder and the underlying code to set the value to 0 in CARE.

In PSC I have coded the AA aspect here:

{noformat}            if (calculationType == CalculationType.ActiveToDeferred)
            {
                careBuilder.WithCAREInflation(
                    CAREInflationType.FromTableWithAdditionZeroFuture, // applies zero future inflation to A>D calcs
                    ProRateMethod.Months,
                    ProRateMethod.Months,
                    0,
                    0,
                    0,
                    inflationAddition);
            }

            else if (calculationType == CalculationType.AnnualAllowance)
            {
                careBuilder.WithCAREInflation(
                    CAREInflationType.NoInflation, // i.e. factor of 1 + 0 = 1
                    ProRateMethod.None,
                    ProRateMethod.None,
                    0,
                    0,
                    0,
                    inflationAddition);
            }

            else
            {
                careBuilder.WithCAREInflation(
                    CAREInflationType.FromTableWithAddition, // applies set inflation addition if inflation increase is unknown and it is a full care year period.
                    ProRateMethod.Months,
                    ProRateMethod.Months,
                    0,
                    0,
                    0,
                    inflationAddition);
            }{noformat}

Test cases:

Annual Allowance Spec - 1742802 (1987 Active McCloud, Reform with underpin, Mid Year Date) and

Annual Allowance Spec - 1742802 (1987 Active McCloud, Reform with underpin, Mid Year Date 2nd Check). Both pass.","08/Jan/26 7:12 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;If, for any reason we add to this if statement, I would consider changing it to a switch statement.",,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,Done,08/Jan/26 7:12 AM
Write backs for 3 years on adjusted annual allowance required,PHX5-735,19434,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,16/Dec/25 11:08 AM,12/Jan/26 2:58 PM,,19/Dec/25 3:02 PM,Annual Allowance (Stand alone) Day 1,Client 172 Fire Annual Allowance Version 1,Client 176 Police Annual Allowance Version 2,,,,,,,,,,0,,,,,"There is logic to return the taxable excess following calculation of calc adjusted annual allowance, from previous three years. Any updates to the previous three years need to be written back against the existing ID for that year, along with new line with new ID for current year result.",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7d55b4b0,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:uzz,,,Have coded so that results output this years annual allowance update (id:0) and then returns up to three years of adjusted unused annual allowance updates as required (may be less than 3 years available).,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 26,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-18 09:18:23.131,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_231414_*|*_10252_*:*_1_*:*_113511140_*|*_10354_*:*_1_*:*_2708_*|*_10056_*:*_1_*:*_7638,,"17/Dec/25 6:43 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Have coded so that results output this years annual allowance update (id:0) and then returns up to three years of adjusted unused annual allowance updates as required (may be less than 3 years available). test cases in police 176 pass as expected.

Currently I have to ouput a whole annual allowance update list so have populated the other values to match what they were historically. I have spoken to phil about reviewing whether this is the best way to view it but have to publish a calc to pass over for review.",18/Dec/25 9:18 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] Why do we have to output the whole list? Do we know which have changed?,,,,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,Done,19/Dec/25 3:02 PM
PSO Deductions to be tested on AA calcs,PHX5-734,19433,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,16/Dec/25 11:06 AM,12/Jan/26 2:58 PM,,07/Jan/26 1:52 PM,Client 172 Fire Annual Allowance Version 1,Client 176 Police Annual Allowance Version 5,,,,,,,,,,,0,,,,,"PSO logic is being coded for all calcs in its own module.

Testing needs to be performed to ensure suitable for AA calcs and correct figures coming through. Same consideration needs to be made as to scheme pays, with care and db deductions required.",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6b3a058e,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qni:r,,,Needed a PSO test case for AA. Got one provided (test 12 per pack) which matches per Police client 176 testing.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 27,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-01-06 15:56:58.206,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_57100_*|*_10252_*:*_1_*:*_2598_*|*_10354_*:*_1_*:*_1742099960_*|*_10056_*:*_1_*:*_8576,,"05/Jan/26 3:01 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Waited for Steven’s code to be put through. Test case 12 in Police 176 annual allowance matches expected values. Whilst I think there might be some PSO refactoring needed in PSC, the Annual Allowance obtains the value purely from the AccruedPensionValues elements list and the deductions in PensionElements do not factor in, so there will be no changes to come through here.",06/Jan/26 3:56 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272]  You say PSO refactoring needed. Is there a ticket raised for this?,,,,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,Done,07/Jan/26 1:52 PM
Police A>R Error message,PHX5-733,19432,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,16/Dec/25 10:52 AM,13/Jan/26 9:19 AM,,13/Jan/26 9:19 AM,,,,,,,,,,,,,0,,,,,"Member 362133 is retiring at age 55 (ie DOL is one day before 55th birthday).  TD1 errored when run at 30 May 2030 but ran at 31 May 2030.  On TD2 the following error is received at all DORs tried. 

!image-20251216-105538.png|width=344,alt=""image-20251216-105538.png""!",,Andrew Wilson,Annabelle Stephenson,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-294,,,,,,,,,16/Dec/25 10:55 AM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20251216-105538.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/13467,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2746e6f1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000001,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-12-17 08:43:52.315,10354_*:*_1_*:*_17392515_*|*_10056_*:*_1_*:*_1997222794_*|*_10355_*:*_1_*:*_0,,17/Dec/25 8:43 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Worth checking again on latest code. I fixed a bug that caused that exact error (it was due to us trying to log care pension details when there were none). Could be a hidden secondary issue - as if it is the same error - why would care pension be zero in one case and not the other,"08/Jan/26 1:41 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] I have added test “UAT ticket 733” to client 176 A>R and am no longer getting an error message, for retirements at either date.  As per Andrew’s comment below, I know there have been fixes applied to this in the past few weeks, so I think we should be able to close this.

Please let me know if admin are still getting the error. (This comment also added to ticket 294).",13/Jan/26 8:34 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Calculation tested in Aurora and no error is received.  Close ticket,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,13/Jan/26 9:19 AM
FPS1992 - apply IPIPaymentStrategy to LSI,PHX5-732,19429,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,16/Dec/25 10:43 AM,02/Jan/26 12:55 PM,,31/Dec/25 2:04 PM,Client 172 Fire A to R Version 4,,,,,,,,,,,,0,,,,,"{{PublicSectorLongServiceIncrements}} in Public Sector Calculation needs to call a PIPaymentStrategy from the new code for lsaFactor.  Reval is to be applied for the period between 30/06/2007 and the calculation/retirement date.

See attached ticket [https://xps-jira.atlassian.net/browse/PHX5-611|https://xps-jira.atlassian.net/browse/PHX5-611|smart-link] ",,Annabelle Stephenson,Naomi Robinson,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,PHX5-611,,,,,,,,,31/Dec/25 10:37 AM;18934601-32fa-4c76-9b74-159dc94fd206;LSI Revaluation Query.msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/14183,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2238bef8,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01yd,,,"Date used for PI revaluation rate on Long Service Increment (LSI) benefits amended from June 2007 to September 2007, as per scheme regulations.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 26,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-31 14:04:36.97,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_761042_*|*_10252_*:*_1_*:*_5117_*|*_10354_*:*_2_*:*_7174_*|*_10056_*:*_1_*:*_605864631_*|*_10355_*:*_1_*:*_689811972,,"23/Dec/25 10:31 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;so PI is being applied, but we get a different factor from the single admin test case we have (140504 fire A>R). need to check with admin.

our code is picking up factor 1.6699 (effective for 23/06/07 - 22/07/07), whereas altair uses 1.6593 (23/08/07 - 22/09/07). factors from 2025 PI multiplier: [Public service pensions increases - GOV.UK|https://www.gov.uk/government/collections/public-service-pensions-increases]

[~accountid:712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd] are you able to comment on the PI reval factor to use on LSI benefits?  I have looked at test case 5 (140504) from the fire A>R matrix","31/Dec/25 10:37 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[^LSI Revaluation Query.msg]

Lynette has provided an extract from the regs that clarifies the September 2007 reval rate is used, rather than the rate in force at 30/06/07.  I’ve updated the {{PublicSectorLongServiceIncrements}} code accordingly, and the expected results of my existing tests.",31/Dec/25 2:04 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Discussed in review with AS. Now using Sept RPI rate to match altair.,,,,,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,31/Dec/25 2:04 PM
A>R Test 7 & Test 28 are not calculating the added 60ths,PHX5-731,19351,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,15/Dec/25 2:19 PM,26/Jan/26 3:46 PM,,,,,,,,,,,,,,,0,Police_A-R,,,,,,Annabelle Stephenson,Chris Marshall,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@25321ae2,,,,,Police,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i07,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-26 15:46:16.417,,,"26/Jan/26 3:46 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Test 28 is now calculating added 60ths following tickets 811 and 818.  Test 7, member 387658, has some data in HistoricBenefitElementValues that could be for added years, but that’s not where we pick it up from, in fact we don't look at that table for anything.

I don’t know if we just close this ticket and wait to see if admin raise any further issues RE added years / additional pension?",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,To Do,15/Dec/25 2:19 PM
A>R Test 9 DBPCLS results for both Legacy & Reform are outputting as 0,PHX5-730,19350,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,15/Dec/25 2:15 PM,26/Jan/26 3:48 PM,,26/Jan/26 3:48 PM,,,,,,,,,,,,,0,Police_A-R,,,,,,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@393abe41,,,,,Police,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i08,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_3634359186,,,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,26/Jan/26 3:48 PM
Police A>D - Pension Due Date missing from writeback,PHX5-729,19283,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,12/Dec/25 4:23 PM,08/Jan/26 11:52 AM,,06/Jan/26 3:51 PM,Client 176 Police A to D Version 30,,,,,,,,,,,,0,,,,,"Message from George in CIT

“We have run an active to deferred process on 10110201 on client 176.  The Date pension due should be 18/11/2030 but on the results the date pension due has written todays date. Having spoken to Phil, when looking at the results json on the process the calc has written back 01/01/0001 so the process changed the date to todays date as 01/01/0001 is not a valid date”

I have also run one for member 10014501 which has the same result.",,Steven Wright,Tracy Collins,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6e5e0129,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qni:zv,,,Fixed an issue with DatePensionDue on certain elements defaulting to 01/01/0001 in the Police A>D calculation if the member has less than 25 years service and are a PPS1987 member. This will now correctly output a DatePensionDue for the associated elements at members 60th birthday.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 27,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-06 15:32:13.482,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_84889042_*|*_10252_*:*_1_*:*_1827_*|*_10354_*:*_1_*:*_3929778_*|*_10056_*:*_1_*:*_2068304331,,"06/Jan/26 3:32 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Both members in description are Police PPS1987 members who have less than 25 years service so the PensionDueDate for salary link related record elements should be age 60 according to the A>D spec. It was outputting as 01/01/0001. 

# Looked at the {{PPS1987DueDateStrategy}}and found this scenario was not being matched with any of the IF statements, it was therefore just continuing over them for these members and outputting 01/01/0001. I don’t agree with one of the IF Statements currently in there against the spec {{else if (currentAge < 55 && totalService < 25) { datePayableFrom = publicSectorMemberInfo.DateReachesAge(60); } }} so removed it and replaced it with this: 
{noformat}        else if (totalService < 25)
	    {
	        datePayableFrom = publicSectorMemberInfo.DateReachesAge(60);
	    }{noformat}
# Test added to Public Sector Calculation “PPS1987DueDateStrategy _>Age 50 & <25y Service” with member 10110201 details. Now giving a DatePensionDue of 18/11/2030 as expected. All other PPS1987DueDate tests still passing.
#  Updated Police A>D PSC dependency to latest version and added the two members above as test cases under UAT Ticket 729 Test Cases. Both now have DatePensionDue dates at age 60 for the salary link elements as expected. ",,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,06/Jan/26 3:51 PM
Refactor Scheme Pays logic,PHX5-728,19250,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,12/Dec/25 1:36 PM,12/Jan/26 2:58 PM,,24/Dec/25 4:30 PM,Client 172 Fire Annual Allowance Version 1,Client 172 Fire A to R Version 4,Client 176 Police Annual Allowance Version 5,Client 176 Police A to R Version 6,,,,,,,,,0,,,,,"Scheme pays global module needs updating to:

# Return total scheme pays and scheme pays relevant since the previous PIP
# Return both of the above for deduction from DB and CARE Pre Com Pen when calculating accrued pension values.
# The main strategy needs to point to the PI factor code in the Factor’s module the same as the AA strategy does.
# Add McCloud Scheme Pays logic in once confirmed in template. Seems to be a run time input but only affecting closing balance? Also a row for McCloud lump sum which doesn’t currently go anywhere.

Strategies needs to allow for all 4 outputs, to be used as necessary in AA/ other calcs.

Calc type needs to be set in the factory and consideration made as to whether we also set per mccloud option or not.",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-737,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3a27a716,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:uzzi,,,"Scheme pays logic updated to accept 4 constants, 2 for CARE and 2 for DB. Scheme Pays global module refactored into strategy pattern for CARE and DB and also to accept CARE/Reform/Legacy parameters from A>R run time inputs, so additional scheme pays can be added to element values.

PSC updated to reflect DB and CARE deferred elements in accrued pension values and to deduct from DBPreComPen or CAREPreComPen as applicable in their respective PensionElementValues.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 26,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-17 09:51:28.412,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1621825_*|*_10252_*:*_1_*:*_699083096_*|*_10354_*:*_1_*:*_336578193_*|*_10056_*:*_1_*:*_15150,,"12/Dec/25 1:36 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;PSO and Scheme pays logic has changed in the Annual Allowance template, so code needs updating to account for this.",17/Dec/25 9:51 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;See [[PHX5-737] Police A>R - Scheme pays debits not being deducted - Jira|https://xps-jira.atlassian.net/browse/PHX5-737] for some potential good test cases for this ticket,"24/Dec/25 1:40 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;# Return total scheme pays and scheme pays relevant since the previous PIP

Public sector constants updated to include:

{noformat}    public const string DBSchemePayPensionDebit = ""DBSchemePayPensionDebit"";
    public const string DBSchemePayPensionDebitSincePrevPIP = ""DBSchemePayPensionDebitSincePrevPIP"";
    public const string CARESchemePayPensionDebit = ""CARESchemePayPensionDebit"";
    public const string CARESchemePayPensionDebitSincePrevPIP = ""CARESchemePayPensionDebitSincePrevPIP"";{noformat}

Scheme Pays code updated to return an element list with all 4 keys and values or 0 if no value/ not applicable

# Return both of the above for deduction from DB and CARE Pre Com Pen when calculating accrued pension values.

PSC updated to make sure the deferred elements created from the accrued section of the builder only adds on the total DB/CARESchemePayPensionDebit and not the amount SincePrevPIP needed for AA calcs

Pension Element code updated to deduct the CARESchemePayPensionDebit from CAREPreComPen and DBSchemePayPensionDebit from DBPreComPen.

Note: As determined from spec/ test cases and discussions so far, there is one scheme pays table per member. the CARESchemePayPensionDebit relates to the CARE2015 (main) member table and is therefore associated with CAREPreComPen. The NPPS/PPS (salary linked) scheme pays table is linked to the DBPreComPen. 

Since the A>R run time input asks for reform, legacy or care scheme pays, we have deducted a CARE input from CAREPreCom for CARE2015 members, Reform from the DBPreComPen for McCloud.Reform and Legacy from the DBPreComPen for McCloud.Legacy.

We asked about whether reform scheme pays needed to be split for DB and CARE components but were told it was unlikely and that no scenario was currently available to confirm. Charlotte has taken it away to consider but no spilt has been coded. 

# The main strategy needs to point to the PI factor code in the Factor’s module the same as the AA strategy does.

The Scheme Pays logic has been refactored. There is now a factory which determines whether to calculate CARE or DB Scheme Pays with a base calc doing almost all of the logic (as it is largely the same calc). The base calc looks to the up to date PI code in the Factors global module. The strategy pattern is such that DB/ CARE calcs have 2 overrides: one to add the correct addedSchemePays as input in the A>R parameters and the other to allocate results to the correct constant.

Tests added within the module for CARE and DB, to allow for publish prior to testing in AA calc and Police A>R. No fire test cases provided so logic will be copied over. Appears to be the same.

# Add McCloud Scheme Pays logic in once confirmed in template. Seems to be a run time input but only affecting closing balance? Also a row for McCloud lump sum which doesn’t currently go anywhere.

So far, there is no clear instruction as to how McCloud will differ from normal scheme pays. Admin have confirmed there is only one table holding Scheme Pays data in Aurora and it will be the same location for all scheme pays types. As such, no additional logic has been coded to separately deduct any other scheme pay types. ",,,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,Done,24/Dec/25 4:30 PM
Police A>R - Capped lump sum under age 55,PHX5-727,19105,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,11/Dec/25 11:52 AM,19/Jan/26 4:49 PM,,07/Jan/26 11:30 AM,Client 172 Fire A to R Version 6,Client 176 Police A to R Version 8,Client 184 Police D to R Version 2,Client 185 Fire D To R Version 2,,,,,,,,,0,,,,,Whilst the calc now runs at the day prior to the members 55th birthday it is still treating the member as under age 55 from the point of view of capping the lump sum to 2.25 x pension.  Member should be entitled to the full calculated lump sum.,,Andrew Wilson,Tracy Collins,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-290,PHX5-676,,,,,PHX5A-236,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3b7330c3,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qyz:,,,Max Lump Sum code updated to ensure that comparison to calculation date works for exact age 55.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 27,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-12-17 09:15:21.659,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1099732_*|*_10252_*:*_1_*:*_280826_*|*_10354_*:*_1_*:*_2883_*|*_10056_*:*_1_*:*_2330139428,,11/Dec/25 11:56 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Member 100869 retiring at 20 Jan 2026,"17/Dec/25 9:15 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The only code I can see that caps at 2.25 is in {{PublicSectorFunctions}}.{{MaxLumpSum}}

{noformat}else if (totalService >= 25 && memberInfo.DateReachesAge(50) <= calculationDate)
	        {
	                InterimValuesLogger.AddWithLogging($""Maximum lump sum entitlement | AuroraId: {memberInfo.AuroraId} | McCloudOption: {mcCloudOption.ToString()}, Member entitled to capped lump sum of:"", cash, InterimValuesLogger.LoggingMode.BothInformation);
	            cash = CappedLumpSum(preCommutationPension, rounding, memberInfo, mcCloudOption);

	        }{noformat}

This logic implies it is under 50 that counts - not under 55",07/Jan/26 7:31 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Looking at with a fresh head - assume this is actually a straight forward fix - just need to ensure the extra day fix is included when checking for capping lump sum,"07/Jan/26 11:14 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Updated {{PublicSectorFunctions}}.{{MaxLumpSum}}

Added .PlusDays(-1) for each time we call DateReachesAge and compare to calculation date.

Have added a test function for MaxLumpSUm directly to this module and have added a test case for a member aged 55.",,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,07/Jan/26 11:30 AM
Police A>R - Amendment to pension element codes,PHX5-726,19038,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,11/Dec/25 10:22 AM,08/Jan/26 12:37 PM,,08/Jan/26 9:43 AM,Client 172 Fire A to R Version 6,Client 176 Police A to R Version 8,,,,,,,,,,,0,,,,,"Pension component type not outputting to the correct elements. Legacy DB types are showing as MCPEN, not PEN

!image-20251210-142504.png|width=250,alt=""image-20251210-142504.png""!",,Steven Wright,Tracy Collins,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-262,PHX5A-290,,,,,,,,11/Dec/25 10:23 AM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20251210-142504.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/13200,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4ba8bd54,,,,,,,,,,,,,,,,,,,,Confirm,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qud:,,,LegacyDB Pension Elements at retirement will now output as ‘PEN’ instead of ‘MCPN’ as requested by April for consistency with data mapping and the A>D Element output naming. Note this has been applied to both Police and Fire calculations.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 27,PHX5 Sprint 28,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-08 09:37:17.815,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_89425796_*|*_10252_*:*_1_*:*_82692323_*|*_10354_*:*_1_*:*_1556618186_*|*_10056_*:*_1_*:*_687936480,,"19/Dec/25 9:27 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Response from admin

“Hi Tracy. Iain and I have discussed this and although it would not cause any issue with the values being paid, the current data is being mapped on the lines of legacy DB = PEN Reform DB = MCPEN. This is the output request on the A to D, so for consistency with this and with existing data mapping, can we switch to this as the outputs? Thanks, April”","08/Jan/26 9:37 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Clarified with Tracy that Reform DB pension element should stay as MCPN instead of MCPEN. So it is just the Legacy DB pension element that needs to change from MCPN to be PEN. 

1. Updated Legacy IF statements in {{PensionOptionCalculatorFactory}} in the non 2015 categories to pass in {{KeyPensionConstants.NonMcCloudDBPension}} instead of KeyPensionConstants.McCloudDBPension. 
2. Updated some GAD test cases which had this key as the expected name to PEN. No change in values.

# Updated Police & Fire A>R with latest Public Sector Calculation dependency and updated test expected results to look for PEN instead of MCPN. 
# Updated Police & Fire A>D with latest Public Sector Calculation dependency, no affect on the test cases there as they output deferred element values instead.",,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,08/Jan/26 9:43 AM
DIS - update elements to have correct keys,PHX5-725,18860,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,09/Dec/25 11:14 AM,09/Dec/25 11:23 AM,,,,,,,,,,,,,,,0,,,,,"Currently the DIS calculation uses 

{{ CalculateAccruedPensionValues(averagedPensionablePay, serviceWithTVin, MemberCARE);}}

This creates elements with our internal accrued pension naming.

We need to ensure that the elements have the correct keys for outputting.

So we will need a new function between calculating accrued and calculating spouses.

If we cannot reuse the existing pre com - then we might need to create a new one. (active to deferred already has its own conversion)

To think about when we do this: the spouses solution we have in place has diverged (because we did not have the correct keys)

If possible, it would be nice to bring this back in line and use {{ISpousesPensionStrategy}} {{DefaultSpousesPensionStrategy}} instead of the newly created {{IDeathSpousePensionStrategy}} {{DefaultDeathSpousePensionStrategy}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6ace8e84,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pxb:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13855,PHX5-222,Police - Death in Service,To Do,09/Dec/25 11:14 AM
FPS1992 - Apply PI reval to LSI element,PHX5-724,18827,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,08/Dec/25 6:04 PM,11/Dec/25 11:13 AM,,11/Dec/25 11:13 AM,,,,,,,,,,,,,0,,,,,LSI has been coded.  Need to apply the PI reval due.  See linked ticket for logic from spec,,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,PHX5-611,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2cf43b38,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i02,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_234571343,,,,,,,,,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,11/Dec/25 11:13 AM
Fire APB Runtime,PHX5-723,18654,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Dec/25 7:05 AM,06/Jan/26 11:52 AM,,06/Jan/26 11:52 AM,,,,,,,,,,,,,0,,,,,No idea what this is,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2d210e4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qni:i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 27,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10252_*:*_1_*:*_0_*|*_10354_*:*_1_*:*_3467_*|*_10056_*:*_1_*:*_2781996108,,,,,,,,,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,06/Jan/26 11:52 AM
Annual allowance integration into A to R,PHX5-722,18653,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Dec/25 7:01 AM,02/Jan/26 12:55 PM,,24/Dec/25 4:46 PM,Client 172 Fire A to R Version 4,Client 176 Police A to R Version 6,,,,,,,,,,,0,,,,,"The issue is that an A to R cannot just pick up the latest Annual allowance from a table, as the values may change depending on whether Reform or Legacy is chosen.

Proposed solution to get us past day 1 (suggested/ pre approved by Iain)

Allow annual allowance calculation to let the member choose reform/legacy

Update A to R to have inputs for scheme pay deductions - legacy/reform. So that these can be used in the relevant point.",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2f22c325,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qnf:,,,"* Scheme Pay Debits run time inputs added to aurora and calculate parameters (devs)
* Scheme pays updated to accept a List<SchemePaysDebit> addedSchemePays and logic added to add correct scheme pay against correct McCloud option using strategy pattern
* Public Sector Constants updated so that a new parameter for Additional Scheme Pays is accesible
* PSC updated such that scheme pays factory accepts parameter and Scheme Pays logic updated to ensure if list is empty (for calcs who do not set anything against this parameter (e.g. A>D has no such run time input), that an empty list will be passed into the logic
* A>R (Police) updated to add List<SchemePayDebit> into parameters: {{AdditionalSchemePaysDebits = Parameters.SchemePayDebits}}

Testing as described in ticket comments.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 26,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-19 16:46:52.658,10281_*:*_1_*:*_600571471_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_5992695_*|*_10252_*:*_1_*:*_1611_*|*_10354_*:*_1_*:*_4562_*|*_10056_*:*_1_*:*_1063553887,,"19/Dec/25 4:46 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Discussion notes:

Scheme pays input to be a list with a Key, Value and an Enum (for legacy, reform or none (for post22))

Need to edit Scheme Pays factory to accept the inputs

Need to edit Scheme Pays strategies to add the correct value to the correct output

May need new constants for CARE and DB Scheme Pays to be produced (for all AA calcs) - use CARE start date which should be programmable into factory as a parameter in PSC to differentiate types","24/Dec/25 2:55 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Work performed:

* Scheme Pay Debits run time inputs added to aurora and calculate parameters (devs)
* Scheme pays updated to accept a List<SchemePaysDebit> addedSchemePays and logic added to add correct scheme pay against correct McCloud option using strategy pattern
* Public Sector Constants updated so that a new parameter for Additional Scheme Pays is accesible
* PSC updated such that scheme pays factory accepts parameter and Scheme Pays logic updated to ensure if list is empty (for calcs who do not set anything against this parameter (e.g. A>D has no such run time input), that an empty list will be passed into the logic
* A>R (Police) updated to add List<SchemePayDebit> into parameters: {{AdditionalSchemePaysDebits = Parameters.SchemePayDebits}}
* A>R (Police): Tests cases added to ensure Precompen is correct after calculation of scheme pays in accrued pension values and deduction from correct CARE/DB Pre Com Pen in Pension Element Values. Cases cover adding in single added scheme pays, multiple for the same member and type (albeit it is expected only one amount would be added for each member, but aggregation has been allowed for), and multiple aurora IDs. Values were added against both correct and incorrect aurora IDs to check the right value was used. No official test cases provided so we could only check a value was going to the parameter input against the precompen we expected.



Logic copied into fire A>R and test cases added there too. No spec/test cases for fire, so logic duplicated.",,,,,,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,24/Dec/25 4:46 PM
CARE Joint/Single life added pension,PHX5-721,18652,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Dec/25 6:52 AM,02/Jan/26 12:55 PM,,16/Dec/25 2:01 PM,Client 172 Fire A to D Version 3,Client 172 Fire A to R Version 4,Client 176 Police A to D Version 28,Client 176 Police A to R Version 6,,,,,,,,,0,,,,,"If care benefit is single life we should not add it to the spouses pension.

Where CARE pension is included in accrued pension, we should filter and exclude where appropriate.",,Andrew Wilson,Steven Wright,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,PHX5A-199,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@799a21c0,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:uv,,,Care Spouses Pension - the members care pension will now have the value of any care benefit type “MemberAddedPension” removed from the total value for the purpose of calculating the spouse pension. The MemberAddedPension care type has been singled out as the type which would be used if the member has chosen single life care added pension. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 25,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-15 14:59:35.325,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_344284951_*|*_10252_*:*_1_*:*_3154_*|*_10354_*:*_1_*:*_171688930_*|*_10056_*:*_1_*:*_379500738,,"15/Dec/25 2:59 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;MemberCareBenefitType.MemberAddedPension is believed to be the type that is used when member chooses single life care pension. 

1. Created new KeyAccruedPensionConstants for AccruedSingleLifeCAREPension in Public Sector Constants module.
2. Added a new reusable function in Public Sector Functions called CalculateAccruedCAREPensionForBenefitType, which asks for a care benefit type input and will filter out that Type at latest date from care history and take the total pension.
3. In Public Sector Calculation module, added new code in CalculateAccruedPensionValues  starting with var singeLifeCareElement which calls the new function and inputs MemberCareBenefit.MemberAddedPension. 
4. In CalculatePreComElements function in Public Sector Calculation - SpouseCarePreCom element logic. Deducting AccruedSingleLifeCAREPension key constant from the AccruedCAREPension value to get the total care pension minus any single life pension that will eventually be used to go through the spouse calc code. 

No physical test cases for this available so added manual care data into Police A>R test 1 (copy) which now has a line for memberaddedpension of £450. Tested this is deducting from the total Care pension and confirmed working correctly. Two tests added in Public Sector Functions. 

",,,,,,,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,16/Dec/25 2:01 PM
PSO - pick up and apply revaluation,PHX5-720,18650,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Dec/25 6:44 AM,19/Dec/25 8:27 AM,,19/Dec/25 8:27 AM,Client 172 Fire A to D Version 2,Client 172 Fire A to R Version 3,Client 176 Police A to D Version 10,Client 176 Police A to R Version 4,,,,,,,,,0,,,,,"Divorce code needs to apply PI revaluation (as per scheme pays)

We then need to ensure this is being picked up correctly. All other code “should” be in place once reval applied.

SW notes 15/12/2025:

Test case from Tracy: [318207.docx|https://xpsplc.sharepoint.com/:w:/s/ProjectPhoenix/IQC5R_ENQNVERanFuexYKY_hAS8N4MCnKytEdWaaK36pXtw?e=c6ZtdV]",,Andrew Wilson,Steven Wright,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,PHX5A-198,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5aa6aacb,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:ur,,,Applied update so that Pension Sharing Order Debits will now be revalued to date of calculation using the relevant PI revaluation factor.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 25,PHX5 Sprint 26,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-18 12:06:52.589,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_179685285_*|*_10252_*:*_1_*:*_6025_*|*_10354_*:*_1_*:*_582926687_*|*_10056_*:*_1_*:*_379990682,,"18/Dec/25 12:06 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;# In Divorce module Renamed DivorceFromDataCalculator strategy to DivorceFromDataPublicSectorCalculator due to the strategy using PublicSectorPI reval factors to apply revaluation with. Can only be used for public sector calcs currently.
# Re-used revaluation logic as per scheme pays module but made a couple of tweaks. Instead of using a string to assign the Calculation Date Year PI table, call Factors.GetPublicSectorPiFactor as Russell had coded the logic to extract a correct PI factor for calcs. 
# Added test class so that it was now testable. Added 3 tests in Divorce module to cover real test cases for police AA and police A>R. Factors picked by code were a match against the test cases and revalued divorced element matched. 
# Moved GetDivorceKeyMappings function from PSC module to Divorce module. In PSC, passed in the PI factors as parameter input in the  publicSectorCalculator.DivorceCalculator = DivorceStatic.DivorceCalculatorFactory call. 

Divorce Key mapping needs to be checked incase there’s any other divorce elements that would be used across the two records that we have not mapped, have asked Neil for decode report to ensure we have the right keys mapped against the right categories. In testing, the divorce element keys were as expected in the member data. 

Adding ticket to check that an ERF is being applied by code to the PSO divorce element post revaluation where required as per the A>R police test case attached in details. 

",18/Dec/25 1:08 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e] Do we need any logic to say whether the PSO gets added to the db or care pension?,18/Dec/25 1:36 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Adding another ticket for this alongside testing the ERF application. Not sure what the code is doing once it goes down the rest of the PSC tree. ,,,,,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,19/Dec/25 8:27 AM
PI Pre Retirement: Create new factory/strategies,PHX5-719,18649,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Dec/25 6:38 AM,17/Dec/25 6:01 PM,,17/Dec/25 6:01 PM,,,,,,,,,,,,,0,,,,,"We need to create PI elements for every case - even if the value is zero.

For cases where PI revaluation is needed pre retirement, then this needs to be the value of the increase.



Rather than create PI elements within each pension option, like spouses, this can be done afterwards.

There needs to be a new factory that decides whether PI is required or not, and what keys will be used.

There will be (at least) two new strategies:

# No PI - just create the elements with zero amounts
# With PI - create with PI reval amounts calculated

We can use pre existing PI reval logic - with as much set up as possible done within the factory.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-280,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@709881c,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:uzm,,,Base work for PI Pre Retirement. This has the calculation logic. New tickets created for test cases and tying into the process,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 25,PHX5 Sprint 26,,,,,8.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_91309439_*|*_10252_*:*_1_*:*_3388_*|*_10354_*:*_1_*:*_950635888_*|*_10056_*:*_1_*:*_168559,,"08/Dec/25 9:56 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Base strategies and factory in place



TODO:

# Ensure the PIDate is sent in correctly. Is this just salary date?
# Ensure that the factory is set up for retirements
# Ensure that the new PI payment code is called for every pension option.","16/Dec/25 6:44 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Tests required:

{{EligiblePIPaymentStrategy}}

Given a factor and a set of pension elements, do the correct elements get created with the correct:

*  pi amount 
* notional flag (to be coded)
* post comm amount on original element

{{NonEligiblePIPaymentStrategy}}

Given a factor and a set of pension elements, do the correct elements get created with the correct:

*  pi amount 
* notional flag (to be coded)
* post comm amount on original element

{{PIPaymentFactory}}

Given a member’s category, DOB, ill health status, PIStartdate and calculation date:

* Is piFactor correct
* Have we correctly chosen eligibility",,,,,,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,17/Dec/25 6:01 PM
A to R Day 1 Requirement,PHX5-718,18647,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Dec/25 6:35 AM,05/Dec/25 6:51 AM,,,,,,,,,,,,,,,0,,,,,"We need to create PI elements for every case - even if the value is zero.

For cases where PI revaluation is needed pre retirement, then this needs to be the value of the increase.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1f580371,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-14,,,,,,,,,,,,,,dark_orange,,,,,,,,,,,,,0|i00pvb:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,05/Dec/25 6:35 AM
No Spouse Pension Elements being output by Death In Service calculation,PHX5-717,18581,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,04/Dec/25 4:54 PM,15/Jan/26 12:49 PM,,09/Dec/25 11:26 AM,Client 184 Police DIS Version 2,Client 185 Fire DIS Version 1,,,,,,,,,,,0,,,,,SpousesPensionElements is returning []  for all options,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5f47f432,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:,,,The Spouse Pension Elements output will be populated by the death in service calculation,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 24,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1251740_*|*_10252_*:*_1_*:*_2306_*|*_10354_*:*_1_*:*_3087_*|*_10056_*:*_1_*:*_74734343,,"05/Dec/25 1:55 PM;640f34fc1273131f2adfede9;Problem was in SpousesPensionFactory - this was set up to calculate spouses pensions on Active Retirement. This is creating strategies attached to {{KeyPreComConstants}} but ElementValues looking to use this had {{KeyAccruedPensionConstants}} keys so the strategies weren’t being recognised to be used.

Can’t amend SpousePensionFactory without having an impact on Active to Retirement.

Created {{IDeathSpousePensionStrategy in Public Sector Death module}} with one default strategy that just applies 50% to the value of the pension element. This does appear to tie into the Death in Service specification and will allow results to be output for process testing.

In PublicSectorCalculation, {{DeathInServiceCalculator}} amended  SpousePensionElements to {{SpousesPensionElements = DeathSpousePensionStrategy.GetDeathSpousePensionElements(accruedPensionValues);}}

Updated {{        public IDeathInServiceCalculator PublicSectorDeathInServiceCalculatorFactory(IllHealthType illHealth, Parameters parameters, McCloudOption mcCloudOption, List<CareSalary> careSalaries, CalculationType calcType)}} so no longer uses SpousePensionFactory and instead uses DeathSpousePensionFactory",05/Dec/25 1:59 PM;640f34fc1273131f2adfede9;Also found in Death in Service that ActiveNormalMemberInfo and activeNormalMemberData were being passed into IDeathInServiceCalculators so updated these to the Salary Linked equivalents,,,,,,,,,,,,,,,,,,,,,,,13855,PHX5-222,Police - Death in Service,Done,09/Dec/25 11:26 AM
Police A>D - Care benefits writeback,PHX5-716,18548,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,04/Dec/25 3:06 PM,07/Jan/26 4:36 PM,,17/Dec/25 2:31 PM,,,,,,,,,,,,,0,,,,,"The CARE benefits now writeback if you input them manually in step 3 of the A to D process , directly to the CARE Benefits table on the CARE category record. However, when we ran the process using a Calc, there was no inputs populated in the member care section of the A to D process and having got of a call with Phil and Andrew, Andrew has said its because CARE data is missing from the calc. ",,Steven Wright,Tracy Collins,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-286,,,,,,PHX5-783,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@67ad3bfa,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:uzv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 25,PHX5 Sprint 26,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-12-10 14:47:23.233,10354_*:*_2_*:*_292447_*|*_10056_*:*_1_*:*_517089369_*|*_10356_*:*_2_*:*_603242893,,04/Dec/25 3:08 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Query raised by George Walles as part of A>D process feedback investigation.,"10/Dec/25 2:47 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] Referred to devs, calc is outputting the tables as expected in Calculate. I noticed a DB retirement Quote v2 process being run for the same test member I used was also outputting. ","12/Dec/25 10:19 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21]  Hi Tracy, it sounds like dev have pushed a fix through for this. Could you test an A>D calc in UAT and let me know if the Care tables are now populating. I will then get Andrew to close the ticket.

Thanks, Steven",12/Dec/25 11:11 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Hi [~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e] I have run a member through (ID 100145 in Client 176) and it is now updating a line into the CARE record as expected.  It looks OK to me so I think we can close out ticket but I wouldn’t want to be the person that signs this off properly.  I will advise CIT that the change has been made and they can proceed with the testing their end.,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,17/Dec/25 2:31 PM
Police A>R - Lower tier Ill Health - 2nd DB salary input required,PHX5-715,18544,Task,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,,,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,04/Dec/25 2:15 PM,04/Feb/26 2:31 PM,,,,,,,,,,,,,,,0,MyPension,,,,,,Andrew Wilson,Annabelle Stephenson,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-249,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@176e3a8b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000000002vi00003jm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2026-01-06 15:17:34.943,,,04/Dec/25 2:41 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Lower tier ill health uses different underpin salaries for Legacy and Reform (Legacy at 2022 plus PI and Reform at 2015 plus PI).  Currently can only input one DB salary which is then used for both calcs.  Will this issue be replaced when PI is coded?,06/Jan/26 3:17 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] Is this still an issue? Looks like this one could be a dev change if it is a new input. But it is an input request that has passed me by. I’m not even sure what is being asked for here.,"07/Jan/26 8:55 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Hi [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452].  Yes, ultimately this will require a second input for the DB salary so that different salaries can be input for Legacy and Reform.  We didn’t rush this in to the dev changes before Christmas because it is not a frequent issue and can be worked around by running the calcs twice (inputting one salary each time).  

I think ill health underpin was in the list of currently excluded calcs so, whilst it was desired it is not essential to meet the Phoenix criteria of matching what was previously in place.",07/Jan/26 9:15 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] So just to confirm - we do not need this for day one?,"27/Jan/26 1:31 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;So I think this will require a dev change, to provide two sets of DB salary inputs, one for legacy and one for reform (we should have an effective date and salary type for both legacy and reform, not just the amount).

In terms of what this means for our code, there will be changes required in {{ActiveToRetiredResult}} in A>R calcs, presumably for both police and fire (I am checking this).  We’ll need to allow for two salary inputs and ensure these are correctly passed into the fppParameter we create.

Within FPP module, we will need some changes in {{WithOverride}} to accept two decimal inputs to update the parameters with.  We’ll also need changes in {{UpdateMethod}} to take the two inputs into account.

I am just checking with admin whether this is required for police and fire, and for A>D and partial retirement as well as A>R.  Then will move ticket to dev required and ask Andrew to raise.",04/Feb/26 2:31 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Need for second salary input raised with Phil,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,To Do,04/Dec/25 2:15 PM
Factor table B404 to be used for Police Care Benefit Type 'Member Added Pension' in Age Addition. ,PHX5-714,18412,Story,READINESS REVIEW,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,03/Dec/25 4:21 PM,10/Dec/25 12:04 PM,,,,,,,,,,,,,,,0,,,,,,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@25dcf105,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i0r,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,To Do,03/Dec/25 4:21 PM
Police DIS error in CalculateService,PHX5-713,18377,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,03/Dec/25 2:39 PM,11/Dec/25 9:41 AM,,05/Dec/25 7:20 AM,Client 176 Police DIS Version 1,,,,,,,,,,,,0,,,,,,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,PHX5-712,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@29d55127,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pt9:,,,Gets past errors that were preventing Death In Service calculations completing due to the lack of a DBOnly service calculation for the Active Normal record,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 24,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1648321_*|*_10252_*:*_1_*:*_3529_*|*_10354_*:*_1_*:*_88951758_*|*_10056_*:*_1_*:*_17745,,"04/Dec/25 3:47 PM;640f34fc1273131f2adfede9;Errors were in {{CalculateService}} when trying to add InterimValues and infoLogger - for the ActiveNormal record a DBOnly service calculation wasn’t being created so was causing errors when trying to use this to create the Interim Values and logs.

Wrapped both of these in {{if (serviceCalculations.Any(x=>x.Key == ServiceCalcType.DBOnly))}} so skipped over where there is no DBOnly ServiceCalcType",,,,,,,,,,,,,,,,,,,,,,,,13855,PHX5-222,Police - Death in Service,Done,05/Dec/25 7:20 AM
Get Police DIS processing without errors,PHX5-712,18376,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,03/Dec/25 2:34 PM,11/Dec/25 9:41 AM,,04/Dec/25 3:59 PM,Client 176 Police DIS Version 1,,,,,,,,,,,,0,,,,,,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-713,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5f0ad0ae,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pt3:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 24,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10250_*:*_1_*:*_0_*|*_10252_*:*_1_*:*_70858348_*|*_10354_*:*_1_*:*_43722_*|*_10056_*:*_1_*:*_34648,,04/Dec/25 3:59 PM;640f34fc1273131f2adfede9;See [https://calculate.uat.xpsplc.com/Clients/162/Calculations/2|https://calculate.uat.xpsplc.com/Clients/162/Calculations/2] - test member now processes without errors and produces results,,,,,,,,,,,,,,,,,,,,,,,,13855,PHX5-222,Police - Death in Service,Done,04/Dec/25 3:59 PM
BuildRetired function required,PHX5-711,18254,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Russell Armstrong,640f34fc1273131f2adfede9,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,03/Dec/25 7:18 AM,02/Jan/26 12:56 PM,,10/Dec/25 1:01 PM,Client 176 Police D to R Version 1,,,,,,,,,,,,0,,,,,"We currently have {{BuildActiveToRetired}}

I don’t think there is anything particularly to do with active for this. So could be we could just rename to BuildRetired. We could then update all AtoR client code and the new DefRet client code.",,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@370b4e53,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:v,,,Work to get Deferred to Retirement calculation running through,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 24,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-10 11:02:02.588,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_70639896_*|*_10252_*:*_1_*:*_521579099_*|*_10354_*:*_1_*:*_14812410_*|*_10056_*:*_1_*:*_11300185,,"10/Dec/25 11:02 AM;640f34fc1273131f2adfede9;Added {{IRetirementCalculator BuildDeferredToRetired();}} to {{IPublicSectorCalculationBuilder}} and PublicSectorCalcualtionBuilder.

Crated {{PublicSectorDeferredToRetirementCalculatorFactory}}to call {{PublicSectorDeferredRetirementCalculatorSetUp}}.

Changed ActiveToRetiredCalculator to RetiredCalculator as being used in both ActiveToRetired and DeferredToRetired.",,,,,,,,,,,,,,,,,,,,,,,,14400,PHX5-294,Police - Deferred to Retirement,Done,10/Dec/25 1:01 PM
Conversion functions required for deferred members,PHX5-710,18253,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,03/Dec/25 7:16 AM,02/Jan/26 12:56 PM,,10/Dec/25 1:03 PM,Client 176 Police D to R Version 1,,,,,,,,,,,,0,,,,,"Active calcs have the following:

{noformat}		IMemberInfo activeNormalMemberInfo = PublicSectorMemberInfoStatic.ActiveNormalMemberInfo(Member, LinkedMembers, schemeName);
		MemberData activeNormalMemberData = ModelConversion.ActiveNormalMemberData(Member, LinkedMembers);

		IMemberInfo activeSalaryLinkedMemberInfo = PublicSectorMemberInfoStatic.ActiveSalaryLinkedMemberInfo(Member, LinkedMembers, schemeName);
		MemberData activeSalaryLinkedMemberData = ModelConversion.ActiveSalaryLinkedMemberData(Member, LinkedMembers);{noformat}

We need an equivalent:

{noformat}		IMemberInfo deferredNormalMemberInfo = PublicSectorMemberInfoStatic.deferredNormalMemberInfo(Member, LinkedMembers, schemeName);
		MemberData deferredNormalMemberData = ModelConversion.deferredNormalMemberData(Member, LinkedMembers);

		IMemberInfo deferredSalaryLinkedMemberInfo = PublicSectorMemberInfoStatic.deferredSalaryLinkedMemberInfo(Member, LinkedMembers, schemeName);
		MemberData deferredSalaryLinkedMemberData = ModelConversion.deferredSalaryLinkedMemberData(Member, LinkedMembers);{noformat}

for deferred retirements, that pick the correct deferred members.",,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4cdeb0d1,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzhz9,,,Update to allow deferred retirement calc to process,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 24,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-09 15:24:33.71,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_521277235_*|*_10252_*:*_1_*:*_292436_*|*_10354_*:*_1_*:*_26132318_*|*_10056_*:*_1_*:*_69168,,"09/Dec/25 3:24 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Updated public sector member info module with


{noformat}        public static IMemberInfo deferredNormalMemberInfo(Member member, Dictionary<string, LinkedMemberData> linkedMembers, string schemeType)  
 
        {
            if (linkedMembers != null)
            {
                foreach (KeyValuePair<string, LinkedMemberData> linkedMember in linkedMembers)
                {
                    if (linkedMember.Value.Category.Contains(""CARE""));
 
                    {
                        return new PublicSectorMemberInfo(linkedMember.Value, linkedMember.Key, schemeType);
                    }
                }
            }
            return new PublicSectorMemberInfo (member, schemeType);
        }
 
        public static IMemberInfo deferredalaryLinkedMemberInfo(Member member, Dictionary<string, LinkedMemberData> linkedMembers, string schemeType)
        {
            if (linkedMembers != null)
            {
 
                foreach (KeyValuePair<string, LinkedMemberData> linkedMember in linkedMembers)
                {
                    if (!linkedMember.Value.Category.Contains(""CARE""))
                    {
                        return new PublicSectorMemberInfo(linkedMember.Value, linkedMember.Key, schemeType);
                    }
                }
            }
 
            if (member.CurrentCategory.Category.Key.Contains(""CARE""))
            {
                return new PublicSectorMemberInfo(member, schemeType);
            }
            else
            {
                return null;
            }
 
            }{noformat}

Also update Module conversion


{noformat}public static MemberData DeferredNormalMemberData(Member member, Dictionary<string, LinkedMemberData> linkedMembers)
	{   
        if (linkedMembers != null)
			{
                foreach (KeyValuePair<string, LinkedMemberData> linkedMember in linkedMembers)
                {
                    if (linkedMember.Value.Category.Contains(""CARE"") && (linkedMember.Value.InferredStatus == InferredStatus.Deferred));
                    {
                        var originalDataLinked = linkedMember.Value.ToMemberData();
                        return NormaliseMemberData(originalDataLinked);

                    }
                }
            }

        var originalData = member.ToMemberData();    
		return NormaliseMemberData(originalData);
	}

	public static MemberData DeferredSalaryLinkedMemberData(Member member, Dictionary<string, LinkedMemberData> linkedMembers)
	{
		List<ServiceBreak> serviceBreaks = member.ServiceBreaks?.ToList() ?? new List<ServiceBreak>(); //member.ServiceBreaks.ToList();	// select the service breaks from the active record
        
        if (linkedMembers != null)
			{
                foreach (KeyValuePair<string, LinkedMemberData> linkedMember in linkedMembers)
                {
                    if (!linkedMember.Value.Category.Contains(""CARE"") && (linkedMember.Value.InferredStatus == InferredStatus.Deferred))
                    {
                        MemberData salaryLinkMember = linkedMember.Value.ToMemberData();    // create the salary-linked member data
                        salaryLinkMember = NormaliseMemberData(salaryLinkMember);           // make sure null values for lists are now empty lists
                        salaryLinkMember.ServiceBreaks.AddRange(serviceBreaks);             // add the serviceBreaks list from the active record

                        return salaryLinkMember;
                    }
                }
            }

		var originalData = member.ToMemberData();    
		return NormaliseMemberData(originalData);
	}{noformat}

All relevant module dependencies updated",,,,,,,,,,,,,,,,,,,,,,,,14400,PHX5-294,Police - Deferred to Retirement,Done,10/Dec/25 1:03 PM
Fire A>R NFPS Ill Health calcs error with ERF issue but should not look for ERF,PHX5-709,18150,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,02/Dec/25 3:09 PM,02/Jan/26 12:55 PM,,09/Dec/25 11:40 AM,Client 172 Fire A to R Version 4,,,,,,,,,,,,0,,,,,"!d9f1f2d8-2ef4-4c38-ac40-4d38dfd3e941.png|width=412,alt=""d9f1f2d8-2ef4-4c38-ac40-4d38dfd3e941.png""!

[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] i’ve taken this from [https://xps-jira.atlassian.net/browse/PHX5-708|https://xps-jira.atlassian.net/browse/PHX5-708|smart-link]  I presume it was meant for this one?",,Annabelle Stephenson,Chris Marshall,Russell Armstrong,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,PHX5-633,,,,,,,,,03/Dec/25 7:16 PM;18934601-32fa-4c76-9b74-159dc94fd206;d9f1f2d8-2ef4-4c38-ac40-4d38dfd3e941.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/12732,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2016dfda,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i9,,,ERF is not to be applied to NFPS2006 benefits for ill-health cases,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 24,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-12-03 19:30:59.783,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_638948_*|*_10252_*:*_1_*:*_64425621_*|*_10354_*:*_1_*:*_80365835_*|*_10056_*:*_1_*:*_102097338,,"03/Dec/25 7:30 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:640f34fc1273131f2adfede9] on the linked ticket you completed, you mentioned that ERFs still apply for ill-health retirements on NFPS2006.  Can you remember where you saw that?  I note that the 2006 ERF table says it is for ‘early retirement in normal health’, but otherwise, I can’t find any firm confirmation in the specs one way or the other",04/Dec/25 9:35 AM;640f34fc1273131f2adfede9;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] not sure. All I’m seeing looking back now is D8 on the Pre Comm spec says “No need for 2006 ill health. “ and there’s nothing noted in the ERF,"05/Dec/25 11:44 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Isobel has confirmed that ER factors are not applied to ill-health benefits on NFPS.  We therefore need to amend {{PensionElementCalculatorFactory}} so that {{PublicSectorPensionElementUnreducedStrategy}} is used for IH cases.



{noformat}case ""NFPS2006"":
case ""NFPS2006RET"":
    if (memberInfo.IsActive)
    {
        if (containsCARE && !isIllHealth) // for reform CARE options (non ill health)
        {
            InterimValues.Add($""PensionElementStrategy for McCloudOption: {mcCloudOption.ToString()}"", $""Using strategy PublicSectorPensionElementStandardStrategy"");
            return new PublicSectorPensionElementStandardStrategy(2, memberInfo, mcCloudOption, calculationDate, erfTable, schemeReferenceData, 3);
        }
        else if (isIllHealth)	// for DB and reform CARE (ill-health)
        {
            InterimValues.Add($""PensionElementStrategy for McCloudOption: {mcCloudOption.ToString()}"", $""Using strategy PublicSectorPensionElementUnreducedStrategy"");
            return new PublicSectorPensionElementUnreducedStrategy();
        }
        else	// for DB (non ill health)
        {
            InterimValues.Add($""PensionElementStrategy for McCloudOption: {mcCloudOption.ToString()}"", $""Using strategy PublicSectorPensionElementAgeAttainedStrategy"");
            return new PublicSectorPensionElementAgeAttainedStrategy(2, memberInfo, mcCloudOption, calculationDate, erfTable, schemeReferenceData, 3);
        }
    }
    else
    {
        InterimValues.Add($""PensionElementStrategy for McCloudOption: {mcCloudOption.ToString()}"", $""Using strategy PublicSectorPensionElementAgeAttainedStrategy"");
        return new PublicSectorPensionElementStandardStrategy(2, memberInfo, mcCloudOption, calculationDate, erfTable, schemeReferenceData, 3);
    }{noformat}

The code change I made is in line 10, I removed the additional condition of {{containsCARE}}, so that the unreduced strategy applies to both DB and reform CARE, for ill-health cases",,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,09/Dec/25 11:40 AM
Fire A>R Reform CARE results 2015 - 2022 are outputting as 0,PHX5-708,18148,Task,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,02/Dec/25 2:19 PM,02/Jan/26 12:55 PM,,,,,,,,,,,,,,,0,,,,,"!image-20251202-151014.png|width=412,alt=""image-20251202-151014.png""!",,Annabelle Stephenson,April Woods,Chris Marshall,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,02/Dec/25 3:10 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251202-151014.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/12558,03/Dec/25 6:30 PM;18934601-32fa-4c76-9b74-159dc94fd206;image-20251203-183017.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/12731,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@37c67154,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-12-03 16:59:55.586,,,03/Dec/25 4:59 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] did you mean to add the ERF error print to this one?,"03/Dec/25 6:30 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;This is a data issue.  On salary linked member, for each of the existing CARE rows, there are 2 additional rows with nil values. For 2024/25, the actual CARE row has not been created or populated on the member’s record, but the two nil rows are present.  This means that our code doesn’t know that it needs to calculate CARE for 2024/25, and returns the sum of the existing 2024/25 TotalPension values, which are 0.

!image-20251203-183017.png|width=669,alt=""image-20251203-183017.png""!",03/Dec/25 6:36 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Query sent to Neil RE data,"03/Dec/25 6:56 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Hi [~accountid:712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd] 

Please see the screen print in my comment below, of the CARE record for FPS member 7879201.  I’ve checked a couple of other members from the test matrix, they all have the additional rows, some with type ‘+Police+ McCloud CARE benefits’.  Neil has confirmed that the blank rows are in the source data.  Are you able to advise?",04/Dec/25 8:40 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] No it was meant for ticket 709 which looks like you have uploaded it to that ticket. Thanks,"04/Dec/25 3:10 PM;712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] Hi Annabelle. We’ve taken a look at this and the blank rows are not visible in the front end of Altair so we are not sure. Neil M and I discussed as part of a data call, and I also discussed with Neale W to see if his Altair knowledge could help. The benefit ref of 2 and 3 appear to be where the null rows are. Neil M is doing some further checks in the data, otherwise we will either need to ask Heywood to clarify, or to get sign off to delete these null rows from the data. So, still ongoing but will update when we know more. Thanks, April",,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,To Do,02/Dec/25 2:19 PM
ERF for fire A>R CARE service need to be rounded up if there is a part month,PHX5-707,18147,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,02/Dec/25 2:14 PM,07/Jan/26 9:25 AM,,07/Jan/26 9:25 AM,Client 164 Fire A to R Version 1,,,,,,,,,,,,0,,,,,"[https://fpsregs.org/images/GAD/ERF/Fire-England-2015-ERF-guidance-201120.pdf|https://fpsregs.org/images/GAD/ERF/Fire-England-2015-ERF-guidance-201120.pdf] - point 2.7

Shows how the ERF is worked out",,Andrew Wilson,Chris Marshall,Isobel Mounsey,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-306,,,03/Dec/25 11:31 AM;6836c9be-4fc2-4a70-b665-cf0499e9e856;image-20251203-111715.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/12658,03/Dec/25 11:31 AM;6836c9be-4fc2-4a70-b665-cf0499e9e856;image-20251203-112938.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/12657,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3d81c00c,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qni:zm,,,ERF for FIRE CARE service now uses the correct factor,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 24,PHX5 Sprint 25,PHX5 Sprint 27,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-12-03 11:31:03.362,10251_*:*_3_*:*_20488914_*|*_10250_*:*_3_*:*_411133174_*|*_10252_*:*_1_*:*_2571841185_*|*_10354_*:*_2_*:*_45312_*|*_10056_*:*_1_*:*_128315_*|*_10355_*:*_1_*:*_87156779,,02/Dec/25 2:16 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Hi [~accountid:712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f] are you able to provide a test case to confirm the correct way the ERF is calculated. Thanks,"03/Dec/25 11:31 AM;712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f;Hi Chris, I have ran a test case on Altair for this member ref 469688 this confirms that the ERF is rounded up. 

!image-20251203-111715.png|width=678,alt=""image-20251203-111715.png""!

The quote has been done when the member is between 2 years 7 months and 2 years 8 months early, the calculation has rounded this to 2 years 8 months early as per guidance below:

!image-20251203-112938.png|width=588,alt=""image-20251203-112938.png""!","05/Jan/26 8:45 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Updated public sector calculation module with 

{noformat}        LocalDate roundedErfApplicationDate = erfApplicationDate;
		if (publicSectorMemberInfo.TypeOfScheme() == OverallSchemeType.Fire && MemberInfo.Category.Contains(""CARE""))
           {
               // Check if it's not the first day of the month
			if (erfApplicationDate.Day > 1)
			{
				// // Move to the next month
				roundedErfApplicationDate = erfApplicationDate.PlusMonths(1);
				erfApplicationDate = roundedErfApplicationDate; 
			}	 
		}   {noformat}

The rounding for the ERF is for CARE only, The period to normal pension age should be rounded to the next month. See attached regulation","05/Jan/26 4:12 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Conditional logic should be in the factory.

This strategy is now getting overly complex. The pattern should be that because fire has different lgoic, they should get a new strategy for their logic, and the factory should have the if statement.

[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] Can talk you through if easier?","07/Jan/26 8:48 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Following discussion with Andrew added to code
{{// need to refactor this code}}
Once this ticket is set to done, need to add further ticket to do the refactoring ",,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,07/Jan/26 9:25 AM
DIS Remove dependency on comm factor for spouses,PHX5-705,18005,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Russell Armstrong,640f34fc1273131f2adfede9,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,02/Dec/25 7:10 AM,11/Dec/25 9:41 AM,,05/Dec/25 7:21 AM,Client 176 Police DIS Version 1,,,,,,,,,,,,0,,,,,"DIS currently fails because it runs through the standard spouses code, which now always tries to call commutation factor.

The error is:

| | |Error running test, inner: The method or operation is not implemented.|Error running test, inner: The method or operation is not implemented.|
| | |Error running test, inner stack trace: at Aurora.Calculations.Functions.RetirementAdjustmentFactorExtensions.GetInterpolatedFactor[T](List`1 values, Int32 year, Int32 month) in C:\a\1\s\Server\Aurora.Calculations\Functions\RetirementAdjustmentFactorExtensions.cs:line 52 at PublicSectorMemberInfo.CommutationFactor(String key, SchemeReferenceData schemeReferenceData, LocalDate date, Int32 rounding, IllHealthType illHealth) at PublicSectorDeathFactories.SpousesPensionFactory(IMemberInfo memberInfo, McCloudOption mcCloudOption, SchemeReferenceData schemeReferenceData, LocalDate calculationDate, IllHealthType illHealth) at PublicSectorCalculationBuilder.PublicSectorDeathInServiceCalculatorFactory(IllHealthType illHealth, Parameters parameters, McCloudOption mcCloudOption, List`1 careSalaries, CalculationType calcType) at PublicSectorCalculationBuilder.BuildDeathInService() at MyCategoryCalculation.Calculate() at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor) at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)|Error running test, inner stack trace: at Aurora.Calculations.Functions.RetirementAdjustmentFactorExtensions.GetInterpolatedFactor[T](List`1 values, Int32 year, Int32 month) in C:\a\1\s\Server\Aurora.Calculations\Functions\RetirementAdjustmentFactorExtensions.cs:line 52 at PublicSectorMemberInfo.CommutationFactor(String key, SchemeReferenceData schemeReferenceData, LocalDate date, Int32 rounding, IllHealthType illHealth) at PublicSectorDeathFactories.SpousesPensionFactory(IMemberInfo memberInfo, McCloudOption mcCloudOption, SchemeReferenceData schemeReferenceData, LocalDate calculationDate, IllHealthType illHealth) at PublicSectorCalculationBuilder.PublicSectorDeathInServiceCalculatorFactory(IllHealthType illHealth, Parameters parameters, McCloudOption mcCloudOption, List`1 careSalaries, CalculationType calcType) at PublicSectorCalculationBuilder.BuildDeathInService() at MyCategoryCalculation.Calculate() at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor) at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)|

We need to update {{CommutationFactor}} in {{PublicSectorMemberInfo}} so that whichever path is chosen, if there are no factors for the given age - it won’t error, but instead set the factor to 1 and move on.",,Andrew Wilson,Russell Armstrong,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@18dde8e3,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzhzi,,,Added logic so if an age related commutation factor is being looked up from a table and the age is lower than the lowest age in the table this will now return a factor of 1 to prevent calculations erroring,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 23,PHX5 Sprint 24,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-03 11:59:30.15,10251_*:*_2_*:*_5773969_*|*_10250_*:*_2_*:*_81649308_*|*_10252_*:*_1_*:*_23590_*|*_10354_*:*_1_*:*_72074834_*|*_10056_*:*_1_*:*_25040182,,"03/Dec/25 11:59 AM;640f34fc1273131f2adfede9;In PublicSectorMemberInfo added logic to certain scenarios where if the age of the person was lower than the minimum age in the table a value of 1 will be returned. 

This applies to where {{key == KeyPreComConstants.CAREPreCom}} and they are in the Police Scheme, for CARE2015 categories for the Police schemes, NPPS2006 and FPS1992.

No changes made for CARE benefits or CARE2015 categories for Fire or NFPS2006 categories as these always return a constant that is not looked up from a table based on age. 

Not changed PPS1987 as this already had some logic to return the value at the earliest age in the table if younger.

Added tests CommutationFactor1 to 12 in PublicSectorMemberInfo to test the scenarios where I changed the code to make sure either the factor table was still being used or 1 was returned depending on the age at date of calculation",03/Dec/25 1:36 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:640f34fc1273131f2adfede9] We probably need to add some warnings in if we default comm factor to 1?,04/Dec/25 10:26 AM;640f34fc1273131f2adfede9;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Warnings added,,,,,,,,,,,,,,,,,,,,,,13855,PHX5-222,Police - Death in Service,Done,05/Dec/25 7:21 AM
DIS Lump Sum Death Grant,PHX5-704,18004,Story,BLOCKED,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,02/Dec/25 6:50 AM,05/Dec/25 6:41 AM,,,,,,,,,,,,,,,0,,,,,"From DIS spec:

{adf:display=block}
{""type"":""table"",""attrs"":{""isNumberColumnEnabled"":false,""layout"":""center"",""localId"":""dbbf3211-6dca-441a-8867-757db4b538bf""},""content"":[{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":6},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Lump sum death grant ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Name""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Description""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Further comments""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""db_Contsadjlegowedbymemb""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Taken from Remedy contributions process module""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""db_Contsadjrefowedbymemb""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Taken from Remedy contributions process module""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""db_Contsadjlegduetomemb""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Taken from Remedy contributions process module""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""db_Contsadjrefduetomemb""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Taken from Remedy contributions process module""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""CARE_DG_Pay""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Death grant pay""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Runtime entry""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""CARE_DG ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""CARE_DG_Pay *3""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""CARE_PostGAD_DG""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""CARE_DG - (db_Contsadjlegowedbymemb + db_Contsadjrefowedbymemb) + (db_Contsadjlegduetomemb + db_Contsadjrefduetomemb)""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]}]}
{adf}

Work in Public Sector Death:

New {{ILSDBStrategy}} that incorporates the GAD logic

Update to {{LSDBFactory}} to incorporate new inputs for GAD",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,PHX5-382,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1d528a4d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000jv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13855,PHX5-222,Police - Death in Service,To Do,02/Dec/25 6:50 AM
Transfer client level factors to TD3 data.,PHX5-703,17663,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,28/Nov/25 12:24 PM,12/Dec/25 10:00 AM,,02/Dec/25 1:07 PM,Client 172 Fire A to D Version 2,Client 172 Fire A to R Version 3,Client 176 Police A to D Version 10,Client 176 Police A to R Version 4,,,,,,,,,0,,,,,,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7c8d1c25,,,,,,,,,,,,,,,,,,,,Confirm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzhy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 23,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_6237635_*|*_10252_*:*_1_*:*_65401836_*|*_10354_*:*_1_*:*_85609_*|*_10056_*:*_1_*:*_268517973,,02/Dec/25 10:55 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Decimal Factors and Decimal Reference Values transferred to TD3 clients 168 and 169.,,,,,,,,,,,,,,,,,,,,,,,,15555,PHX5-490,Calculate Overheads,Done,02/Dec/25 1:07 PM
Update all code areas where ranks are set for TD3 move.,PHX5-702,17595,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,28/Nov/25 8:59 AM,02/Jan/26 12:55 PM,,10/Dec/25 1:06 PM,Client 172 Fire A to D Version 3,Client 172 Fire A to R Version 4,Client 176 Police A to D Version 28,Client 176 Police A to R Version 5,,,,,,,,,0,,,,,"TD3 data - clients 168 and 169 have had the member rank codes updated. 
These are now prefixed with a P for Police Ranks and F for Fire Ranks. All code areas where the ranks are set need to be updated for the move to the new clients. Decode spreadsheet from Neil here: [Phase 5 - Employment Type Decodes and Analysis.xlsx|https://xpsplc-my.sharepoint.com/:x:/p/neil_murrey/IQC30uDkhpa0TKVySkcjD24oAcrYyeTNKMdNgWMRnVqH3GM?e=Gom8Fx]",,Andrew Wilson,Annabelle Stephenson,Steven Wright,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@833e55a,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000j,,,"Rank labels amended to match TD3 data.  Ranks for all members of Police schemes are now pre-fixed with a ‘P', while the Fire scheme ranks are pre-fixed with an 'F’.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 23,PHX5 Sprint 24,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-01 16:17:17.775,10281_*:*_1_*:*_173679129_*|*_10251_*:*_3_*:*_497970845_*|*_10250_*:*_4_*:*_10608806_*|*_10252_*:*_2_*:*_5798_*|*_10354_*:*_2_*:*_285331805_*|*_10056_*:*_1_*:*_31693,,"01/Dec/25 4:17 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;* One line changed in *Public Sector Functions*, approx line 31.  C1, S1 and 01 amended to PC1, PS1 and P01, respectively
* Two areas of *PublicSectorMemberInfo*, {{GetProspectiveDate}} and {{NRA}} functions.  Two lines of code in NRA updated, and 3x HashSets in GetProspectiveDate updated
* One line changed in *Public Sector Calculation*, approx line 3329 in {{PPS1987RetirementValidationStrategy}} 

None of these have been published yet as I don’t want to cause errors before we’ve moved to the new clients.

You will note more changes affecting police than fire, which is due to legitimate spec differences.  ","02/Dec/25 10:15 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] As discussed, lets reverse this out and set to blocked by export",02/Dec/25 11:08 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Just commenting to confirm that these changes have been reversed for now.  Ticket moved to blocked,04/Dec/25 11:22 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] changes added back in ready for export to TD4.5,"09/Dec/25 11:47 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] The logic:

{{Rank() == ""PC1"" || Rank() == ""PS1"" || Rank() == ""P01""}}

is in three places now. Can we turn this into a function on public sector member info, so that the logic is in one place?

(Is this the IsConstable/Sergeant logic that Matt hard coded into original mccloud code).

Hopefully this means that all refere3nce to the actual rank codes would reside in Public sector member info. Which would be far cleaner for future maintenance.","09/Dec/25 1:46 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452]  I’ve added the following to *PublicSectorMemberInfo*:

{noformat}  public bool IsHigherRank()
  {
      if (Rank() == ""PC1"" || Rank() == ""PS1"" || Rank() == ""P01"")
      {
          return true;
      }
      else { return false;}
  }{noformat}

which yes is basically the same as what Matt had in mccloud.

I’ve updated the two instances in *Public Sector Functions* and *Public Sector Calculation* to call this function.  So the only place any specific ranks are mentioned in code now is in PublicSectorMemberInfo",,,,,,,,,,,,,,,,,,,15555,PHX5-490,Calculate Overheads,Done,10/Dec/25 1:06 PM
Update Pension Options to store cash per element,PHX5-701,17489,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,27/Nov/25 12:48 PM,02/Jan/26 12:55 PM,,09/Dec/25 11:38 AM,Client 172 Fire A to R Version 4,Client 176 Police A to R Version 5,,,,,,,,,,,0,,,,,"So that cash per element can still be seen after combining pension options, we need to ensure that we save cash per element. The devs are making an update to add a new List<ElementValue> to the pension option object to store cash. We need to ensure that every pension option saves this amount, and that the combine pension option deal with taking both cash amounts into a single list.",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6809ed15,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzhzv,,,CashValue elements added to all PensionOptions,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 24,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-03 16:53:54.57,10251_*:*_2_*:*_138461396_*|*_10250_*:*_2_*:*_18276721_*|*_10252_*:*_1_*:*_5200507_*|*_10354_*:*_1_*:*_14923284_*|*_10056_*:*_1_*:*_509852605,,"03/Dec/25 4:53 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+Coding changes - all within+ +*Public Sector Calculation*+ +module:+

* I added the following to {{KeyPensionConstants}}:
** {noformat}	    public const string DBCash = ""DBCash"";
	    public const string CARECash = ""CARECash"";{noformat}
* I added a variation of the following to every PensionOption strategy we have:

{noformat}CashValues = PublicSectorFunctions.CreateSingleElementValue(KeyPensionConstants.DBCash, dbCash),{noformat}

except for in {{TargetCombineReformPensionOptionStrategy}} where I added:

{noformat}CashValues = pensionOptionsToCombine.SelectMany(x => x.CashValues).ToList(),{noformat}



+Testing:+

I added additional expected results to a handful of the existing pension option tests we have, eg. PCLSPensionOptionStrategy1987Test_1

The one that really needs testing is the CombineReform strategy, so I have added a test to *PPS A>R* that will pass when the dependencies are next updated.  The test (Reform combined _Police A>R Test 1 PPS) is a replica of PPS Test 1, but with reform mccloud option selected and db target cash = 10k, so that we get some useful combined pension option values in the results","05/Dec/25 7:23 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;When these are picked up by the process, the devs will need to match each cash figure to the corresponding pension figure. Does it make more sense to use the FinalPensionKey so they can be tied together and go on the right element. We know they are cash, because they are being saved to cash values.","05/Dec/25 11:33 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] good shout. all done, removed the two {{KeyPensionConstants}} I’d added, and updated all of the Pension Options to look for {{FinalPensionKey}} instead",,,,,,,,,,,,,,,,,,,,,,16739,PHX5-655,Target Lump Sum,Done,09/Dec/25 11:38 AM
Update Pension Options keys,PHX5-700,17486,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,27/Nov/25 11:21 AM,01/Dec/25 3:10 PM,,01/Dec/25 2:52 PM,Client 162 Police A to R Version 2,Client 164 Fire A to R Version 2,,,,,,,,,,,0,,,,,"All pension options are currently setting final keys to {{KeyPensionConstants.TotalPension}}

When we combine reform options, we need to make a distinction between DB and CARE, and so we need all CARE pension options to use a CARE key instead.

Code change should be fairly simple, but we will probably need to update any test cases that reference values by the key.",,Andrew Wilson,Russell Armstrong,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28/Nov/25 7:16 AM;5796a187-7241-414b-bea0-2d22260a9bed;image-20251128-071341.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/12390,28/Nov/25 7:16 AM;5796a187-7241-414b-bea0-2d22260a9bed;image-20251128-071519.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/12389,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5efa7e76,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzhx,,,"Final pension option keys updated to reflect:

McCloud member:

* Care pension in the DB scheme - MCCR and MCPI (for increases)
* DB pension in the DB scheme - MCPN and MLPI (for increases)
* Care pension in CARE scheme - CARE and PIP (for increases)

These codes are used regardless of whether member chooses legacy or reform option

Non McCloud member:

* DB pension in the DB scheme - PEN and PIP (for increases)
* Care benefit in the CARE scheme - CARE and PIP (for increases) [Note that in this case the CARE pension may have started to accrue before 2022]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 23,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-28 11:13:43.934,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_288503337_*|*_10252_*:*_1_*:*_1930_*|*_10354_*:*_1_*:*_2479_*|*_10056_*:*_1_*:*_69701935,,"28/Nov/25 7:16 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;More complex than at first seemed. I have updated the keys to:

!image-20251128-071341.png|width=437,alt=""image-20251128-071341.png""!

{{BasePensionOptionStrategy}} now takes the final key as an input, so now every pension option has to set this on creation

!image-20251128-071519.png|width=867,alt=""image-20251128-071519.png""!

{{PensionOptionCalculatorFactory}} has been updated for every creation of a pension option to pass in the relevant key.","28/Nov/25 11:13 AM;640f34fc1273131f2adfede9;One key changed. Under CARE2015, {{else if (mcCloudOption == McCloudOption.Reform)}}, {{if (chosenMcCloudOption == mcCloudOption)}} this used ReformCAREPension, changed to POST2022CAREPension","01/Dec/25 6:50 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Updated as per Iain’s comment:

McCloud member:

* Care pension in the DB scheme - MCCR and MCPI (for increases)
* DB pension in the DB scheme - MCPN and MLPI (for increases)
* Care pension in CARE scheme - CARE and PIP (for increases)

These codes are used regardless of whether member chooses legacy or reform option

Non McCloud member:

* DB pension in the DB scheme - PEN and PIP (for increases)
* Care benefit in the CARE scheme - CARE and PIP (for increases) [Note that in this case the CARE pension may have started to accrue before 2022]



I have updated the constants to:

{noformat}public const string NonMcCloudDBPension = ""PEN"";
public const string Post22CAREPension = ""CARE"";
public const string McCloudDBPension = ""MCPN"";
public const string McCloudCAREPension = ""MCCR"";{noformat}

to better reflect this split. 

{{PensionOptionCalculatorFactory}} has been updated so that each option pre selects the correct one of these. (This was a simple global replace on existing names, so if it was ok before, it should be ok now)

[~accountid:640f34fc1273131f2adfede9] Are you able to quickly look over this again to ensure this all matches up. Many thanks!",01/Dec/25 11:33 AM;640f34fc1273131f2adfede9;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Reviewed and happy with the changes made,,,,,,,,,,,,,,,,,,,,,16739,PHX5-655,Target Lump Sum,Done,01/Dec/25 2:52 PM
Update Pension option mapping,PHX5-699,17483,Bug,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,27/Nov/25 10:21 AM,01/Dec/25 3:10 PM,,28/Nov/25 10:50 AM,Client 162 Police A to R Version 2,Client 164 Fire A to R Version 2,,,,,,,,,,,0,,,,,"!image-20251127-102209.png|width=667,alt=""image-20251127-102209.png""!

The answer to this is yes - it should be. We need to update this, and then update all test cases that are expecting the wrong option.",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,27/Nov/25 10:22 AM;5796a187-7241-414b-bea0-2d22260a9bed;image-20251127-102209.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/12219,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4e0cb424,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i,,,,A>R pension options updated to correctly identify {{ReformPost22CAREZeroLumpSum}} option.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 23,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-27 11:57:53.896,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_118105_*|*_10252_*:*_1_*:*_5065596_*|*_10354_*:*_1_*:*_3260_*|*_10056_*:*_1_*:*_702834,,"27/Nov/25 11:57 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I have updated A>R code in both police and fire clients, 162 and 164.  Police test cases updated, fire too but we haven’t set up all the expected outcome values yet so not many updates to make.",,,,,,,,,,,,,,,,,,,,,,,,15555,PHX5-490,Calculate Overheads,Done,28/Nov/25 10:50 AM
Update test cases to TD3,PHX5-698,17405,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,26/Nov/25 2:22 PM,09/Dec/25 10:37 AM,,09/Dec/25 10:37 AM,,,,,,,,,,,,,0,,,,,"Code and test cases to be updated to client 168 and 169 data.

Note: Per “Releases” tab, the following versions of code are awaiting publish. These need to be finished and published before code is exported to Clients 168 and 169.

# Client 162 Police A>R Version 2
# Client 162 Police A>D Version 7
# Client 164: Fire A>R Version 2
# Client 164: Fire A>D Version 2

Please check these versions have all been published before copying code and associated dependency .",,Andrew Wilson,Chris Marshall,Naomi Robinson,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2a5e7230,,,,,,,,,,,,,,,,,,,,Confirm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pt7:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 23,PHX5 Sprint 24,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-12-01 15:28:37.444,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_357157736_*|*_10252_*:*_1_*:*_679622902_*|*_10354_*:*_1_*:*_3274_*|*_10056_*:*_1_*:*_31733,,"01/Dec/25 3:28 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Update: Client 164 and 162 latest versions now published, so anticipated that 168.169 here will be the next release.",08/Dec/25 2:18 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Police & Fire A>R & A>D now updated but to clients 172 & 176 as TD4.5. Calcs published and release for UAT testing,,,,,,,,,,,,,,,,,,,,,,,15555,PHX5-490,Calculate Overheads,Done,09/Dec/25 10:37 AM
Police and Fire A>R - ERF period calculation,PHX5-697,17367,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,26/Nov/25 11:17 AM,01/Dec/25 3:10 PM,,28/Nov/25 10:53 AM,Client 162 Police A to R Version 2,Client 164 Fire A to R Version 2,,,,,,,,,,,0,,,,,Altair calculates years and months early from the day before the members 60th birthday and the day after the Date of Retirement.  In the case of member 392074 it is reducing the early retirement period by 1 month as it is calculating the complete months from 01 October to 27 February.  Admin have confirmed that this is how they expect the calculation to be working. ,,Russell Armstrong,Tracy Collins,,,,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-241,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@58c4291c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzd,,,Amended ERF logic so calculates period between date of retirement plus one day and NRD when determining the ERF to return,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 23,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-27 11:45:29.607,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_3544_*|*_10252_*:*_1_*:*_77265694_*|*_10354_*:*_1_*:*_3478_*|*_10056_*:*_1_*:*_10890664,,"27/Nov/25 11:45 AM;640f34fc1273131f2adfede9;In {{PublicSectorPensionElementStandardStrategy}} when getting “factor” added PlusDays(1) to DateOfRetirement. NRD/60th birthday used for erfApplicationDate already had PlusDays(-1) applied to it.

Added ERF Test 13 to cover the scenario from the test member and this is now using the correct expected period. Added ERF Test 14 with the same inputs as test 13 except moved the date of retirement 1 day backwards and it returns the factor for one more month early compared to test 13 so working as expected. Amended expected values for ERF Test 11 and 12 - these were in the same scenario as ERF test 13 so now were using the ERF for one less month early",,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,28/Nov/25 10:53 AM
DB Target Lump Sum - is it impacted by CARE?,PHX5-696,17334,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,26/Nov/25 7:12 AM,27/Nov/25 11:24 AM,,27/Nov/25 11:24 AM,,,,,,,,,,,,,0,,,,,"{{PCLSDBPensionOptionStrategy}} does not reference CARE PCLS any more

{{SchemeMaximumDBPensionOptionStrategy}} does reference CARE PCLS - which implies the scheme max is reliant on CARE

{{PCLSDBTargetPensionOptionStrategy}} the target option for DB makes no reference to scheme maximum. This is what is currently plugged in to be used

{{DBTargetPensionOptionStrategy}} has been coded but is not used anywhere. This adds in a max of scheme onto the target - but is then reliant on CARE pcls



The agreed process to use target for settlement processes relies on db and care being independent. We need to be absolutely sure this will still work, as if it doesn’t it has huge implications for the project.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@c77da22,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000r,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_101534425,,27/Nov/25 11:24 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Annabelle confirmed the target code that reference CARE was from before the change to remove CARE,,,,,,,,,,,,,,,,,,,,,,,,16739,PHX5-655,Target Lump Sum,Done,27/Nov/25 11:24 AM
"Police A to D Error message ""Object reference not set to an instance of an object""",PHX5-695,17297,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,25/Nov/25 3:24 PM,08/Jan/26 12:56 PM,,07/Jan/26 6:39 AM,Client 172 Fire A to D Version 4,Client 176 Police A to D Version 30,,,,,,,,,,,0,,,,,"Produces the error below for a member who has a Care TVIN (439377)

!image-20251125-134506.png|width=250,alt=""image-20251125-134506.png""!",,Annabelle Stephenson,Chris Marshall,Tracy Collins,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-255,,,,,,,,,25/Nov/25 3:25 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20251125-134506.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/12118,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@60ea3cd,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y0000009,,,Fixed an issue with member 439377 running through an Active to Deferred calc and the calculation was erroring. Bug fixed which should no longer cause the calc to error.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 27,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-26 11:19:47.098,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_3112883604_*|*_10252_*:*_1_*:*_451756120_*|*_10354_*:*_1_*:*_1842_*|*_10056_*:*_1_*:*_71823110,,"26/Nov/25 11:19 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Member is not McCloud eligible I think the issue is with one of the below being null

{{publicSectorCalculator.TransferInCalculators = PublicSectorFactories.TransferInFactory(memberInfo, mcCloudOption, careStartDate, memberData, ServicePeriods, illHealth, calculationDate);}}","01/Dec/25 5:08 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;This is really hard to do without being able to export and debug!  As none of our existing tests fit the same criteria (non-mccloud with TVin elements) so I’m not currently able to replicate the error in VScode.

I don’t think the issue is where Chris has suggested below though.  I think more likely to be in one of the {{GetService()}} calcs in {{ITransferInServiceCalculator}} and possibly linked to missing data.



Note to self: I may be able to amend test json in vscode to be able to debug this against PPS A>R test 14, need to add arbitrary tvin elements so i can see what happens","06/Jan/26 5:27 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;As per comment below, it was indeed incredibly easy to resolve with debugging!  Error was because the TV element on record is not eligible towards TV service, so in *Public Sector Calculation* {{CalculateTransferInService()}} where we have the line

{noformat}if (service.PartTimeAdjustedPeriod != null && service.FinalDecimalAmount > 0){noformat}

we get an error if no service was created.  I’ve amended that one line (approx 1194) as follows:

{noformat}if (service?.PartTimeAdjustedPeriod != null && service?.FinalDecimalAmount > 0){noformat}

The associated test in *client 176 A>D* “UAT Ticket 695 Test 2” is now passing.",,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,07/Jan/26 6:39 AM
Police and Fire A to D Retiring allowance should not have an attaching spouses amount,PHX5-694,17296,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,25/Nov/25 3:22 PM,01/Dec/25 3:15 PM,,28/Nov/25 10:54 AM,Client 162 Police A to D Version 7,Client 164 Fire A to D Version 2,,,,,,,,,,,0,,,,,,,Russell Armstrong,Tracy Collins,,,,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-257,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@55843d4f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzf,,,Set spouse Value to 0 for the Retiring Allowance,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 23,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-27 13:28:04.065,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_6825964_*|*_10252_*:*_1_*:*_83058671_*|*_10354_*:*_1_*:*_4058_*|*_10056_*:*_1_*:*_82695803,,27/Nov/25 1:28 PM;640f34fc1273131f2adfede9;I think this is quite simple - {{DBCashDeferredElementStrategy}} has a calculation for a spouse value but I think this should just be set to 0 - need to debug to check though,"27/Nov/25 3:07 PM;640f34fc1273131f2adfede9;In {{DBCashDeferredElementStrategy}} changed SpouseValue from 

{code:json}((accruedElementValues.GetValue(KeyAccruedPensionConstants.AccruedDBCash)
                                    - accruedElementValues.GetValue(KeyAccruedPensionConstants.PSOCashDebit)) * 0.5m).Round(2){code}

to 0.00m. Checked AtoD spec and this only refers to pensions having an a spouse value, not lump sums.

Created {{TestDBCashDeferredElementStrategy}} and used this to test the change and make sure the ActiveToDeferredElementValue created was returning a value of 0",,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,28/Nov/25 10:54 AM
Police A to D Pension Outputs,PHX5-693,17295,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Russell Armstrong,640f34fc1273131f2adfede9,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,25/Nov/25 3:20 PM,31/Dec/25 3:43 PM,,15/Dec/25 10:24 AM,Client 172 Fire A to D Version 3,Client 176 Police A to D Version 28,,,,,,,,,,,0,,,,,The output for an NPPS member only shows Legacy Care and Reform DB.  Legacy DB and Reform Care are missing from the outputs (Member 415443 is an example),,Russell Armstrong,Tracy Collins,,,,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-256,,,,,,PHX5-754,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@423b34a2,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:uzr,,,Members now include Employer History data in the calculation. Previously this was unknown and was causing values not to be calculated,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 25,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-28 14:07:34.499,10281_*:*_1_*:*_861444443_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_169766_*|*_10252_*:*_1_*:*_113556_*|*_10354_*:*_2_*:*_9340383_*|*_10056_*:*_1_*:*_581976530,,28/Nov/25 2:07 PM;640f34fc1273131f2adfede9;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] do you have another example for this? For the example given the process has been completed and the member is now deferred. I think this is causing issues when I try to recreate the issue in Calculate and no elements at all are being output,28/Nov/25 2:58 PM;640f34fc1273131f2adfede9;Ran in calculate after loading data from client 169 into client 162 - gives 6 different elements instead of the 3 that were returned when run in Aurora,01/Dec/25 8:49 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;[~accountid:640f34fc1273131f2adfede9] Try member 102253. I can’t agree the DB figure on this one but it is only producing one CARE figure which matches the Legacy calc.,02/Dec/25 11:35 AM;640f34fc1273131f2adfede9;On latest version of code getting an error “No employment rank found for AuroraId: 10225301. Add rank to data and rerun calculation” - EmployerHistory is not being loaded to the calculation. Dev fix required,12/Dec/25 10:54 AM;640f34fc1273131f2adfede9;Dev fix applied. Relaoded Member in A>D and now processes without error  and returns full legacy and reform DB and CARE results. No calculation code changes required,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,15/Dec/25 10:24 AM
Create target option for use in settlement processes,PHX5-692,17258,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,25/Nov/25 2:02 PM,01/Dec/25 3:10 PM,,01/Dec/25 2:52 PM,Client 162 Police A to R Version 2,Client 164 Fire A to R Version 2,,,,,,,,,,,0,,,,,"The aim is to use the original Target option to store the final settlement target selection.

We need this to be created all the time - however it will only be used for final settlements.

Where we have reform cases, it will need to combine both the DB and CARE into a single option.



To do this, I have created a new pension option that has no logic, but which can be given two other pension options that it will calculate and sum together. This is then used to combine whichever two options make up the target.

The complication is mainly around ill health cases, which have to take PCLS. For these, I have not used target option, but have defaulted to use the PCLS instead.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@485689dc,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xz9,,,"The code will now always produce an option for Target Lump sum. This will be based on the McCloud option picked on the front end. This target option will ensure that pensions are grouped when required (i.e. DB and CARE for a reform option), but only after ensuring that the target lump sum has been correctly split across DB and CARE.

Going forward, when running a settlement via the front end, always pick {{TargetLumpSumCommuted}} for both members.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 23,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_454369374_*|*_10252_*:*_1_*:*_5077_*|*_10354_*:*_1_*:*_3973_*|*_10056_*:*_1_*:*_66991494,,"28/Nov/25 7:06 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;What happens in non mccloud case, where member has db and care pension? Do we need to ensure the combination deals with these also?","28/Nov/25 1:39 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Currently not adding values together, but unable to debug to work out what is wrong.",,,,,,,,,,,,,,,,,,,,,,,16739,PHX5-655,Target Lump Sum,Done,01/Dec/25 2:52 PM
Update Care Age Addition Calc,PHX5-691,17180,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,24/Nov/25 3:20 PM,02/Jan/26 12:55 PM,,09/Dec/25 1:09 PM,Client 172 Fire A to D Version 3,Client 172 Fire A to R Version 4,Client 176 Police A to D Version 28,Client 176 Police A to R Version 5,,,,,,,,,0,,,,,"Admin advised that Altair was not calculating Age Addition correctly so Altair results for police A>R tests 8,9 and 13 should not be used as expected results. Admin have provided manual calculation spreadsheets for these calcs now. Reviewing the spreadsheets and GAD guidance on the calcs shows a procedural difference in the way have this coded in the care module. Needs updating. 

[Test 8 - Age addition - 2015 Police Pension Scheme.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQCEUuBAC8Z-Sob9YHtnto-iAasr7wMVQa5ZdDnflPaKeWw?e=JfNzKa]

[Test 9 - Age addition - 2015 Police Pension Scheme.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQD5Yc34gaxpS7orOIXxxmM0AXSlPtmRBVULpgEyqYZ6XBg?e=tgHFNt]

[Test 13 - Age addition- 2015 Police Pension Scheme.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQC-13Hse4QRQJ5WItAthbO1AY9klMAHR8gQ8IitCw9fHzo?e=753duD]

[^20150529_Age_addition_late_payment_supplement_guidance_29_5_2015 (1).pdf]

",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25/Nov/25 10:41 AM;bfea69ca-e7d9-488d-b01b-103621fa1516;20150529_Age_addition_late_payment_supplement_guidance_29_5_2015 (1).pdf;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11984,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1f1921aa,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzhzr,,,Care Age Addition Credit is now calculated in the following care year after achieving NPA instead of being calculated in year of NPA. (Unless NPA is achieved in the retirement/leaving care year). Both normal age addition and assumed age credit are calculated and stored in the retirement / leaving care year data. Any known inflation rate is also applied to any age addition credit being calculated in the specific care year and added to the total pension. Added more information logs that will output in Aurora to aid with checking calculations.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 24,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_432422284_*|*_10252_*:*_1_*:*_84147633_*|*_10354_*:*_1_*:*_1126852_*|*_10056_*:*_1_*:*_761346828,,"09/Dec/25 9:37 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;The two main changes needed from this are:

1. The year in which the Age Addition is calculated then stored on. Previously the credit was being calculated in the same care year the member was attaining NPA on, and stored on that care history line. It should be calculated and stored on the following care year history line after achieving NPA. and

2. The Inflation rate in the year the credit is being calculated on should also be applied to the credit when calculating the rolling total. 

Code changes:

# In the Care module, kept the main CalculateCARERunningTotals function logic as it was, but updated it to calculate the age addition in the following year after attaining NPA and this rolls on until calculation date. 

2. Created two new helper functions to deal with calculating the credit for a normal year. i.e. not the assumed credit in the retirement year. And the other function to calculate the assumed age addition as per the GAD guidance document. 

The existing age addition tests in the module still outputted the same total age addition credit which was as expected but the year they were stored on was now outputting as expected. Due to inflation now also being applied to the credits each year, it increased the total care pension in the test cases by a small amount. This was also expected.",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,09/Dec/25 1:09 PM
Police A>R - Ill Health lower tier enhanced service,PHX5-690,17169,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,24/Nov/25 11:52 AM,12/Jan/26 2:16 PM,,08/Jan/26 2:30 PM,Client 176 Police A to R Version 9,,,,,,,,,,,,0,,,,,Member 387226 - Calc is using the same service calc for service to DOR as service to NRD so is taking zero as the minimum enhanced service option.  Altair calc gives 7 year enhancement,,Annabelle Stephenson,Tracy Collins,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-251,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@cf06b91,,,,,,,,,,,,,,,,,,,,Confirm,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:x,,,"NRD for ill-health PPS1987 members amended to no longer consider length of service (ie. NRD is age 60, or age 55 if higher rank).  This has a knock-on effect on the ill-health enhancement due.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 28,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-12-02 15:41:50.799,10281_*:*_1_*:*_2329_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_2_*:*_62293102_*|*_10252_*:*_2_*:*_552496658_*|*_10354_*:*_3_*:*_1833363418_*|*_10056_*:*_1_*:*_162841258_*|*_10355_*:*_1_*:*_1273772571,,02/Dec/25 3:41 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[https://xps-jira.atlassian.net/browse/PHX5A-251?focusedCommentId=15994|https://xps-jira.atlassian.net/browse/PHX5A-251?focusedCommentId=15994|smart-link]  i’ve added a comment for Tracy on this ticket.  I believe our calc is in line with the specs and that this member is not due an IH enhancement.  We need admin to confirm whether they agree.,04/Dec/25 10:29 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Issue raised with admin for clarification,"17/Dec/25 9:29 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Response from admin.  

“Yes you are correct that the ill health enhancement for an 87 member should not apply to a member who is over the age of 55 at the DOR. This is for the rank of constable or sergeant, and for any other rank should be age 60.

For point 2 Altair is calculating the service up to 31.3.15 or 31.3.22, but when it looks at the enhancement it will enhance up to 7 years in this case (as they have over 13 years of service) as long as that 7 years does not take the member over what he could have achieved at his NRD. At his NRD he would have had over 30 years of service, therefore the 34/007 it calculates is allowable, and he is under 55 at the point of retirement.

Thanks, April”

The member in question is a Constable so the “NRD” of 55 applies in this case rather than the revised retirement date applicable through service accrued.","07/Jan/26 7:28 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Essentially admin are saying that for ill-health PPS1987 members, we do not consider their length of service when determining NRD.  Instead it is age 60, or age 55 if higher ranks.  As this affects only one accrual strategy for this specific set of members, I did not want to make the change within PublicSectorMemberInfo.

{noformat}int illHealthNRA = publicSectorMemberInfo.IsHigherRank() ? 55 : 60;
LocalDate illHealthNRD = publicSectorMemberInfo.DateReachesAge(illHealthNRA);{noformat}

Added the above to {{PublicSector1987IllHealthStrategy}} GetAccruedPension(), in *Public Sector Calculation*. {{illHealthNRD}} is then immediately passed into the prospective service tranche and calculator (replacing publicSectorMemberInfo.NRD there previously).

“UAT ticket 690” in client 176 A>R is now passing, testing on the interim value showing ill-health enhancement.  (I can add another test at PSC level but I’d need a testing function which, with all the service info needed, is probably more complicated than it’s worth?)",,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,08/Jan/26 2:30 PM
Police A>R error - Member under age 55,PHX5-689,17166,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Russell Armstrong,640f34fc1273131f2adfede9,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,24/Nov/25 11:24 AM,02/Jan/26 12:55 PM,,09/Dec/25 11:36 AM,Client 172 Fire A to R Version 4,Client 176 Police A to R Version 5,,,,,,,,,,,0,,,,,Error message received which implies that factors are missing to run this calc.  The member is only 51 but the calc runs in Altair on the DB only.,,Russell Armstrong,Tracy Collins,,,,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-246,,,,,,,,,04/Dec/25 11:06 AM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;RE_ Police A_R for members under age 55.msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/12798,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@dd930e2,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:i,,,Calculation will no longer error where a member who can take DB benefits under the minimum age for CARE retirement. All options for DB and CARE will still output but pension amounts for CARE will be 0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 24,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-24 15:50:11.884,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_825994_*|*_10252_*:*_1_*:*_8326502_*|*_10354_*:*_2_*:*_346455048_*|*_10056_*:*_1_*:*_15922842_*|*_10355_*:*_1_*:*_846979202,,"24/Nov/25 3:50 PM;640f34fc1273131f2adfede9;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] what’s expected here? If it’s to only quote for DB benefits and not CARE I don’t see how this would work with the data set up or the processes. While we could possibly do something in the calculation code to only calculate DB benefits, if they actually retire then I can’t see how the retirement process will know what to do with the remaining CARE benefits on the Salary Linked Record or the CARE record - I can only see it would set them to pensioner for both records with no way of showing they still have benefits that aren’t in payment",24/Nov/25 3:56 PM;640f34fc1273131f2adfede9;Is this split retirement? I’d understood this wasn’t in scope for day one,"04/Dec/25 11:06 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;[~accountid:640f34fc1273131f2adfede9] The requirement for day 1 is that calcs run for the DB benefits for ages under 55.  In an ideal world for quotations we would need the calculation to output the DB benefit as a full set of retirement figures (both Legacy and Reform) and the CARE to output a deferred benefit at DOR (calculated to DOR but with no ERF applied) for both the Legacy and Reform options.  The member would then be quoted both.  We understand that settlement may need to be a day 2 requirement as there is currently no capacity to get the dev in place to support updating the DB and the CARE records to update to different statuses. We would also need to consider how these members have been updated in Altair in order to ensure that the starting point on D>R calcs for tis type of member is consistent pre and post transition to Aurora.

I think [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] has some reservations over how easy it would be to output the deferred CARE benefits as part of a retirement calculation so some conversation may need to be had over what we are able to deliver by day 1.

I have attached a copy of my email correspondence with admin.  [^RE_ Police A_R for members under age 55.msg] ","08/Dec/25 1:51 PM;640f34fc1273131f2adfede9;Calculation gives 2 errors “No early retirement factor present for years = 8” and “Member has not reached minimum retirement age. Retirement calculation cannot be run.”

For “Member has not reached minimum retirement age. Retirement calculation cannot be run.” changed the error in {{CARE2015RetirementValidationStrategy}} to be a warning

For “No early retirement factor present for years = 8” this is from the RetirementFactorBuilder module. I didn’t want to change behaviour here as that is a module used outside of Public Sector.

Added {{GetMaxYearsAndMonths}} into the Factors module. In {{PublicSectorPensionElementStandardStrategy}} used {{GetMaxYearsAndMonths}}  to check if there is an early retirement factor available to get and if so get it and if not return 0 and a warning.

{noformat} (int maximumYearsInTable, int maximumMonthsInTable)  = Factors.GetMaxYearsAndMonths(SchemeReferenceData.DecimalLookups(ERFtable));

		NodaTime.Period periodEarly = Period.Between(DateOfRetirement.PlusDays(1), erfApplicationDate);

		decimal factor = 0m;

		if (periodEarly.Years < maximumYearsInTable || (periodEarly.Years == maximumYearsInTable && periodEarly.Months <= maximumMonthsInTable))
		{
		    factor = new RetirementFactorBuilder(elementValue.Key, MemberInfo.DateOfBirth, DateOfRetirement.PlusDays(1))
	                        .WithEarlyFactorTableOnly(ERFtable)
	                        .WithEarlyApplicationDateOnly(erfApplicationDate)
	                        .WithSchemeData(SchemeReferenceData)
	                        .WithDecimalPlaces(DecimalPlaces)
	                        .GetFactor();
		}
		else
        {
            Log.Warning($""No early retirement factor for {periodEarly.Years} years and {periodEarly.Months} months early. Defaulted to 0"");
            // left as 0 instead of setting to 1 so will return values of 0 for the pension where not eligible to retire
        }{noformat}

Defaulted the factor to 0 if not available so will then give values of 0 for pensions instead of giving the unreduced pension which could be more confusing.

Added ERF Test 15 to Public Sector Calculation to check that 0 was being returned when no ERF available",08/Dec/25 3:53 PM;640f34fc1273131f2adfede9;Changed so ERF defaults to 1 not 0 as requested by admin,,,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,09/Dec/25 11:36 AM
Limit all cash figures to 2dp,PHX5-688,17160,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,24/Nov/25 9:41 AM,01/Dec/25 3:10 PM,,25/Nov/25 1:53 PM,Client 162 Police A to R Version 2,Client 164 Fire A to R Version 2,,,,,,,,,,,0,,,,,Legacy DB Max lump sum is currently outputting to 3dp.  Please amend to 2dp,,Andrew Wilson,Chris Marshall,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25/Nov/25 8:35 AM;5e266667-8b87-4eb6-9386-71980feac557;image-20251124-153156.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11949,25/Nov/25 8:35 AM;5e266667-8b87-4eb6-9386-71980feac557;image-20251124-153219.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11948,25/Nov/25 10:02 AM;5e266667-8b87-4eb6-9386-71980feac557;image-20251125-100229.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11982,25/Nov/25 10:02 AM;5e266667-8b87-4eb6-9386-71980feac557;image-20251125-100243.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11983,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@422464dd,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzw,,,Updated max lump sum to show as 2DP,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 22,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-25 06:53:26.546,10251_*:*_3_*:*_57664405_*|*_10250_*:*_3_*:*_24878445_*|*_10252_*:*_1_*:*_4429_*|*_10354_*:*_1_*:*_4567_*|*_10056_*:*_1_*:*_5131151,,"25/Nov/25 6:53 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] I’m sure this is a one liner, but can you still add a comment to say where the change was made?","25/Nov/25 8:35 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Updated Public Sector module on line 2834

!image-20251124-153156.png|width=635,alt=""image-20251124-153156.png""!

A>R test 1 result

!image-20251124-153219.png|width=635,alt=""image-20251124-153219.png""!",25/Nov/25 8:35 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Sorry I had put a comment on just not saved,"25/Nov/25 9:16 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Thanks [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] . Can you please check for other instance of this issue. lumpSumAfterTax appears more than once, and you have only updated on instance.

Also, be aware of the Rounding variable, which we should be using instead of 2.","25/Nov/25 10:02 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Further slight code updates

!image-20251125-100229.png|width=497,alt=""image-20251125-100229.png""!

!image-20251125-100243.png|width=635,alt=""image-20251125-100243.png""!",,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,25/Nov/25 1:53 PM
CARE benefit type logic to be reviewed (inc for inflation),PHX5-687,17034,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,19/Nov/25 4:53 PM,02/Jan/26 12:55 PM,,15/Dec/25 10:21 AM,Client 172 Fire A to D Version 3,Client 172 Fire A to R Version 4,Client 176 Police A to D Version 28,Client 176 Police A to R Version 6,,,,,,,,,0,,,,,"{{CalculateAccruedPensionValues}} in PublicSectorCalculation has been updated so that multiple care benefit types with the same “latest” effective from date are added together the give the final Element Value. If data is correct, this should only include any relevant “Main” type and then any TVINs to add on. e.g. Police A>D test 15.

In order to guard against bad data and also to ensure all care benefit types are treated correctly, we should review {{PublicSectorCARECalculationFactory}}(which produces careHistory) to make sure all care types and their required inflation are included/ excluded as necessary. There are 21 possible types but our code only applies inflation to some of them. 

Might be worth checking:

# If inflation is required from the last full year of care to DoR, is that set correctly for all types? 
# If future inflation is required is that set correctly for all types?
# Are there any types that should NOT be added in to the careHistory list passed to {{CalculateAccruedPensionValues}}? Currently all types in the care table are passed through.
# Is a data clear up exercise required or are all these types reasonable?

Types are:

!image-20251119-165750.png|width=329,alt=""image-20251119-165750.png""!",,April Woods,Naomi Robinson,Steven Wright,,,712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd,712020:ffa445ab-b813-4226-9ed2-507a454e9272,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-635,,,19/Nov/25 4:58 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251119-165750.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11698,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@220cca8,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i0i,,,"Silent care code update for code readability and testing, no release note required for this ticket.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 24,PHX5 Sprint 25,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-03 10:58:49.788,10251_*:*_2_*:*_12606381_*|*_10250_*:*_2_*:*_70919829_*|*_10252_*:*_1_*:*_2325_*|*_10354_*:*_2_*:*_94065149_*|*_10056_*:*_1_*:*_1114365692_*|*_10355_*:*_1_*:*_517330556,,"03/Dec/25 10:58 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Hi [~accountid:712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd] [~accountid:712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f] could you review the tab named SW final list in this spreadsheet please [CARE types and reval rates.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQDkuArRq00qTJVSkXmHZi2tAQaVyLvLbL_iftpsjcCXZ2U?e=6D0lXD] 

I have listed all the different Care Benefit Types that are being migrated to Aurora and Neil Murrey has advised there is no more rationalisation work being undertaken so in effect is a final list. I have added a reval table and additional percentage next to each type that we currently have programmed. There’s 5 types highlighted that weren’t in the original info tab. Can you provide confirmation of the reval table and additional percentage in the columns. Currently, they will default to using the CPI table and have 0 additional percentage applied. Could the reval and percentage change depending on whether it is a police or fire member that is using the type? Is there anything different about future unknown inflation application etc compared to the other types? Thanks, Steven.","08/Dec/25 5:33 PM;712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd;Hi [~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e] I’ve reviewed and annotated the 5 types highlighted. Please let me know if you need anything else. Thanks, April.","10/Dec/25 10:17 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;To improve readability in the code for the different care types and their additional % increases so that all are shown, created a new dictionary “InlationAdditions” under PublicSectorCARECalculationFactory that lists the types and their additional increases on top of CPI or CareFire increase table. Now planning to call the dictionary when setting the inflationaddition in PublicSectorCARECalculationFactory. This will replace the inflationaddition switch currently in the factory.  This removes the ambiguity of a default in the switch for all the previously unlisted care types in the data as they are now listed in the dictionary function.",10/Dec/25 3:28 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Implemented the dictionary and removed the old switch. ,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,15/Dec/25 10:21 AM
Fire 1992 scheme eligibility for PI,PHX5-686,17030,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,19/Nov/25 1:42 PM,02/Jan/26 12:54 PM,,16/Dec/25 2:00 PM,Client 172 Fire D to R Version 1,,,,,,,,,,,,0,,,,,"Similar to [https://xps-jira.atlassian.net/browse/PHX5-683|https://xps-jira.atlassian.net/browse/PHX5-683|smart-link] for Police - different scenarios where members are eligible for deferred revaluation or not as below from the spec

If retirement on ill health (unfit for all employment) - PI applies
If retirement on ill health (unfit for fire service only)  age < 55 - PI does not apply
If retirement on ill health (unfit for fire service only)  age >= 55 - PI applies
If retirement not on ill health (on age grounds) - PI applies",,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,PHX5-683,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@491fd4d4,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:uy,,,Set eligibility for 1992 scheme revaluation to either apply revaluation or not depending on the age and ill health criteria,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 25,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_5610304_*|*_10252_*:*_1_*:*_2560_*|*_10354_*:*_1_*:*_1053656618_*|*_10056_*:*_1_*:*_1197863883,,15/Dec/25 4:36 PM;640f34fc1273131f2adfede9;Set up in {{PublicSectorRevaluationFactories}} to use either {{NotEligibleRevaluationStrategy}} or {{EligibleRevaluationStrategy}}. Can be found in the Public Sector Revaluation module,,,,,,,,,,,,,,,,,,,,,,,,14442,PHX5-334,Fire - Deferred to Retirement,Done,16/Dec/25 2:00 PM
"Police A>R Error message ""An item with the same key has already been added""",PHX5-685,17029,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,19/Nov/25 1:28 PM,30/Dec/25 8:46 AM,,30/Dec/25 8:46 AM,,,,,,,,,,,,,0,,,,,"Two members are getting this error.  Both are Sussex/Surrey where 02 record is the DB (Active - Salary Link) and the 01 record is the Care (Active - Normal).

Resolution could be the same as A>D issue.",,Andrew Wilson,Naomi Robinson,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-205,,,,,,PHX5-675,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1747b8ec,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-19 14:07:29.053,10354_*:*_1_*:*_51133_*|*_10056_*:*_1_*:*_2244033_*|*_10356_*:*_1_*:*_0,,19/Nov/25 2:07 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Currently with CIT,"24/Nov/25 1:17 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Calls with Phil and Neil Murrey (Friday 21 and Monday 24) have determined the issue relates to the member ID and how the care, salary linked and main records are linked when data passed in to Aurora. 

Confirmed that we are not passed the information to be able to code an override or warning to highlight the issue and data needs to be corrected. Neil guesses two days work after current data rec work is completed for other parts of the project.

Only impacts surrey and sussex police. April and Tracy both aware of this, such that other A>Ds can be tested.",03/Dec/25 10:47 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272]  Can this one be closed now? Equivalent police A to R has been closed.,30/Dec/25 8:46 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;These members have been tested in UAT and are now working correctly.  We can close this issue,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,30/Dec/25 8:46 AM
Police A>R - Error message - Care record or care salary missing,PHX5-684,17027,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,19/Nov/25 11:11 AM,29/Jan/26 2:38 PM,,29/Jan/26 2:38 PM,,,,,,,,,,,,,0,,,,,"Error message received.  I’ve checked the records and the 01 Care record looks odd.  I suspect this is a data issue, but please can you check what the calc is not receiving to produce this error.",,Tracy Collins,,,,,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-240,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1da274ee,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 22,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10354_*:*_2_*:*_10085_*|*_10056_*:*_1_*:*_441236452_*|*_10355_*:*_1_*:*_846076230,,21/Nov/25 9:44 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;Admin have raised an additional member who also has a “Police Main” Care line.  Could it be this line that is causing the error?,"01/Dec/25 9:25 AM;712020:f0005e1d-2048-4283-b711-413bd055eb21;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] Response from admin

“The Police Main amounts held on the DB record is incorrect data and only the McCloud data should be held on the DB record. For some reason it appears this has been incorrectly added to the at the point the member interfund transferred from another police force. The correct amounts for the overlapping sections are:

DB record: 2021/2022 = £45,253.56

It is correct that the earnings lines on the DB record are £0.00 from 2022/2023 onwards (as the McCloud data is only from 01/04/2015-31/03/2022) and then from that point the member will only receive revaluation on this record.

From 2022/2023 the CARE benefits should be held on the CARE record.

2022/2023 = £49,280.21

For the purposes of the calculation the police main benefits held on the DB record should be ignored.”

Is it possible to get the code to ignore the Police Main records for the DB record?  My concern is that the CARE record is entirely recorded as Police Main, so we can’t discount these lines completely.  Alternatively, we would need to make it so admin have to clean the record before running the calc, although I’m not sure of the extent of the issue.","08/Jan/26 12:41 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] As discussed, I have advised admin that this will need to be a manual data cleanse before the calcs are run.  I have advised that we will leave the error in place so that they will be alerted to when the record needs cleaning.  I think we can close this ticket.",,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,29/Jan/26 2:38 PM
Police 1987 scheme eligibility for PI,PHX5-683,17026,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,19/Nov/25 11:01 AM,02/Jan/26 12:56 PM,,16/Dec/25 2:00 PM,Client 176 Police D to R Version 1,,,,,,,,,,,,0,,,,,"This would be an update to {{RevaluationFactory}} to select either a strategy that applies no reval, or one that applies PIE accordingly.",,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-686,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@66abdef7,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:ux,,,Set eligibility for 1987 scheme revaluation to either apply revaluation or not depending on the age and ill health criteria,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 25,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_5578584_*|*_10252_*:*_1_*:*_2549_*|*_10354_*:*_1_*:*_1053653558_*|*_10056_*:*_1_*:*_1207479944,,"19/Nov/25 11:07 AM;640f34fc1273131f2adfede9;If retirement on ill health (unfit for all employment) - PI applies
If retirement on ill health (unfit for police work only)  age < 55 - PI does not apply
If retirement on ill health (unfit for police work only)  age >= 55 - PI applies
If retirement not on ill health (on age grounds), age < 55 - PI does not apply
If retirement not on ill health (on age grounds), age >= 55 - PI applies

Need to build these conditions into the code for the 1987 category to apply revaluation or not as applicable",15/Dec/25 4:36 PM;640f34fc1273131f2adfede9;Set up in {{PublicSectorRevaluationFactories}} to use either {{NotEligibleRevaluationStrategy}} or {{EligibleRevaluationStrategy}}. Can be found in the Public Sector Revaluation module,,,,,,,,,,,,,,,,,,,,,,,14400,PHX5-294,Police - Deferred to Retirement,Done,16/Dec/25 2:00 PM
Police A>R Unknown CPI revaluation,PHX5-682,17025,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,19/Nov/25 10:59 AM,01/Dec/25 3:06 PM,,26/Nov/25 3:26 PM,Client 162 Police A to R Version 2,,,,,,,,,,,,0,,,,,"Admin have confirmed “We want the projected revaluation for the Police scheme to be set to CPI + 1.25% for complete scheme years. So where the full revaluation is currently unknown it should project 1.25% as the CPI would currently be zero, so it replicates Altair.”



Update following back and forth with Tracy:

* Inflation addition to be added to known inflation rates for A>R & A>D (already coded)
* Inflation addition to be added to unknown future rates for A>R, for complete CARE years only
* Inflation addition is +not+ to be added to unknown future rates for A>D
* Inflation addition is +not+ to be added to unknown future rates for part years (both A>R and A>D)",,Annabelle Stephenson,Steven Wright,Tracy Collins,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-237,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6239bcd3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xr,,,"The inflation addition ( for example, 1.25% for Police Care Benefit Types) is now being used when the CPI for the care period being calculated is unknown and the future care period is a full year. It was previously set to apply 0 inflation for future years if the CPI rate was unknown in A>R and A>D calculations, it will not apply any future inflation figure (where CPI is unknown) if the retirement date chosen makes it a partial year or the calculation is for active to deferred.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 22,PHX5 Sprint 23,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-20 18:45:26.02,10251_*:*_2_*:*_3632917_*|*_10250_*:*_2_*:*_486794575_*|*_10252_*:*_1_*:*_102790527_*|*_10354_*:*_1_*:*_4037_*|*_10056_*:*_1_*:*_11577373,,"20/Nov/25 6:45 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;-One line change, in- {{PublicSectorCARECalculationFactory}} -in- *-Public Sector Calculation-* -module.-

{noformat}careParameters.FutureInflation += inflationAddition;{noformat}

-One test added, “PublicSectorCARECalculationFactory_ FutureInflation = inflationAddition” that validates the change, returning future rates of 1.25% which previously were returning 0%-



-(Just to note that I initially thought I also needed to rearrange the order of this factory so that creating- {{careBuilder}} -occurred after my new line, however it seems that any changes to- {{careParameters}} -after building the calc will still be incorporated into the calc.  My one line change works in both UAT and VSCode.)-","20/Nov/25 7:59 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;*-UPDATE:-*

-I published my changes (see comment below) in Public Sector calc and updated dependency for A>D, after which most of the A>D tests failed.  I realised it would be because we’re now applying the inflation addition to unknown years, which I imagine shouldn’t happen for A>D.  I therefore added a condition to my code:-

{noformat}careParameters.FutureInflation += calculationType == CalculationType.ActiveToRetired ? inflationAddition : 0;{noformat}

-which also meant bringing CalculationType into the factory.  After these updates I published and brought through to A>D again, tests are back to passing.-

I then brought the new published module through to A>R: one previously passing test is now failing (Police A>R Test 25 PPS).  I need to follow up with Tracy as I can’t understand why the inflation addition would not also apply for this member.","21/Nov/25 3:31 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;From Tracy regarding how to apply addition to future years, following query on A>R test 25 below:

“I don't think it should be applying any reval unless a complete year is being added to the table so eg, if the DOR was after 1 April 2026 then an estimated reval amount (of 1.25%) should be added to the full 2025/2026 care line and then the proportionate amount (from 1 April 2026 to DOR) would be added on the end with no reval.  So, in short, I think the unknown future reval should only apply where the DOR is in a future Care year.”

I’ve therefore moved my changes into the *CARE* module.  The {{CAREInflationWithAddition}} strategy has been set up specifically for public sector, so I’ve amended it as follows:

{noformat}else if (memberCARE.EffectiveFrom >= latestInflationAvailableFrom && memberCARE.EffectiveTo == memberCARE.EffectiveFrom.PlusYears(1).PlusDays(-1))
{
    return FutureInflation + Addition;
}
else if (memberCARE.EffectiveTo < memberCARE.EffectiveFrom.PlusYears(1).PlusDays(-1))
{
    return FutureInflation;
}	{noformat}

This means that we now get addition added on to the future rate, except when the CARE period is less than 1 year.  Two tests added “CAREInflationWithAdditionGetRate …” to cover these two scenarios.  Updated CAREBuilder and Public Sector Calc dependencies.

I have removed my earlier change from *Public Sector Calculation* (so nothing to check there).  Amended results of the test I had added in there, in line with the logic for part-years.

Brought through to Police A>R, all good, test 25 from yesterday is now passing. Brought through to A>D and remembered that we do not want the inflationAddition added to Future on A>D which means further changes needed.



_I need Andrew’s help now, as I can’t figure out how I can adjust my CARE strategy to reflect this, without making CalculationType a necessary input in the_ {{CAREInflationStrategy}} _factory (which would be a huge problem / change for existing schemes).  I also can’t see a way to use a different strategy for A>D than A>R, as strat is determined based on_ {{CAREInflationType}} _only._","26/Nov/25 12:04 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Discussed with Andrew. In Care module - kept Annabelle’s new logic in CAREInflationWithAddition but removed if statement for CalculationType, this current inflation strategy will now be used for all calc types in Public Sector Calculation module apart from ActiveToDeferred, which will call a new inflation strategy I have named CAREInflationWithAdditionZeroFuture. Difference between the two is that all other calc types using CAREInflationWithAddition will apply the set inflation addition percentage depending on their care benefit type for the future inflation amount if the current CPI rate is not known AND the care period being calculated is a full year. For example policemain type and care period 01/04/2026 to 31/03/2027 would have 1.25% applied as inflation rate for CPI not known for that period. The same care period calc in the A>D would have 0 applied. In addition, any retirement or leaving calculation dates mid way through a future care year will have 0 applied in all calc types. 

Updated CareBuilder module and then PublicSectorCARECalculationFactory class to use the new code by setting an if statement for calc type active to deferred and use the different inflation strategy in the builder. Also set future inflation as the inflationaddition decimal for each care benefit type.",,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,26/Nov/25 3:26 PM
Police 1987 Maximum lump sum calculations,PHX5-681,17023,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,19/Nov/25 10:12 AM,19/Jan/26 4:49 PM,,16/Jan/26 4:29 PM,Client 184 Police D to R Version 2,,,,,,,,,,,,0,,,,,Coding required for Police Deferred to Retired Lump Sum Calculations and commutation. Three different scenarios to consider. May be strategies already exist that cover the calculations needed but would need work to select the correct strategies,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,PHX5A-337,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@389cbd03,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qz2:zi,,,"Changes so deferred to retirement calculation for PPS1987 members use the correct lump sum calculations based on the categories A, B and C as described in the specification",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 28,PHX5 Sprint 29,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10281_*:*_1_*:*_90743353_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_2_*:*_549111268_*|*_10252_*:*_2_*:*_18691_*|*_10354_*:*_2_*:*_155738041_*|*_10056_*:*_1_*:*_4073420182,,"07/Jan/26 9:14 AM;640f34fc1273131f2adfede9;Changes needed to both maximum lump sum and PCLS options for deferred 1987 members. Three scenarios called A, B and C on the spec. Scenario A is same as for Active members but there are differences for B and C. ","07/Jan/26 9:46 AM;640f34fc1273131f2adfede9;Need to change MaxLumpSum in Public Sector Functions - capped lump sum is already there for category B from the spec but need to adapt the logic of when to use this for deferred members.

Need a change to Commutation factor in PublicSectorMemberInfo to use the additional commutation factor for category B and C or need to overwrite the standard commutation factor at a later point for category B and C members?

Query needed for category B - DB_Deferred_CommutedPenCappedTaxFree uses DB_CCF_1987 to work out the commuted pension but this isn’t what’s used for DB_Deferred_CommutedPenCapped. For category B/C should the commutation factor that uses tables 506, 507 and PI factors always be used whatever the lump sum chosen is?","14/Jan/26 11:03 AM;640f34fc1273131f2adfede9;Added functions in PublicSectorFunctions

NeedAdditionalCommutationFactor - checks if the member is in Category B or C from the spec where the Additional Commutation Factor is used instead of the standard

GetDeferredDueDate - picks up the due date from a given Key from deferred elements - need for logic on which category of lump sum calculation is to be used

GetDeferredDateOfLeaving - picks up the Effective From date from a given Key from deferred elements - needed to set the start date for the PI Factor calculation used in Additional commutation factor

NotImmediateRettirementAge - checks the date due and determines if a retirement is immediate (0) or not and age 50 (50) and not and age 60 (60) - need to determine which category a member falls into for lump sum calculations.

GetAdditionalCommutationFactor - calculates the additional commutation factor used in lump sum category B and C calculations

DeferredMaxLumpSum - calculates the maximum lump sum as either the capped or full amount based on the relevant criteria for 1987 deferred members.

Tests added for all these functions to make sure they are working as expected","14/Jan/26 6:41 PM;640f34fc1273131f2adfede9;In Public Sector Calculation added 3 pension option strategies - {{PCLSDeferredDBPensionOptionStrategy}}, {{DBDeferredTargetPensionOptionStrategy}} and {{SchemeMaximumDBDeferredPensionOptionStrategy}} - these were copies of the equivalent strategies used for the PPS1987 category. These were then amended to overwrite the commutation factors with the additional commutation factor where needed and to use DeferredMaxLumpSum instead of MaxLumpSum.

Amended{{SchemeMaximumDBDeferredPensionOptionStrategy}} in line with changes made to {{SchemeMaximumDBPensionOptionStrategy}} which appears to have removed the calculation of the post tax lump sum

Changed {{PensionOptionCalculatorFactory}} to use the logic that was already in place to select the relevant strategies if the member is not deferred and to use the new strategies where appropriate otherwise. Had to bring MemberData into the factory as this is needed in the new strategies.","15/Jan/26 11:52 AM;640f34fc1273131f2adfede9;Three tests now erroring in the client calculation. D to R Test 1 and LSA _RBCEs and UPs _reform DB and CARE are based on the same member - have confirmed with April Woods there is a data issue. The due date is incorrectly showing as their 50th birthday on the deferred record. This then pushes the calculation down an incorrect route where it can’t find factors. If the calculation went down the correct route these wouldn’t be required.

UAT test 781 _ Ill Health Minimum retirement age not met error is a lower tier ill health retirement over age 55. According to the spec this is not possible. As an incorrect scenario has been used this pushes the calculation down a route it should never go down and causes an error with factors.

Will raise a new ticket to look at Validation for deferred retirements","16/Jan/26 2:11 PM;640f34fc1273131f2adfede9;Test added for the three strategies going through lump sum scenarios A, B and C. While doing this noticed some changes needed

In the Factory the final pension key was set to the {{McCloudDBPension}}instead of {{NonMcCloudDBPension}}for the Non-McCloud (else) route

In {{DBDeferredTargetPensionOptionStrategy}} CommutationFactors wasn’t being set to use the commutationFactors input",,,,,,,,,,,,,,,,,,,14400,PHX5-294,Police - Deferred to Retirement,Done,16/Jan/26 4:29 PM
Calculate PIA strategy,PHX5-680,17022,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,19/Nov/25 9:00 AM,12/Jan/26 2:58 PM,,03/Dec/25 1:53 PM,Annual Allowance (Stand alone) Day 1,Client 172 Fire Annual Allowance Version 1,Client 176 Police Annual Allowance Version 1,,,,,,,,,,0,,,,,"This is a simple calculation, but with the current set up, *the easiest way to make this a separate testable function is to make it its own strategy.*



There is an existing PIA module. But this returns a single figure, and also take the 16 and annual allowance as an input. 

We would still need a wrapper function around this call to PIA module to calculate the correct factor to pass in. As the factor is based on PI rather than CPI. So not sure if using the PIA module gains us anything.",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@15e0b462,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i0004,,,PIA calc stand alone in Public Sector Functions for annual allowance.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 23,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-02 09:57:30.906,10281_*:*_3_*:*_7874_*|*_10251_*:*_4_*:*_74825468_*|*_10250_*:*_4_*:*_337847427_*|*_10253_*:*_2_*:*_37079_*|*_10252_*:*_4_*:*_186323710_*|*_10354_*:*_4_*:*_35761_*|*_10056_*:*_1_*:*_624315068,,"02/Dec/25 9:57 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Calculation coded in “PIA” module.

I have then pulled it into “Public Sector Functions” in order to set a place to pull in the PIrate from Russel’s code in “Functions” and house everything together in a place it can be tested.

Tests added in PIA and also in Public Sector Functions to check I get the same results as the “Calc” provided in Matt’s Annual Allowance template.

I am going to add in further tests for all members provided in that document this morning, but wanted to get the code in for review.

Note: I will then bring this into Public Sector Calculations and have written a note in there to direct to where this code is. However, I know PSC shouldn’t be published until we are in TD3 as Annabelle has made what would be a breaking change in TD2. As such, I have just completed the PIA calc independently.

{noformat}//Annual Allowance PIA Calc
     public static decimal CalculateAnnualAllowancePIA(decimal DBAccruedPension,// sum of List <ElementValue> pensionElementValues
                                        List<MemberAnnualAllowance> AnnualAllowanceHistory,
                                        string Category,
                                        LocalDate CalculationDate,
                                        int PIAFactor,
                                        decimal rate, // input PI rate in PublicSectorFunctions, where Factors is implicit dependency
                                        decimal schemePaysDebit, // consider how to set
                                        decimal DBAccruedCash, // input if calculated in PSC
                                        decimal DBAddedYearsCash) // input if calculated in PSC

    {
        if (rate == 0)
        {
            Log.Warning(""PI rate is 0. Please check rate tables."");
        }

        decimal relevantPercentage = rate; 
            Log.Debug(relevantPercentage, ""PIRate"");

        LocalDate pIPCalcEndDate = CalculationDate;

            if (pIPCalcEndDate.Month != 4 || pIPCalcEndDate.Day != 5)
            Log.Warning(""PIP expected to end on 5th April.""); // TODO: Check this as might be fine to calculate at any date for retirement in period

        LocalDate pIPCalcStartDate = pIPCalcEndDate.PreviousInstanceOfDayOfYear(4, 6);

            if (pIPCalcStartDate.Year >= DateTime.Today.Year)
            {
                Log.Error(""Cannot calculate PIA for future years."");
                return 0;
            }

        decimal schemePaysDebitLumpSum = 0;
        if (Category != ""NPPS2006"")
        {
            schemePaysDebitLumpSum = schemePaysDebit * 4;
        }
            Log.Debug(schemePaysDebitLumpSum, ""schemePaysDebitLumpSum"");

        LocalDate priorPeriodStart = pIPCalcStartDate.PlusYears(-1);
        LocalDate priorPeriodEnd = pIPCalcEndDate.PlusYears(-1);

        var priorYearData = AnnualAllowanceHistory
                .FirstOrDefault(x =>
                    x.PensionInputStartDate == priorPeriodStart &&
                    x.PensionInputEndDate   == priorPeriodEnd &&
                    x.PensionInputEndDate   < CalculationDate);


        var priorYearAA = priorYearData != null 
                            ? new List<MemberAnnualAllowance> { priorYearData }
                            : new List<MemberAnnualAllowance>();

            if (priorYearAA == null || !priorYearAA.Any())
            {
                Log.Warning($""The latest AA entry is not for the full prior year period starting {priorPeriodStart} and ending {priorPeriodEnd} as expected. Please update member's AA data."");
            }

        decimal dBOpeningPension = (priorYearAA.SingleOrDefault()?.ClosingDbPension ?? 0m) * relevantPercentage;
            Log.Debug(dBOpeningPension, ""dBOpeningPension"");

        decimal dBClosingPension = DBAccruedPension - schemePaysDebit;
            Log.Debug(dBClosingPension, ""dBClosingPension"");

        decimal dBOpeningLumpSum = 0; 
        if (Category != ""NPPS2006"")
        {
            dBOpeningLumpSum = (priorYearAA.SingleOrDefault()?.ClosingSchemeCash ?? 0m) * relevantPercentage;
        }
            Log.Debug(dBOpeningLumpSum, ""dBOpeningLumpSum"");

        decimal dBClosingLumpSum = 0; 
        {
            dBClosingLumpSum = DBAccruedCash + DBAddedYearsCash - schemePaysDebitLumpSum;
        }
            Log.Debug(dBClosingLumpSum, ""dBClosingLumpSum"");

        decimal pensionInputAmount = dBClosingLumpSum - dBOpeningLumpSum + ((dBClosingPension - dBOpeningPension) * PIAFactor);
            Log.Debug(PIAFactor, ""PIA Factor"");
            Log.Debug(pensionInputAmount, ""Unadjusted PIA"");

        if (pensionInputAmount < 0)
        {
            Log.Information(""PIA cannot be negative, therefore PIA is nil"");
            pensionInputAmount = 0;
        }

        return pensionInputAmount.Round();
    }{noformat}

public sector functions:

{noformat}    public static decimal CalculatePIAForAnnualAllowance ( List<Aurora.Model.Global.Calculations.GlobalDecimalReferenceValue> publicSectorPiFactors,
                                                            string memberInfoCategory, // will set to memberInfo.Category in PSC
                                                            decimal DBAccruedPension, // will set to sum of pensionElements in PSC
                                                            List<MemberAnnualAllowance> AnnualAllowanceHistory, // From MemberData record
                                                            LocalDate calculationDate, // e.g. 05/04/2025 
                                                            decimal schemePaysDebit, 
                                                            decimal DBAccruedCash, 
                                                            decimal DBAddedYearsCash)   
    {
        LocalDate previousPIPstartForCalc = calculationDate.PreviousInstanceOfDayOfYear(4, 6).PlusYears(-1); // Would be 06/04/2023 when doing period 06/04/2024-05/04/2025

        decimal PIRate = Factors.GetPublicSectorPiFactor(publicSectorPiFactors, calculationDate, previousPIPstartForCalc);
        
        return PIAGlobalModule.CalculateAnnualAllowancePIA(DBAccruedPension,
                                        AnnualAllowanceHistory,
                                        memberInfoCategory,
                                        calculationDate,
                                        16,
                                        PIRate,
                                        schemePaysDebit, 
                                        DBAccruedCash,
                                        DBAddedYearsCash);                                                 
    }{noformat}","03/Dec/25 6:44 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] Based on discussion yesterday, I think we still need to update {{CalculatePIAForAnnualAllowance}} in public sector functions - to take the list of pre com elements and list of accrued elements so that we can find the relevant accrued pension and scheme pay element to pass into the PIA function itself.","03/Dec/25 12:50 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;I have saved an update to the code to hopefully finish this aspect of the calc, but I need to really set up the first instance of an annual allowance calc and run it through to determine how best to feed in what works best.",,,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,Done,03/Dec/25 1:53 PM
Care salary Pro Rate Calculation,PHX5-679,17020,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,19/Nov/25 8:52 AM,01/Dec/25 3:15 PM,,26/Nov/25 8:35 AM,Client 162 Police A to D Version 7,Client 162 Police A to R Version 2,Client 164 Fire A to D Version 2,Client 164 Fire A to R Version 2,,,,,,,,,0,,,,,"Admin have confirmed that the calculation of pro rated Care salary should be salary / 12 / total no of days in the month of leaving multiplied by the number of days completed.  

Example if member left on 6 April and has a Care salary of 49412.25 then calc should be 49412.25/12 = 4117.6875/30 = 137.25625 * 6 = 823.5375

Aurora is currently doing 49412.25/365 = 135.3760274 * 6 = 812.2562

In addition, the output currently shows what calculation is being done but the result is zero.  Please can the actual calculated amount be displayed.",,Andrew Wilson,Naomi Robinson,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-238,PHX5A-237,,,,,,,,21/Nov/25 4:53 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251121-165355.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11840,21/Nov/25 4:58 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251121-165841.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11841,24/Nov/25 10:44 AM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251124-104356.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11874,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@28a4b3c7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 22,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-21 14:25:34.572,10251_*:*_4_*:*_302676316_*|*_10250_*:*_4_*:*_132168728_*|*_10252_*:*_1_*:*_84755274_*|*_10354_*:*_1_*:*_2805_*|*_10056_*:*_1_*:*_19298498,,21/Nov/25 2:25 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] do you have a member number showing the output calculation with 0 as the result I can check on my end?,"21/Nov/25 2:28 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Sorry found 10086901 in the linked ticket, so ignore this.","21/Nov/25 4:53 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Added a function in CARE Salaries to calculate days in the month of the effective to date (using NodaTime capabilities to account for leap years).

updated the “denominator” in CareSalaries Pro Rate Calculation

Test added for function within CareSalaries.

Published into Public Sector Calculation and test to cover actual care salaries pro rate check, as follows: 

_PublicSectorCARECalculationFactory_5_

Result of test confirms 30 days used and also that the Log.Info is now working as expected:

!image-20251121-165355.png|width=211,alt=""image-20251121-165355.png""!","21/Nov/25 4:58 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Note to below: Did check in UAT calc that correct result would come through. Test saved in non-UAT version with other test cases.

!image-20251121-165841.png|width=226,alt=""image-20251121-165841.png""!",24/Nov/25 6:53 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;This change has applied to anyone using {{CARESalaryProRateDays}}. We should try and create a new strategy for this case.,"24/Nov/25 10:44 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;I have confirmed with Tracy that all members using CARESalaryProRateDays should be calculating this was, rather than using / 365.

Looking at the code, {{CARESalaryProRateDays is already its own possible calc type linked to CARESalaries}} and this is how all “ProRateDays” should be performed.

As such, I am not sure how else to split this out, since there is no alternative code which could be required for a second proratedays strategy?

As shown below, the rest of the method remains the same, with just the denominator updated from 365/ 366 to this method:

!image-20251124-104356.png|width=412,alt=""image-20251124-104356.png""!

Could we discuss where I should put this if needed elsewhere? I only found one example of a test case being pushed slightly out because of the change and was able to confirm that this is the method that should be taking place.",25/Nov/25 7:06 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] Sorry - I cannot see how this has been coded as a separate strategy? Looks like it is still in {{CARESalaryProRateDays}} rather than {{CARESalaryProRateDaysInMonths}} (or whatever we call it),"25/Nov/25 12:03 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Ok. So I have set up a denominator specific strategy in CARESalary:

{noformat}public interface IDenominatorStrategy
    {
        int GetDenominator(SalaryHistory salary, CARESalaryProRateDays context);
    }

    public class DaysInYearDenominatorStrategy : IDenominatorStrategy
    {
        public int GetDenominator(SalaryHistory salary, CARESalaryProRateDays context)
        {
            return Period.DaysBetween(salary.EffectiveFrom, salary.EffectiveFrom.PlusYears(1));
        }
    }

    public class MonthDaysDenominatorStrategy : IDenominatorStrategy
    {
        public int GetDenominator(SalaryHistory salary, CARESalaryProRateDays context)
        {
            int year = salary.EffectiveTo.Value.Year;
            int month = salary.EffectiveTo.Value.Month;

            int daysInMonth = CalendarSystem.Iso.GetDaysInMonth(year, month);

            decimal denominator = 12m * daysInMonth;

            return (int) denominator;
        }
    }
{noformat}

I have then set the original “DaysInYear” strategy as default to make sure any future updates to phase 4 dependencies or other calcs does not cause any issues:

{noformat}public class CARESalaryProRateDays : CARESalaries
    {
        private readonly IDenominatorStrategy _denominatorStrategy;

        public CARESalaryProRateDays() : this(new DaysInYearDenominatorStrategy()) { }

        public CARESalaryProRateDays(IDenominatorStrategy denominatorStrategy)
            {
                _denominatorStrategy = denominatorStrategy;
            }{noformat}

Next, in the care builder I have set to override the default to the MonthsDays strategy if police or fire:

{noformat}case CARESalaryType.ProRateSalary:
                if (parameters.PoliceCalc || parameters.FireCalc)
                {
                    return new CARESalaryProRateDays(new MonthDaysDenominatorStrategy());
                }
                else
                {
                    return new CARESalaryProRateDays();
                }{noformat}

This required new parameters to be set in the builder. I have set these to be generic Police and Fire, as it looks like Annabelle may need to access similar properties for an inflation change she is making, so it will be dual purpose:

{noformat}public class CAREParameters
{
    public int CAREMonth { get; set; }
    public int CAREDay { get; set; }
    public decimal AccrualRate { get; set; }
    public CAREPeriod CAREPeriod { get; set; }
    public decimal FutureInflation { get; set; }

    public List<DecimalReferenceValue> IncreaseRates { get; set; }

    public bool PoliceCalc { get; set; } = false;
    public bool FireCalc { get; set; } = false;
}{noformat}

Finally, in public sector calc, I have used existing Police/ Fire logic to set the parameters for those calcs:

{noformat}            CAREParameters careParameters = new CAREParameters
            {
                CAREMonth = 3,
                CAREDay = 31,
                AccrualRate = careAccrualRate,
                CAREPeriod = CAREPeriod.Yearly,
                FutureInflation = 0,
                IncreaseRates = schemeReferenceData.Numbers.Where(x => x.Key == increaseRateKey).ToList(),
                PoliceCalc = publicSectorMemberInfo.TypeOfScheme() == OverallSchemeType.Police ? true : false,
                FireCalc = publicSectorMemberInfo.TypeOfScheme() == OverallSchemeType.Fire ? true : false,
            };{noformat}



Testing:

Public Sector Calculation: PublicSectorCARECalculationFactory_5 tests that the months strategy is used correctly.

CareSalary: All existing tests checked that the strategy pattern did not break any existing logic and also that the default was working. Added a new test to check the override to using Months rather than DaysInYear, called: “MonthDaysDenominatorStrategy”

{noformat}        public static int TestMonthDaysDenominatorStrategy()
        {
            var strategy = new MonthDaysDenominatorStrategy();
            var salary = new SalaryHistory
            {
                EffectiveTo = new LocalDate(2026, 04, 06)
            };

            var denominator = strategy.GetDenominator(salary, null);

            return denominator;
        }{noformat}","25/Nov/25 1:51 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272]  I like the new strategy - that is perfect.   I would not introduce the concept of police/fire into the care builder. The CARE builder should not have any knowledge of client logic in any way. I would have expanded CARESalaryType enum in the care builder with a third option. And then allowed this to be set in the public sector care factory when setting up the care builder, but sending a different value through to {{WithCARESalaryMethod}}.

That way, all the logic pertaining to public sectors treatment of care is still in the public sector care factory. And the care builder has no client logic and is just offering up options to be used.","25/Nov/25 2:34 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Have updated to change to an additional type in Care Builder. Here is the new code in public sector calculation and the test that was in there is still passing:

{noformat}            if ( CareSalaryList.Count == 0 || CareSalaryList.MaxBy(x=>x.EffectiveFrom).EffectiveFrom < endDate.PreviousInstanceOfDayOfYear(4, 1))
                {
                    if (publicSectorMemberInfo.TypeOfScheme() == OverallSchemeType.Police || publicSectorMemberInfo.TypeOfScheme() == OverallSchemeType.Fire)
                        {
                            careBuilder = careBuilder.WithCARESalaryMethod(CARESalaryType.ProRateSalaryDaysInMonth);
                        }
                    else
                        {
                            careBuilder = careBuilder.WithCARESalaryMethod(CARESalaryType.ProRateSalary);
                        }
                }
            else
                {
                    careBuilder = careBuilder.WithCARESalaryMethod(CARESalaryType.SalaryInForce);
                };{noformat}",,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,26/Nov/25 8:35 AM
Public Sector PI Retrieval function,PHX5-678,16983,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,18/Nov/25 3:20 PM,12/Jan/26 2:58 PM,,24/Nov/25 10:07 AM,Annual Allowance (Stand alone) Day 1,Client 172 Fire Annual Allowance Version 1,Client 176 Police Annual Allowance Version 1,,,,,,,,,,0,,,,,"In scheme pays we are currently just setting the key equal to PublicSectorPI and the year of the calcs. However, this should be the year of the first monday after the last 5th April of the month.

We need a function in factors that takes the two dates, does whatever it needs to to get the correct factor and return this. We can then update scheme pays to call this.",,Andrew Wilson,Russell Armstrong,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6bfea2ad,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzr,,,Retrieve correct Public Sector PI factors based on the start date of the increase and the calculation date,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 22,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-21 15:06:30.532,10251_*:*_2_*:*_232022655_*|*_10250_*:*_2_*:*_89407441_*|*_10252_*:*_1_*:*_176756971_*|*_10354_*:*_1_*:*_2645_*|*_10056_*:*_1_*:*_1216821,,"21/Nov/25 3:06 PM;640f34fc1273131f2adfede9;Added {{GetPublicSectorPiFactor}} to Factors global module. Added tests starting {{GetPublicSectorPiFactor}} to testing using latest table, a past table, dates around the change from one table to another, the gap where there is no values in the table and a future calculation where it has to use the latest table available","24/Nov/25 7:35 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:640f34fc1273131f2adfede9]  All looks good. 

Only thing I would mention is - could we have some comments around the first bit ({{piTableEffectiveDateForDateOfCalculation}}) as at first glance this looks complex and takes some working out of what it is trying to do. Either comment, or break down with nicely named variables and do it step by step. 

For instance - {{dateOfCalculation.PlusDays(-1).PreviousInstanceOfDayOfYear(4, 5)}} is used 3 times. If this was a variable called Previous5thApril - even that might make it more readable.",24/Nov/25 10:04 AM;640f34fc1273131f2adfede9;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Made the suggested change and added comments,,,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,Done,24/Nov/25 10:07 AM
Spouses Pension DIR,PHX5-677,16982,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,18/Nov/25 1:41 PM,18/Nov/25 1:49 PM,,,,,,,,,,,,,,,0,,,,,"I don’t think the specs for this have actually been completed/updated as lots of inconsistencies and gaps.  Generally it states that:

* Spouse pension = (member’s pre-comm pension plus PI to DoD) x 50%

Potentially plus a 13 week enhancement (inconsistent across specs, need admin confirmation on when this applies)

There is also the following in the PPS 1987 section of DIR spec:

_PPS - If the officer joined after 1 April 1972, the widow will be entitled to a half-rate pension (i.e. half of the officer’s gross pension, before commutation). Otherwise, the widow's pension_
_will depend on whether the officer opted to up-rate his pre-April 1972 service. This could have been done by paying a lump sum, paying additional pension contributions until the_
_completion of 25 years' service; or by the officer taking a reduction in his own pension._

However, it also states that “any scenario that is not half rate” is not automated, so dont need to code this, but probably helpful to be aware of it when testing as we won’t be able to match members that fit this scenario.

*Need further information and spec reviews before we can do this*",,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@53f5f70,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00p1b:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,16726,PHX5-642,Spouses pensions,To Do,18/Nov/25 1:41 PM
Determining age at DOR,PHX5-676,16978,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,18/Nov/25 11:29 AM,11/Dec/25 11:57 AM,,24/Nov/25 7:27 AM,Client 162 Police A to R Version 2,Client 164 Fire A to R Version 1,,,,,,,,,,,0,,,,,"Member 100869.  Date of retirement tested was 20.01.26. This is the date that would be input in Altair as the date of leaving, with the first day of retirement then the 21.01.26, which is the member’s 55th birthday. The calculation will not run at 20.01.26 as the CARE says she is not old enough. The calculation rightly uses the service up to and including the DOR so please amend the age test to allow the calc to run where the DOR is one day prior to the expected age.",,Russell Armstrong,Tracy Collins,,,,640f34fc1273131f2adfede9,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-236,,,,,,PHX5-727,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6a464f1e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xx,,,Calculations will no longer error when the date of retirement is input as one day before the birthday of the youngest age they are eligible to retire at,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 22,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-20 13:48:50.854,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_14016800_*|*_10252_*:*_1_*:*_70876289_*|*_10354_*:*_1_*:*_3489_*|*_10056_*:*_1_*:*_96743891,,"20/Nov/25 1:48 PM;640f34fc1273131f2adfede9;Validation strategies use {{AgeAtDate(calculationDate.PlusDays(-1)}} - taking away the 1 day is unnecessary as calculations are run the day before the pension is due to start.

Removed the PlusDays(-1) from all RetirementValidationStrategies.

For the member given I have debugged the calculation and it is correctly using an ERF for 5 years early (retiring the day before 55th birthday, NRD is 60) and the commutation factor for age 55.

Amended test RetirementValidationStrategy _CARE2015 1d under 55yo to not expect an error and made RetirementValidationStrategy _CARE2015 2d under 55yo to test that this errors as expected

Looked through the rest of Public Sector Calculation at where calculationDate is used and couldn’t see any other areas for concern if we are confident we are happy with service calculations",,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,24/Nov/25 7:27 AM
Police A>R error - Object reference not set to an instance of an object,PHX5-675,16927,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,17/Nov/25 4:08 PM,01/Dec/25 3:06 PM,,26/Nov/25 1:51 PM,Client 162 Police A to D Version 6,Client 162 Police A to R Version 2,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,0,,,,,Error message received as attached.  Member 89175 has an active Care record but has retired from the DB record,,Andrew Wilson,Naomi Robinson,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-226,PHX5-685,,,,,,,,17/Nov/25 4:10 PM;3f2b1e38-f1b0-413a-9d8c-f20fb6dd5bf1;image-20251117-161022.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11593,20/Nov/25 11:10 AM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251120-110920.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11733,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@222c50b2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzx,,,"Update 1: Model Conversion module updated to only accept linked records with an inferred status of “active”, as well as sub-status logic.

Update 2: Main A>D and A>R updated where LinkedMembers != null; Changed to {{activeSalaryLinkedMemberInfo != null)}}to specify logic applies to active members.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 22,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-19 14:27:48.176,10251_*:*_2_*:*_325152450_*|*_10250_*:*_2_*:*_77409341_*|*_10252_*:*_1_*:*_1851_*|*_10354_*:*_2_*:*_9997_*|*_10056_*:*_1_*:*_166717750_*|*_10356_*:*_1_*:*_97762150,,"17/Nov/25 4:10 PM;712020:f0005e1d-2048-4283-b711-413bd055eb21;!image-20251117-161022.png|width=226,alt=""image-20251117-161022.png""!",19/Nov/25 2:27 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;question to CIT - should we even be sent the pensioner record?,"20/Nov/25 11:10 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Raised with Michael Amor/ CIT who are in in discussions with Devs about ticket 685 and how members are assigned their main and linked record. This seems to be a similar issue.

[~accountid:712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97] I have added the below member to the query, which is the same problem, but they are assigning the “deferred” record as the linked record in Aurora.

!image-20251120-110920.png|width=226,alt=""image-20251120-110920.png""!

Sent to CIT 20/11/2025.",20/Nov/25 11:23 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Update. CIT have asked us to speak to devs directly. Raise on Calculate requests 20/11/2025,"20/Nov/25 4:25 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Had a call with Neil Murrey to confirm that “So we have just over 1300 memberships which are status 1 (Active) or A (Legacy) where the member has another membership that is 2 (Options Pending) or 4 (Deferred).  If you add Status 'O' (Opt Out) then you can add another 250+ to that.”

We agreed that pensioner records should be ignored in active calcs, but with deferred records, these are all linked and would need to remain so such that D>R calcs will work.

Ultimately, we need to code the calc to ignore “linked” records where status != active.

Likely best in model conversion, where sub status is also reviewed. ","20/Nov/25 5:15 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;have updated model conversion to only accept linked records with an inferred status of “active” and also changed some code in the main A>D where it had LinkedMembers != null to change to {{activeSalaryLinkedMemberInfo != null)}}since you can have linked members who are not active.

Seems to have fixed issue in front end so have asked Tracy and Barrie to check a few more test cases. Once approved, I will copy across to the A>R and then provide Pete with the full release note for the changes made in the most recent dependency update.","21/Nov/25 12:59 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Confirmed 21/11 that the update below has allowed multiple additional Active calcs to run such that it has been released to admin to test. As such, am passing this ticket to review.",25/Nov/25 7:20 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Sorry - if a change was made - think we this should have been a story. I have changed the work type - can you update the release note please?,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,26/Nov/25 1:51 PM
A>R Spouse Pension for deferred CARE,PHX5-674,16915,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,17/Nov/25 2:42 PM,17/Nov/25 2:52 PM,,,,,,,,,,,,,,,0,,,,,"There can be instances under both police and fire schemes where a member is eligible to take their DB benefits, but not yet eligible for CARE (eg. PPS member has over 30y service but has not yet reached SPA).  I believe we will be accounting for this in linked ticket 578.

In these instances, the 2015 CARE benefits quoted to the member are the deferred benefits, or in other words, their accrued CARE.  Spouse’s pension would then be calculated on the A>D basis rather than A>R basis which takes the max PCLS into account.

We need to ensure that the coding done under ticket 578 allows for this.",,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,PHX5-578,,,,,,,,,,,PHX5-290,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@79d9ba4d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oxb:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,16726,PHX5-642,Spouses pensions,To Do,17/Nov/25 2:42 PM
Reload PublicSectorPI Factors,PHX5-673,16867,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,17/Nov/25 6:57 AM,12/Jan/26 2:58 PM,,26/Nov/25 10:12 AM,Annual Allowance (Stand alone) Day 1,Client 172 Fire Annual Allowance Version 1,Client 176 Police Annual Allowance Version 1,,,,,,,,,,0,,,,,"The annual allowance test cases are using PI factors to many decimal places. We have them loaded to 4dp.

We need to clarify how many dp we should be storing them to - and if it will be different for different processes.

If it is more than 4, we will need to reload the factors",,Andrew Wilson,Russell Armstrong,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,,,,,,,,,,,,PHX5A-250,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5c35be8d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 22,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-20 14:37:24.818,10281_*:*_1_*:*_168148404_*|*_10250_*:*_2_*:*_333780141_*|*_10252_*:*_2_*:*_168790925_*|*_10354_*:*_2_*:*_8527_*|*_10056_*:*_1_*:*_118369879,,"20/Nov/25 2:37 PM;640f34fc1273131f2adfede9;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] the original tables at [https://www.gov.uk/government/collections/public-service-pensions-increases|https://www.gov.uk/government/collections/public-service-pensions-increases|smart-link]  use up to 13 decimal places. I downloaded PublicSectorPI2025, updated it to match the table found at the website, with 13 decimal places and uploaded it to overwrite the existing table. I then downloaded the table again and checked it and the values have been truncated to 6 decimal places. Is this enough or do we need to request a dev change?","24/Nov/25 7:50 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:640f34fc1273131f2adfede9] Probably need to check with admin - if they think it needs to be 13 dp, then yes, we probably need to talk to the devs","26/Nov/25 10:10 AM;640f34fc1273131f2adfede9;See linked ticket [https://xps-jira.atlassian.net/browse/PHX5A-250|https://xps-jira.atlassian.net/browse/PHX5A-250|smart-link], April has confirmed to use just the 4 decimal places that are displayed. PublicSectorPI2025 table reloaded with just the 4 decimal places as it was previously, no other action required",,,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,Done,26/Nov/25 10:12 AM
Police A>R UAT,PHX5-672,16834,Task,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Iain Wilson,712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,14/Nov/25 4:35 PM,12/Jan/26 4:15 PM,,,,,,,,,,,,,,,0,Batch1,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@52cc5256,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Nov/25 4:36 PM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Calculation released for UAT 14/11/25;

[Phoenix Phase 5 - The Police Pension Scheme - AR Calculation Testing.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/Ef92BGI2ry1EiMr6PLGeYLcBjhyJGw0_-wuXe1hVsEJ7_w?e=yQPVGf]","08/Jan/26 12:13 PM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Calculation released for UAT4 8/1/26 to be completed ASAP;

[Phoenix Phase 5 - The Police Pension Scheme - AR Calculation Testing - UAT4.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/IQAX6mjVUobOR57Diw29eqx2Af7qeaB-l46ik1e5zV1BIiw?e=jq3qUo]","12/Jan/26 4:15 PM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Follow up email 12/1/26 with extra calc fixes;

[FW Phoenix Phase 5 - The Police Pension Scheme - AR Calculation Testing - UAT4.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/IQDiH0LYzgGET5JqSfgpKV1JAZG25pGZ4bwubJC4vVL2i2Q?e=d2dpVD]",,,,,,,,,,,,,,,,,,,,,,13854,PHX5-221,Police - Active to Retirement,To Do,14/Nov/25 4:35 PM
Fire -D>R Calculation Specification,PHX5-671,16833,Task,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,14/Nov/25 3:32 PM,14/Nov/25 3:32 PM,,,,,,,,,,,,,,,0,,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@76271d76,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00i9s:9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Nov/25 3:32 PM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Query following comparison with Police and Fire Specs. Back with April 14/11/25

[Phoenix Phase 5 - Police and Fire DR Specification Comparison.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EW_1gYlFAM9On-HxPliBemMBY8KiISe4H_Q3i4VPf3P05A?e=NNedci]",,,,,,,,,,,,,,,,,,,,,,,,14442,PHX5-334,Fire - Deferred to Retirement,To Do,14/Nov/25 3:32 PM
MemberCares results not outputting in A>D client calcs,PHX5-670,16832,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,14/Nov/25 3:21 PM,28/Nov/25 5:21 PM,,17/Nov/25 2:56 PM,Client 162 Police A to D Version 3,Client 164 Fire A to D Version 1,,,,,,,,,,,0,,,,,"MemberCares tables for any new calculated rows not outputting. 

Update from SW: Noticed in both fire and police ActiveToDeferred results object was created using activeNormalResult and calling activeNormalToDeferredCalculator.Calculate(). This is not the same as the A>R was coded so I updated it to ActiveToDeferredResult result = activeNormalToDeferredCalculator.Calculate();. Updated the salary link and reform options to be added to result now instead, mean’t the result.MemberCares.Add could remain as they are. Confirmed they are now outputting in the test cases where appropriate. Have updated police and fire A>D client calcs in 162 and 164.",,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@162f3011,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800001000005,,,Fixed an issue where MemberCares table data was not outputting in Active To Deferred Aurora calculations. Any care table rows that need to be created for calculation dates after the latest effective to date in existing Care Benefits data will now be output.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 21,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_68833830_*|*_10252_*:*_1_*:*_77029216_*|*_10354_*:*_1_*:*_90652197_*|*_10056_*:*_1_*:*_5905480,,,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,17/Nov/25 2:56 PM
NFPS 2006 scheme service being used is including post 2022 service so pension & following outputs are higher than expected,PHX5-669,16831,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,14/Nov/25 3:10 PM,28/Nov/25 5:21 PM,,18/Nov/25 7:00 AM,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,,,0,,,,,,,Chris Marshall,Russell Armstrong,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@773dbb86,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00olq:v,,,Changed calculation of accrual for NFPS categories so uses only DB service as was previously including CARE service,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 21,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-17 15:04:36.771,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_11163924_*|*_10252_*:*_1_*:*_2653_*|*_10354_*:*_1_*:*_3092839_*|*_10056_*:*_1_*:*_244743107,,"17/Nov/25 3:04 PM;640f34fc1273131f2adfede9;NFPS2006 uses {{PublicSectorAccrualStandardStrategy}} - this is the only category to do so. Changes to this strategy will not impact on Police calculations where we are happy with the behaviour.

Updated totalService in this strategy to use DBOnly ServiceCalcType instead of TotalService. This brings it into line with {{PublicSectorAccrualCashStrategy}} pension calculation.

Accrual Test 11 and Accrual Test 12 test {{PublicSectorAccrualStandardStrategy}} - added CARE to the Total Service History for these tests and checked tests still return same result",,,,,,,,,,,,,,,,,,,,,,,,13856,PHX5-223,Fire - Active to Retirement,Done,18/Nov/25 7:00 AM
NFPS test cases - legacy and reform db pcls returning same results,PHX5-668,16830,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,14/Nov/25 3:08 PM,28/Nov/25 5:21 PM,,25/Nov/25 6:54 AM,Client 164 Fire A to D Version 1,,,,,,,,,,,,0,,,,,"It looks like on the NPPS test cases, the outputs for reform and legacy are identical.  Need to investigate why this is",,Chris Marshall,Naomi Robinson,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,PHX5-482,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2468522f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzi,,,Fix in {{GetAccruedPension}} and {{GetAccruedCash}} in the {{PublicSectorAccrualCashStrategy}} already put through in ticket [https://xps-jira.atlassian.net/browse/PHX5-482|https://xps-jira.atlassian.net/browse/PHX5-482|smart-link]. No additional coding needed and calcs running as expected.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 22,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-24 14:09:41.597,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_60814_*|*_10252_*:*_1_*:*_610285085_*|*_10354_*:*_1_*:*_2506_*|*_10056_*:*_1_*:*_250209677,,"24/Nov/25 2:09 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Spoke to Chris as it appeared that Annabelle’s fix for ticket PHX-482 has also fixed this.

When reviewing 482, I could see changes were made to {{GetAccruedPension}} and {{GetAccruedCash}} in the {{PublicSectorAccrualCashStrategy}}, which looked like they should be accessed by both the A>R for Fire and Police.

I checked some test cases and they appeared to be working fine and he doubled checked tests 7, 8 and 10 and confirmed the results now appear to be coming through as expected.

I imagine this could have been a case of the dependency being out of date.

Am sending to review as no work required.",,,,,,,,,,,,,,,,,,,,,,,,13856,PHX5-223,Fire - Active to Retirement,Done,25/Nov/25 6:54 AM
Create AA function to calculate the adjusted unused allowance for previous 3 years,PHX5-667,16791,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,14/Nov/25 8:25 AM,12/Jan/26 2:58 PM,,16/Dec/25 1:58 PM,Annual Allowance (Stand alone) Day 1,Client 172 Fire Annual Allowance Version 1,Client 176 Police Annual Allowance Version 1,,,,,,,,,,0,,,,,"We need to ensure that we return a list of annual allowance lines

Any adjusted lines need to be the whole line - including the original ID, with just the adjusted allowance field changed.

Any new lines need to be the whole line with no ID field.



We need to find out what we do with unchanged lines. I am not sure if the Entity Framework process on the front end would treat missing lines as lines to delete.



As with PIA function - although this may be always the same code - setting it up as a strategy will make it more easily testable. Even if the factory is a one liner that returns this single strategy.",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5f1b566f,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzhr,,,Calculates “calcUnusedAnnualAllowance” using excel formula example provided in Annual Allowance template.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 23,PHX5 Sprint 24,PHX5 Sprint 25,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-04 17:26:50.939,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_505342209_*|*_10252_*:*_1_*:*_702078788_*|*_10354_*:*_1_*:*_3367_*|*_10056_*:*_1_*:*_1058412831,,"04/Dec/25 5:26 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Work so far in here: [https://calculate.uat.xpsplc.com/global-modules/56|https://calculate.uat.xpsplc.com/global-modules/56]

I’ve added in a method to pull unused allowances from the aurora history. I now need to add in “calcUnusedAllowance” comparing the previous year’s amounts to 0 and returning the minimum, before finally returning taxable excess.

I have mentioned on the dev chat that tabable excess is missing from Annual Allowance Update outputs.","10/Dec/25 1:48 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Have added a method which gets the last three years of annual allowance from Aurora and saves as a smaller list with only the required data. Have then implemented the following recursive calc to match the excel logic. I have made sure both the list and the taxable excess calc will work if there are fewer than three lines of data available, with what is there. 

{noformat}    public static decimal GetTaxableExcess(decimal unusedAllowanceInput, List<UnusedAllowanceSummary> LastThreeUnusedAllowances)
    {
        // Order oldest to newest
        var lastThree = LastThreeUnusedAllowances
            .OrderBy(x => x.PensionInputEndDate)
            .ToList();

        // Oldest entry always compares to ""unsedAllowanceInput"", then is reset to that year's unsedAllowanceInput for the nexy year's calc
            // Should allow for fewer than three entries if three not available
        decimal unusedAllowanceToUse = unusedAllowanceInput;

        foreach (var entry in lastThree)
        {
            // Works recursively: calcAdjustedAnnualAllowance = min(previous, 0) + AdjustedUnusedAnnualAllowance
            entry.CalcAdjustedAnnualAllowance = Math.Min(unusedAllowanceToUse, 0) + (entry.AdjustedUnusedAnnualAllowance ?? 0);

            // Update for the next iteration
            unusedAllowanceToUse = entry.CalcAdjustedAnnualAllowance;
        }

        // Taxable excess is based on the final entry in the list
        if (!lastThree.Any())
            {
                Log.Warning(""No Annual Allowance History to retreive unused allowances from."");

                return 0m; // no history at all
            }
            
        var latest = lastThree.Last();

        // Taxable excess calc
        return latest.CalcAdjustedAnnualAllowance < 0 ? Math.Abs(latest.CalcAdjustedAnnualAllowance): 0m;
    }{noformat}

Works for member 

|10644101|

Will now test others.","10/Dec/25 3:01 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] What are we returning here? Is it just the taxable excess? Looks like we are updating the {{CalcAdjustedAnnualAllowance}} on entries as well, but it is not immediately obvious and not sure it would be testable?",,,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,Done,16/Dec/25 1:58 PM
Split CalculateRetirementElements into two distinct functions,PHX5-666,16789,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,14/Nov/25 7:16 AM,12/Jan/26 2:58 PM,,28/Nov/25 10:56 AM,Annual Allowance (Stand alone) Day 1,Client 172 Fire Annual Allowance Version 1,Client 176 Police Annual Allowance Version 1,,,,,,,,,,0,,,,,"For annual allowance, we need to sum up the accrued pension but we do not want to apply any factors.

Rather than overcomplicate the er factor factory code, it will simplify if we create two distinct functions:

# Sum up accrued elements into pre com elements
# Apply ER/LR factors

Then annual allowance can call the first function, and not call the second at all.



Summing up accrued elements is an area we need to add some tests to.",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7a07941,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzh,,,"Split CalculateRetirementElements into {{CalculatePreComElements}} and {{ApplyRetirementFactorToPreComElements}}. Depending on whether retirement factors are needed, {{pensionElementValues}} is set as appropriate within the Calculate() methods.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 23,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-27 11:00:51.782,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_167985_*|*_10252_*:*_1_*:*_249655510_*|*_10354_*:*_1_*:*_3786_*|*_10056_*:*_1_*:*_887016199,,"27/Nov/25 11:00 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Split into two:

{noformat}public List<ElementValue> CalculatePreComElements(List<ElementValue> deferredElementValues)
    {
        InterimValues.Add($""DeferredElementValues for AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", deferredElementValues);

        var publicSectorMemberInfo = MemberInfo as PublicSectorMemberInfo;

        List<ElementValue> preComElementValues = new List<ElementValue>();

        preComElementValues.AddPreComElement(KeyPreComConstants.DBPreCom, deferredElementValues.GetValue(KeyAccruedPensionConstants.AccruedDBPension)
                    - deferredElementValues.GetValue(KeyAccruedPensionConstants.PSOPensionDebit)
                    - deferredElementValues.GetValue(KeyAccruedPensionConstants.SchemePayPensionDebit));

        preComElementValues.AddPreComElement(publicSectorMemberInfo.CarePreComPen, deferredElementValues.GetValue(KeyAccruedPensionConstants.AccruedCAREPension));

        preComElementValues.AddPreComElement(KeyPreComConstants.Cash, deferredElementValues.GetValue(KeyAccruedPensionConstants.AccruedDBCash)
                    - deferredElementValues.GetValue(KeyAccruedPensionConstants.PSOCashDebit)
                    - deferredElementValues.GetValue(KeyAccruedPensionConstants.SchemePayCashDebit));

        preComElementValues.AddPreComElement(KeyPreComConstants.SpouseDBPreCom, deferredElementValues.GetValue(KeyAccruedPensionConstants.AccruedDBPension)
                    - deferredElementValues.GetValue(KeyAccruedPensionConstants.PSOPensionDebit));

        preComElementValues.AddPreComElement(publicSectorMemberInfo.SpouseCarePreComPen, deferredElementValues.GetValue(KeyAccruedPensionConstants.AccruedCAREPension));

        InterimValues.Add($""PreComElementValues for AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", preComElementValues);
        return preComElementValues;
    }

    public List<ElementValue> ApplyRetirementFactorToPreComElements(List<ElementValue> preComElementValues, Dictionary<ServiceCalcType, List<ServiceHistoryOverTrancheWithDuration>> serviceHistoryOverTrancheWithDurations)
    {
        decimal totalService = serviceHistoryOverTrancheWithDurations[ServiceCalcType.TotalService].Sum(x => x.FinalDecimalAmount);

        List<ElementValue> preComElementValuesWithRetirementFactors = new List<ElementValue>();

        foreach (ElementValue preComElement in preComElementValues)
        {
            switch (preComElement.Key)
            {
                case KeyPreComConstants.Cash:
                    preComElementValuesWithRetirementFactors.Add(CashElementCalculator.GetPensionElement(preComElement, totalService));
                    break;
                case KeyPreComConstants.DBPreCom:
                    preComElementValuesWithRetirementFactors.Add(PensionElementCalculator.GetPensionElement(preComElement, totalService));
                    break;
                case KeyPreComConstants.ReformCAREPreCom:					
                case KeyPreComConstants.CAREPreCom:
                    preComElementValuesWithRetirementFactors.Add(CAREElementCalculator.GetPensionElement(preComElement, totalService));
                    break;
                case KeyPreComConstants.SpouseDBPreCom:
                    preComElementValuesWithRetirementFactors.Add(SpousePensionElementCalculator.GetPensionElement(preComElement, totalService));
                    break;
                case KeyPreComConstants.SpouseReformCAREPreCom:	
                case KeyPreComConstants.SpouseCAREPreCom:
                    preComElementValuesWithRetirementFactors.Add(SpouseCAREElementCalculator.GetPensionElement(preComElement, totalService));
                    break;
                default:
                    break;
            }
        }

        InterimValues.Add($""PreComElementValuesWithRetirementFactors for AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", preComElementValuesWithRetirementFactors);
        return preComElementValuesWithRetirementFactors;
    }{noformat}

Calculate() methods that were previously using ERFs, now have two calls, e.g.😃 

{noformat}        var preComElementValues = CalculatePreComElements(accruedPensionValues.ToList());

        var pensionElementValues = ApplyRetirementFactorToPreComElements(preComElementValues, serviceHistoryOverTrancheWithDurations);{noformat}

In the Annual Allowance calc, “pensionElementValues” is set only to CalculatePreComElements.

{{var pensionElementValues = CalculatePreComElements(accruedPensionValues);}}",,,,,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,Done,28/Nov/25 10:56 AM
Create extension function that can return correct revaluation for Public Sector PI,PHX5-665,16787,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,14/Nov/25 7:15 AM,12/Jan/26 2:58 PM,,14/Nov/25 11:28 AM,Active To Deferred Fire Day 1,Active To Deferred Police Day 1,Active To Retired Fire Day 1,Active To Retired Police Day 1,Annual Allowance (Stand alone) Day 1,Client 172 Fire Annual Allowance Version 1,Client 176 Police Annual Allowance Version 1,,,,,,0,,,,,"We need an extension function to a list of decimal global reference values, that takes two dates.

The first date it needs to take the year from and append that year to PublicSectorPI and use that as the key

The second date it needs to us to filter down the range of values to get the revaluation factor to use.



Put the function in public sector functions",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6d63a8b2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800001000004,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_15192042,,14/Nov/25 11:28 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Already have function {{GetDecimalReferenceFactor}} in factors. Does what we need it to already.,,,,,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,Done,14/Nov/25 11:28 AM
Set up SchemePays strategy with revaluation,PHX5-664,16785,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,14/Nov/25 7:14 AM,12/Jan/26 2:58 PM,,18/Nov/25 3:56 PM,Active To Deferred Fire Day 1,Active To Deferred Police Day 1,Active To Retired Fire Day 1,Active To Retired Police Day 1,Annual Allowance (Stand alone) Day 1,Client 162 Police A to D Version 4,Client 162 Police A to R Version 2,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,Client 172 Fire Annual Allowance Version 1,Client 176 Police Annual Allowance Version 1,,0,,,,,"This new strategy need to make use of the new reval extension function ([https://xps-jira.atlassian.net/browse/PHX5-665|https://xps-jira.atlassian.net/browse/PHX5-665|smart-link] )

It need to get each scheme pay and reval each individually based on it stored date, revaluing up to the date of the calculation.

We need to ensure that both Scheme_Pays_debit_1987 and Scheme_Pays_debit_McCloud_1987 are picked up.",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@14f33348,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00olq:m,,,"Scheme Pays is now calculated by taking each scheme pay and multiplying it by the relevant PI factor. Using the table for the year of the calculation date, and looking up the factor within that table based on the effective from of the scheme pays.

All scheme pays are then summed up to calculate a single figure.

Tested using a case from Annual Allowance with 6 scheme pays.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 21,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-18 15:55:18.805,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_10693177_*|*_10252_*:*_1_*:*_234630330_*|*_10354_*:*_1_*:*_3209_*|*_10056_*:*_1_*:*_22569224,,"17/Nov/25 9:42 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272]  Do you have time to review this one?

The code is here:

[SchemePays - Global Module Editor|https://calculate.uat.xpsplc.com/global-modules/8]

Only other change made was to Factors to create {{GetGlobalDecimalReferenceFactor}}, which is a direct copy of {{GetDecimalReferenceFactor}} but for global factors.","18/Nov/25 3:55 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Checked the logic, i.e. Scheme Pays PI table selected is as at calculation date and those tables are named {{""PublicSectorPI{CalculationDate.Year}""}} (confirmed back to 2021).

Correctly errors for no factor or >1 factor and otherwise returns the factor within the correct date range.

Appears to be working correctly to revalue each {{memberSchemePayDebit}} and add them up.

Confirmed this part cannot be checked yet, since we don’t currently know where this data is held: _“We need to ensure that both Scheme_Pays_debit_1987 and Scheme_Pays_debit_McCloud_1987 are picked up.”_

Rest of code appears to be working as expected.",,,,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,Done,18/Nov/25 3:56 PM
Copy Police death in service client code,PHX5-663,16747,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 10:22 AM,03/Dec/25 2:24 PM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5abbc17c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000j0x,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14233,PHX5-276,Fire - Death In Service,To Do,13/Nov/25 10:22 AM
Set up Global Annual Allowance process flow,PHX5-662,16746,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 9:26 AM,12/Jan/26 2:58 PM,,16/Dec/25 1:58 PM,Annual Allowance (Stand alone) Day 1,Client 172 Fire Annual Allowance Version 1,Client 176 Police Annual Allowance Version 1,,,,,,,,,,0,,,,,"Need revaluation code in place so that we can revalue scheme pays

Need strategy pattern in place for opening balance, so we can code for taking from data, but allow option to recalculate if possible",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4d5eb1c8,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzhv,,,"Annual Allowance calc working from Public Sector Annual allowance (which includes test case set up), through PSC and into Annual Allowance code - first version on 176 Police ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 23,PHX5 Sprint 24,PHX5 Sprint 25,,,,8.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-12 13:33:17.911,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_171872214_*|*_10252_*:*_1_*:*_1207481395_*|*_10354_*:*_2_*:*_4755_*|*_10056_*:*_1_*:*_358392279_*|*_10356_*:*_1_*:*_782732039,,"12/Dec/25 1:33 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;I have done this in Public Sector Calculation and brought through to Annual Allowance (Police 176) and can confirm the builder is working as expected.

It gets the accruedelement values and also pension element values so we can use both the sum at pension element level but also extract scheme pay and PSO from the accrued element, where needed in the calc.

Note that the process has changes in Annual Allowance Template and scheme pays now has two figures (inc a b/f one seemingly), so I have raised a ticket to specifically focus on scheme pays and PSO annual allowance issues.",,,,,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,Done,16/Dec/25 1:58 PM
Set up Client level Annual Allowance Code,PHX5-661,16745,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 9:25 AM,12/Jan/26 2:58 PM,,18/Dec/25 9:18 AM,Annual Allowance (Stand alone) Day 1,Client 172 Fire Annual Allowance Version 1,Client 176 Police Annual Allowance Version 1,,,,,,,,,,0,,,,,,,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1b81211c,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzhzx,,,First version of AA calc running and relevant test cases passing. Police client 176,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 24,PHX5 Sprint 25,PHX5 Sprint 26,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-12 13:35:26.228,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1630_*|*_10252_*:*_1_*:*_2053_*|*_10354_*:*_2_*:*_5153_*|*_10056_*:*_1_*:*_358415656_*|*_10356_*:*_1_*:*_2612384901,,12/Dec/25 1:35 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Calc set up and in progress. Need devs to allow MemberAnnualAllowances to come through to main object and run time inputs on front end. Can test calcs on UAT side.,"17/Dec/25 6:36 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Have a straw calc for version 1 of the police AA.

Things missing for which there are tickets:

* PSO
* updating scheme pays to give care and db values
* testing and correcting part year annual allowance
* testing reform calcs (no test cases)",,,,,,,,,,,,,,,,,,,,,,,15614,PHX5-495,Annual Allowance,Done,18/Dec/25 9:18 AM
Copy Police deferred to retirement client code,PHX5-660,16744,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 9:24 AM,13/Nov/25 9:25 AM,,,Deferred To Retirement Day 1,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@73bd8cd5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00i9s:i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14442,PHX5-334,Fire - Deferred to Retirement,To Do,13/Nov/25 9:24 AM
Set up Client level death in deferment code,PHX5-659,16743,Story,Dev required,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 9:22 AM,13/Nov/25 9:23 AM,,,Death In Deferment Day 1,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@239e7c26,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00i6g:i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14406,PHX5-299,Police - Death in Deferment,To Do,13/Nov/25 9:22 AM
Set up base revaluation strategy,PHX5-658,16742,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Russell Armstrong,640f34fc1273131f2adfede9,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 9:21 AM,02/Jan/26 12:56 PM,,16/Dec/25 2:00 PM,Client 172 Fire D to R Version 1,Client 176 Police D to R Version 1,,,,,,,,,,,0,,,,,"This will need to take an element value and revalue using Public Sector PI

We have a revaluation module, but we need to tie in the new PI revaluation code into the base strategy.",,Andrew Wilson,Russell Armstrong,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@ce94853,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:r,,,Created two different scenarios for revaluation - where revaluation applies and where it doesn’t,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 24,PHX5 Sprint 25,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-12-15 16:37:42.453,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_528075301_*|*_10252_*:*_1_*:*_12851_*|*_10354_*:*_1_*:*_531045159_*|*_10056_*:*_1_*:*_1731919486,,15/Dec/25 4:37 PM;640f34fc1273131f2adfede9;Set up {{NotEligibleRevaluationStrategy}} and{{EligibleRevaluationStrategy}}. Can be found in the Public Sector Revaluation module. Both can be used from {{RevaluationFactory}},,,,,,,,,,,,,,,,,,,,,,,,14400,PHX5-294,Police - Deferred to Retirement,Done,16/Dec/25 2:00 PM
Set up Deferred to Retired Client Code,PHX5-656,16740,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Russell Armstrong,640f34fc1273131f2adfede9,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 9:19 AM,02/Jan/26 12:56 PM,,17/Dec/25 10:26 AM,Client 176 Police D to R Version 1,Deferred To Retirement Day 1,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@31991427,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:uzi,,,Initial set up of Deferred to Retirement code to ensure it is running,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 25,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_152321086_*|*_10252_*:*_1_*:*_2785_*|*_10354_*:*_1_*:*_1053670516_*|*_10056_*:*_1_*:*_1732017711,,,,,,,,,,,,,,,,,,,,,,,,,,14400,PHX5-294,Police - Deferred to Retirement,Done,17/Dec/25 10:26 AM
Target Lump Sum,PHX5-655,16739,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 9:10 AM,24/Nov/25 2:43 PM,,,Active To Retired Fire Day 1,Active To Retired Police Day 1,Deferred To Retirement Day 1,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-200,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@788fdce1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-3,,,,,,,,,,,,,,yellow,,,,,,,,,,,,,0|i00otr:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,13/Nov/25 9:10 AM
ER Buyout,PHX5-654,16738,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 9:09 AM,24/Nov/25 2:45 PM,,,Active To Retired Fire Day 1,Active To Retired Police Day 1,Deferred To Retirement Day 1,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,PHX5A-197,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@94de249,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-9,,,,,,,,,,,,,,orange,,,,,,,,,,,,,0|i00otj:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,13/Nov/25 9:09 AM
Deferring CARE,PHX5-653,16737,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 9:09 AM,13/Nov/25 9:09 AM,,,Active To Retired Fire Day 1,Active To Retired Police Day 1,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6eebd93e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-12,,,,,,,,,,,,,,grey,,,,,,,,,,,,,0|i00otb:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,13/Nov/25 9:09 AM
Retirement missed pincs,PHX5-651,16735,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 9:07 AM,05/Dec/25 6:34 AM,,,Active To Retired Fire Day 1,Active To Retired Police Day 1,Deferred To Retirement Day 1,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-245,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@39167dc2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-4,,,,,,,,,,,,,,dark_blue,,,,,,,,,,,,,0|i00osv:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,13/Nov/25 9:07 AM
CARE Revaluation for missing year,PHX5-650,16734,Epic,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 9:06 AM,14/Nov/25 9:44 AM,,,Active To Deferred Fire Day 1,Active To Deferred Police Day 1,Active To Retired Fire Day 1,Active To Retired Police Day 1,Death In Service Day 1,,,,,,,,0,,,,,Care roll up calc,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@506c49b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-13,,,,,,,,,,,,,,dark_green,,,,,,,,,,,,,0|i00osn:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Nov/25 9:44 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Still discussions on whether this is required, or what this is covering.",,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,13/Nov/25 9:06 AM
Age 55 PI Step Up,PHX5-649,16733,Epic,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 9:06 AM,14/Nov/25 9:42 AM,,,PINC Day 1,,,,,,,,,,,,0,,,,,"Depending on what is decided, might also impact A to R",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2360ca63,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-1,,,,,,,,,,,,,,dark_grey,,,,,,,,,,,,,0|i00osf:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,13/Nov/25 9:06 AM
Scheme Sanction Charge,PHX5-648,16732,Epic,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 9:03 AM,24/Nov/25 2:47 PM,,,Active To Retired Fire Day 1,Active To Retired Police Day 1,Deferred To Retirement Day 1,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-195,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3744a29d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-5,,,,,,,,,,,,,,dark_teal,,,,,,,,,,,,,0|i00os7:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14/Nov/25 9:40 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Only placeholder on spec. Admin still to provide details. No test cases,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,13/Nov/25 9:03 AM
Spouses Pension DID,PHX5-646,16730,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 9:01 AM,18/Nov/25 1:37 PM,,,Death In Deferment Day 1,,,,,,,,,,,,0,,,,,"Details for spouse entitlement under DID calcs are consistent across all schemes, DB and CARE, fire and police.  The specs are yet to be signed off so this is subject to change.

Spouse pension = (member’s pre-commutation pension plus PI to DOD) x 50%

As this is a death in deferment calc, we will need guidance on what is meant by pre-commutation pension, as I wouldn’t expect this to be calculated for the member.  (There is a chance that the DID specs are copied from the DIR specs and haven’t yet been updated, which would explain the reference to pre-comm.)

*We will need admin input and/or test cases for this.*  ",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@53b699b6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800gm9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,16726,PHX5-642,Spouses pensions,To Do,13/Nov/25 9:01 AM
Spouses Pension D to R,PHX5-645,16729,Story,READINESS REVIEW,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 9:01 AM,02/Jan/26 3:52 PM,,,Deferred To Retirement Day 1,,,,,,,,,,,,0,,,,,"For both fire and police D>R _(specs not yet signed off, below is subject to change)_:

* DB spouse pension = (member’s deferred DB pension x PI factor - PSO debit) x 50%
* CARE spouse pension +(from legacy schemes, not 2015)+ = [member’s deferred CARE + TVin (already incl) + joint life added pension x PI factor - PSO debit - CARE deferred commuted pension (this is calculated within the D>R itself)] x 50%
** The specs imply that the PI factor is applied only to the added pension element, I’d like to confirm this is correct before we proceed.
* 2015 CARE spouse pension = +Spouse CARE pension+ (calculated at time of deferment so held on record somewhere) x PI factor x PYRV - (PSO debit x 50%) - (CARE deferred commuted pension x 50%)
** It is possible that PYRV applies only to Police, but TBC as specs not yet signed off

So before we are in a position to code this, we need PI factors, ‘CARE deferred commuted pension' and ‘Spouse CARE pension’ to all be coded, or at least we need to know what they will involve.

I don’t think we have any suitable tests for this yet.  I suggest we revisit when D>R specs are signed off and we’ve started on some other aspects of D>R calcs.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5f1e0d1d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y000000i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,16726,PHX5-642,Spouses pensions,To Do,13/Nov/25 9:01 AM
Spouses Pension A to D,PHX5-644,16728,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 9:01 AM,01/Dec/25 3:15 PM,,25/Nov/25 1:57 PM,Active To Deferred Fire Day 1,Active To Deferred Police Day 1,Client 162 Police A to D Version 7,Client 164 Fire A to D Version 2,,,,,,,,,0,,,,,"For both police and fire A>D:

* DB Spouse pension = 50% of member’s accrued DB pension (specs note to include pension from added years, which is included at service calculation stage so already included in accrued pension; no extra action to take)
* CARE Spouse pension = 50% of member’s accrued CARE pension (specs note to include any TVin and joint life added pension; TVin already included at CalculateAccrued stage, added pension not yet coded, but expected to be included in member’s accrued elements)

So we can use the {{DefaultSpousesPensionStrategy}} which just applies spouse % to an element value.  Need to amend {{SpousesPensionFactory}} to check calc type I think, as we only want to use the {{CARESpousesPensionStrategy}} on A>R, not A>D.

I think we need to amend {{CalculateDeferredElementValues}} similarly to how we amended {{CalculateRetirementElements}}, to create the spouse elements and then send all elements (member and spouse) through the relevant deferred strategies.

The existing deferred element strategies (eg {{DBPensionDeferredElementStrategy}}) also need amending to just return key and value.  I think these are as simple as just returning the value with the correct key, no additional logic needed.",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2bd5bbf4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xy,,,Spouse deferred pension element amounts for Police and Fire A>D are 50% of the associated member’s deferred amount.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 22,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-19 16:30:00.714,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_259763225_*|*_10252_*:*_1_*:*_13300812_*|*_10354_*:*_1_*:*_5368_*|*_10056_*:*_1_*:*_444354367,,"19/Nov/25 4:30 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;The logic for Spouse’s on A>D is so simple (see 2 bullet points in description above) that I actually don’t think we do need new strategies.

The existing strategies under {{IDeferredElementStrategy}} in *Public Sector Calculation* incorporate the spouse’s amount into the member’s elements, by simply applying 50% to the member amount, eg:

{noformat}  return
      new ActiveToDeferredElementValue
      {
          AuroraId = MemberInfo.AuroraId,
          Key = DeferredElementKey,
          Value = accruedElementValues.GetValue(KeyAccruedPensionConstants.AccruedDBCash),
          SpouseValue = ((accruedElementValues.GetValue(KeyAccruedPensionConstants.AccruedDBCash)
                          - accruedElementValues.GetValue(KeyAccruedPensionConstants.PSOCashDebit)) * 0.5m).Round(2)
      }{noformat}

There is one of these deferred element strategies each for DB pension, DB cash, and CARE.  All I needed to amend was the deducting the PSO cash debit in the example above ({{DBCashDeferredElementStrategy}}), before applying spouse %.  The existing strategies for DB pension ({{DBPensionDeferredElementStrategy}}) and CARE ({{CAREPensionDeferredElementStrategy}}) were already correct, so no changes made.","21/Nov/25 4:16 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+Testing:+

Although we don’t have official signed-off spouse figures from admin, we do have the altair prints of the A>D test cases, which show spouse amounts.  I have spot checked some of the spouse results we’re getting on the Police A>D calc; I can’t actually agree amounts against altair as the member’s figures have pretty much all changed since the test matrix was put together, but I can see that the correct logic is being applied (ie. spouse amount for each element value is 50% of the member’s amount).

There is only one of the A>D tests (test 6) that I don’t agree the logic on but I believe is an altair error as the figures are wildly out and make no sense.  In the absence of real test cases from admin, I think we have to assume that test 6 is wrong on altair, and just wait for admin to do their own testing to confirm if anything is incorrect on this.",24/Nov/25 7:36 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] Whilst I would normally agree that it looks like we do not need a strategy - are we sure that will always be the case? It would be easier to get strategies in now even if they are very simple ones.,,,,,,,,,,,,,,,,,,,,,,16726,PHX5-642,Spouses pensions,Done,25/Nov/25 1:57 PM
Spouses Pension DIS,PHX5-643,16727,Story,READINESS REVIEW,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 9:01 AM,18/Nov/25 1:27 PM,,,Death In Service Day 1,,,,,,,,,,,,0,,,,,"For both police and fire DIS _(subject to change as DIS spec not yet signed off)_ :

* 1987 / 1992 DB spouse pensions = member’s DB higher tier ill-health pension x 50%
** The member’s higher tier IH pension should be coded already, and should include added years, less PSO, plus any additional benefits for Fire (CPD, LSI, etc)
** Please note that the DIS specs currently state that calcs for higher tier ill-health do run through Altair, but that ill-health underpin, IH enhancement ‘in some cases’, and CARE IH enhancement are not automated.  *Will likely need further info on this*
* 2006 DB spouse pensions = member’s accrued DB pension x 50%
** Includes added years, less PSO, etc.  Already coded
* There is no spouse entitlement under the CARE portion of the legacy schemes (as all CARE paid out of 2015 I believe).  This means we need to ensure either that the corresponding SpouseReformCARE elements are not created, or are set to 0
* 2015 CARE spouse pension = member’s CARE ill-health pension x 50%
** As above, the member’s IH entitlement should already be coded to include CARE, TVin, joint life added pension, higher tier IH enhancement, less PSO



Under the 1987 / 1992 schemes, there is also a ‘13 week enhancement’ due after the initial spouse calculation.  

* Enhancement = Max(0, PayForDISCheck _(runtime input)_ - spouse pension paid - child pension paid)

It is not clear from the specs if the spouse and child amounts are supposed to be the annual entitlements or the pension arrears paid to a certain date or something else.  *Will definitely need more information and test cases for this.*",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@149069ca,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800go,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,16726,PHX5-642,Spouses pensions,To Do,13/Nov/25 9:01 AM
Spouses pensions,PHX5-642,16726,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 8:58 AM,13/Nov/25 8:59 AM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@e0727da,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-2,,,,,,,,,,,,,,dark_yellow,,,,,,,,,,,,,0|i00orz:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,13/Nov/25 8:58 AM
Remedy Contribution Process (GAD),PHX5-641,16725,Epic,READINESS REVIEW,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Nov/25 7:17 AM,14/Nov/25 9:39 AM,,,Active To Retired Fire Day 1,Active To Retired Police Day 1,Deferred To Retirement Day 1,,,,,,,,,,0,,,,,Picking up data on member’s record and applying a factor.,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-196,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7bc4a326,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-10,,,,,,,,,,,,,,blue,,,,,,,,,,,,,0|i00orr:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,13/Nov/25 7:17 AM
FPS 1992 - accrual strategy to be coded,PHX5-640,16690,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,12/Nov/25 3:54 PM,01/Dec/25 3:15 PM,,01/Dec/25 2:53 PM,Client 164 Fire A to D Version 2,,,,,,,,,,,,0,,,,,"From A>D spec:

{adf:display=block}
{""type"":""table"",""attrs"":{""isNumberColumnEnabled"":false,""layout"":""center"",""localId"":""fc45a500-2dd2-42e9-93ed-987302c0edb6""},""content"":[{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":6},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Deferred Pension Calculation""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Name""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Description""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Further comments""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""ServiceTo20Years""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""MIN(Min(30, DB_Deferred_QualifyingService) , 20)""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""ServiceOver20Years""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""MAX(Min(30, DB_Deferred_QualifyingService) - 20, 0)""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_ProspectiveAge""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""55 where rank = Firefighter, Crew Manager, Watch Manager, Station Manager A""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""60 for other ranks""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_ProspectiveService""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""MIN(Min(30, DB Qualifying Service [DJS to DB_ProspectiveAge ]) , 20)""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_ProspectiveService_Over20Years""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""MAX(Min(30, DB Qualifying Service [DJS to DB_ProspectiveAge ]) - 20, 0)""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_ProspectiveService_Doubling""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_ProspectiveService + (DB_ProspectiveService_Over20Years x 2)""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_DeferredPen_60""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""(DB_Deferred_QualifyingService / (DB_ProspectiveService + DB_ProspectiveService_Over20Years)) x (DB_ProspectiveService_Doubling / 60) x DB_final_pay_1992 x""},{""type"":""hardBreak""},{""type"":""text"",""text"":""(DB Deferred_ReckonableService / DB_Deferred_QualifyingService)""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_SplitPen""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""TBC""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Taken from Pre Commutation module""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_CPD""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Taken from Pre Commutation module""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_LSI""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Taken from Pre Commutation module""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_TempDuty""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Taken from Pre Commutation module""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_AddedYears_Pen""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Taken from Pre Commutation module""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_DeferredPen_Total""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_DeferredPen_60 or DB_SplitPen""},{""type"":""hardBreak""},{""type"":""text"",""text"":""Plus DB_CPD""},{""type"":""hardBreak""},{""type"":""text"",""text"":""Plus DB_LSI""},{""type"":""hardBreak""},{""type"":""text"",""text"":""Plus DB_TempDuty""},{""type"":""hardBreak""},{""type"":""text"",""text"":""Plus DB_AddedYears_Pen""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]}]}
{adf}

This will be similar to {{PublicSectorAccrualDeferredDoubleStrategy}} for police, so we can start with a copy of that.  Will also need a new version of {{GetProspectiveDate}}.  This will also need testing, including testing any new functions outside of the strategy (eg for GetProspectiveDate)",,Andrew Wilson,Annabelle Stephenson,April Woods,Steven Wright,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4603561d,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xz,,,Active to deferred calculations for Fire FPS1992 category members will now use the deferred double accrual strategy when calculating the deferred pension. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 22,PHX5 Sprint 23,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-25 13:09:36.25,10281_*:*_1_*:*_2275_*|*_10251_*:*_2_*:*_11204758_*|*_10250_*:*_2_*:*_314870195_*|*_10252_*:*_2_*:*_358279725_*|*_10354_*:*_3_*:*_93863266_*|*_10056_*:*_1_*:*_420328458_*|*_10355_*:*_1_*:*_427646914,,"21/Nov/25 2:32 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;i’ve asked Isobel for the Fire rank info (eg. Firefighter = F1) so we can set prospective date.

Otherwise, this follows the same logic as the double accrual for police when deferred age = 60.  Fire does not have an equivalent deferred age, so we just need an additional criteria check on scheme type.

At some stage when we have coded the additional elements (CPD, LSI, etc), these will need to be incorporated into {{ActiveToDeferredResult}} and added to accrued pension, possibly within {{CalculateDeferredElementValues}}","21/Nov/25 4:52 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Hi [~accountid:712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd] can you clarify something on the Ranks information for Fire schemes please?  I note from the spec above that prospective age is 55 for certain ranks, and Isobel has kindly sent me some info outlining which IDs/codes various ranks use, from which I’ve identified the following:

|Firefighter|Crew Manager|Watch Manager|Station Manager|Firefighter to Station Manager|
|F1|L1|S1|T1|01|
|F4|L4|S4|T4|04|
|F6 ?|L6 ?|S6 ?|T6 ?|06 ?|
|F9 ?|L9 ?|S9 ?|T9 ?|09 ?|

* Firstly I could not see “Station Manager A” anywhere in the lists so have made an assumption this was a typo and should in fact be “Station Manager”.  Please confirm.
* Secondly, the F6, L9 etc are queries because they are listed as “Crew Manager - 2015” for example, rather than just “Crew Manager”.  Should these 6 and 9 codes be included too?
* Lastly, I noted several variations on “FF to Station Man” rank types.  Should these members get prospective age 55 as well?  Or default to age 60?

Thanks in advance","25/Nov/25 1:09 PM;712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd;Hi [~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] 1. Whilst there is a role that is Station Manager A and B it doesn’t appear to be a distinction that is currently made in Altair, so yes please if we can have it as Station Manager. 2. There is a distinction between Crew Manager and Crew Manager 2015 within the existing data, so please include both codes. 3. There are old emp types within the data that show as “FF to Station Manager” that will be migrated, please can these default to age 55? Let me know if you need anything else, Thanks, April","28/Nov/25 11:47 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;# PublicSectorMemberInfo Module - updated GetProspectiveDate function for the various rank strings to use a hashset instead of a switch. The switch was starting to become very large with the extra fire ranks. Added some validations to deal with no rank being found or a rank not being present in the hashset. Commented out old function until review is complete. Added extra logic to GetDeferredAge to blanket set deferredage to 60 if the scheme is fire. 
# In PublicSectorCalculationModule - Added new if statement in AccruedPensionCalculatorFactory which will check if the calculation type is A>D, if it is, use the existing PublicSectorAccrualDeferredDoubleStrategy as it will then go through the deferred age 60 if statement within that strategy. No update needed to the strategy as logic the same as police for deferred age60. ",28/Nov/25 2:57 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e] Just passing back while you add the test cases,01/Dec/25 11:37 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Added two tests in PublicSectorMemberInfo. Added comments next to each rank in the GetProspectiveDate hashset to explain which ranks are police and fire and their sub categories. Published module and updated dependency in PublicSectorCalculation. Added AccruedPensionCalculatorDBOnlyTest FPS1992 A>D test to PublicSectorCalculation to test active to deferred calc type for FPS1992 category then runs through the deferred double accrual strategy. ,,,,,,,,,,,,,,,,,,,16496,PHX5-619,Fire - Active To Deferred,Done,01/Dec/25 2:53 PM
Fire A>D - due date strategies,PHX5-639,16689,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,12/Nov/25 3:49 PM,28/Nov/25 5:21 PM,,19/Nov/25 6:36 AM,Client 164 Fire A to D Version 1,,,,,,,,,,,,0,,,,,"From Fire A>D spec:

* FPS 1992 due date = age 60
* NFPS 2006 due date = 65
* CARE 2015 = state pension age

We have an age 65 strategy already, just need to make a copy of this for the age 60 strategy, and update the {{DeferredDueDateFactory}} accordingly",,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@476b069b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007o,,,Set pension element due dates on Fire schemes (A>D),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 21,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_5808945_*|*_10252_*:*_1_*:*_91240610_*|*_10354_*:*_1_*:*_2968_*|*_10056_*:*_1_*:*_420646237,,"18/Nov/25 3:36 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Very simple change, I created {{Age60DueDateStrategy}} in Public Sector Calc, and assigned it to FPS1992 in {{DeferredDueDateFactory}} (also Public Sector Calc module)

Not bothered with any tests as we know the strategy will work as is the same as age 65 strat.  Equally we don’t need to test that the factory selects the correct strategy.

Strategies for NFPS and CARE were already correct, no changes made.",,,,,,,,,,,,,,,,,,,,,,,,16496,PHX5-619,Fire - Active To Deferred,Done,19/Nov/25 6:36 AM
Police A>R (Client 162) Test 18 and 21: Ill Health update needed in Police A>R,PHX5-638,16688,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,12/Nov/25 2:21 PM,28/Nov/25 5:19 PM,,14/Nov/25 8:36 AM,Client 162 Police A to R Version 1,,,,,,,,,,,,0,,,,,Need to change Care ill health start date to 2015,,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-630,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@16ba1e8c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:zr,,,"To move Ill Health CARE Start date to 2015, rather than assign DCPS of 2022. Needed as Option 1 and Option 2 are based on years of service.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 21,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-14 08:36:32.326,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_261583_*|*_10252_*:*_1_*:*_96109461_*|*_10354_*:*_1_*:*_3036_*|*_10056_*:*_1_*:*_8224,,"13/Nov/25 5:03 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;This required the code we discussed re adding an ill health query into {{PublicSectorServiceFactory}} so that ill health members have their Normal record care start date in 2015, not DCPS (2022).

Originally it was suggested I added a new type “ServiceCalcType.IllHealthCAREOnly” but I didn’t see this was necessary seen as the Salary Linked Record will correctly assign .WithCARERemedy to Pre22ReformCARE anyway and so the only figure that needs updating is the careIllHealthStartDate for CARE benefits on the normal member record, which would override usual CAREBenefits rather than be produced in addition.

I may be wrong, but the below code seemed adequate and test cases 18 and 21 are now passing.

{noformat}        if (illHealth != IllHealthType.None) 
        {
            LocalDate careIllHealthStartDate = careStartDate;
            if (memberInfo.McCloud == true)
            {
                careIllHealthStartDate = DateConstants.CareRemedyCareStartDate; // sets to 2015 for McCloud ill-health calcs since DCPS is at 2022 on member records
            }
            serviceCARETranche.Add(new ServiceTranche { EffectiveFrom = careIllHealthStartDate, EffectiveTo = schemeServiceEndDate, Key = ""CARE"" }); 
    
            IServiceBuilder careServiceBuilder = GetServiceBuilder(servicePeriods, serviceBreaks, memberInfo, careIllHealthStartDate, schemeServiceEndDate, serviceCARETranche, ServiceMethod.PublicSectorCAREOnly);
            serviceCalculations.Add(ServiceCalcType.CAREOnly, careServiceBuilder.Build()); // Removed ServiceCalcType.CAREIllHealth as not needed - if ReformCARE uses .WithLegacyRemedy anyway
        }{noformat}","13/Nov/25 5:07 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Fix below, but just had a thought about this. I think I was told that all members with this option would have care from 2015 based on what category they were in, which begs the question, are they not all over 5 years service, which is the reason for needing the check in the first place?

If this is not the case and some could have a start date after 2015, then I’m not sure how we can set the logic to know when they started, given DCPS is always 2022?",14/Nov/25 8:36 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] I think we would need a test case to prove this scenario before we code anything.,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,14/Nov/25 8:36 AM
Police A>D test 12 - Amending test member as data is incorrect,PHX5-637,16687,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,12/Nov/25 12:29 PM,03/Dec/25 11:03 AM,,,,,,,,,,,,,,,0,,,,,"Confirmed with admin that the data on record in Altair (and migrated to Aurora) is incorrect and missing service periods

!image-20251112-123051.png|width=819,alt=""image-20251112-123051.png""!

!image-20251112-123118.png|width=392,alt=""image-20251112-123118.png""!",,Andrew Wilson,Annabelle Stephenson,Chris Marshall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14/Nov/25 12:29 PM;18934601-32fa-4c76-9b74-159dc94fd206;474982 POLICE A to D.docx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11525,12/Nov/25 3:07 PM;18934601-32fa-4c76-9b74-159dc94fd206;Request for additional A-D test.msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11490,12/Nov/25 12:31 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251112-123051.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11485,12/Nov/25 12:31 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251112-123118.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11486,12/Nov/25 12:32 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251112-123152.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11488,12/Nov/25 12:32 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251112-123217.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11487,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@66a73147,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008000010009,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-12 15:07:21.657,,,"12/Nov/25 12:32 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f] confirmed 

!image-20251112-123152.png|width=436,alt=""image-20251112-123152.png""!

!image-20251112-123217.png|width=556,alt=""image-20251112-123217.png""!",12/Nov/25 3:07 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Email sent to Tracy requesting new test to replace this.  Will add response here if/when I receive it[^Request for additional A-D test.msg] ,"14/Nov/25 12:29 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Tracy has sent details of another member that should test against all of the same parameters as the original test.  Info attached, need to set up test in A>D[^474982 POLICE A to D.docx] ","03/Dec/25 10:31 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  Given that we seem to have been given a new test case, can this ticket be closed? Is the original test cases redundant? If so, remove and replace with the new one.",03/Dec/25 10:45 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Yes this can be closed now,03/Dec/25 10:53 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] Has the new test case been added to A>D calc?  Don’t we need to do that first?,03/Dec/25 11:03 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] Sorry yes there is a new test case that has been added,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,To Do,12/Nov/25 12:29 PM
Police A>D test 18 - NPPS pen and LS not being output,PHX5-636,16684,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,12/Nov/25 11:48 AM,28/Nov/25 5:09 PM,,17/Nov/25 10:43 AM,Client 162 Police A to D Version 3,,,,,,,,,,,,0,,,,,CARE pension outputs correctly. Need to output NPPS pen & LS,,Andrew Wilson,Chris Marshall,Naomi Robinson,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,17/Nov/25 10:26 AM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251117-102617.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11559,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6795a11c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:v,,,Added .WithoutMcCloud ActiveToDeferredBuilder for linked records of NonMcCloud members (some have a linked NPPS record which needs PEN and RA outputs).,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 21,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-17 10:26:22.164,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_322253787_*|*_10252_*:*_1_*:*_95789556_*|*_10354_*:*_1_*:*_3149_*|*_10056_*:*_1_*:*_9066794,,"17/Nov/25 10:26 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Added this code to line 85 in client 162, calculation 3 (the non published one), to ensure we output results for Non-McCloud members with NPPS linked records:

{noformat} if (activeNormalMemberInfo.McCloud == false && LinkedMembers != null)
        {
            IActiveToDeferredCalculator activeSalaryLinkedNonMcCloudDeferredCalculator = new PublicSectorCalculationBuilder(activeSalaryLinkedMemberInfo, activeSalaryLinkedMemberData, GlobalReferenceData, ConvertToSchemeReferenceData(ClientReferenceData), CategoryReferenceData, illHealth, Parameters.DateOfLeaving, Parameters.CareSalaries, CalculationType.ActiveToDeferred)
                        .WithoutMcCloud(activeSalaryLinkedMemberData.ServicePeriods, activeSalaryLinkedMemberInfo.DateCommencedPensionableService)
                        .WithParameters(fppParameter)
                        .BuildActiveToDeferred();

            ActiveToDeferredResult activeSalaryLinkedNonMcCloudResult = activeSalaryLinkedNonMcCloudDeferredCalculator.Calculate();

            var memberCareOutputSalaryLinkNonMcCloud = MapMemberCareOutput(activeSalaryLinkedNonMcCloudDeferredCalculator.MemberCARE, latestExistingCareSalaryLink);         

            result.MemberCares.Add(activeSalaryLinkedMemberInfo.AuroraId, memberCareOutputSalaryLinkNonMcCloud);
            result.ElementValues.AddRange(activeSalaryLinkedNonMcCloudResult.ElementValues);
        }{noformat}

Can see test 18 now passes with the two correct, expected results, previously not being populated: 

!image-20251117-102617.png|width=456,alt=""image-20251117-102617.png""!","17/Nov/25 10:28 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Note: This has not been copied into the UAT calc and published. Suggest it could be as its just a change to the A>R code itself, allowing Non-Cloud members to get all necessary outputs, where they have a linked record.",,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,17/Nov/25 10:43 AM
A>D test 14 & 15 - CARE TVIN amount and CARE main pen not being added together,PHX5-635,16683,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,12/Nov/25 11:47 AM,01/Dec/25 2:58 PM,,28/Nov/25 10:55 AM,Client 162 Police A to D Version 7,,,,,,,,,,,,0,,,,,CARE main pen and TVIN CARE pen are output on interim values just not added together to output correct pension,,Andrew Wilson,Chris Marshall,Naomi Robinson,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,PHX5-687,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@67c733ef,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:x,,,"Making sure all current care element values are added to final element value, if there are more than one (e.g. main and TVIN) rather than just selecting the one at the top of the table.

CalculateAccruedCAREPensionadded to Public Sector Functions to achieve this.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 21,PHX5 Sprint 22,PHX5 Sprint 23,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-18 17:11:18.901,10251_*:*_2_*:*_395888989_*|*_10250_*:*_2_*:*_103481980_*|*_10252_*:*_1_*:*_528594024_*|*_10354_*:*_1_*:*_7889_*|*_10056_*:*_1_*:*_9212165,,18/Nov/25 5:11 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Just need to speak to Steven about some logic in the CARE module. Will catch up 19/11.,19/Nov/25 4:17 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Would suggest {{PublicSectorCARECalculationFactory}}etc needs to be checked for whether all types have the correct inflation and future inflation being applied.,"19/Nov/25 4:50 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Fix tested via Police A>D test 15 which now matches expected CARE output.

Police A>D and A>R brought up to latest dependency to check no extra test cases failing. No issues found.

Work performed:

Changed the below code such that any care types with the same effective from date (as long as it was the latest) is added to the care element value being output. this should be the total of the MemberCares in the A>D output.



{noformat}if (careHistory.Any())
        {
            if (elementValues.Where(x => x.Key == KeyAccruedPensionConstants.AccruedCAREPension).Any())
            {
                elementValues.Where(x => x.Key == KeyAccruedPensionConstants.AccruedCAREPension).First().Value += careHistory.OrderByDescending(x => x.EffectiveFrom).First().TotalPension;
            }
            else
            {
                elementValues.Add(new ElementValue { Key = KeyAccruedPensionConstants.AccruedCAREPension, Value = careHistory.OrderByDescending(x => x.EffectiveFrom).First().TotalPension });
            }
            InterimValues.Add($""AccruedCARE for AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", elementValues.Where(x => x.Key == KeyAccruedPensionConstants.AccruedCAREPension).First().Value);
        }{noformat}

replaced with:

{noformat}if (careHistory.Any())
        {
            var latestDate = careHistory.Max(x => x.EffectiveFrom);

            var latestTotal = careHistory
                .Where(x => x.EffectiveFrom == latestDate)
                .Sum(x => x.TotalPension); // Adds together all lines of care history that are effective from the same date (to include all current TVINs)

            var existingElement = elementValues
                .FirstOrDefault(x => x.Key == KeyAccruedPensionConstants.AccruedCAREPension);

            if (existingElement != null)
            {
                existingElement.Value += latestTotal;
            }

            else
            {
                elementValues.Add(new ElementValue 
                { 
                    Key = KeyAccruedPensionConstants.AccruedCAREPension, 
                    Value = latestTotal 
                });
            }

            InterimValues.Add(
                $""AccruedCARE for AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption}"", elementValues.First(x => x.Key == KeyAccruedPensionConstants.AccruedCAREPension).Value
            );
        }
{noformat}

I have looked through the underlying code for careHistory and think that the necessary work to ensure the list only includes types required in both the final element Value and memberCares would go there. Also, it will only add together any records held at the latest available date, so will, for example, only add a TVIN record to the Main record if they are both kept up to date.

I have raised another ticket for someone to go through {{PublicSectorCARECalculationFactory}}(which produces careHistory) to make sure all the required care types and their required inflation are included/ excluded as necessary. There are 21 possible types but our code only applies inflation to some of them. We should be more specific with the 21 available and filter out any legacy ones and check inflation for all others.","24/Nov/25 6:50 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;For neatness, I would move the calculation of the CARE element into a sub function, and leave {{CalculateAccruedPensionValues}} with simple logic that just goes through and adds each type one by one.

This simplifies logic in {{CalculateAccruedPensionValues}} , and makes the sub function for CARE more easily testable","24/Nov/25 11:53 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Added this sub function directly underneath {{CalculateAccruedPensionValues}}:

Let me know if best placed elsewhere - seemed best to keep in this module (since it is returning element values not care salaries or care history) and also seemed best to keep in this region.

{noformat}    public ElementValue CalculateAccruedCAREPension(List<MemberCare> careHistory)
    {
        if (!careHistory.Any())
        {
            return null;
        }

        var latestDate = careHistory.Max(x => x.EffectiveFrom);

        // Add together all lines of care history that are effective from the same date (to include all current TVINs)
        var latestTotal = careHistory
            .Where(x => x.EffectiveFrom == latestDate)
            .Sum(x => x.TotalPension); 
            
        var careElement = new ElementValue
        {
            Key = KeyAccruedPensionConstants.AccruedCAREPension,
            Value = latestTotal
        };

        InterimValues.Add(
            $""AccruedCARE for AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption}"",
            careElement.Value
        );

        return careElement;
    }{noformat}

{{CalculateAccruedPensionValues}} was returned to just adding to existing care or creating an element, as before:

{noformat}        var careElement = CalculateAccruedCAREPension(careHistory);
        if (careElement != null)
        {
            var existingElement = elementValues.FirstOrDefault(x => x.Key == KeyAccruedPensionConstants.AccruedCAREPension);
            if (existingElement != null)
            {
                existingElement.Value += careElement.Value;
            }

            else
            {
                elementValues.Add(careElement);
            }
        }{noformat}",25/Nov/25 6:59 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] If anywhere I would have put that in Public Sector Functions.,25/Nov/25 2:02 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Added now to Public Sector Functions and called into CalculationAccruedPensionValues in Public Sector Calculation,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,28/Nov/25 10:55 AM
Fire Active To Deferred Test 1 - value cannot be null error.,PHX5-634,16682,Bug,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,12/Nov/25 10:53 AM,28/Nov/25 5:21 PM,,14/Nov/25 8:37 AM,Client 164 Fire A to D Version 1,,,,,,,,,,,,0,,,,,"

!image-20251112-105956.png|width=720,alt=""image-20251112-105956.png""!

Update from SW 13/11/2025: 

A transfer in service history over tranche duration was being added to the object when there was no transfer in and all data was null or 0. Added some defensive coding in Service Static module > GetTotalPeriod to avoid an error triggering. Traced the empty service tranche object to the Transfer In code in Public Sector Calculation module and added additional logic in CalculateTransferInService() function that will check if PartTimeAdjustedDuration is not null & FinalDecimalAmount is greater than 0 - if they are, add one in. [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452]  could you review my service static module update before publish please.

Test case GetTotalPeriod - Null PartTimeAdjustedPeriod added to ServiceStaticModule. Code and log.debug working as expected.",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,12/Nov/25 11:02 AM;bfea69ca-e7d9-488d-b01b-103621fa1516;image-20251112-105956.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11484,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2b3e2a18,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:y,,,,A>D Test Member 1 Erroring - Fix applied to CalculateTransferinService () function to avoid null a service history tranche for transfer in’s being created.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 21,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_99354098_*|*_10252_*:*_1_*:*_3208236_*|*_10354_*:*_1_*:*_1566794_*|*_10056_*:*_1_*:*_196965,,,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,14/Nov/25 8:37 AM
Fire A>R not finding ER factors at number of years,PHX5-633,16679,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,12/Nov/25 9:40 AM,03/Dec/25 7:25 PM,,17/Nov/25 6:48 AM,Client 164 Fire A to R Version 1,,,,,,,,,,,,0,,,,,See Fire A>R test 1 - returns an error of “Unexpected error: No early retirement factor present for years = 1”. Need to review {{PensionElementCalculatorFactory}} for strategies used for Fire categories - check using standard or age attained strategies as appropriate,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-709,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6ed8486f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:z,,,Ensure Fire calculations are using the correct early retirement factors and looking for the correct values in the tables (years/months early or age at retirement),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 21,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_21450357_*|*_10252_*:*_1_*:*_173559582_*|*_10354_*:*_1_*:*_4837_*|*_10056_*:*_1_*:*_21021,,14/Nov/25 1:48 PM;640f34fc1273131f2adfede9;Issue for Test 1 was that it was looking to table X-401 when it should be X-402. Updated ERTable so where category is FPS1992 it returns X-402 instead of X-401. This is the CARE ERF table but as with PPS1987 the DB benefits are unreduced and ERF table is only used for CARE benefits for this category. Update published in v90 of PublicSectorCalculation,"14/Nov/25 3:50 PM;640f34fc1273131f2adfede9;On review which element strategies to use for NFPS2006 and NFPS2006MOD needed amending. 

NFPS2006 ERF table is based on age in years and complete months so use age attained strategy. ERFs still apply on ill health retirement.

Updated {{PensionElementCalculatorFactory}} so now NFPS2006 category uses 

{noformat}case ""NFPS2006"":
            case ""NFPS2006RET"":
			if (memberInfo.IsActive)
                {
                if (containsCARE && !isIllHealth) // for reform CARE options (non ill health)
                {
                    InterimValues.Add($""PensionElementStrategy for McCloudOption: {mcCloudOption.ToString()}"", $""Using strategy PublicSectorPensionElementStandardStrategy"");
                    return new PublicSectorPensionElementStandardStrategy(2, memberInfo, mcCloudOption, calculationDate, erfTable, schemeReferenceData, 3);
                }
                else if (containsCARE && isIllHealth)
                {
                        InterimValues.Add($""PensionElementStrategy for McCloudOption: {mcCloudOption.ToString()}"", $""Using strategy PublicSectorPensionElementUnreducedStrategy"");
	                	return new PublicSectorPensionElementUnreducedStrategy();
                    }
					else
	                {
	                    InterimValues.Add($""PensionElementStrategy for McCloudOption: {mcCloudOption.ToString()}"", $""Using strategy PublicSectorPensionElementAgeAttainedStrategy"");
	                	return new PublicSectorPensionElementAgeAttainedStrategy(2, memberInfo, mcCloudOption, calculationDate, erfTable, schemeReferenceData, 3);
	                }
	            }
	            else
	            {
	                InterimValues.Add($""PensionElementStrategy for McCloudOption: {mcCloudOption.ToString()}"", $""Using strategy PublicSectorPensionElementAgeAttainedStrategy"");
	                return new PublicSectorPensionElementStandardStrategy(2, memberInfo, mcCloudOption, calculationDate, erfTable, schemeReferenceData, 3);
	            }{noformat}

Found Age Attained Strategy wasn’t working to return a factor based on the age at retirement and instead was basing it off a number of years and months early. in {{PublicSectorPensionElementAgeAttainedStrategy}} changed 

{code:json}decimal factor = new RetirementFactorBuilder(elementValue.Key, MemberInfo.DateOfBirth, DateOfRetirement)
                        .WithEarlyFactorTableOnly(ERFtable)
                        .WithEarlyApplicationDateOnly(erfApplicationDate)
                        .WithSchemeData(SchemeReferenceData)
                        .WithDecimalPlaces(DecimalPlaces)
                        .WithAgeAttainedBasis()
                        .GetFactor();{code}

to 

{code:json}decimal factor = new RetirementFactorBuilder(elementValue.Key, DateOfRetirement, MemberInfo.DateOfBirth )
	                        .WithEarlyFactorTableOnly(ERFtable)
	                        .WithEarlyApplicationDateOnly(DateOfRetirement)
	                        .WithSchemeData(SchemeReferenceData)
	                        .WithDecimalPlaces(DecimalPlaces)
	                        .WithAgeAttainedBasis()
	                        .GetFactor();{code}",,,,,,,,,,,,,,,,,,,,,,,13856,PHX5-223,Fire - Active to Retirement,Done,17/Nov/25 6:48 AM
Calculations erroring in Aurora due to BaseMemberInfo,PHX5-632,16646,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,11/Nov/25 3:43 PM,28/Nov/25 5:19 PM,,14/Nov/25 8:40 AM,Client 162 Police A to R Version 1,,,,,,,,,,,,0,,,,,,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,11/Nov/25 3:44 PM;b661603b-01c2-4777-a078-ea42f749ddd8;image-20251111-154446.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11451,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1f6a2b19,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:r,,,Stop an error around BaseMemberInfo that prevents calculations running in Aurora,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 20,PHX5 Sprint 21,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_150135911_*|*_10252_*:*_1_*:*_2647_*|*_10354_*:*_1_*:*_4659_*|*_10056_*:*_1_*:*_38209,,"11/Nov/25 3:44 PM;640f34fc1273131f2adfede9;Calculations in Aurora return the error below. This does not happen in Calculate 

!image-20251111-154446.png|width=226,alt=""image-20251111-154446.png""!","13/Nov/25 9:25 AM;640f34fc1273131f2adfede9;Member.Scheme not passed into calculations when running in Aurora.

Changed SchemeType to OverallSchemeType due to conflicts with another field in Aurora called SchemeType.

Moved OverallSchemeType into MemberInfo and pass an OverallSchemeType as an input into BaseMemberInfo within the calculation (Active to Retired).

Made some small changes to PublicSectorMemberInfo as format of field coming from MemberInfo changed.

Changes in Public Sector Calculation to refer to OverallSchemeType instead of SchemeType and made this change across test functions",,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,14/Nov/25 8:40 AM
Care Salary Warnings Review,PHX5-631,16643,Story,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Lowest,,,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,11/Nov/25 1:32 PM,03/Dec/25 9:51 AM,,,,,,,,,,,,,,,0,,,,,"We have a large number of care salary module warnings outputting in the A>R (and subsequently Aurora) which will likely output in other client calc types where care is being calculated. Since the care calculation uses existing member care data tables and a run time input as opposed to passing in salary for each care year from the member salary history data. Is there a way to stop our code running through the validations which are unnecessary in phase5? Or should we look to remove them? 

!image-20251111-135834.png|width=262,alt=""image-20251111-135834.png""!",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,11/Nov/25 1:58 PM;bfea69ca-e7d9-488d-b01b-103621fa1516;image-20251111-135834.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11450,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@19e2025b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00p1f:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13807,PHX5-197,CARE Module,To Do,11/Nov/25 1:32 PM
Police A>R (Client 162): CAREZeroLumpSum is not picking up 4 days in 2024,PHX5-630,16601,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,10/Nov/25 5:47 PM,28/Nov/25 5:19 PM,,14/Nov/25 8:36 AM,Client 162 Police A to R Version 1,,,,,,,,,,,,0,,,,,"To update data in client 162 to match expected process, we have removed the 01/04/2024 to 31/03/2025 line from care data and just put in their care salary from 01/04/2024 which then calculates the CARE benefit at retirement. 

On test 18 and 21, no CARE benefit is added to the closing value as at 31/03/2024 when calculating ill health retirement benefit, even though DoR is 05/04/2024. 

Not sure if this is what is expected to happen.",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,PHX5-638,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@604add1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:zi,,,No code update required. Fix via ticket [https://xps-jira.atlassian.net/browse/PHX5-638|https://xps-jira.atlassian.net/browse/PHX5-638|smart-link]. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 21,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_18312_*|*_10252_*:*_1_*:*_96380657_*|*_10354_*:*_1_*:*_3579_*|*_10056_*:*_1_*:*_160535462,,"13/Nov/25 5:09 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;This was a false conclusion. The interim values made it look as though a figure was not being picked up, but it was actually correctly calculating to DoR. The issue was actually total care service per ticket 638, so this can be closed.",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,14/Nov/25 8:36 AM
Fire A2R Test 20 divide by zero error,PHX5-629,16583,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,10/Nov/25 10:20 AM,28/Nov/25 5:15 PM,,10/Nov/25 1:43 PM,Client 164 Fire A to R Version 1,,,,,,,,,,,,0,,,,,Fire A to R Test 20 returns a divide by 0 error. To investigate and correct this,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-622,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3700e628,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00olh:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 20,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2948779_*|*_10252_*:*_1_*:*_9116290_*|*_10354_*:*_1_*:*_3817_*|*_10056_*:*_1_*:*_99493,,10/Nov/25 1:42 PM;640f34fc1273131f2adfede9;Appears to have been an issue with data from old client - reloaded data from client 164 for Linked member and now runs without errors,,,,,,,,,,,,,,,,,,,,,,,,13856,PHX5-223,Fire - Active to Retirement,Done,10/Nov/25 1:43 PM
Police A>R (Client 162): Review tests 8 and 9 to confirm Age Addition is calculating.,PHX5-628,16546,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,07/Nov/25 3:40 PM,01/Dec/25 3:06 PM,,18/Nov/25 3:58 PM,Client 162 Police A to R Version 2,,,,,,,,,,,,0,,,,,"SW Comment: Additional Credit working as expected when code is calculating the latest care row itself. Wider issues with age addition calculations not matching admin manual spreadsheets. Informed Altair age addition calculations are incorrect and should not be used. Still unable to match admins results from manual spreadsheet for test 8 due to how code calculates care for each record, admin combine the records then calculate. Meeting with admin to discuss 18/11/2025.

Meeting with admin and age addition calc process has been updated in our example spreadsheets. Now needs looks like changes needed in the code. Creating new ticket.",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7ea50db7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008000010001,,,N/A no code changes made. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 21,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_348179312_*|*_10252_*:*_1_*:*_12740662_*|*_10354_*:*_1_*:*_158852560_*|*_10056_*:*_1_*:*_427549538,,,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,18/Nov/25 3:58 PM
Care applying inflation rate when rate not known.,PHX5-627,16545,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,07/Nov/25 3:32 PM,28/Nov/25 5:21 PM,,10/Nov/25 6:41 AM,Client 150 Police A to R Version 6,Client 162 Police A to D Version 1,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,0,,,,,"[^PHX5A-203 Workings.xlsx]

Issue raised from admin UAT in linked ticket. 
Have tested in Calculate and created spreadsheet of differences in the attached. 

Held a call with Isobel Mounsey in admin who confirmed no inflation rate assumption should be applied if the inflation rate for the care year is not known (currently affects any post 01/04/2025 retirement dates), member receives the increase during pension increases when the rate is finally known. Updated the future inflation parameter input in Public Sector Calculator function PublicSectorCARECalculationFactory to be 0 instead of 1. Tested and this no longer applies an inflation increase to the final care year to DOR. It will apply if the relevant rate is loaded to Calculate. 

Test case 25 in Police A>R Here [https://calculate.uat.xpsplc.com/Clients/162/Calculations/1|https://calculate.uat.xpsplc.com/Clients/162/Calculations/1] . Care pension pre comm now matches Altair. 


[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] once Andrew reviews, would you mind going back to admin for me in the linked ticket. This will be available to retest on next release.",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-203,,,,,,,,,07/Nov/25 4:58 PM;bfea69ca-e7d9-488d-b01b-103621fa1516;PHX5A-203 Workings.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11348,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@25938e81,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00olb:,,,"Future inflation increase of 1 no longer applied to Care pension calculation if the relevant increase rate is not yet known. Latest increase rate known effective to 31/03/2025. Affects any retirement dates post 01/04/2025, update made to apply 0 increase to period pension accrued - same with rolling increase to previous years total.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 20,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_3197972_*|*_10252_*:*_1_*:*_2404517_*|*_10354_*:*_1_*:*_3440_*|*_10056_*:*_1_*:*_3806,,,,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,10/Nov/25 6:41 AM
For FPPS1992 members retiring under 50 no commutation factors,PHX5-626,16544,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,07/Nov/25 2:33 PM,28/Nov/25 5:15 PM,,11/Nov/25 6:50 AM,Client 164 Fire A to R Version 1,,,,,,,,,,,,0,,,,,"FPPS1992 members retiring under 50 (ill health cases) will error as commutation table only goes back to age 50. Determine correct action. See tests 16, 17 and 18",,Andrew Wilson,Russell Armstrong,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-622,,,10/Nov/25 9:32 AM;b661603b-01c2-4777-a078-ea42f749ddd8;image-20251110-093100.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11381,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@36483f09,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00olf:,,,Stops an error for FPPS1992 members where on ill-health retirement under age 50 commutation factors were not available,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 20,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-11 06:56:36.651,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2227508_*|*_10252_*:*_1_*:*_3972_*|*_10354_*:*_1_*:*_3494_*|*_10056_*:*_1_*:*_241057137,,"10/Nov/25 9:32 AM;640f34fc1273131f2adfede9;!image-20251110-093100.png|width=226,alt=""image-20251110-093100.png""!

Factor tables show earliest factor (26.20) should be used for all ages below 50. Extend factor table back to age 18 using this factor","10/Nov/25 10:08 AM;640f34fc1273131f2adfede9;Factor table change only, no change to code",11/Nov/25 6:56 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:640f34fc1273131f2adfede9]  Have factors been updated on Client 164? I am assuming that is where we will be pointing admin towards.,"11/Nov/25 8:36 AM;640f34fc1273131f2adfede9;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Yes, all work I’ve been doing on Fire A>R has been done in client 164",,,,,,,,,,,,,,,,,,,,,13856,PHX5-223,Fire - Active to Retirement,Done,11/Nov/25 6:50 AM
PublicSector Overtime returning a null ServiceHistoryOverTrancheWithDuration,PHX5-625,16543,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,07/Nov/25 11:07 AM,28/Nov/25 5:21 PM,,10/Nov/25 6:35 AM,Client 150 Police A to R Version 6,Client 162 Police A to D Version 1,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,0,,,,,,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-622,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@41e80f1c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ojy:,,,Fixes and issue where having any data in Member Additional History Data other than Overtime was causing calculations to error,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 20,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_12873_*|*_10252_*:*_1_*:*_17059134_*|*_10354_*:*_1_*:*_4787_*|*_10056_*:*_1_*:*_1068893,,"07/Nov/25 11:24 AM;640f34fc1273131f2adfede9;Changed PublicSectorOvertime to return a new ServiceHistoryOverTrancheWithDuration() instead of a null.

Changed expected results for TransferInFactory _Overtime null _full-time, TransferInFactory _Overtime null _OT ends on CARE date and TransferInFactory _Overtime null _part-time post CARE only to expect a default ServiceHistoryOverTrancheWithDuration() instead of a null",,,,,,,,,,,,,,,,,,,,,,,,13856,PHX5-223,Fire - Active to Retirement,Done,10/Nov/25 6:35 AM
Change MemberInfo so uses Scheme from LinkedMember for LinkedMember instead of using it from Member,PHX5-624,16542,Story,Dev required,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Lowest,,,,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,07/Nov/25 11:01 AM,03/Dec/25 9:51 AM,,,,,,,,,,,,,,,0,,,,,,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,CSD-187,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2b82131d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00p1h:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,07/Nov/25 11:14 AM;640f34fc1273131f2adfede9;MemberInfo currently uses Member.Scheme to set for the LinkedMember as Scheme is not available in the LinkedMember. Once Scheme is available in the LinkedMember update this,,,,,,,,,,,,,,,,,,,,,,,,13856,PHX5-223,Fire - Active to Retirement,To Do,07/Nov/25 11:01 AM
Export and Import Existing Calcs and Factors to New Data Clients.,PHX5-623,16504,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,06/Nov/25 4:51 PM,28/Nov/25 5:21 PM,,10/Nov/25 6:32 AM,Client 164 Fire A to D Version 1,,,,,,,,,,,,0,,,,,Export Calcs from Clients 144 and 150 and import to new clients 162 and 164,,Chris Marshall,Steven Wright,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6727d209,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ojr:,,,"No impact on admin ran calculations, moving existing calcs to new data clients. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 20,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-07 15:36:48.56,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_48319_*|*_10252_*:*_1_*:*_85366137_*|*_10354_*:*_1_*:*_3002_*|*_10056_*:*_1_*:*_43604,,07/Nov/25 3:36 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Police A>D imported into new client 162,,,,,,,,,,,,,,,,,,,,,,,,15555,PHX5-490,Calculate Overheads,Done,10/Nov/25 6:32 AM
Investigate Fire A>R errors,PHX5-622,16503,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,06/Nov/25 4:41 PM,28/Nov/25 5:15 PM,,10/Nov/25 2:19 PM,Client 164 Fire A to R Version 1,,,,,,,,,,,,0,,,,,"All Fire Active to Retired tests are returning “Error running test: Exception has been thrown by the target of an invocation.” except tests 12, 13, 14 and 15. To investigate reason(s) for the errors.",,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,PHX5-626,PHX5-629,PHX5-625,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@567498d9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ojv:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 20,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_269629459_*|*_10252_*:*_1_*:*_66948909_*|*_10354_*:*_1_*:*_7938_*|*_10056_*:*_1_*:*_495946,,10/Nov/25 2:19 PM;640f34fc1273131f2adfede9;See linked items for tasks/stories completed to remove errors. All Fire A>R tests currently run,,,,,,,,,,,,,,,,,,,,,,,,13856,PHX5-223,Fire - Active to Retirement,Done,10/Nov/25 2:19 PM
Fire Active To Deferred Test 2 Erroring,PHX5-621,16498,Bug,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,06/Nov/25 3:36 PM,28/Nov/25 5:21 PM,,17/Nov/25 9:55 AM,Client 164 Fire A to D Version 1,,,,,,,,,,,,0,,,,,"Error in CalculateCarePensionRowValue class believe this is in the Care global module. 

Link to Fire A>D [https://calculate.uat.xpsplc.com/Clients/164/Calculations/2|https://calculate.uat.xpsplc.com/Clients/164/Calculations/2]

Client 164 in UAT

!image-20251106-153934.png|width=570,alt=""image-20251106-153934.png""!",,Andrew Wilson,Russell Armstrong,Steven Wright,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,06/Nov/25 3:40 PM;bfea69ca-e7d9-488d-b01b-103621fa1516;image-20251106-153934.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11306,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6dbf21b4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oln:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 21,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-11 07:22:47.982,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_5698_*|*_10252_*:*_1_*:*_929513451_*|*_10354_*:*_1_*:*_3859_*|*_10056_*:*_1_*:*_379320,,"11/Nov/25 7:22 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;This will be caused by the AccrualRate being zero. Not sure how this could happen, as we populate it for new rows, and do not require it for historic. So either we are adding rows and not setting it, or we are incorrectly recalculating a historic line.",17/Nov/25 9:54 AM;640f34fc1273131f2adfede9;Salary Linked Member record has no CARE record. Not a valid test due to state of data. Have created a new test (test 4 from matrix) to use instead and deleted test 2,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,17/Nov/25 9:55 AM
Fire Active To Deferred Test 1 Erroring,PHX5-620,16497,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,06/Nov/25 3:36 PM,28/Nov/25 5:21 PM,,12/Nov/25 1:56 PM,Client 164 Fire A to D Version 1,,,,,,,,,,,,0,,,,,"Divide by zero error in PublicSectorAccrualDoubleStrategy class. Public Sector Calculation module.

Client 164 in UAT Fire - Active To Deferred [https://calculate.uat.xpsplc.com/Clients/164/Calculations/2|https://calculate.uat.xpsplc.com/Clients/164/Calculations/2]

!image-20251106-153807.png|width=566,alt=""image-20251106-153807.png""!

Update from SW 12/11/2025 - Code trying to run DB element AccrualDoubleStrategy using Active Normal member Care service tranche calcs and values are nil for DB service. Category in active normal member record was FPS1992 and I believe it should be Care2015. Raised with [~accountid:6267edd8e2f47a00682db88c]as a data issue. An estimated 46 members are effected. Neil held call with admin who advised it is correct for them to have a care2015 category and this will be fixed in the next data load. Amending JSON for active member in the test case to Care2015 allows the code to switch to the care element strategy as expected.

Ticket can be closed.",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,06/Nov/25 3:38 PM;bfea69ca-e7d9-488d-b01b-103621fa1516;image-20251106-153807.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11305,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6dff0d3b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008000010i,,,Note to admin: the category within the active normal record for Fire members should be checked before running calculations in Aurora. Some members have retained their Salary Link DB category and this causes the Aurora calc to error. Data migration have been informed and it was agreed that the affected members will have their category moved to a relevant Care2015 category in the next data load. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 20,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_232759093_*|*_10252_*:*_1_*:*_278909927_*|*_10354_*:*_1_*:*_4633_*|*_10056_*:*_1_*:*_388970,,,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,12/Nov/25 1:56 PM
Fire - Active To Deferred,PHX5-619,16496,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,06/Nov/25 3:35 PM,06/Nov/25 3:35 PM,,,,,,,,,,,,,,,0,,,,,,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@137e3375,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,teal,,,,,,,,,,,,,0|i00ojb:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,06/Nov/25 3:35 PM
FPS 2015 - CARE revaluation,PHX5-618,16495,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,06/Nov/25 1:42 PM,06/Nov/25 4:45 PM,,06/Nov/25 4:45 PM,,,,,,,,,,,,,0,,,,,"CARE revalues at different rates under Fire than Police.  From the CARE spec:

|CARE_Revaluation|{color:#ff5630}*Standard In service - Average weekly earnings* {color}|FIREMAIN in Altair|
| |{color:#ff5630}*Non club TV in - CPI* {color}|TVINFIRE in Fire|
| | |FMCCLOUD for Fire|
| |Club TV in - Revalues in line with the sending scheme's revaluation rate. So this will be CPI, or CPI plus or minus an amount, depending on the scheme. |The tvin type links to a particular revaluation table. i.e. tvin NHS links to the NHS revaluation rate table|
| |Added pension  revalues at CPI| |",,Annabelle Stephenson,Steven Wright,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,PHX5-555,PHX5-487,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6f2c8ba4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oj3:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-06 16:38:38.406,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_10974298,,"06/Nov/25 4:38 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Closed as a duplicated ticket already actioned, linked the closed tickets that were actioned. ",,,,,,,,,,,,,,,,,,,,,,,,13807,PHX5-197,CARE Module,Done,06/Nov/25 4:45 PM
FPS 2015 - PCLS to be coded,PHX5-617,16494,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,06/Nov/25 1:31 PM,01/Dec/25 3:10 PM,,25/Nov/25 6:56 AM,Client 164 Fire A to R Version 2,,,,,,,,,,,,0,,,,,"CARE PCLS is same as on police (pre-comm x 12 x commutationPercentage) but the comm % is fixed at 25%.  We can potentially use {{PCLSCAREPensionOptionStrategy}} however Fire does not have an ER buyout.  We could add an if statement that checks member’s category before choosing whether to go into the ER buyout code.

We have CARE lump sum figures in the A>R test matrix that we can test against",,Andrew Wilson,Annabelle Stephenson,Chris Marshall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,21/Nov/25 2:26 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251121-142134.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11838,21/Nov/25 2:26 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251121-142212.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11839,21/Nov/25 2:26 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251121-142227.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11837,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1804ea7a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008000010000k,,,Update for Fire PCLS,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 21,PHX5 Sprint 22,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-21 14:26:10.649,10251_*:*_2_*:*_231501186_*|*_10250_*:*_2_*:*_281321933_*|*_10252_*:*_1_*:*_503086550_*|*_10354_*:*_1_*:*_530317211_*|*_10056_*:*_1_*:*_260635,,"21/Nov/25 2:26 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Added in public sector function for the fire and removed ER Buyout

!image-20251121-142134.png|width=635,alt=""image-20251121-142134.png""!

Added a test function

!image-20251121-142212.png|width=620,alt=""image-20251121-142212.png""!

Updated this in public sector for ER Buyout for police only

!image-20251121-142227.png|width=620,alt=""image-20251121-142227.png""!

Test case setup CARE PCLS Fire test","24/Nov/25 6:44 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Not sure why we needed to create a new function. If someone doesn’t have ER buyout - just set it to zero.

We should really try and avoid police and fire specific versions of functions. The whole pattern structure was designed to avoid this.



We should also not have an if police statement in a pension option. For same reason.

If the issue is ER buyout, then the strategy for ER buyout should just ensure this is zero or not created for fire. Then the if statement in pension option should just look for existence of.","24/Nov/25 11:06 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Following discussion removed code that was added in public sector and public sector function modules. The ER buyout has not been coded as yet. Due to this it is set to 0 so doesn't not affect the figure being output for fire for now.

ER Buyout ticket update to factor into the code this doesn't affect fire scheme",,,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,25/Nov/25 6:56 AM
FPS 2015 - Ill-health to be coded,PHX5-616,16493,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,06/Nov/25 1:25 PM,06/Feb/26 3:58 PM,,,,,,,,,,,,,,,0,,,,,"Higher tier ill-health benefits due from the fire schemes are paid out from the 2015 scheme.  We need a new version of {{PublicSector2015IllHealthHigherTierStrategy}} that follows the below logic, and a CARE accrual rate of 59.7:

|illHealth|Aurora flag. Location TBC. Source location: MEMBER_EMPLOYMENT.REASON_LEFT|Two tiers. 
# Lower tier. Accrued pension only granted unreduced. 
# Higher tier. Accrued pension plus a service dependant enhancement. See further comments for this calculation.                                                                               FPS 2015 pension accrued at DOR (excluding any added pension) x prospective service from day after date of retirement to age 60 x 2%.                                                                                                                        |
|IllHealthLowerTier_2015|CARE_PreComm|Member must have at least 3 months qualifying service to be eligible. Accrued pension only granted unreduced. |
|IllHealthLowerTier_2015Adj|CARE_PreComm
Less PSO_debit_2015 (adjusted for ER or LR applicable to PSO)
Less Scheme_Pays_debit_2015 (adjusted for ER or LR applicable to scheme pays debits) 
Less Scheme_Pays_debit_McCloud_2015 adjusted for ER or LR applicable to scheme pays debits| |
|IllhealthProspectiveService_2015|Qualifying Service [(DOR+1) to 60]| |
|IllHealthHigherTierEnhancement_2015|[CARE_Main_Basic + CARE_TVIN_Basic] x IllhealthProspectiveService_2015 x 2%|Member must have at least 5 years qualifying service to be eligible. |
|IllHealthHigherTier_2015|CARE_PreComm + IllHealthHigherTierEnhancement_2015| |
|IllHealthHigherTier_2015Adj|IllHealthHigherTier_2015
Less PSO_debit_2015 (adjusted for ER or LR applicable to PSO)
Less Scheme_Pays_debit_2015 (adjusted for ER or LR applicable to scheme pays debits) 
Less Scheme_Pays_debit_McCloud_2015 adjusted for ER or LR applicable to scheme pays debits| |",,Annabelle Stephenson,Russell Armstrong,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,PHX5-804,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@58b09d5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800nr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-02-06 15:58:15.553,,,06/Feb/26 3:58 PM;640f34fc1273131f2adfede9;I think this should be covered by [https://xps-jira.atlassian.net/browse/PHX5-804|https://xps-jira.atlassian.net/browse/PHX5-804|smart-link] - should be able to close once that is completed,,,,,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,To Do,06/Nov/25 1:25 PM
FPS 2006 - PCLS to be coded,PHX5-615,16492,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,06/Nov/25 1:12 PM,01/Dec/25 3:06 PM,,17/Nov/25 2:45 PM,Client 162 Police A to R Version 2,Client 164 Fire A to R Version 1,,,,,,,,,,,0,,,,,"Under FPS 2006, PCLS is calculated as follows:

|MIN(
         LSA,
         DB_TotalPen2006 * 0.25 * DB_CCF2006 )|

where the factor = 12 (always on this scheme).

This is the {{FullLumpSum}} function we have coded already.  We need a new strategy under {{IPublicSectorPensionOptionCalculator}} that will do this.  Post-comm calculated as normal.

The A>R spec does not make any reference to target cash under this scheme, so I can only assume it’s not available?  However the test matrix has a test (10) with a ‘partial lump sum’, and target is permitted under the modified/retained scheme which seems odd, so we need to query this.",,Andrew Wilson,Annabelle Stephenson,Chris Marshall,Isobel Mounsey,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,17/Nov/25 8:48 AM;5e266667-8b87-4eb6-9386-71980feac557;image-20251117-084800.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11558,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@201cf272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00olq:r,,,Updated for NFPS 2006 scheme PCLS,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 21,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-13 14:57:34.593,10251_*:*_2_*:*_238966932_*|*_10250_*:*_2_*:*_117167508_*|*_10252_*:*_1_*:*_57577291_*|*_10354_*:*_1_*:*_530183914_*|*_10056_*:*_1_*:*_1515314,,13/Nov/25 2:57 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Hi [~accountid:712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f] does the NFPS 2006 scheme offer a target lump sum alongside zero & PCLS. Thanks,"13/Nov/25 3:29 PM;712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f;Hi [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] yes the NFPS 2006 Scheme offers target lump sum option. Thanks, ","14/Nov/25 3:06 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Updated public sector module with the following code 

Line 369

{noformat}public PensionOption FullLumpSumPensionOptionStrategy(List<ElementValue> elementValues, decimal totalService, decimal dbCommutationFactor, decimal careCommutationPercentage, int rounding)
    {
        McCloudOption mcCloudOption = McCloudOption.None;

        FulllumpSumDBPensionOptionStrategy pensionOptionStrategy = new FulllumpSumDBPensionOptionStrategy(KeyPreComConstants.DBPreCom, dbCommutationFactor, careCommutationPercentage, totalService, rounding, new PublicSectorMemberInfo(GetTestMember(), ""Fire""), mcCloudOption);

        return pensionOptionStrategy.GetPensionOption(elementValues, totalService); 
    }{noformat}

Line 2460


{noformat}public class FulllumpSumDBPensionOptionStrategy : BasePensionOptionStrategy, IPublicSectorPensionOptionCalculator
{
    public decimal LSALimit;
    public FulllumpSumDBPensionOptionStrategy(string preComPenKey, decimal dbCommutationFactor, decimal careCommutationPercentage, decimal lsaLimit, int rounding, IMemberInfo memberInfo, McCloudOption mcCloudOption, Context context = null) : base(preComPenKey, dbCommutationFactor, careCommutationPercentage, rounding, memberInfo, mcCloudOption, context)
    {
        LSALimit = lsaLimit;
    }

    //PPS = var dbTaxFreePCLS = isIllHealth ? aDayPCLS
    public PensionOption GetPensionOption(List<ElementValue> elementValues, decimal totalService)
    {
        decimal dbPreComPension = elementValues.GetValue(PreComPenKey);

        decimal dbCash = PublicSectorFunctions.FullLumpSum(dbPreComPension, DBCommutationFactor, Rounding, MemberInfo, McCloudOption);
        dbCash = Math.Min(dbCash, LSALimit);

        decimal dbPostComPen = PublicSectorFunctions.PostCommutationPension(dbPreComPension, dbCash, DBCommutationFactor, Rounding).Sum(x => x.Value);
        InterimValues.Add($""DBPCLSPensionOption | DBPreComPension | AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", dbPreComPension);
        InterimValues.Add($""DBPCLSPensionOption | DBCash | AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", dbCash);
        InterimValues.Add($""DBPCLSPensionOption | CommutedToLumpSum | AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", dbPreComPension - dbPostComPen);
        InterimValues.Add($""DBPCLSPensionOption | DBPostComPen | AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", dbPostComPen);

        //TODO: need a min of LSA
        return new PensionOption
        {
            PreCommutedPensionValues = PublicSectorFunctions.CreateSingleElementValue(KeyPensionConstants.TotalPension, dbPreComPension),
            TotalCash = dbCash,
            ResidualPensionValues = PublicSectorFunctions.CreateSingleElementValue(KeyPensionConstants.TotalPension, dbPostComPen)
        };
    }
}{noformat}

Line 3982

{noformat} case ""NFPS2006"":
            case ""NFPS2006MOD"":
            case ""NFPS2006RET"":
            if (mcCloudOption == McCloudOption.Legacy)
                {
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.LegacyDBZeroLumpSum, new PublicSectorZeroCashPensionOptionStrategy(KeyPreComConstants.DBPreCom, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.LegacyDBPCLS, new FulllumpSumDBPensionOptionStrategy(KeyPreComConstants.DBPreCom, dbCommutationFactor, careCommutationPercentage, lsaLimit, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.LegacyDBTargetLumpSum, new PCLSDBTargetPensionOptionStrategy(KeyPreComConstants.DBPreCom, dbCommutationFactor, careCommutationPercentage, targetDBCash, lsaLimit, calculationDate, illHealth, 2, memberInfo, mcCloudOption));
                }
                else if (mcCloudOption == McCloudOption.Reform)
                {
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.ReformDBZeroLumpSum, new PublicSectorZeroCashPensionOptionStrategy(KeyPreComConstants.DBPreCom, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.ReformDBPCLS, new FulllumpSumDBPensionOptionStrategy(KeyPreComConstants.DBPreCom, dbCommutationFactor, careCommutationPercentage, lsaLimit, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.ReformDBTargetLumpSum, new PCLSDBTargetPensionOptionStrategy(KeyPreComConstants.DBPreCom, dbCommutationFactor, careCommutationPercentage, targetDBCash, lsaLimit, calculationDate, illHealth, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.ReformPre22CAREZeroLumpSum, new PublicSectorZeroCashPensionOptionStrategy(KeyPreComConstants.ReformCAREPreCom, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.ReformPre22CAREPCLS, new PCLSCAREPensionOptionStrategy(KeyPreComConstants.ReformCAREPreCom, dbCommutationFactor, careCommutationPercentage, lsaLimit, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.ReformPre22CARETargetLumpSum, new CARETargetMaxPCLS(KeyPreComConstants.ReformCAREPreCom, dbCommutationFactor, careCommutationPercentage, targetCARECash, lsaLimit, 2, memberInfo, mcCloudOption));
                }
                else
                {
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.DBZeroLumpSum, new PublicSectorZeroCashPensionOptionStrategy(KeyPreComConstants.DBPreCom, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.DBPCLS, new FulllumpSumDBPensionOptionStrategy(KeyPreComConstants.DBPreCom, dbCommutationFactor, careCommutationPercentage, lsaLimit, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.DBTargetLumpSum, new PCLSDBTargetPensionOptionStrategy(KeyPreComConstants.DBPreCom, dbCommutationFactor, careCommutationPercentage, targetDBCash, lsaLimit, calculationDate, illHealth, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.CAREZeroLumpSum, new PublicSectorZeroCashPensionOptionStrategy(KeyPreComConstants.CAREPreCom, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.CAREPCLS, new PCLSCAREPensionOptionStrategy(KeyPreComConstants.CAREPreCom, dbCommutationFactor, careCommutationPercentage, lsaLimit, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.CARETargetLumpSum, new CARETargetMaxPCLS(KeyPreComConstants.CAREPreCom, dbCommutationFactor, careCommutationPercentage, targetCARECash, lsaLimit, 2, memberInfo, mcCloudOption));
                }
                break;{noformat}

Created new ticket lined to PHX5 - 482 - same issue with 2006 Fire as police where the legacy & reform amounts are the same

Further ticket created as service for 2006 scheme is using all service and not cutting off at 2022 for legacy & reform

For NFPS saved out calcs from Altair for all with max lump sum for comparison","17/Nov/25 6:52 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] Code all looks good, and can see you have added a test function, but cannot see the test case in the long list of existing (it may be there, just getting hard to find things). Can you confirm you have created a test case please.","17/Nov/25 8:48 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;The following tests cover the code change

!image-20251117-084800.png|width=509,alt=""image-20251117-084800.png""!

Updated the outputs to show full lump sum",17/Nov/25 9:11 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] Thanks - so those will cover the options chosen. Do you have any test cases that cover the actual values calculated? i.e. one that uses the new function {{FullLumpSumPensionOptionStrategy}} that you created?,"17/Nov/25 9:18 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Actually no, I will set one up now","17/Nov/25 11:49 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Slightly tweaked code from line 369 adding LSALimit


{noformat}    public PensionOption FullLumpSumPensionOptionStrategy(List<ElementValue> elementValues, decimal totalService, decimal LSALimit, decimal dbCommutationFactor, decimal careCommutationPercentage, int rounding)
    {
        McCloudOption mcCloudOption = McCloudOption.None;

        FulllumpSumDBPensionOptionStrategy pensionOptionStrategy = new FulllumpSumDBPensionOptionStrategy(KeyPreComConstants.DBPreCom, dbCommutationFactor, careCommutationPercentage, LSALimit, rounding, new PublicSectorMemberInfo(GetTestMember(), ""Fire""), mcCloudOption);

        return pensionOptionStrategy.GetPensionOption(elementValues, totalService); 
    }{noformat}

Test added
NFPS 2006 Full lump sum test - all results for pre com pen, post com pen & commuted pen and lump sum match expected.",,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,17/Nov/25 2:45 PM
FPS 2006MOD - element strategy to use,PHX5-614,16491,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,06/Nov/25 1:04 PM,01/Dec/25 3:06 PM,,17/Nov/25 6:47 AM,Client 162 Police A to R Version 2,Client 164 Fire A to R Version 1,,,,,,,,,,,0,,,,,Benefits under the FPS 2006 Modified Retained scheme do not get ER or LR factors applied.  Therefore {{PensionElementCalculatorFactory}} needs amending to unreduced strategy for this scheme.  Regular 2006 scheme _does_ get factors applied so no change there.,,Annabelle Stephenson,Russell Armstrong,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1afd0a9c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00olp:,,,Do not apply ERFs to NFPS2006MOD benefits,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 21,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-14 15:33:01.051,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_20443338_*|*_10252_*:*_1_*:*_677762919_*|*_10354_*:*_1_*:*_5761_*|*_10056_*:*_1_*:*_1945843,,14/Nov/25 3:33 PM;640f34fc1273131f2adfede9;Updated {{PensionElementCalculatorFactory}} so NFPS2006MOD follows the same logic for which calculators to use as PPS1987 and FPS1992,,,,,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,17/Nov/25 6:47 AM
FPS 1992 & 2006 - Service caps,PHX5-613,16490,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,06/Nov/25 12:59 PM,28/Nov/25 5:21 PM,,17/Nov/25 6:45 AM,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,,,0,,,,,"As per pre-commutation spec, service caps for fire schemes are as follows:

1992: 30y maximum

2006: 40y max

2006 modified retained: 30y max

Each of these need updating in the {{PublicSectorServiceFactory}}.  Very simple change",,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3b1adc6d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00olq:,,,Service caps for all Fire schemes implemented,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 21,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_508946_*|*_10252_*:*_1_*:*_689875752_*|*_10354_*:*_1_*:*_2675_*|*_10056_*:*_1_*:*_127231,,14/Nov/25 12:46 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Very simple.  Updated {{GetServiceBuilder}} in Public Sector Calculation accordingly.  Added a test for each category/scheme (“PublicSectorServiceFactory …” test names),,,,,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,17/Nov/25 6:45 AM
FPS 1992 - PCLS to be coded,PHX5-612,16489,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,06/Nov/25 12:43 PM,28/Nov/25 5:15 PM,,19/Nov/25 6:35 AM,Client 164 Fire A to R Version 1,,,,,,,,,,,,0,,,,,"Calculation of cash under FPS 1992 is nearly identical to PPS 1987, however on Fire there is no Rank to consider.  I think we can copy and slightly amend the {{MaxLumpSum}} function for a similar fire version, as we still want to use both {{FullLumpSum}} and {{CappedLumpSum}} functions as they are currently coded.

Worth noting that only 2 of the FPS A>R test cases have commutation and figures we can check against.",,Andrew Wilson,Annabelle Stephenson,Chris Marshall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@101ca523,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00olq:i,,,Code updated for PCLS for 1992 FPS scheme,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 21,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-17 16:13:35.831,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_510517125_*|*_10252_*:*_1_*:*_2751_*|*_10354_*:*_1_*:*_525680887_*|*_10056_*:*_1_*:*_331923,,"17/Nov/25 4:13 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] would you mind having a look over this for me make sure I am on the right track? The output from the test matches what we expect but want to know if more is needed Thanks

Line 277

{noformat}    public decimal MaxLumpSumFIRE(decimal totalService, LocalDate dateofBirth, string category, InferredStatus status, LocalDate statePensionDate, string extraData, IllHealthType illHealthType, LocalDate calculationDate, decimal commutationFactor, decimal preCommutationPension, int rounding, List<MemberEmployerHistory> employerHistory)
    {

        PublicSectorMemberInfo memberInfo = new PublicSectorMemberInfo(GetTestMember(), ""Fire"") { DateOfBirth = dateofBirth, Category = category, Status = status, StatePensionDate = statePensionDate, ExtraData = extraData, EmployerHistory = employerHistory };

        memberInfo.TotalService = totalService;

        McCloudOption mcCloudOption = McCloudOption.None;

        return PublicSectorFunctions.PCLS(preCommutationPension, commutationFactor, rounding, memberInfo, mcCloudOption);
        
    }{noformat}

Line 4087

{noformat}case ""FPS1992"":
             if (mcCloudOption == McCloudOption.Legacy)
                {
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.LegacyDBZeroLumpSum, new PublicSectorZeroCashPensionOptionStrategy(KeyPreComConstants.DBPreCom, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.LegacyDBPCLS, new PCLSDBPensionOptionStrategy(KeyPreComConstants.DBPreCom, dbCommutationFactor, careCommutationPercentage, lsaLimit, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.LegacyDBMaximumLumpSum, new SchemeMaximumDBPensionOptionStrategy(KeyPreComConstants.DBPreCom, memberInfo, calculationDate, illHealth, dbCommutationFactor, careCommutationPercentage, lsaLimit, 2, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.LegacyDBTargetLumpSum, new PCLSDBTargetPensionOptionStrategy(KeyPreComConstants.DBPreCom, dbCommutationFactor, careCommutationPercentage, targetDBCash, lsaLimit, calculationDate, illHealth, 2, memberInfo, mcCloudOption));
                }
                else if (mcCloudOption == McCloudOption.Reform)
                {
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.ReformDBZeroLumpSum, new PublicSectorZeroCashPensionOptionStrategy(KeyPreComConstants.DBPreCom, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.ReformDBPCLS, new PCLSDBPensionOptionStrategy(KeyPreComConstants.DBPreCom, dbCommutationFactor, careCommutationPercentage, lsaLimit, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.ReformDBMaximumLumpSum, new SchemeMaximumDBPensionOptionStrategy(KeyPreComConstants.DBPreCom, memberInfo, calculationDate, illHealth, dbCommutationFactor, careCommutationPercentage, lsaLimit, 2, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.ReformDBTargetLumpSum, new PCLSDBTargetPensionOptionStrategy(KeyPreComConstants.DBPreCom, dbCommutationFactor, careCommutationPercentage, targetDBCash, lsaLimit, calculationDate, illHealth, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.ReformPre22CAREZeroLumpSum, new PublicSectorZeroCashPensionOptionStrategy(KeyPreComConstants.ReformCAREPreCom, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.ReformPre22CAREPCLS, new PCLSCAREPensionOptionStrategy(KeyPreComConstants.ReformCAREPreCom, dbCommutationFactor, careCommutationPercentage, lsaLimit, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.ReformPre22CARETargetLumpSum, new CARETargetMaxPCLS(KeyPreComConstants.ReformCAREPreCom, dbCommutationFactor, careCommutationPercentage, targetCARECash, lsaLimit, 2, memberInfo, mcCloudOption));
                }
                else
                {
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.DBZeroLumpSum, new PublicSectorZeroCashPensionOptionStrategy(KeyPreComConstants.DBPreCom, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.DBPCLS, new PCLSDBPensionOptionStrategy(KeyPreComConstants.DBPreCom, dbCommutationFactor, careCommutationPercentage, lsaLimit, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.DBMaximumLumpSum, new SchemeMaximumDBPensionOptionStrategy(KeyPreComConstants.DBPreCom, memberInfo, calculationDate, illHealth, dbCommutationFactor, careCommutationPercentage, lsaLimit, 2, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.DBTargetLumpSum, new PCLSDBTargetPensionOptionStrategy(KeyPreComConstants.DBPreCom, dbCommutationFactor, careCommutationPercentage, targetDBCash, lsaLimit, calculationDate, illHealth, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.CAREZeroLumpSum, new PublicSectorZeroCashPensionOptionStrategy(KeyPreComConstants.CAREPreCom, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.CAREPCLS, new PCLSCAREPensionOptionStrategy(KeyPreComConstants.CAREPreCom, dbCommutationFactor, careCommutationPercentage, lsaLimit, 2, memberInfo, mcCloudOption));
                    publicSectorPensionOptionCalculators.Add(InternalCalculationPensionOptionType.CARETargetLumpSum, new CARETargetMaxPCLS(KeyPreComConstants.CAREPreCom, dbCommutationFactor, careCommutationPercentage, targetCARECash, lsaLimit, 2, memberInfo, mcCloudOption));
                }
                break;{noformat}

Test setup is FPS 1992 PCLS Test","18/Nov/25 12:38 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Updated public sector function module also Line 27, 29 & added police only to 49. Not matching expected from Altair but the expected has CPD

{noformat}    public static decimal MaxLumpSum(IMemberInfo memberInfo, McCloudOption mcCloudOption, IllHealthType illHealth, LocalDate calculationDate, decimal commutationFactor, decimal totalService, decimal preCommutationPension, int rounding)
    {
        decimal cash = 0;

        var publicSectorMemberInfo = memberInfo as PublicSectorMemberInfo;

        int fullLumpSumAge = 0;

        if (publicSectorMemberInfo.TypeOfScheme() == OverallSchemeType.Police) 
        {
        fullLumpSumAge = (publicSectorMemberInfo.Rank() == ""C1"" || publicSectorMemberInfo.Rank() == ""S1"" || publicSectorMemberInfo.Rank() == ""01"") ? 55 : 60;
        InterimValuesLogger.AddWithLogging($""Age for maximum lump sum | AuroraId: {memberInfo.AuroraId} | McCloudOption: {mcCloudOption.ToString()}"", fullLumpSumAge, InterimValuesLogger.LoggingMode.BothInformation);
        }

        publicSectorMemberInfo.TotalService = totalService;

        if (illHealth != IllHealthType.None || totalService >= 30 || memberInfo.DateReachesAge(fullLumpSumAge) <= calculationDate)
        {
            cash = FullLumpSum(preCommutationPension, commutationFactor, rounding, memberInfo, mcCloudOption);
            InterimValuesLogger.AddWithLogging($""Maximum lump sum entitlement | AuroraId: {memberInfo.AuroraId} | McCloudOption: {mcCloudOption.ToString()}, Member entitled to full lump sum of:"", cash, InterimValuesLogger.LoggingMode.BothInformation);
        }
        else if (totalService >= 25 && memberInfo.DateReachesAge(50) <= calculationDate)
        {
                InterimValuesLogger.AddWithLogging($""Maximum lump sum entitlement | AuroraId: {memberInfo.AuroraId} | McCloudOption: {mcCloudOption.ToString()}, Member entitled to capped lump sum of:"", cash, InterimValuesLogger.LoggingMode.BothInformation);
            cash = CappedLumpSum(preCommutationPension, rounding, memberInfo, mcCloudOption);

        //Added Police scheme as fullLumpSumAge not relevant to fire scheme    
        }
        else if (totalService < 25 && memberInfo.DateReachesAge(50) <= calculationDate && publicSectorMemberInfo.TypeOfScheme() == OverallSchemeType.Police)
        {
            Log.Error($""Service under 25 years and member has not attained Normal Retirement Age of {fullLumpSumAge} for rank. Not eligible to retire.""); // must be an error - member is not elgible to retire if they hit this condition
            cash = 0;
        }

        return cash;{noformat}

Test setup is FPS 1992 PCLS Test in public sector","18/Nov/25 3:06 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] How does this work for fire cases? Looking at that code, for fire members, fullLumpSumAge would always be 0. So by accident almost - the first condition for fire would become just that service is more than 30 - although not in a very clear way.

What is the actual full lump sum logic for fire cases? is it defined on the spec?","18/Nov/25 3:38 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Hi this is not defined on the spec as fullLumpSumAge is not a thing in the fire scheme and the ‘rank’ is not something that is taken into account

Full lump sum is not defined on the pre com spec for fire scheme","18/Nov/25 4:32 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Updated code on lines 37-42 & 56

{noformat}        if (publicSectorMemberInfo.TypeOfScheme() == OverallSchemeType.Fire)

        {
            cash = FullLumpSum(preCommutationPension, commutationFactor, rounding, memberInfo, mcCloudOption);
            InterimValuesLogger.AddWithLogging($""Maximum lump sum entitlement | AuroraId: {memberInfo.AuroraId} | McCloudOption: {mcCloudOption.ToString()}, Member entitled to full lump sum of:"", cash, InterimValuesLogger.LoggingMode.BothInformation);
        }

        else if (illHealth != IllHealthType.None || totalService >= 30 || memberInfo.DateReachesAge(fullLumpSumAge) <= calculationDate)
        {
            cash = FullLumpSum(preCommutationPension, commutationFactor, rounding, memberInfo, mcCloudOption);
            InterimValuesLogger.AddWithLogging($""Maximum lump sum entitlement | AuroraId: {memberInfo.AuroraId} | McCloudOption: {mcCloudOption.ToString()}, Member entitled to full lump sum of:"", cash, InterimValuesLogger.LoggingMode.BothInformation);
        }
        else if (totalService >= 25 && memberInfo.DateReachesAge(50) <= calculationDate)
        {
                InterimValuesLogger.AddWithLogging($""Maximum lump sum entitlement | AuroraId: {memberInfo.AuroraId} | McCloudOption: {mcCloudOption.ToString()}, Member entitled to capped lump sum of:"", cash, InterimValuesLogger.LoggingMode.BothInformation);
            cash = CappedLumpSum(preCommutationPension, rounding, memberInfo, mcCloudOption);

        //Added Police scheme as fullLumpSumAge not relevant to fire scheme    
        }
        else if (totalService < 25 && memberInfo.DateReachesAge(50) <= calculationDate) //&& publicSectorMemberInfo.TypeOfScheme() == OverallSchemeType.Police){noformat}",,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,19/Nov/25 6:35 AM
FPS 1992 - LSI to be coded,PHX5-611,16488,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,06/Nov/25 12:34 PM,02/Jan/26 12:55 PM,,16/Dec/25 1:56 PM,Client 172 Fire A to D Version 3,Client 172 Fire A to R Version 4,,,,,,,,,,,0,,,,,"LSI (Long Service Increment) is an additional element of pension awarded under FPS 1992 and NFPS2006 _[UPDATE: LSI is in fact only available under FPS1992, not 2006]_.  It is added to the member’s accrued pension (along with other elements eg. added years, CPD) to make up their pre-commutation pension.  LSI is in the pre-comm spec as follows:

|DB_LSI|(LSI_ServicecalcA + LSI_ServicecalcB*2) / 60 * 990 * LSIReval|
|LSIReval|PI from 30/06/2007 to DOR|

where the service figures are (from service spec):

|LSI_ServicecalcA|MIN(MAX(MAX( DB Qualifying Fire service from dbServiceStartDate to 30 June 2007, 0)-15,0),5) |The service in years and days up to 30 June 2007 which is more than 15 but less than 20. Members do not get this APB if they do not have at least 15 years service in the FPS by 30/06/2007. DO NOT INCLUDE TV IN FROM NON-FIRE SCHEMES. The highest this number will be is 5. |
|LSI_ServicecalcB|MIN(MAX(MAX( DB Qualifying Fire service from dbServiceStartDate to 30 June 2007, 0)-20,0),10) |The service in years and days up to 30 June 2007 which is more than 20 but less than 30. DO NOT INCLUDE TV IN FROM NON-FIRE SCHEMES. The highest this number will be is 10. |

As the LSI is to be included in the member’s pre-commutation pension, it is commutable for cash.  I have made an assumption that the LSI will also need to be included within the spouse pension elements.",,Andrew Wilson,Annabelle Stephenson,Matt Lilwall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-276,PHX5-724,PHX5-732,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3259b520,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y,,,Long Service Increment (LSI) benefit calculated for eligible FPS1992 members.  LSI value is added to member’s pre-commutation pension.  PI reval has not yet been applied to the LSI element.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 24,PHX5 Sprint 25,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-03 10:33:07.241,10251_*:*_3_*:*_139143489_*|*_10250_*:*_3_*:*_292307922_*|*_10252_*:*_1_*:*_152869473_*|*_10354_*:*_1_*:*_27815246_*|*_10056_*:*_1_*:*_2330133372,,"12/Nov/25 1:41 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;DB Qualifying Fire Service = DB service less service breaks

Essentially, the same as normal DB qual svc but excludes transferred-in service. Also from service spec","03/Dec/25 10:33 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] , please can you let me know if any coding work has been done on this. This has recently changed to a day 1 coding requirement","03/Dec/25 10:56 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] Hi Matt, no nothing has been done on this yet.  Let me refresh my memory today and confirm if we’re ready to code.  I assume if so, then we want to make a start on this ASAP?","03/Dec/25 11:18 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] , yes please. Thanks","03/Dec/25 2:34 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I’d say this is nearly ready and I have a good idea of how to approach this together with the other additional allowances (note for self: see offline A2R 17.11)

The only potential hiccup is the PI reval as I don’t think that has been fully coded yet.  Some work on PI will be happening in sprint 24 so will leave as readiness review and check back after those code changes.",03/Dec/25 3:42 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] PI reval is coded enough for this,"05/Dec/25 4:58 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+Coding changes: - all within+ +*Public Sector Calculation*+

[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] I’ve copied these changes into UAT.  Would you mind taking a look before I go any further, in case there are any glaring issues with my setup?  

I’ll still need to bring in the PI reval and fully test after you’ve done an initial review (I have been debugging Fire A>R cases as I go so I know the code runs through).  (Am also thinking this might be 8 story pts rather than 5?  CPD should be 5 now I’ve figured out the setup for additional benefits.)



* New interface {{IAdditionalBenefitCalculator}} created, to return an ElementValue.  This will allow us to create calculators for LSI, CPD, and any other additional benefits needed
** This has been added to {{IPublicSectorCalculator}} and {{PublicSectorBaseCalculator}}
* New calculator {{PublicSectorLongServiceIncrements}} created within this interface
** This calc builds the relevant service tranche from DJS up to LSI date 30/06/2007 and calculates the qualifying service for this period
** Where this value exceeds 15years, the LSI benefit is calculated and returned, in line with logic from spec (above)
** I have not yet brought in the PI reval which applies, I’ll need help from someone on that
* New factory {{AdditionalBenefitCalculatorFactory}} which will allow us to return the relevant calculators based on member’s category.  Currently this just returns the LSI calc for FPS1992 members
** Factory has been added to {{PublicSectorCalculatorSetUp}}
* New {{KeyAccruedPensionConstants}} added for LSI
* I have amended {{CalculateAccruedPensionValues}} to get the values for each of the additionalBenefitCalculators and include them in elementValues, with new key name
* I have amended {{CalculatePreComElements}} to add the LSI value to the member’s DBPreCom and SpouseDBPreCom
** (There is no equivalent cash value at this stage, as this benefit is only available under FPS1992 where cash is calculated from the pre-com elements rather than accrued)","08/Dec/25 6:56 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388]  Looks brilliant! Making it generic for all the additional benefits is a great idea. A couple of minor things:

# Be careful with what you set as start date for service calcs. dcps is rubbish. We need to replace with start date of earliest service period if earlier. Given this code is proliferating, it might be worth ensuring there is something on public sector member info that has this adjusted service start date so we can use it throughout the code.
# Not seeing {{AdditionalBenefitCalculatorFactory}} being called in {{PublicSectorCalculatorSetUp}}","08/Dec/25 6:01 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] 

# I’ve added the following to *Public Sector Member Info*:

{noformat}public LocalDate DateJoinedScheme(List<ServicePeriod> servicePeriods)
{
    return servicePeriods.OrderByDescending(x => x.EffectiveFrom).FirstOrDefault().EffectiveFrom;            
}{noformat}

so as not to override DateCommencedPensionableService.  Updated the 2 instances of DateCommencedPensionableService in my original code to call this instead

# Added that in now.



+Testing:+

I have added one test at *Public Sector Calculation* level (LongServiceIncrements _test 1).  This is just my own test on made-up figures but I have set expected results so it will get knocked out if anything changes.

Without yet being in a position to apply the reval to the LSI benefit (and therefore not able to test against actual admin figures), I think this is as far as we can go on LSI.  I will create another ticket to apply the reval once the PI code is done, and do more testing.  Let me know if you disagree.","09/Dec/25 12:03 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;As discussed, lets clean up the datejoined scheme

* Set up serviceperiods in memberinfo base so it knows about them
* Update the logic to be lower of this and dcps as per service code

Also, think we can add the reval code. See the function in factors

Take a look at the pIprepayment (not plugged in yet) code for an example of use of the PI factor code.","09/Dec/25 1:46 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;For DateJoinedScheme:

* Added ServicePeriods to *MemberInfo* module, which also meant adding *ModelConversions* as a dependency
* DateJoinedScheme in *PublicSectorMemberInfo* amended in line with the service factory logic, using the ServicePeriods we’re now getting from base member
* Amended my 2 instances of DateJoinedScheme in *PublicSectorCalculation* as no longer require ServicePeriods to be passed in","09/Dec/25 4:13 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;For PI:

I added globalrefdata and calcdate as inputs and called the Factors function within my LSI method:

{noformat}decimal lsiFactor = Factors.GetPublicSectorPiFactor(GlobalReferenceData.AllDecimalReferenceValues.Where(x=> x.Key.Contains(""PublicSectorPI"")).ToList(), CalculationDate, LSIDate);{noformat}

I’ve not called anything from {{IPIPaymentStrategy}}, just applied the factor directly within the LSI method (and did some minor rearranging so the LSI amt is rounded before (and after) PI is applied).



For testing: we can now test against altair figures.  There is only one eligible member from the A>R test matrix, test 5, which I have added to public sector calc.  The figures do not match because altair is using the PI factor from September 2007 rather than June 2007 (the amount before PI matches though).  

I need to query this with admin but I imagine investigating this won’t be high on their priority list.  Therefore to avoid holding this up, do we finish this ticket now and raise the PI question as part of A>R testing?","10/Dec/25 1:05 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] I would not have added all of globalreference to {{PublicSectorLongServiceIncrements}}. globalreference is already big, and only going to get bigger. If the strategy only needs the public sector factors, I would restrict to just those.","10/Dec/25 1:52 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] sorry you did say this when we discussed before.  I didn’t realise i could restrict it at the {{PublicSectorCalculatorSetUp}} level, which I have now done, and followed through to the steps of the factory and calc etc","15/Dec/25 10:20 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] Can we raise a ticket to cover the PI factor issue, then we can close this ticket off",16/Dec/25 10:47 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] done [https://xps-jira.atlassian.net/browse/PHX5-732|https://xps-jira.atlassian.net/browse/PHX5-732|smart-link] ,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,16/Dec/25 1:56 PM
FPS 1992 & 2006 - Temp Duty investigation,PHX5-610,16487,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,06/Nov/25 12:33 PM,12/Nov/25 1:48 PM,,,,,,,,,,,,,,,0,,,,,"Temporary duty is an additional element of pension awarded under FPS 1992.  It makes up part of a member’s pre-comm pension.  *This has not yet been spec’d.  We need to find out when we can expect this, or ask admin to make a priority*",,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@273196d4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800001000i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,To Do,06/Nov/25 12:33 PM
FPS 1992 & 2006 - CPD investigation,PHX5-609,16486,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,06/Nov/25 12:27 PM,08/Jan/26 12:37 PM,,07/Jan/26 6:47 AM,Client 172 Fire A to R Version 5,Client 172 Fire A to R Version 6,,,,,,,,,,,0,,,,,"CPD is an additional element of pension awarded under fps 1992.  It is added to the member’s accrued pension along with other elements (added years etc, also the deduction of scheme pays debits etc) to get the pre-commutation pension, as per below from pre-comm spec:

|Total of:
If ill health, DB_IllHealthPen, or DB_SplitPen
If not ill health, DB_AccruedPension or DB_SplitPen
Plus DB_CPD
Plus DB_LSI
Plus DB_TempDuty
Plus DB_AddedYears_Pen
Less PSO_debit_1992 (adjusted for ER or LR applicable to PSO)
Less Scheme_Pays_debit_1992 (adjusted for ER or LR applicable to scheme pays debits) 
Less Scheme_Pays_debit_McCloud_1992 adjusted for ER or LR applicable to scheme pays debits|

*CPD has not yet been spec’d.  We need to refer this to admin as a priority for fire A>R, or find out when they are planning to provide this information.*",,Annabelle Stephenson,Chris Marshall,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@572ec2d,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qni:,,,"Given two runtime input decimal values for LegacyCPDAPB and ReformCPDAPB, the relevant value is added on to the DBPreCom (and SpouseDBPreCom) elements created.  Effective for FPS1992 and NFPS2006, A>R only.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 27,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-12-24 11:59:16.209,10281_*:*_1_*:*_10069_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_2_*:*_347037090_*|*_10252_*:*_2_*:*_5671_*|*_10354_*:*_3_*:*_6380351_*|*_10056_*:*_1_*:*_4920047403_*|*_10356_*:*_1_*:*_647853,,"24/Dec/25 11:59 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;message to admin

Hi Iain just checking in regarding CPD, will the spec be completed soon or is there an agreement that CPD will be manual and we will just get runtime inputs that will need adding to the accrued pension? Thanks

reply

Morning Chris. For Day 1 we will have run-time inputs. These should now be set up and available to use. I thought I had seen something on a Dev call last week.

 

We will work on the specs after Day1","02/Jan/26 5:25 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;As agreed, CPD will be a runtime input for now.  Two input parameters have been created, LegacyCPDAPB and ReformCPDAPB, that will be populated by admin at time of calc.  April has confirmed that any Temp Duty benefits will use these same runtime inputs.  If a member has both, admin will add the amounts together.  So +nothing additional is required for Temp Duty.+

In *PublicSectorCalculation*, under the {{IAdditionalBenefitCalculator}} interface that was set up for LSI, I’ve created {{PublicSectorContinuousProfessionalDevelopment}} class.  This takes the two decimal inputs and returns a new ElementValue with Key = {{ContinuousProfessionalDevelopment}} (added to *PublicSectorConstants*) and the relevant legacy/reform value, based on mcCloudOption.

This is called in {{AdditionalBenefitCalculatorFactory}} both for FPS1992 and NFPS2006, in line with spec (note that LSI applies only to FPS1992).  (*PublicSectorCalculation*)

I added {{WithAdditionalFireBenefits}} to {{PublicSectorCalculationBuilder}} which makes the two CPDAPB input values available.  (*PublicSectorCalculation*)

Updated {{CalculatePreComElements}} to include the {{ContinuousProfessionalDevelopment}} element value in the relevant preComElements being created (DBPreCom and SpouseDBPreCom).  (*PublicSectorCalculation*)

*Fire A>R calculation* updated to include {{.WithAdditionalFireBenefits}} on the +PreComPenCalculators+ for the salary link member.

Test added to A>R calc (“AdditionalPensionBenefits _CPD _LSI”) which shows within the interim values both the reform and legacy CPD elements created.",,,,,,,,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,07/Jan/26 6:47 AM
FPS 1992 & 2006 - split pension,PHX5-608,16485,Story,READINESS REVIEW,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,06/Nov/25 12:21 PM,06/Nov/25 1:39 PM,,,,,,,,,,,,,,,0,,,,,"From the pre-commutation spec:

|Split Pension - This will need to be worked on| | |
|Name|Description|Further comments|
|DB_SplitPen|TBC|If a firefighter suffers a reduction to the pensionable pay that could be consolidated into average pensionable pay between 01/04/2007 and the date they transition into the FPS 2015, and outside of the last 3 years of service, they may be entitled to a ‘split’ pension under the two-pension rule.
 
The first pension is calculated based on service up to the date the reduction in pay occurred using average pensionable pay for the 365 day period up to the date the reduction in pay occurred. The resulting pension is then uprated by pension increase to date of leaving.
 
The second pension is calculated using the remaining service and average pensionable pay for the 365 day period up to date of leaving.|
| | | |
| |SPLITS BELOW FOR NON ILL HEALTH - ILL HEALTH TO BE WORKED ON| |
| | | |
|1 drop in pay| | |
|DB_LowerTier_IllHealthSchemePen A|Calculated from DJS to day before first drop in salary, using pens sal at this date - Add PI to DOR| |
|DB_LowerTier_IllHealthSchemePen B|Calculated from day of drop in salary to DOR, using pens sal at this date| |
|Total pension = A + B| | |
| | | |
|Pension = max (DB_AccruedPension , DB_Splitpension)| | |
| | | |
|2 drops in pay| | |
|DB_LowerTier_IllHealthSchemePen A1|Calculated from DJS to day before first drop in salary, using pens sal at this date - Add PI to DOR| |
|DB_LowerTier_IllHealthSchemePen B1|Calculated from day of first drop in salary to DOR, using pens sal at this date| |
| | | |
|DB_LowerTier_IllHealthSchemePen A2|Calculated from DJS to day before second drop in salary, using pens sal at this date - Add PI to DOR| |
|DB_LowerTier_IllHealthSchemePen B2|Calculated from day of second drop in salary to DOR, using pens sal at this date| |
|Total pension = Max (A1 +B1 , A2 + B2)| | |
| | | |
|Pension = max (DB_AccruedPension , DB_Splitpension)| | |
| | | |
|Same principal applies for more drops| | |
| | | |
|Split Pension Underpin| | |
|Name|Description|Further comments|
|DB_Splitpencomparison|If(DB_SplitPen>DB_AccruedPension, DB_SplitPen, DB_AccruedPension)|The two pension amounts are then added together and compared to the single pension calculated using the best of the last 3 years of average pensionable pay. The member is then awarded the pension that provides the higher level of benefit.|

For non-ill health members, we run multiple accrual calcs with different rates of pay, employment dates, etc. 

*This is a requirement for both FPS1992 and FPS2006.  There is no indication in the spec that the calc methods differ at all between the schemes.*",,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4c89d109,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800o,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,8.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,To Do,06/Nov/25 12:21 PM
A-R Error message - ER factor missing,PHX5-607,16442,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,05/Nov/25 3:51 PM,28/Nov/25 5:19 PM,,10/Nov/25 6:30 AM,Client 150 Police A to R Version 6,,,,,,,,,,,,0,,,,,"Aurora ID 44732602 and linked member 44732601.

Error message: “No early retirement factor present for years = 4”

SW comment: Code hitting log.error in Retirement Factor Builder global module. 

Code attempting to find factor in table A401 for AccruedCarePension element. Retirement Factors in the table only went up to 3y11m and factors spec has factors up to 5y0m. Added extra factors and updated the A401 table. Tested this member in Police A>R Test 26 client 162 and now running through without errors. Ticket can now be closed.",,Steven Wright,Tracy Collins,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,,PHX5A-206,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2403b478,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008000014,,,Factor table A401 updated in Aurora to include missing factors. Member ID: 44732602 & 44732601 can now be retested to see if error now longer raises.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 20,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-08 13:56:31.295,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_386025_*|*_10252_*:*_1_*:*_18206_*|*_10354_*:*_1_*:*_165617022_*|*_10056_*:*_1_*:*_86021071,,"08/Nov/25 1:56 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Hi[~accountid:712020:f0005e1d-2048-4283-b711-413bd055eb21] see comment above, this member can be retested in Aurora now. ",,,,,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,10/Nov/25 6:30 AM
Issues raised in UAT,PHX5-606,16441,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Nov/25 3:39 PM,05/Nov/25 3:39 PM,27/Jan/26 12:40 PM,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3c6b2fac,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ofr:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,05/Nov/25 3:39 PM
A-R Error message - Calc not running,PHX5-605,16440,Bug,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,Tracy Collins,712020:f0005e1d-2048-4283-b711-413bd055eb21,05/Nov/25 3:37 PM,28/Nov/25 5:19 PM,,11/Nov/25 9:18 AM,Client 150 Police A to R Version 6,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Steven Wright,Tracy Collins,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,712020:f0005e1d-2048-4283-b711-413bd055eb21,,,,,,,,,,,,,,,,,,,,,,PHX5A-205,PHX5A-207,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@596fc1f5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008000019,,,,Active members who have a separate deferred status record were receiving a ID duplication error in Aurora. Fix applied so that the error should no trigger. Confirmed with April Woods that any separate deferred member records should not have benefit options calculated in an active calculation as this would be run separate.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 20,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-08 15:58:16.676,10251_*:*_2_*:*_70314702_*|*_10250_*:*_2_*:*_109391524_*|*_10252_*:*_1_*:*_2156_*|*_10354_*:*_1_*:*_172998461_*|*_10056_*:*_1_*:*_86828351,,08/Nov/25 3:58 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;This is not an issue when testing the member in Calculate but there must be an issue with it in Aurora. I believe it is because the linked member has a deferred normal status. Code is hitting an error with duplication of the Aurora ID in the key value pair dictionary.  I believe I have the solution coded in Public Sector Member Info global module but want to discuss with [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] first before changing and publishing.,"10/Nov/25 6:44 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e]  Yep, exact place I would have made the change. Have we checked with Neil/Data team, that this will be the case for all linked members?",10/Nov/25 5:52 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] update made in PublicSectorMemberInfo module as per our call and dependency brought through to A>R. Added additional check for Linked Members null code in the A>R. No impact on existing test cases. Could do with getting this update deployed into 150 tomorrow so we can check it fixes this issue and doesn’t break any others. I’ll then add it to the other client level calcs.,"11/Nov/25 6:47 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e]  Sorry, Release notes field was missing from bug type, can you fill that in for me please?",,,,,,,,,,,,,,,,,,,,,16441,PHX5-606,Issues raised in UAT,Done,11/Nov/25 9:18 AM
Review A to R Fire Spec,PHX5-604,16437,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Nov/25 2:45 PM,28/Nov/25 5:15 PM,,12/Nov/25 1:56 PM,Client 164 Fire A to R Version 1,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6402cc94,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800gzx,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 20,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-06 13:52:20.433,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_525182460_*|*_10252_*:*_1_*:*_76463332_*|*_10354_*:*_1_*:*_4231_*|*_10056_*:*_1_*:*_26706,,"06/Nov/25 1:52 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;So far I’ve set up 11 tickets for the fire schemes, some are tasks as we need to get more info first.  A couple of them are quick changes that are already ready to code.

I’ve reviewed the following specs for differences between the schemes:

* A>R
* Pre-commutation
* CARE
* Accrual
* FPP
* Service",,,,,,,,,,,,,,,,,,,,,,,,13856,PHX5-223,Fire - Active to Retirement,Done,12/Nov/25 1:56 PM
Set up Fire A to D Calc and Test cases - and create tickets for any issues,PHX5-603,16436,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Nov/25 2:38 PM,28/Nov/25 5:21 PM,,07/Nov/25 6:37 AM,Client 164 Fire A to D Version 1,,,,,,,,,,,,0,,,,,"Fire A>D now set up: client 164 in UAT: [https://calculate.uat.xpsplc.com/Clients/164/Calculations/2|https://calculate.uat.xpsplc.com/Clients/164/Calculations/2]

Added 3 test cases from non signed off matrix to check if any cases run. Only 1 out of 3 runs. Created tickets for test 1 and 2 errors to be looked at.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@654831c3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800gzz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 20,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_440436_*|*_10252_*:*_1_*:*_89721730_*|*_10354_*:*_1_*:*_16628_*|*_10056_*:*_1_*:*_55942,,,,,,,,,,,,,,,,,,,,,,,,,,16496,PHX5-619,Fire - Active To Deferred,Done,07/Nov/25 6:37 AM
Review Police A to D test cases - and raise any required tickets,PHX5-602,16435,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,05/Nov/25 2:37 PM,28/Nov/25 4:26 PM,,12/Nov/25 12:03 PM,Client 162 Police A to D Version 1,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Chris Marshall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@ff2c67d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ojw:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 20,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-12 11:46:06.979,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_417613914_*|*_10252_*:*_1_*:*_176866118_*|*_10354_*:*_1_*:*_2882_*|*_10056_*:*_1_*:*_61461,,"12/Nov/25 11:46 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;2 tickets raised - 

Tests 14 & 15 have TVIN CARE which is output but this and the CARE main pen is not added together

Test 18 no NPPS pen or LS output

Test 12 reform DB pen and LS differ slightly - no ticket raised as yet as I think this is a data issues",,,,,,,,,,,,,,,,,,,,,,,,13853,PHX5-220,Police - Active to Deferred,Done,12/Nov/25 12:03 PM
Set Total Service for publicSectorMemberInfo,PHX5-601,16295,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,04/Nov/25 10:51 AM,28/Nov/25 5:19 PM,,11/Nov/25 6:48 AM,Client 162 Police A to D Version 1,,,,,,,,,,,,0,,,,,"TotalService for publicSectorMemberInfo is currently being set within {{GetAccruedPension}} in the {{PublicSector1987IllHealthStrategy}} only.  (Which will be why we have the error in A>D, because its not using that strategy.)  We should set this instead at the point at which service is calculated",,Annabelle Stephenson,Chris Marshall,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,PHX5-588,,,,,,,,,,,,,,,,,,10/Nov/25 3:18 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251110-151725.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11414,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@403dc4f8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800gk,,,For PPS A>D tests code updated to now not set Total Service error,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 20,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-10 15:18:29.269,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_428307459_*|*_10252_*:*_1_*:*_5686_*|*_10354_*:*_1_*:*_4851011_*|*_10056_*:*_1_*:*_101275549,,"10/Nov/25 3:18 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Public Sector code updated

!image-20251110-151725.png|width=635,alt=""image-20251110-151725.png""!

Only affecting PPS tests 1-7. Ran tests following code update and no error now produced",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,11/Nov/25 6:48 AM
Police A2R Tests Needed,PHX5-600,16196,Story,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,31/Oct/25 4:20 PM,12/Nov/25 3:05 PM,,,,,,,,,,,,,,,0,,,,,"We need to test the following calc types:

|PPS McCloud Calcs (inc IH)|CARE Target, DB PCLS Target, DB Scheme Maximum Target|
|NPPS McCloud Calcs (inc IH)|PCLS target and CARE target|
|Non-McCloud (CARE only)|CARE target|
|Non-McCloud (Linked NPPS Record)|CARE PCLS (only tested full PCLS of the NPPS side of the record)|
|Non-McCloud (Linked NPPS Record)|PCLS target and CARE target|",,Andrew Wilson,Annabelle Stephenson,Naomi Robinson,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,12/Nov/25 3:05 PM;18934601-32fa-4c76-9b74-159dc94fd206;Request for additional A-D test.msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11489,03/Nov/25 2:43 PM;18934601-32fa-4c76-9b74-159dc94fd206;Test case request to Tracy.msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11056,04/Nov/25 4:22 PM;18934601-32fa-4c76-9b74-159dc94fd206;Tracy RE target test cases.msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11222,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4098ee3d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800h,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-03 13:44:23.821,,,03/Nov/25 1:44 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388]  to add target cash required cases,03/Nov/25 2:43 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Tests requested from Tracy[^Test case request to Tracy.msg] ,"04/Nov/25 4:22 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[^Tracy RE target test cases.msg]

admin don’t have any test cases readily available. hoping to get some. have marked ticket 433 as blocked in the meantime","12/Nov/25 3:05 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;New test requested to replace member for A>D test 12, where data was incorrect. [^Request for additional A-D test.msg] ",,,,,,,,,,,,,,,,,,,,,,,,To Do,31/Oct/25 4:20 PM
"Police A2R TEST 17, 18 and 21: CARE Value slightly out. Potentially correct.",PHX5-599,16167,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,31/Oct/25 2:25 PM,28/Nov/25 5:19 PM,,10/Nov/25 6:39 AM,Client 150 Police A to R Version 6,,,,,,,,,,,,0,,,,,"Please can someone review the CARE values for the ill health members in test 17 and 18. Out by £2 or £3 but may be to do with our CARE data being up to date. May, however, be an ill health enhancement issue. Seems to be the same issue on both. If our figures seem correct please raise a ticket with admin in Phase 5 Analysis under the Police A>R to get them to approve the figures. We can then update our expected values. If a coding issue, keep in this ticket.",,Andrew Wilson,Chris Marshall,Naomi Robinson,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,05/Nov/25 4:20 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251105-161718.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11269,05/Nov/25 4:20 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251105-162009.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11268,07/Nov/25 11:46 AM;5e266667-8b87-4eb6-9386-71980feac557;image-20251107-105437.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11344,07/Nov/25 11:46 AM;5e266667-8b87-4eb6-9386-71980feac557;image-20251107-105456.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11341,07/Nov/25 11:46 AM;5e266667-8b87-4eb6-9386-71980feac557;image-20251107-110012.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11343,07/Nov/25 11:46 AM;5e266667-8b87-4eb6-9386-71980feac557;image-20251107-110059.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11342,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@64b00c86,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800gm,,,Updated code to calculate prospective service to date before NRD and not to NRD which was giving and incorrect prospective service for CARE Ill Health Enhancement,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 20,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-04 12:26:31.031,10251_*:*_2_*:*_138615471_*|*_10250_*:*_2_*:*_36359516_*|*_10252_*:*_1_*:*_83537579_*|*_10354_*:*_1_*:*_349249195_*|*_10056_*:*_1_*:*_1294515,,"04/Nov/25 12:26 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Potential fix
Seems that prospective serve is a day longer than expected. Tested the below around line 1988 in public sector and seemed to work

{noformat}decimal oneDayEquivalent = 1m / 365m;
			decimal initialprospectiveService = prospectiveServiceHistory.Where(x => x.TrancheKey == KeyServiceTrancheConstants.ProspectiveKey).Sum(x => x.FinalDecimalAmount) - oneDayEquivalent;{noformat}","05/Nov/25 4:20 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Following investigation, the prospective service for CARE ill health was being calculated to include the date of NRD. This should be calculated to the day before NRD. Code added to amend this prospective service and calculate the correct years and days from date retired to day before NRD


!image-20251105-161718.png|width=627,alt=""image-20251105-161718.png""!

Also tidied up code by dividing the prospective service here and not where was previously when the decision of > than 5 years qualifying CARE service is made . Removed divide by 2 from line 1992 & line 2015


!image-20251105-162009.png|width=620,alt=""image-20251105-162009.png""!



",07/Nov/25 6:53 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  I would not be just randomly removing one day from the code. The better fix here is to ensure that the end date used in the service calculation is the day before NRD. ,"07/Nov/25 11:46 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Amended code from

!image-20251107-105437.png|width=635,alt=""image-20251107-105437.png""!

!image-20251107-105456.png|width=635,alt=""image-20251107-105456.png""!

To

!image-20251107-110059.png|width=626,alt=""image-20251107-110059.png""!

!image-20251107-110012.png|width=620,alt=""image-20251107-110012.png""!

Updated dependency for A>R in client 162",,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,10/Nov/25 6:39 AM
TEST 17: IH Service Out,PHX5-598,16166,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,31/Oct/25 2:17 PM,31/Oct/25 2:26 PM,,31/Oct/25 2:20 PM,,,,,,,,,,,,,0,,,,,"Can’t work out how £15,841.87 has been calculated but it’s exactly £2 different to the Altair print. Please can someone check if our figure is deemed correct and, if so, raise a ticket on Phase 5 analysis to get the values signed off for CARE pre-com, commuted, residual and cash as shown below?

|         15,839.87|          5,654.83|    10,185.04|       67,857.96|",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@185dc9d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800001,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_185451,,31/Oct/25 2:20 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Raised in error,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,31/Oct/25 2:20 PM
TEST 7: No Additional Pension Commuted From Lump Sum being included,PHX5-597,16117,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,30/Oct/25 5:11 PM,30/Oct/25 5:58 PM,,30/Oct/25 5:57 PM,,,,,,,,,,,,,0,,,,,"Reform and Legacy PCLS calcs do not include the figures for Additional Pension Commuted From Lump Sum.

Is this an issue with how we are setting up our expected values? I see this has a lump sum of £0, whereas we are checking a PCLS Pre Comm and Lump Sum. 

Is the Additional only applicable if there is £0 Cash? If so, how would be represent this in results?

!image-20251030-171258.png|width=323,alt=""image-20251030-171258.png""!",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,30/Oct/25 5:14 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251030-171258.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10930,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5503da23,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2r:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_2752309,,30/Oct/25 5:58 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Closed as this was just an issue with setting PCLS expectation rather than zero lump sum,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,30/Oct/25 5:57 PM
"Police A2R TEST 8, 9 and 13: CARE tables and Age addition",PHX5-596,16116,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,30/Oct/25 4:39 PM,28/Nov/25 5:19 PM,,10/Nov/25 6:33 AM,Client 150 Police A to R Version 6,,,,,,,,,,,,0,,,,,"Test 8, 9 and 13 are disagreeing on the total accrued care pension and reform care pension. 

Wondering if our code is supposed to actually do anything for these additions as there are spaces on the CARE tables in Aurora to have to up to date care with an additional column to note what additional pension there is. Would seem as though if we pulled the latest total CARE value from the table it would be inclusive of this figure, making our calcs “correct”, but the data needing a review.

If I am wrong then presumably we need to be picking up the Additional Credit in our code.

I have commented screen shots of test 8. Same issues on test 9 (NPPS) and test 13 (IH - care only)",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,PHX5A-210,,,,,,,,,,,,,,,,,,,,30/Oct/25 5:02 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251030-170056.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10926,30/Oct/25 5:02 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251030-170244.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10927,30/Oct/25 5:10 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251030-170941.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10929,30/Oct/25 5:10 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251030-171007.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10928,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@54688b0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ojx:,,,"Updating expected values in TEST 8, 9 and 13 of Police A>R (client 162) to match updated values from admin, per [https://xps-jira.atlassian.net/browse/PHX5A-202|https://xps-jira.atlassian.net/browse/PHX5A-202|smart-link].",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 20,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10281_*:*_2_*:*_438655887_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_2_*:*_46989_*|*_10253_*:*_2_*:*_40970_*|*_10252_*:*_2_*:*_4653_*|*_10354_*:*_3_*:*_175104621_*|*_10056_*:*_1_*:*_72003343,,"30/Oct/25 5:02 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;CARE figures, test 8:

Altair shows accrued pension of £1,804 with addition of £61.34 giving total of £1,865.34.

UAT figures have accrued pension of £1,895.33 seemingly including addition for that period of £61.94, when reviewing Aurora data.

Table looks slightly wrong in its inputs for inflation rate and accrued inflation but total accrued pension potentially correct based on known rates. Is UAT testing therefore working as expected?

!image-20251030-170056.png|width=283,alt=""image-20251030-170056.png""!

Altair result:

!image-20251030-170244.png|width=255,alt=""image-20251030-170244.png""!

For reform care, the CARE benefits table does not show any age addition, but the Altair calc says there is £229.24 to add. Do we rely on the data having it included in Total Pension or should we be calculating this? Looks like data potentially needs updating.

!image-20251030-170941.png|width=247,alt=""image-20251030-170941.png""!

Altair print:

!image-20251030-171007.png|width=255,alt=""image-20251030-171007.png""!

Ticket raised in Phase 5 Analysis to ask admin to review as code seemingly correct.",31/Oct/25 12:02 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Discussion with Annabelle 31/10: We think that the code is working correctly and differences to Altair are CARE data tables needing updating for Additional Credits and also 2025 inflation now being known. Have raised admin ticket to get sign off or comment. See PHX5-210,"07/Nov/25 3:09 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Resolved by [https://xps-jira.atlassian.net/browse/PHX5A-202|https://xps-jira.atlassian.net/browse/PHX5A-202|smart-link] where we asked admin to confirm the Total CARE at end date as we felt our code was correct and data through Altair was wrong. They provided screen shots of the values for tests 8, 9 and 13 which matched our outputs, so I have updated expected values and put a comment in the matrix. I have done this in Client 162 as we have moved there and also noted in the Test description.",,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,10/Nov/25 6:33 AM
Police A2R TESTS 1-6 (PPS): CARE values to be removed from Max Commutation Calcs (PPS only),PHX5-595,16115,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,30/Oct/25 4:10 PM,28/Nov/25 5:19 PM,,07/Nov/25 6:36 AM,Client 150 Police A to R Version 6,,,,,,,,,,,,0,,,,,"Per spec updates that occured two weeks ago, CARE is no longer to be included in the maximum commutation calcs that PPS members receive:

ReformDBMaximumLumpSum

LegacyDBMaximumLumpSum

We raised ticket: [https://xps-jira.atlassian.net/browse/PHX5A-190|https://xps-jira.atlassian.net/browse/PHX5A-190|smart-link] with admin to get them to approve the inclusion of CARE values, as per the original spec. The spec was recently updated to remove this requirement.

As such, the code needs to be amended.

See ticket 202 linked for an attached copy of workings showing Altair (no care) vs UAT (including care). The figures now need to match Altair.",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-190,,,,,,,,,06/Nov/25 5:25 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251106-172521.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11308,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2832daa5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800gy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 20,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2571_*|*_10252_*:*_1_*:*_273645971_*|*_10354_*:*_1_*:*_5293_*|*_10056_*:*_1_*:*_335626137,,"06/Nov/25 5:25 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Simple code fix to remove CARE values from rows 4256 and 4259 in Public Sector Calculation. Attached in PHX5A-490 (relates to) is also an excel which highlights in yellow the two values removed from the calc, shared with admin.

Main overhead was to re-calculate the LumpSumAfterTax test cases to make sure the expected values were up to date.

I also made sure at least one of the global test cases reflected an A>R test case we had, to check it would match the matrix figure. 

I used test 1 which is also the calc workings supplied to admin. We are now only 6p out which is due to how altair calculates MaxPCLS used in the calc. (Altair does “(PreCom/ 4).Round * CF” and UAT does “((PreCom * CF) / 4).Round()”.

Not deemed an issue relating to this fix and tolerance has been set accordingly.

!image-20251106-172521.png|width=878,alt=""image-20251106-172521.png""!",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,07/Nov/25 6:36 AM
"Police A2R TEST 7 and 9: Add in CARE and Reform CARE commuted, residual and cash values for PCLS tests",PHX5-594,16111,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,30/Oct/25 3:54 PM,31/Oct/25 12:40 PM,,31/Oct/25 12:40 PM,,,,,,,,,,,,,0,,,,,"Please could we get care lump sum and reform lump sum for the following test cases: TEST 7, TEST 9 (Police A>R)",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@17f7d6e5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x0000080000i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10281_*:*_1_*:*_0_*|*_10253_*:*_1_*:*_129050_*|*_10056_*:*_1_*:*_74600275,,31/Oct/25 12:39 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Considered covered by test 8. Additional tests will be added on the basis of admin testing specific scenarios.,,,,,,,,,,,,,,,,,,,,,,,,13854,PHX5-221,Police - Active to Retirement,Done,31/Oct/25 12:40 PM
Police Transfer In Non Club Test Matrix,PHX5-593,16110,Task,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,30/Oct/25 2:22 PM,13/Nov/25 11:15 AM,,,,,,,,,,,,,,,0,Batch3,TransferIn,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2fc6d2f5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zzzx,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Oct/25 2:22 PM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Test Matrix set up, populated with cases & ran in Altair. Unable to get any live cases without additional reports.

Calculations need setting up in calculate

[Police Transfer In Non Club Test Matrix|https://xpsplc.sharepoint.com/:f:/s/ProjectPhoenix/Egg6GjH3ujtAjmvqhYP6TSwB6BbccYj_etpyiRSCoIyscQ?e=juAEVR]",,,,,,,,,,,,,,,,,,,,,,,,14427,PHX5-319,Police - Transfer In Non Club,To Do,30/Oct/25 2:22 PM
Police Transfer In Club Test Matrix,PHX5-592,16109,Task,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,30/Oct/25 2:18 PM,13/Nov/25 11:15 AM,,,,,,,,,,,,,,,0,Batch3,TransferIn,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@44d06396,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zzzr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Oct/25 2:19 PM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Test Matrix set up, populated with cases & ran in Altair. Unable to get any live cases without additional reports.

Calculations need setting up in calculate

[Police Transfer In Club Test Matrix|https://xpsplc.sharepoint.com/:f:/s/ProjectPhoenix/EhW-Yg8v29JIqEIeJVE0AzwBLp4AerrJ8YiE1njd_QPKiw?e=U23ooE]",,,,,,,,,,,,,,,,,,,,,,,,14422,PHX5-314,Police - Transfer In Club,To Do,30/Oct/25 2:18 PM
Police - Divorce Debit & Credit Test Matrix,PHX5-591,16108,Task,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,30/Oct/25 2:11 PM,13/Nov/25 11:15 AM,,,,,,,,,,,,,,,0,Batch3,Divorce,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4baa72f6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zzz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Oct/25 2:15 PM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Test Matrix set up, populated with cases & ran in Altair. Unable to get any live cases without additional reports. 

Calculations need setting up in calculate

[Police Divorce Debit Credit Test Matrix|https://xpsplc.sharepoint.com/:f:/s/ProjectPhoenix/EtLHxvr3ozJCjmcg7l1C_QABn2cHImCjYKIRR1BnLNLg6g?e=WLTP1m]",,,,,,,,,,,,,,,,,,,,,,,,14416,PHX5-309,Police - Divorce Debit and Credit,To Do,30/Oct/25 2:11 PM
"Publish latest public sector calc and update A>R, then release to UAT testing client with release note.",PHX5-590,16049,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,29/Oct/25 2:12 PM,28/Nov/25 4:36 PM,,04/Nov/25 9:00 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"Publish latest public sector calc and update A>R, then release to UAT testing client with release note.

Release to Ant/ Tracy.

Russell has made care salary updates in public sector calc not yet published to A>R so please do this first.

Release should be summary of published comments",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@60c1abae,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzbzzyi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 19,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1534_*|*_10252_*:*_1_*:*_3191_*|*_10354_*:*_1_*:*_11676778_*|*_10056_*:*_1_*:*_390426,,29/Oct/25 2:17 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Per Ant’s request on retro and planning call,"29/Oct/25 5:35 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Copied A>R code from 144 to 150 and updated publicsectorcalculation dependency to v69.

Added the following comment on publishing:

This is what I have added to the published notes within the calc, which I discussed with Pete could act as the calc team ""release note"".

 

Changes made to ActiveToRetired Calculation Code, between V4 and V5 (21/10 and 29/10):

* Removed Client and GlobalReferenceData Interim Values as more specific Interim values now used (NR) - only visible in UAT and not front end, for debugging
* Update to Non-McCloud members to give them DBPCLS options if they have a linked record with NPPS (previously only using CARE2015 record, matrix test case 15) (NR - [PHX5-546|https://xps-jira.atlassian.net/browse/PHX5-546] )
* Updating to existing care records to output member care - added to Non-McCloud Normal and Salary Linked member record and McCloud normal and salary linked record (SW - [PHX5-559|https://xps-jira.atlassian.net/browse/PHX5-559] )
* Updates to IActivePreComCalculator and IActiveRetirementCalculator names to IPreComCalculator and IRetirementCalculator - code naming convention change, no change to front end functionality (AS)

Public Sector and CARE global code tickets completed contributing to updates between PublicSectorCalculation v62 and v69 (21/10 to 29/10)

[PHX5-471|https://xps-jira.atlassian.net/browse/PHX5-471] CARE Salary Input

[PHX5-551|https://xps-jira.atlassian.net/browse/PHX5-551] When creating CARE from salaries incorrect inflation being used

[PHX5-499|https://xps-jira.atlassian.net/browse/PHX5-499] CARE additional inflation not tested for future values

[PHX5-554|https://xps-jira.atlassian.net/browse/PHX5-554] Deletion of unused DecimalReferenceValues

[PHX5-581|https://xps-jira.atlassian.net/browse/PHX5-581] Set up MemberCareBenefitType output logic

[PHX5-563|https://xps-jira.atlassian.net/browse/PHX5-563] UPC figure deducted from max lump sum lower than expected

[PHX5-579|https://xps-jira.atlassian.net/browse/PHX5-579] Add mapping for MemberCareBenefitType to Care Global Module MemberCare List.",29/Oct/25 5:36 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;realised there is a typo in my saved comment on publishing that says v68 not v69. Commenting here as a record that version 5 of the client 150 A>R was updated to v69 of publicsectorcalculation.,,,,,,,,,,,,,,,,,,,,,,13854,PHX5-221,Police - Active to Retirement,Done,04/Nov/25 9:00 AM
Go through all A2R calcs from NPPS onwards to review changes to results following CARE updates,PHX5-589,16048,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,29/Oct/25 1:44 PM,28/Nov/25 5:19 PM,,04/Nov/25 6:28 AM,Client 150 Police A to R Version 6,,,,,,,,,,,,0,,,,,"Audit trail document and matrix for A>R to be updated for tests 7 onwards, including update of outcome values.

Phase 5 analysis to be updated for anything admin need to approve.

PPS already complete.",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31/Oct/25 4:47 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;A2R Status COP 311025.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10990,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1f28f82,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzbzzy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 19,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_169864018_*|*_10252_*:*_1_*:*_13855723_*|*_10354_*:*_1_*:*_4806_*|*_10056_*:*_1_*:*_62646,,"31/Oct/25 4:47 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Audit trail doc: [https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EURlW-r8OnJGmBlFCFajPaQBz6PbzUCbsGjKruHfVCtMoA?e=gdYEnY|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EURlW-r8OnJGmBlFCFajPaQBz6PbzUCbsGjKruHfVCtMoA?e=gdYEnY|smart-link] 



Reporting as of 31/10 attached in graph. Will discuss moving tests 26 and 27 to global as testing specific factors not member calcs.

See all tickets starting Police A2R TEST… for remaining tickets across Active to Retired Calc.",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,04/Nov/25 6:28 AM
A>D tests 1 to 7 PPS members have an error. Also add expected results,PHX5-588,16047,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,29/Oct/25 12:39 PM,28/Nov/25 5:19 PM,,04/Nov/25 3:28 PM,Client 162 Police A to D Version 1,,,,,,,,,,,,0,,,,,"Error message of 

!image-20251029-124039.png|width=369,alt=""image-20251029-124039.png""!

Output for PPS test members only",,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,PHX5-601,,,,,,,,,,,,,,,,,,,,29/Oct/25 12:40 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251029-124039.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10863,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@368b3597,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzbzzz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 19,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_454383651_*|*_10252_*:*_1_*:*_2981_*|*_10354_*:*_1_*:*_2993_*|*_10056_*:*_1_*:*_74186045,,"30/Oct/25 4:47 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;All expected results added for all tests.

Further test added for non mccloud NPPS & CARE. Unable to run A>D in Altair but ran IH lower tier calc for expected result

Updated matrix with red/amber/green results",04/Nov/25 3:28 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Expected results input. Moving ticket to closed as further story in backlog to correct issued with TotalService,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,04/Nov/25 3:28 PM
PPS and NPPS inc IH calcs (4 calc types) need CARE target and Lump Sum Target test cases,PHX5-587,16044,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,28/Oct/25 4:07 PM,31/Oct/25 4:22 PM,,31/Oct/25 4:22 PM,,,,,,,,,,,,,0,,,,,"Test cases required for target CARE and PCLS on all calc types.

PPS cases: 

|CARETargetLumpSum|

|ReformPre22CARETargetLumpSum|

NPPS:

Same as above plus:

|ReformDBTargetLumpSum|

|LegacyDBTargetLumpSum|

Non-McCloud:

|CARETargetLumpSum|

Non-McCloud with NPPS:

Same as above plus

|LegacyDBTargetLumpSum|",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@65bca95b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fg203,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_260086163,,31/Oct/25 4:22 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Closing as duplicated by another ticket with all test cases needed for A2R,,,,,,,,,,,,,,,,,,,,,,,,13856,PHX5-223,Fire - Active to Retirement,Done,31/Oct/25 4:22 PM
Police A2R TEST 6 and TEST 22: PT Service Slightly Out,PHX5-586,16043,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,28/Oct/25 3:55 PM,28/Nov/25 5:19 PM,,11/Nov/25 7:02 AM,Client 150 Police A to R Version 6,,,,,,,,,,,,0,,,,,"TEST 6: Legacy service out. To review service (see interim value results). looks like 1 day out leading to £2 difference on pre-com. We are testing zero lump sum so no result for cash to review.



TEST 22: Reform service out, leading to £2 difference on results. Seems to also be a PT service calcs so linked to the above.",,Chris Marshall,Isobel Mounsey,Naomi Robinson,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,06/Nov/25 11:25 AM;6836c9be-4fc2-4a70-b665-cf0499e9e856;69017 (b300ddd2-18b5-459e-8dae-a47463560213).xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11303,05/Nov/25 3:11 PM;6836c9be-4fc2-4a70-b665-cf0499e9e856;69017.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11267,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@a36c6bb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:,,,TEST 6 no longer an issue. Test 22 appears to be calculating as calcs team expect. Matrix updated to reflect code PT service value and Reform DBZeroLumpSum result (£2.05 different to Altair figure).,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 20,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-04 14:02:13.015,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2859_*|*_10252_*:*_1_*:*_2159_*|*_10354_*:*_2_*:*_90647456_*|*_10056_*:*_1_*:*_509508207_*|*_10355_*:*_1_*:*_512385321,,30/Oct/25 7:15 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;See ticket 504 for TEST 6. Might be TVIN?,"04/Nov/25 2:02 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Test 6 reply from admin
[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] Hi Chris. For the example member 361558 we would expect the output to calculate the service using the start date and period end date. So the figures in the legacy option would be 17/123 and 19/129 and the reform option would be 10/123 and 19/129 The leap year has been factored into the total qualifying service as the leap year is crossed in the year of leaving. Altair is not correct as it has not consistently applied any logic and we don’t agree with either of the outputs it reaches. We have not included the leap year in the reckonable as the period end date is not within a leap year. It would be included in the reckonable if the period end date was in a leap year. Thanks, April

Updated expected result for service to show legacy 17/123 (17.336986) & legacy 10/123 (10.336986) Updated expected pension also as differs when using correct service to expected result from Altair","04/Nov/25 2:37 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Test 22
Legacy service matches

Reform service differs slightly - Altair 12.9835 (12Y359D) UAT 12.986301 (12Y360D)

[~accountid:712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f] are you able to confim what the correct reform service you would expect is?

Thanks","05/Nov/25 3:00 PM;712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f;Confirmed expected service for 69017 to [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] on Teams - let me know if you need anything else. Thanks, ",05/Nov/25 3:11 PM;712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f;[^69017.xlsx] [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] ,06/Nov/25 9:12 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f] the service calc does not include the TVIN. Are you able to calculate this including the TVIN please. Thanks,"06/Nov/25 11:25 AM;712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f;Hi [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] sorry i missed the TVIN, id just used the service on Altair Test2 and not checked live. I've attached a new spreadsheet with the service breakdown incl. the TV In. I have done the reform and legacy 1987 full time and part time service, let me know if you need anything else. Thanks[^69017 (b300ddd2-18b5-459e-8dae-a47463560213).xlsx] ","10/Nov/25 12:56 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Moved to client 162. Test 6 now passing and £2.05 difference on 

|ReformDBZeroLumpSum|

figure. On review code looks to be calculating PT service as required. Based on discussion 10/11 AM, we will now update expected value by £2.05 and note the change on the matrix, as we don’t believe the code needs updating or is wrong.",,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,11/Nov/25 7:02 AM
TEST 4: LegacyDBMaximumLumpSum significantly out compared to other max test cases,PHX5-585,16041,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,28/Oct/25 2:36 PM,28/Oct/25 3:54 PM,,28/Oct/25 3:54 PM,,,,,,,,,,,,,0,,,,,"To look into why LegacyDBMaximumLumpSum values are so out (cash out by £6k). 

If we determine our calc is likely correct, ticket to be added to Police A>R epic in Phase 5 Analysis to show workings to admin and request sign off.",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@637fdb0a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000806,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_4718527,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,28/Oct/25 3:54 PM
Care does not calculate full period if existing data ends part year.,PHX5-584,16035,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,28/Oct/25 10:51 AM,28/Nov/25 5:21 PM,,07/Nov/25 6:36 AM,Client 150 Police A to R Version 6,Client 162 Police A to D Version 1,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,0,,,,,"In test cases, the Active Normal member the latest existing care data row in Care Benefits  has an effectiveFrom date of 01/04/2024 and effectiveTo 05/04/2025. This is because the Altair annual task for annual allowance needs to calculate the care pension earned for the 5 days to year end, it also performs a writeback to the care screen. When running the A>R calc, the code uses existing care data from this screen to decide when the new care pension series needs to be calculated from. Where the effectiveto date is mid year - i.e. not a full care series year, the care code skips calculating any care pension for the rest of that care year because it treats that entry for 01/04/2024 to 05/04/204 as a full CARE year. We need it to check if the full care year has been calculated in that row and if not, recalculate that year to date of calculation. For example if DOR is 31/12/2024 then it should know the 05/04/2024 is only a partial year and recalculate from 01/04/2024 to 31/12/2024 instead. 

April woods confirmed in a call to me that the 01/04/2024 to 05/04/2024 line would not be replaced with the full year calc up to 31/03/2025 until the next annual allowance calc run takes place so we need to be able to deal with this scenario. 



Update on 06/11/2025 - SW

Decision made that on next data cut / migration for live, any members who have 5 days worth of care calcs in their latest row in the Care Benefits Table will have that row removed, the member care data should only hold full care years until retirement. Code update no longer required. Sending ticket into close. 

!image-20251106-155940.png|width=668,alt=""image-20251106-155940.png""!",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,06/Nov/25 4:03 PM;bfea69ca-e7d9-488d-b01b-103621fa1516;image-20251106-155940.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11307,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6cd5f52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000802,,,Member Care Benefits data change: Data migration will remove any care row lines in member data with for active members which have an effective from date of 1 April and effective to of 5 April. Admin have been advised to check that member care data contains complete care years only before running a calculation for an active member. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 20,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2238_*|*_10252_*:*_1_*:*_54593_*|*_10354_*:*_1_*:*_711543247_*|*_10056_*:*_1_*:*_84869276,,,,,,,,,,,,,,,,,,,,,,,,,,13807,PHX5-197,CARE Module,Done,07/Nov/25 6:36 AM
Wrong CARE headings for PPS and NPPS McCloud PensionOptions,PHX5-583,16033,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,27/Oct/25 4:04 PM,03/Dec/25 11:01 AM,,,,,,,,,,,,,,,0,,,,,"PPS and NPPS (e.g. Test 1 and Test 10) give the following CARE options:

|LegacyPost22CAREZeroLumpSum|
|LegacyPost22CAREPCLS|
|LegacyPost22CARETargetLumpSum|
|CAREZeroLumpSum|
|ReformPost22CAREPCLS|
|ReformPost22CARETargetLumpSum|

These are separate from the correct reform care options, being:

|ReformPre22CAREZeroLumpSum|
|ReformPre22CAREPCLS|
|ReformPre22CARETargetLumpSum|

When we run the non-McCloud members, the CARE headings are as expected and as follows:

|CAREZeroLumpSum|
|CAREPCLS|
|CARETargetLumpSum|

As such, I think the 6 care options being output on McCloud members for CARE, should be actually coming out as these three options.",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,PHX5-580,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@688e0e8f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000804,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-03 11:01:42.686,,,03/Dec/25 11:01 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272]  Is this still an issue?,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,To Do,27/Oct/25 4:04 PM
Higher tier Ill Health CARE service only uses service from 01/04/2022,PHX5-582,16032,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,27/Oct/25 12:15 PM,28/Nov/25 4:38 PM,,04/Nov/25 3:27 PM,Client 150 Police A to R Version 6,,,,,,,,,,,,0,,,,,"For higher tier Ill Health to decide if member has over or under 5 years qualifying service to determine the correct enhancement for McCloud eligible member the qualifying service includes service from 011/04/2015 form the salary linked record.
If there is no service line included on the normal record with the service back to 2015 then the service to determine the qualifying is incorrect and the enhancement may also be incorrect",,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1f010a60,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzbzzzi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 19,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_3281_*|*_10252_*:*_1_*:*_4180_*|*_10354_*:*_1_*:*_3445_*|*_10056_*:*_1_*:*_682053570,,"04/Nov/25 9:43 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Re-checked the test results for test 17,18,20 & 21 and the results now are close. No code change has been added now. The results are slightly out due to the CARE accrual which is detailed on ticket 599. 

The results for test 18 & 20 were showing as the option 1 of ill health with less that 5 years qualifying which is now not the case.

I am happy with the Ill Health part of the outputs [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] what is your opinion on the above

This is the code change if required in future



{noformat}public static class PublicSectorFactories
{
    public static Dictionary<ServiceCalcType, IServiceCalculator> PublicSectorServiceFactory(
        List<ServicePeriod> servicePeriods,
        List<ServiceBreak> serviceBreaks,
        IMemberInfo memberInfo,
        MemberData memberData,
        LocalDate schemeServiceEndDate,
        LocalDate careStartDate,
		IllHealthType illHealth,
		McCloudOption mcCloudOption)
    {
        Dictionary<ServiceCalcType, IServiceCalculator> serviceCalculations = new Dictionary<ServiceCalcType, IServiceCalculator>();

        if (!memberInfo.DateCommencedPensionableService.HasValue)
        {
            Log.Error(""No DCPS - cannot calculate service"");
            return serviceCalculations;
        }

        LocalDate serviceStartDate = memberInfo.DateCommencedPensionableService.Value;

        if (servicePeriods.Any())
        {
            var earliestServicePeriod = servicePeriods.OrderBy(x => x.EffectiveFrom).First();
            if (earliestServicePeriod.EffectiveFrom < serviceStartDate)
            {
                serviceStartDate = earliestServicePeriod.EffectiveFrom;
            }
        }

        List<ServiceTranche> serviceTranches = new List<ServiceTranche>
        {
            new ServiceTranche { EffectiveFrom = serviceStartDate, EffectiveTo = schemeServiceEndDate, Key = ""ALL"" }
        };

        if (serviceStartDate <= careStartDate)
        {
            IServiceBuilder dbServiceBuilder = GetServiceBuilder(servicePeriods, serviceBreaks, memberInfo, serviceStartDate, careStartDate.PlusDays(-1), serviceTranches, ServiceMethod.PublicSector);

            serviceCalculations.Add(ServiceCalcType.DBOnly, dbServiceBuilder.Build());
        }

        IServiceBuilder serviceBuilder = GetServiceBuilder(servicePeriods, serviceBreaks, memberInfo, serviceStartDate, schemeServiceEndDate, serviceTranches, ServiceMethod.PublicSector);

        serviceCalculations.Add(ServiceCalcType.TotalService, serviceBuilder.Build());

        List<ServiceTranche> serviceCARETranche = new List<ServiceTranche>
        {
            new ServiceTranche { EffectiveFrom = careStartDate, EffectiveTo = schemeServiceEndDate, Key = ""CARE"" }
        };

        IServiceBuilder careServiceBuilder = GetServiceBuilder(servicePeriods, serviceBreaks, memberInfo, careStartDate, schemeServiceEndDate, serviceCARETranche, ServiceMethod.PublicSectorCAREOnly);

        serviceCalculations.Add(ServiceCalcType.CAREOnly, careServiceBuilder.Build());

          bool illHealthCase = (int)illHealth == 1 || (int)illHealth == 2;
        if (illHealthCase)
			{

				LocalDate careIllHealthStartDate = careStartDate;
				// Logic to set 'careIllHealthStartDate' based on McCloud Yes/No
				bool isMcCloud = mcCloudOption != McCloudOption.None;
				var mccloudoption = mcCloudOption;
             	if (isMcCloud) { careIllHealthStartDate = new LocalDate(2015, 4, 1); }

            List<ServiceTranche> illHealthTranche = new List<ServiceTranche>
            {
                new ServiceTranche { EffectiveFrom = careIllHealthStartDate, EffectiveTo = schemeServiceEndDate, Key = ""CARE"" }
            };

            IServiceBuilder careIllHealthBuilder = GetServiceBuilder(servicePeriods, serviceBreaks, memberInfo, careIllHealthStartDate, schemeServiceEndDate, illHealthTranche, ServiceMethod.PublicSectorCAREOnly);

            serviceCalculations.Add(ServiceCalcType.CAREIllHealth, careIllHealthBuilder.Build());
        }

        return serviceCalculations;
    }

    private static IServiceBuilder GetServiceBuilder(
        List<ServicePeriod> servicePeriods,
        List<ServiceBreak> serviceBreaks,
        IMemberInfo memberInfo,
        LocalDate startDate,
        LocalDate endDate,
        List<ServiceTranche> serviceTranches,
        ServiceMethod serviceMethod)
    {
        IServiceBuilder dbServiceBuilder = new ServiceBuilder(serviceTranches, servicePeriods, serviceBreaks, startDate, endDate)
            .WithUnits(ServiceUnits.PublicSector)
            .WithMethod(serviceMethod)
            .WithFillType(ServicePeriodFillType.LastPeriodToBeFilled);

        switch (memberInfo.Category)
        {
            case ""NFPS2006"":
            case ""NFPS2006MOD"":
            case ""NFPS2006RET"":
                dbServiceBuilder.WithCap(40);
                break;
            case ""NPPS2006"":
                dbServiceBuilder.WithCap(35);
                break;
            case ""FPS1992"":
            case ""CARE2015"":
            case ""CARE2015MOD"":
            case ""CARE2015RET"":
            case ""PPS1987"":
            default:
                break;
        }

        return dbServiceBuilder;
    }
{noformat}",04/Nov/25 3:27 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Seems to have been a crossover of code being updated and this story being created. Checked results and seems to be close than previously. Further ticket created to correct the service as prospective service is a day longer than expected ,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,04/Nov/25 3:27 PM
Set up MemberCareBenefitType output logic ,PHX5-581,16002,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,24/Oct/25 11:25 AM,28/Nov/25 4:37 PM,,24/Oct/25 12:52 PM,Client 150 Police A to R Version 5,Client 162 Police A to D Version 1,,,,,,,,,,,0,,,,,"MemberCareBenefitType has now been added as a result to the MemberCare tables in the Care global module. Logic needs to be added for how the Type is output in new Care rows from either existing Care data or setting a default if there is none. 

Update - 24/10/25 SW - Added  var careBenefitTypeToApply to the two CreateMemberCAREList functions. Then added memberCareCalc.MemberCareBenefitType = careBenefitTypeToApply; in the foreach (MemberCareCalc memberCareCalc in newMemberCare) loops in each function. 

Because we are filtering on the different Care Types already in the Public Sector Calculation global module, a simple lookup of the most recent CareBenefitType in existing data and using that to output in the new calculated rows will suffice. The logic in Public Sector Calculation will cycle through each Type if it is different for example. Police Main and TransferInFire.",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@598d5d35,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o3z:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 18,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_350971_*|*_10252_*:*_1_*:*_1943_*|*_10354_*:*_1_*:*_4110250_*|*_10056_*:*_1_*:*_469585,,,,,,,,,,,,,,,,,,,,,,,,,,13807,PHX5-197,CARE Module,Done,24/Oct/25 12:52 PM
Changes to Pension Options,PHX5-580,15993,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,24/Oct/25 6:34 AM,02/Dec/25 2:19 PM,,02/Dec/25 2:18 PM,,,,,,,,,,,,,0,,,,,"When we reach settlement, for the reform case, we need there to be just one option coming back for the active salary linked member. Currently, they would get two - One for DB and one for CARE.

We need to combine these values.

Essentially when we get to write back, there should be one line going back with the totals of DB and CARE, and the elements should be going back separately.



We will need to ensure that all the information is still available. We will probably have to add values to OtherValues and include in the LSA work.



Proposed new values (old on the left, new on the right):

!image-20251024-144216.png|width=922,alt=""image-20251024-144216.png""!",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-583,,,24/Oct/25 3:42 PM;5796a187-7241-414b-bea0-2d22260a9bed;image-20251024-144216.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10779,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3e60f592,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008000010004,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 20,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10252_*:*_1_*:*_0_*|*_10354_*:*_1_*:*_3645_*|*_10056_*:*_1_*:*_893746021,,"02/Dec/25 2:19 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Cannot do this solution - as need to split the target cash for db and care. This may come back in a different form, but for now, no longer required.",,,,,,,,,,,,,,,,,,,,,,,,15555,PHX5-490,Calculate Overheads,Done,02/Dec/25 2:18 PM
Add mapping for MemberCareBenefitType to Care Global Module MemberCare List.,PHX5-579,15991,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,23/Oct/25 4:48 PM,28/Nov/25 4:37 PM,,29/Oct/25 12:37 PM,Client 150 Police A to R Version 5,Client 162 Police A to D Version 1,,,,,,,,,,,0,,,,,"In the MemberCareOutput result object from the Devs. They have added a “public MemberCareBenefitType MemberCareBenefitType { get; set; }”. In our current MemberCare list output, this field is outputting as unknown when checking the InterimValue in the A>R tests. Because we are now going to be writing back the member care tables in the A>R results, I believe we need to add this to the MemberCareList in public virtual List<MemberCareCalc> CreateMemberCAREList and public class DefaultCreateMemberCAREListStrategy in the Care Global Module. Screenshots below of the updates made, please can this be reviewed before I publish.

!image-20251023-160118.png|width=266,alt=""image-20251023-160118.png""!



!image-20251023-155803.png|width=266,alt=""image-20251023-155803.png""!",,Andrew Wilson,Naomi Robinson,Steven Wright,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,23/Oct/25 5:02 PM;bfea69ca-e7d9-488d-b01b-103621fa1516;image-20251023-155803.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10765,23/Oct/25 5:02 PM;bfea69ca-e7d9-488d-b01b-103621fa1516;image-20251023-160118.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10766,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1f7eae81,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o3b:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 18,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-24 06:10:10.019,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2346_*|*_10252_*:*_1_*:*_2013_*|*_10354_*:*_1_*:*_2617_*|*_10056_*:*_1_*:*_945176,,"24/Oct/25 7:10 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e] Yep, looks like the exact fix we need, go ahead and publish",24/Oct/25 8:29 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e]  Actually - what happens for newly created rows? Do we populate those with the correct member benefit type?,"29/Oct/25 12:37 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Starts off in Global code - CARE - CreateMemberCAREList.

Added MemberCareBenefitType needed for PoliceMain/ FireMain in phase 5, previously not available.

In test cases the ExistingMemberCare was only coming out as an interim value, so adding in logic for what MemberCareBenefitType is did not break any tests. Logic added in (c.row 820) to assign logic for what the Type is. 

Asked why if only an interim value and all test cases passed why we need it - Steven explained how it is needed to write back MemberType to maintain previous year’s Type as it was coming out as null for new periods.

Tested by checking interim values now come out with correct type e.g. “PoliceMain” rather than null.

Discussed 29/10 that we should have some test cases in global that set an expected of the type to make sure not null. Confirmed this is covered in next CARE ticket (559) and cases have been set up.",,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,29/Oct/25 12:37 PM
Deferring CARE pension,PHX5-578,15986,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,23/Oct/25 3:58 PM,17/Nov/25 2:52 PM,,,,,,,,,,,,,,,0,,,,,,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,PHX5-674,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@24ec01c2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2n:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,16737,PHX5-653,Deferring CARE,To Do,23/Oct/25 3:58 PM
Pension Arrears,PHX5-576,15983,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,23/Oct/25 3:31 PM,23/Oct/25 4:05 PM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-184,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6cdda5bf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o27:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,21.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,15982,PHX5-575,A to R Spec Changes,To Do,23/Oct/25 3:31 PM
A to R Spec Changes,PHX5-575,15982,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,23/Oct/25 3:30 PM,23/Oct/25 3:30 PM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@17f2612a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o1z:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,23/Oct/25 3:30 PM
Police Transfer Out External Calculation Specifcation,PHX5-574,15980,Task,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,23/Oct/25 11:57 AM,13/Nov/25 11:15 AM,,,,,,,,,,,,,,,0,Batch3,TransferOut,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2717917,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zzzzi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Oct/25 11:57 AM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Calculation Specification Drafted and forwarded onto admin for review 26/9/25. Chased up 23/10/25.

[FW Phoenix Phase 5 - The Police Pension Scheme - Batch 3 Calculations .msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EUAXFNjVAodEjCTvm67-9tsBWTrAU7FkM_pMYWAEH5eKTw?e=ymJbsw]",,,,,,,,,,,,,,,,,,,,,,,,14437,PHX5-329,Police - Transfer Out External,To Do,23/Oct/25 11:57 AM
Police Transfer Out Calculation Specification,PHX5-573,15979,Task,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,23/Oct/25 11:54 AM,13/Nov/25 11:15 AM,,,,,,,,,,,,,,,0,Batch3,TransferOut,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@470683f3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zzzz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Oct/25 11:54 AM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Calculation Specification Drafted and forwarded onto admin for review 26/9/25. Chased up 23/10/25.

[FW Phoenix Phase 5 - The Police Pension Scheme - Batch 3 Calculations .msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EUAXFNjVAodEjCTvm67-9tsBWTrAU7FkM_pMYWAEH5eKTw?e=ymJbsw]",,,,,,,,,,,,,,,,,,,,,,,,14432,PHX5-324,Police - Transfer Out,To Do,23/Oct/25 11:54 AM
Police Transfer In Non Club Calculation Specification,PHX5-572,15978,Task,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,23/Oct/25 11:51 AM,13/Nov/25 11:15 AM,,,,,,,,,,,,,,,0,Batch3,TransferIn,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@362107ef,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zzzy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Oct/25 11:51 AM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Calculation Specification Drafted and forwarded onto admin for review 26/9/25. Chased up 23/10/25.

[FW Phoenix Phase 5 - The Police Pension Scheme - Batch 3 Calculations .msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EUAXFNjVAodEjCTvm67-9tsBWTrAU7FkM_pMYWAEH5eKTw?e=ymJbsw]",,,,,,,,,,,,,,,,,,,,,,,,14427,PHX5-319,Police - Transfer In Non Club,To Do,23/Oct/25 11:51 AM
Police Transfer In Club Calculation Specification,PHX5-571,15977,Task,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,23/Oct/25 11:49 AM,13/Nov/25 11:15 AM,,,,,,,,,,,,,,,0,Batch3,TransferIn,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@56f9213,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zzzv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Oct/25 11:49 AM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Calculation Specification Drafted and forwarded onto admin for review 26/9/25. Chased up 23/10/25.

[FW Phoenix Phase 5 - The Police Pension Scheme - Batch 3 Calculations .msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EUAXFNjVAodEjCTvm67-9tsBWTrAU7FkM_pMYWAEH5eKTw?e=ymJbsw]",,,,,,,,,,,,,,,,,,,,,,,,14422,PHX5-314,Police - Transfer In Club,To Do,23/Oct/25 11:49 AM
Police Divorce Debit and Credit Calculation Specification,PHX5-570,15976,Task,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,23/Oct/25 11:43 AM,13/Nov/25 11:15 AM,,,,,,,,,,,,,,,0,Batch3,Divorce,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@637d53fc,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zzzi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Oct/25 11:48 AM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Calculation Specification Drafted and forwarded onto admin for review 26/9/25. Chased up 23/10/25.

[FW Phoenix Phase 5 - The Police Pension Scheme - Batch 3 Calculations .msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EUAXFNjVAodEjCTvm67-9tsBWTrAU7FkM_pMYWAEH5eKTw?e=ymJbsw]",,,,,,,,,,,,,,,,,,,,,,,,14416,PHX5-309,Police - Divorce Debit and Credit,To Do,23/Oct/25 11:43 AM
Pre Commutation Module Test Matrices Sign off,PHX5-569,15975,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,23/Oct/25 11:24 AM,24/Oct/25 1:59 PM,,24/Oct/25 1:59 PM,,,,,,,,,,,,,0,Module,PCLS,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1addf2d7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x0000081,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10354_*:*_1_*:*_2212_*|*_10056_*:*_1_*:*_18001_*|*_10355_*:*_1_*:*_0,,"23/Oct/25 11:25 AM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Chased up confirmation of Test Matrix sign off for Police and Fire 23/10/25;

[FW Phoenix Phase 5 - The Fire Pension Scheme - Calculation Modules Test Matrices.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EXbfL64tKWZKkGIgf4tIgXUBuwZkC5YrdOtYjR8WmTLmBA?e=Tkrwyc]

[FW Phoenix Phase 5 - The Police Pension Scheme - Module Test Matrix.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EcDvQ8WR5mxLsPBuJWPR22EBZniEqQTHZuzYhB3Ryblu7Q?e=Rgqwca]",,,,,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,24/Oct/25 1:59 PM
ER/LR Factors Module Test Matrix Sign Off,PHX5-568,15974,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,23/Oct/25 11:23 AM,24/Oct/25 2:07 PM,,24/Oct/25 2:07 PM,,,,,,,,,,,,,0,Factors,Module,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3a57ecf9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00v,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10354_*:*_1_*:*_4162_*|*_10056_*:*_1_*:*_21626_*|*_10355_*:*_1_*:*_0,,"23/Oct/25 11:23 AM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Chased up confirmation of Test Matrix sign off for Police and Fire 23/10/25;

[FW Phoenix Phase 5 - The Fire Pension Scheme - Calculation Modules Test Matrices.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EXbfL64tKWZKkGIgf4tIgXUBuwZkC5YrdOtYjR8WmTLmBA?e=Tkrwyc]

[FW Phoenix Phase 5 - The Police Pension Scheme - Module Test Matrix.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EcDvQ8WR5mxLsPBuJWPR22EBZniEqQTHZuzYhB3Ryblu7Q?e=Rgqwca]",,,,,,,,,,,,,,,,,,,,,,,,13810,PHX5-200,ER/LR Factors Module,Done,24/Oct/25 2:07 PM
Accrual Module Test Matrix Sign off,PHX5-567,15973,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,23/Oct/25 11:20 AM,24/Oct/25 2:07 PM,,24/Oct/25 2:07 PM,,,,,,,,,,,,,0,Accrual,Module,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@47117844,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x02,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10354_*:*_1_*:*_2561_*|*_10056_*:*_1_*:*_26108_*|*_10355_*:*_1_*:*_0,,"23/Oct/25 11:21 AM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Chased up confirmation of Test Matrix sign off for Police and Fire 23/10/25;

[FW Phoenix Phase 5 - The Fire Pension Scheme - Calculation Modules Test Matrices.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EXbfL64tKWZKkGIgf4tIgXUBuwZkC5YrdOtYjR8WmTLmBA?e=Tkrwyc]

[FW Phoenix Phase 5 - The Police Pension Scheme - Module Test Matrix.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EcDvQ8WR5mxLsPBuJWPR22EBZniEqQTHZuzYhB3Ryblu7Q?e=Rgqwca]",,,,,,,,,,,,,,,,,,,,,,,,13808,PHX5-198,Accrual Module,Done,24/Oct/25 2:07 PM
CARE Module Test Matrix Sign off,PHX5-566,15972,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,23/Oct/25 11:16 AM,24/Oct/25 1:59 PM,,24/Oct/25 1:59 PM,,,,,,,,,,,,,0,CARE,Module,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@18f4425d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x00914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10354_*:*_1_*:*_8616_*|*_10056_*:*_1_*:*_138509_*|*_10355_*:*_1_*:*_0,,"23/Oct/25 11:19 AM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Chased up confirmation of Test Matrix sign off for Police and Fire 23/10/25;

[FW Phoenix Phase 5 - The Fire Pension Scheme - Calculation Modules Test Matrices.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EXbfL64tKWZKkGIgf4tIgXUBuwZkC5YrdOtYjR8WmTLmBA?e=Tkrwyc]

[FW Phoenix Phase 5 - The Police Pension Scheme - Module Test Matrix.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EcDvQ8WR5mxLsPBuJWPR22EBZniEqQTHZuzYhB3Ryblu7Q?e=Rgqwca]",,,,,,,,,,,,,,,,,,,,,,,,13807,PHX5-197,CARE Module,Done,24/Oct/25 1:59 PM
Review global Log.Debugs,PHX5-565,15970,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,22/Oct/25 2:49 PM,28/Nov/25 5:21 PM,,05/Nov/25 2:21 PM,Client 150 Police A to R Version 6,Client 162 Police A to D Version 1,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@72c24ec,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800h9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 18,PHX5 Sprint 19,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_497639306_*|*_10252_*:*_1_*:*_695936322_*|*_10354_*:*_1_*:*_2710_*|*_10056_*:*_1_*:*_72118,,,,,,,,,,,,,,,,,,,,,,,,,,15555,PHX5-490,Calculate Overheads,Done,05/Nov/25 2:21 PM
Most A>R cases now Altair queries but appear correct to spec,PHX5-564,15969,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,22/Oct/25 2:35 PM,28/Nov/25 4:37 PM,,29/Oct/25 1:53 PM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"Most remaining A>R issues need further analysis of Altair as our workings seem to match the spec.

To detail in tickets based on calc type",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@38b741f3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzbzz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 18,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_3272_*|*_10252_*:*_1_*:*_2466_*|*_10354_*:*_1_*:*_604985826_*|*_10056_*:*_1_*:*_4049,,"29/Oct/25 1:38 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Tickets created under Phase 5 analysis for admin queries to be signed off.

Audit trail document created to cover outputs values and ensure consistency across the board, provided to Matt (to share relevant parts with admin) and Ant/ Pete (for audit trail and out come values tracking).

Ongoing work as as tickets are updated we need to go back through and update the document (works as a matrix, essentially). Putting this ticket into review as the required process is now in place.

[https://xpsplc.sharepoint.com/sites/ProjectPhoenix/Shared%20Documents/Forms/AllItems.aspx?id=%2Fsites%2FProjectPhoenix%2FShared%20Documents%2FPhase%205%2FImplementation%20Services%20Team%2FCalculations%2FTest%20Matrices%2FPolice%2FOutcome%20Value%20Analysis%20and%20Audit%20Trail&viewid=23aab45f%2D393f%2D40f3%2Da838%2D80e33f9afe9b&newTargetListUrl=%2Fsites%2FProjectPhoenix%2FShared%20Documents&viewpath=%2Fsites%2FProjectPhoenix%2FShared%20Documents%2FForms%2FAllItems%2Easpx|https://xpsplc.sharepoint.com/sites/ProjectPhoenix/Shared%20Documents/Forms/AllItems.aspx?id=%2Fsites%2FProjectPhoenix%2FShared%20Documents%2FPhase%205%2FImplementation%20Services%20Team%2FCalculations%2FTest%20Matrices%2FPolice%2FOutcome%20Value%20Analysis%20and%20Audit%20Trail&viewid=23aab45f%2D393f%2D40f3%2Da838%2D80e33f9afe9b&newTargetListUrl=%2Fsites%2FProjectPhoenix%2FShared%20Documents&viewpath=%2Fsites%2FProjectPhoenix%2FShared%20Documents%2FForms%2FAllItems%2Easpx|smart-link] ",29/Oct/25 1:39 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Reduced to 2 story points and another 3 story point item added to get this up to date following care changes to code.,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,29/Oct/25 1:53 PM
UPC figure deducted from max lump sum lower than expected,PHX5-563,15965,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,22/Oct/25 12:11 PM,28/Nov/25 4:37 PM,,28/Oct/25 2:56 PM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"Test case 1 (but also PPS where max lump sum is tested).

UPC deduction figure is £5 lower than expected, leaving maximum lump sum £5 higher.

CarePCLS is correct per altair calcs and so total tax free amount must be slightly different.

Drilling into what makes up that figure, dbMaxLumpSum, CarePCLS and carePostComPension all seem to match. Only other contributing figure is dbPostComPension but the inputs into that, including 22.25 CF seem to be as expected, so further work needs to be done to determine why we are out.",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24/Oct/25 12:37 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;Max PCLS Test Case 1.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10772,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@748dd861,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzbzy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 18,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2119_*|*_10252_*:*_1_*:*_2333_*|*_10354_*:*_1_*:*_174424323_*|*_10056_*:*_1_*:*_10262,,24/Oct/25 12:36 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Considered an Altair issue. Altair does not factor in CARE but the spec denotes that it should be included. Admin will be asked to sign off the attached workings which prove UAT figure to be correct.,"24/Oct/25 12:38 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Since this a ticket will be created in the admin project, I have moved this one to review so we don’t have a duplicate. No coding required.",,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,28/Oct/25 2:56 PM
Input CARE salaries being used for Salary Linked member,PHX5-562,15932,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,21/Oct/25 7:37 PM,28/Nov/25 5:21 PM,,29/Oct/25 1:32 PM,Client 150 Police A to R Version 5,Client 162 Police A to D Version 1,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,0,,,,,Testing showed that the changes to use the CARE salary inputs were causing some issues with Salary Linked members - checks being done on CARE salary inputs and giving false errors and using the salary inputs being used to calculate accrued pension which would have lead to accrual on both records,,Andrew Wilson,Naomi Robinson,Russell Armstrong,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@52df587d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzbzr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 17,PHX5 Sprint 18,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-22 09:25:35.115,10251_*:*_2_*:*_2670217_*|*_10250_*:*_2_*:*_140337383_*|*_10252_*:*_1_*:*_1992_*|*_10354_*:*_1_*:*_3741_*|*_10056_*:*_1_*:*_254863,,"21/Oct/25 7:47 PM;640f34fc1273131f2adfede9;In {{PublicSectorCARECalculationFactory}} added {{if (memberInfo.Category.Contains(""CARE""))}} around populating {{CareSalaryList}} and checking for salaries needed but not input or input incorrectly.

Added PublicSectorCARECalculationFactory_11 and PublicSectorCARECalculationFactory_12 to test that where not in a CARE category no CARE salary was used to calculate any pension accrual and no errors returned if an empty CARE salary list is input","22/Oct/25 10:25 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Is it possible to turn this into a function. Maintenance wise, if we get a new category - do we know this logic will always be true? If it is a function, and we put the logic there - even if the logic is the same for now, then if we end up reusing this logic throughout the code, it will be a change to one function rather than many places. Also it becomes a very simple function to test.","23/Oct/25 11:25 AM;640f34fc1273131f2adfede9;Added {{GetCareSalaries}} to PublicSectorFunctions. 

Changed way to identify when to populate the CareSalary to look at {{MemberCareBenefitType}} and only add to the list and verify the salaries are what are needed when the type is either PoliceMain or FireMain - this will then not try to apply salaries when building up either McCloud CARE or any of the various CARE transfer in types","29/Oct/25 12:28 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Discussed this with Russell 24/10 after code coming through to the A>R was trying to apply CARE salaries for the main member to the salary linked record as well. 

Can see this is now a separate function “GetCareSalaries” called in to {{PublicSectorCARECalculationFactory}}.

Testing in Public Sector Calculation now shows identification of type PoliceMain/ FireMain in order for PublicSectorCARECalculationFactory to run: PublicSectorCARECalculationFactory_11 and PublicSectorCARECalculationFactory_12.

I have added in additional test directly to GetCARESalaries to test what happens if we add PoliceMain type vs a random type. Code working as expected either adding salary list or giving empty list if not PoliceMain or FireMain",,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,29/Oct/25 1:32 PM
Care Accrual Rate for Fire is not the same as Police,PHX5-561,15921,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,21/Oct/25 4:01 PM,28/Nov/25 5:15 PM,,22/Oct/25 12:50 PM,Client 164 Fire A to R Version 1,,,,,,,,,,,,0,,,,,"Noticed in the calc specs that accrual rate for Fire Care2015 is 59.70 whereas police is 55.30. Applied update to Public Sector Calculation > PublicSectorCARECalculationFactory. Created a list of the different CareBenefitTypes applicable to fire. Added a bool in the Foreach that checks if it is a Fire carebenefit type in the list, if it is, decimal for AccrualRate added below which assigns 59.70 to it, and 55.30 if it isn’t. Updated Care Parameters for AccrualRate to look at the decimal instead of just having 55.30 in there.",,Andrew Wilson,Steven Wright,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5add9a05,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fg202,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 17,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-22 09:15:40.032,10251_*:*_2_*:*_65298445_*|*_10250_*:*_2_*:*_6519157_*|*_10252_*:*_1_*:*_316412_*|*_10354_*:*_1_*:*_5764_*|*_10056_*:*_1_*:*_8300,,"22/Oct/25 10:15 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;I would suggest that this logic becomes a function on its own so that it is reusable and testable in isolation.

I would have a function that takes {{MemberCareBenefitType}} and returns a bool isFire

I would also turn the {{""CAREFIRE""}} and {{ ""CARECPI""}} into constants if possible","22/Oct/25 12:12 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Moved the variable CareFireList into a bool function below PublicSectorCARECalculationFactory. Updated the string for increaseRateKey and decimal for careAccrualRate to call the bool. Added test case for Fire Care Benefit Type. 

Added class for KeyCareIncreaseRateConstants with CAREFIRE and CARECPI. Updated the string for increaseRateKey to call the class. ",,,,,,,,,,,,,,,,,,,,,,,13807,PHX5-197,CARE Module,Done,22/Oct/25 12:50 PM
Null values vs empty lists [],PHX5-560,15917,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,21/Oct/25 2:46 PM,01/Dec/25 3:06 PM,,18/Nov/25 2:46 PM,Client 162 Police A to D Version 5,Client 162 Police A to R Version 2,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,0,,,,,"When querying differences in CARE salary data where some members has “null” and some have empty lists, it was discussed with Andrew that “We need to be able to cope with both. And this is a general thing now. If it is null, then we should be throwing a warning/error as we are not being passed the information, and the devs will need to sort it out.” 

Recording here as it may be a project across the board with the public sector calc code. Scope uncertain?",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@59ff2441,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00olq:x,,,New method NormaliseMemberData (for Normal and Salary Linked data) to make sure null values are replaced with empty lists.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 21,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2590_*|*_10252_*:*_1_*:*_3030_*|*_10354_*:*_1_*:*_2439_*|*_10056_*:*_1_*:*_2422027283,,"18/Nov/25 2:32 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;I have created function “NormaliseMemberData” in ModelConversion to set empty lists on currently null values.

Based on the current JSON output for members, these were the ones which would have null cause an issue:

{noformat}        {
            if (data == null) return null; // for members with no record

            // Ensure ""null"" set to empty lists for these properties
            data.LinkedMembers ??= new List<LinkedMember>();
            data.MemberCare ??= new List<MemberCare>();
            data.MemberSalaries ??= new List<SalaryHistory>();
            data.ServicePeriods ??= new List<ServicePeriod>();
            data.ServiceBreaks ??= new List<ServiceBreak>();
            data.ExternalFundDetails ??= new List<MemberExternalFundDetail>();
            data.MemberTransferIns ??= new List<MemberTransferIn>();
            data.MemberTransferInElements ??= new List<MemberTransferInElement>();
            data.MemberSchemePayDebits ??= new List<MemberSchemePayDebit>();
            data.DivorceDetails ??= new List<DivorceDetails>();
            data.DivorceElements ??= new List<DivorceElement>();
            data.MemberAdditionalHistoryData ??= new List<MemberAdditionalHistoryData>();
            data.HistoricBenefits ??= new List<MemberHistoricBenefit>();
            data.MemberHistoricBenefitElementValues ??= new List<MemberHistoricBenefitElementValue>();
            
            return data;
        }{noformat}

I have added a test case to the module to check null is changed to [], using an input of the JSON from a standard D>R test case, for which some values were incorrectly coming through as null (for example, MemberAdditionalHistoryData). 



I published to check the change did take effect in Aurora, since some tests were running ok on the calc end but not front end. I used Tracy’s member 44097502 as a test and saw that the error no longer appears and we get a calculation result message of “Calculation was run”.",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,18/Nov/25 2:46 PM
Add Member Care details to output police A>R,PHX5-559,15916,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,21/Oct/25 2:16 PM,28/Nov/25 4:37 PM,,29/Oct/25 1:03 PM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"There is now a property on the {{ActiveToRetiredResult}} output:

{{public Dictionary<string, List<MemberCareOutput>> MemberCares { get; set; }}}

This will need to be populated with any member care records that need to be written back.

We used to only return the new rows from the care code, which would have made this easy. However, a change was made for phase 5 to return all the records.

Do we still need to do this? I know we changed some care accrual code recently to take the salary from the salary history rather than the care record. If this was the only reason we needed all the historic care to be returned, then we can reverse the care code change and only return the new rows (isNew = true).

We will need to do this for both member records.",,Andrew Wilson,Naomi Robinson,Steven Wright,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@17876ff4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzbzzt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 18,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-28 09:41:47.232,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_350380420_*|*_10252_*:*_1_*:*_3303_*|*_10354_*:*_1_*:*_180692612_*|*_10056_*:*_1_*:*_598844,,"28/Oct/25 9:41 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Discussed with Andrew and we agreed no update needed to be made to Care global module. All coding could be done at client level. We can use the CreateMemberCareList in Care global to output calc results against MemberCareOutput property. There are some outputs we have in MemberCareList table that are not in MemberCareOutput list. Currently there is no EffectiveTo or ExtraData output. We need EffectiveTo so this has been requested from devs and is in dev currently. We are not getting ExtraData and devs have removed AccruedFinalSalaryPension. Need map the outputs to keep the lists 1-1. Have added function in A>R for MapMemberCareOutput. This is called in the variables with the MemberCare code in PreComCalculators for both Active & Salary Link members. 

Result for MemberCares added to results object. Has a string to assign Aurora ID next to each of the applicable Care tables. 

We only want to output care data that is being calculated by the code and not existing data rows. Added GetLatestCareEffectiveDate function to extract most recent EffectiveFrom row of Care Data in Existing data. MapMembeCareOutput will then use this date to output only output new care rows that are after latest EffectiveFrom date. ","29/Oct/25 1:03 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Looked at CARE global MapMemberCareOutput which was needed to mirror care record. Devs added in effective to missing from record which Steven has added in to table now. AccruedFinalSalaryPension removed on dev side as not needed on phase 5 and so that has been commented out in mapping to allow A>R to run.

Queried why this line as removed and if it would be needed at all - not needed for phase 5, so not considered an urgent issue.

Asked about test cases to cover this and reviewed Test 1 (“Future”) test case which confirmed when run in 2026 that two additional lines of CARE were correctly added (also confirmed testing needed for ticket 581 to check “PoliceMain” type being written back.

Discussed that whilst test case in A>R proves adequate code update that we should have tests in global to cover both of these tickets. Steven identified two tickets that he can update to check these inputs. As such, ticket closed.",,,,,,,,,,,,,,,,,,,,,,,13854,PHX5-221,Police - Active to Retirement,Done,29/Oct/25 1:03 PM
CAREBuilder ProRateSalary dividing by 366,PHX5-558,15910,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,20/Oct/25 3:34 PM,28/Nov/25 5:21 PM,,12/Nov/25 10:21 AM,Client 162 Police A to D Version 1,Client 162 Police A to R Version 1,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,0,,,,,"Investigate ProRateSalary in CAREBuilder - in Public Sector Calcuation, Test PublicSectorCARECalculationFactory_5 has a salary of 44789 to be prorated for the period from 01/04/2024 to 05/04/2024

Expecting the result to be 5/365 * 44789 = 613.55

Calculate appears to be doing 5/366 * 44789 = 611.87

The full CARE year from 01/04/2024 to 31/03/2025 doesn’t include a leap day",,Russell Armstrong,Steven Wright,,,,640f34fc1273131f2adfede9,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4f091e8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800gzy,,,Prorate calculation for the care salary where the calculation date is beyond the current care year (full salary being added as parameter input) now correctly pro rates based on whether the final care year to calc date is a leap year or not.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 20,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-11 11:59:40.165,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_142125754_*|*_10252_*:*_1_*:*_2913_*|*_10354_*:*_1_*:*_276651486_*|*_10056_*:*_1_*:*_1472963930,,11/Nov/25 11:59 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Additional logic added to CareSalary global module - CARESalaryProRateDays class. The original else statement that deals with the pro rate for first and last salary entries was trying to cover too many different scenarios in one statement - the denominator variable was only taking the latest effective from salary and using that to calculate the yearly days but it needs to change for future calcs depending on whether the future year is a leap year or not. It should then calc as 365 or 366 accordingly. Andrew helped with an additional else if statement to deal with this for future calc dates where there’s only one salary entry to use in the copy list.Test case added “CARESalaryProRateDays - Future Date Calc Date After Last Effective Salary History” and calculating the pro rate based on 365 yearly days correctly now instead of 366. ,"11/Nov/25 12:03 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Can you review before I publish please [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452]. Added a [log.info|http://log.info]rmation in there aswell which I thought would be useful for admin. 



Tested Russell's original test case in Public Sector Calculation with this change in VScode and it is now pro rating correctly. ",,,,,,,,,,,,,,,,,,,,,,,13854,PHX5-221,Police - Active to Retirement,Done,12/Nov/25 10:21 AM
Police A2R Test 20: Pension Options is an Empty List,PHX5-557,15909,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,20/Oct/25 3:31 PM,28/Nov/25 4:38 PM,,11/Nov/25 7:00 AM,Client 150 Police A to R Version 6,,,,,,,,,,,,0,,,,,"No Outcome Values populating (empty list []). Getting no results for CARE or Reform/ Legacy PCLS.



CARE:

Reform CARE results are 0 for both pension and total cash

!image-20251020-143129.png|width=922,alt=""image-20251020-143129.png""!

!image-20251020-143157.png|width=922,alt=""image-20251020-143157.png""!

These are the results in UAT

Also there is an issue with the pensionable pay for post 22 CARE results which is held under [[PHX5-556] Test 17 - the post 22 CARE Ill Health calc is using the incorrect Average Pensionable pay - (Test 20 also has the same issue) - Jira|https://xps-jira.atlassian.net/browse/PHX5-556]",,Annabelle Stephenson,Chris Marshall,Naomi Robinson,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,20/Oct/25 3:33 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251020-143129.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10733,20/Oct/25 3:33 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251020-143157.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10732,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@10628129,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 20,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-10-20 16:52:21.746,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2402_*|*_10252_*:*_1_*:*_2592_*|*_10354_*:*_2_*:*_246805265_*|*_10056_*:*_1_*:*_8465908_*|*_10355_*:*_1_*:*_1559537891,,"20/Oct/25 5:52 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I’ve looked into this briefly and I think it’s a data issue.  CARE history for 50653701 has records for 2022/23 and 2023/24 with nil values, which override the earlier histories' populated figures (eg. TotalPension = 3503.24 in 2021/22) as we take the value for CAREPreCom from the TotalPension from the latest CARE record (hence ReformCAREPreCom = 0).  Aurora record linked here: [Member - XPS Aurora|https://aurora.calcuat.xpsplc.com/clients/1204/schemes/9117/members/326001/people/242848/view/member/care-benefits]

Should we expect this data to be corrected? Or +do we want to log an error or warning message if the TotalPension does not increase (or stay the same) year on year+?  This could be a sensible check to have within CARE anyway, not just for public sector.  [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] are you able to comment on this before I investigate further?

UPDATE: Neil has raised this on the issues log for April and Sophie, so amending ticket to admin query for now. Issue reference ALT203",05/Nov/25 1:45 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;admin have confirmed this is a data issue that they will be fixing,"10/Nov/25 2:37 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;The below data appears to have been populated in client 162, so I will mark this ticket for review since we have a full set of outcome values. Some do not agree to expected but that is not this issue.",,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,11/Nov/25 7:00 AM
Test 17 - the post 22 CARE Ill Health calc is using the incorrect Average Pensionable pay - (Test 20 & 21 also have the same issue),PHX5-556,15907,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,20/Oct/25 2:53 PM,28/Nov/25 4:37 PM,,29/Oct/25 1:22 PM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"The Ill Health salary being used to calculate the enhanced pension is being picked up incorrectly.

Being used is 84186.22 the final CARE pay


!image-20251020-135755.png|width=227,alt=""image-20251020-135755.png""!

!image-20251020-135724.png|width=561,alt=""image-20251020-135724.png""!

We should be using the latest input in salary history

!image-20251020-135856.png|width=897,alt=""image-20251020-135856.png""!",,Chris Marshall,Naomi Robinson,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,29/Oct/25 12:15 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;70badf9c-3770-496c-af80-6d3d7a023b55.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10861,20/Oct/25 2:59 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251020-135724.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10731,20/Oct/25 2:59 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251020-135755.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10730,20/Oct/25 2:59 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251020-135856.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10729,29/Oct/25 12:18 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251029-121845.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10862,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1d0ed37,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzbzt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 18,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-10-29 12:18:49.201,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_267981456_*|*_10252_*:*_1_*:*_263223252_*|*_10354_*:*_1_*:*_2822_*|*_10056_*:*_1_*:*_66909585,,"27/Oct/25 12:02 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Updated code to now use salary and not CARE pay to calculate correct enhanced pension

Removed
/*_decimal CAREpayillhealth = careFactor == 0 ?_
_carePay :_
_(carePay / careFactor).Round(2);*_/

Added
{{decimal CAREpayillhealth = salary;}}

[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] if you can have a quick look at this, thanks","29/Oct/25 12:18 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;If we ignore the care factor part because the factor is 0 for this member, is it not just the case that the final care pay should be £84,322.25 in line with the pensionable salary? Care pay is effective from 2023 and pensionable salary is effective from 2024.

 

So, is it the case that when someone is ill health, their CARE record stops being updated but their pensionable salary continues to be?

 

I am just wondering whether the issue is actually that the CARE record is out of date, rather than us having to switch to pensionable salary?

!image-20251029-121845.png|width=759,alt=""image-20251029-121845.png""!","29/Oct/25 12:38 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;It could be that but the CARE pay to be used wont always match the final salary stated and we should be using the final salary. The care pay can be different but as we are using service should use the final salary to calculate the enhanced pension

Also for PT members the care pay will not be of full time equivalent

 ",29/Oct/25 1:22 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Further discussed with Chris. Test cases indicate correct values now coming out and satisfied that it is not a CARE data issue.,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,29/Oct/25 1:22 PM
Average Weekly Earnings Increase Rate for Fire MemberCareTypes,PHX5-555,15906,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,20/Oct/25 1:17 PM,28/Nov/25 5:15 PM,,22/Oct/25 12:50 PM,Client 164 Fire A to R Version 1,,,,,,,,,,,,0,,,,,"Fire Care Benefit Types use Average Weekly Earnings as the revaluation increase rate instead of CPI. Figure out if we can use a global reference table for this or whether it needs an individual table at client level. They might make an adjustment to the average weekly earnings figure like they do with CPI so need to check whether a seperate client level table should be maintained instead of using global tables. 

All the care benefit types and their reval rates in spreadsheet below from April and Iain.

[CARE types and reval rates.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EeS4CtGrTSpMlVKReYdmLa0BBpXIu8tsv-J-2myNwJdnZQ?e=eftO4l]",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,PHX5-618,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@48fe6ffb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fg22,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 17,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_2_*:*_67373390_*|*_10250_*:*_2_*:*_4904091_*|*_10252_*:*_1_*:*_446158_*|*_10354_*:*_1_*:*_95670724_*|*_10056_*:*_1_*:*_5173,,"21/Oct/25 3:59 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Added “CAREFIRE” increase rates for each Care year to DecimalReferenceValues in client 144. Have now also added code in  Public Sector Calculator > PublicSectorCARECalculationFactory which creates a list of the various Fire CareBenefitTypes, then in the Foreach Loop, created a bool to check if they are a FireType and if they are, the increaseRateKey should be CAREFIRE instead of CARECPI. Calling the string in the CareParameters below it.  ","22/Oct/25 12:13 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Rework notes: Moved the variable CareFireList into a bool function below PublicSectorCARECalculationFactory. Updated the string for increaseRateKey and decimal for careAccrualRate to call the bool. Added test case for Fire Care Benefit Type. 

Added class for KeyCareIncreaseRateConstants with CAREFIRE and CARECPI. Updated the string for increaseRateKey to call the class.",,,,,,,,,,,,,,,,,,,,,,,13807,PHX5-197,CARE Module,Done,22/Oct/25 12:50 PM
Deletion of unused DecimalReferenceValues,PHX5-554,15905,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,20/Oct/25 12:41 PM,28/Nov/25 5:20 PM,,22/Oct/25 10:20 AM,Client 150 Police A to D Version 1,Client 150 Police A to R Version 5,,,,,,,,,,,0,,,,,"In client 144 of UAT, please can the screenshotted entries for “CAREMAIN” and 1 for “CPISEP” be deleted. In CalcUAT, please can you also delete the global table I created for “CPISEP” in Global > Reference Values > Decimal Reference Values. See screenshot below. 

!image-20251020-114930.png|width=268,alt=""image-20251020-114930.png""!



!image-20251020-114832.png|width=268,alt=""image-20251020-114832.png""!",,Andrew Wilson,Steven Wright,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,20/Oct/25 12:49 PM;bfea69ca-e7d9-488d-b01b-103621fa1516;image-20251020-114832.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10728,20/Oct/25 12:49 PM;bfea69ca-e7d9-488d-b01b-103621fa1516;image-20251020-114930.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10727,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@199672bb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fg24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 17,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-10-20 14:11:06.713,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2177_*|*_10252_*:*_1_*:*_92445837_*|*_10354_*:*_1_*:*_3534_*|*_10056_*:*_1_*:*_1985342,,20/Oct/25 3:11 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e]  Can you go to the data team for this one please - looks like I don’t have permissions to delete.,21/Oct/25 2:56 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;[~accountid:712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f] deleted these for me today. ,,,,,,,,,,,,,,,,,,,,,,,15555,PHX5-490,Calculate Overheads,Done,22/Oct/25 10:20 AM
Ensure inputs are correct,PHX5-553,15883,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,17/Oct/25 2:13 PM,13/Nov/25 9:13 AM,,13/Nov/25 9:13 AM,,,,,,,,,,,,,0,,,,,"We need to ensure that we have the following for member and linkedmember:

* DefinedBenefitContribution
* MemberExternalFundValue

Once these are definitely being received and mapped correctly, we need to ensure that {{PublicSectorDeathInServiceCalculatorFactory}} is updated (as currently sending empty lists in)

Ensure that the salary passed in is correct. Can we use same input as fpp salary for a2r calcs. Or will we need a different input?

Also death in service inputs have no db salary or care salaries yet. Need dev update",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@37dbc4ad,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00nyn:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_2318410353,,,,,,,,,,,,,,,,,,,,,,,,,,13855,PHX5-222,Police - Death in Service,Done,13/Nov/25 9:13 AM
Test 5 reform DB Service,PHX5-552,15879,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,17/Oct/25 8:40 AM,24/Oct/25 1:59 PM,,24/Oct/25 1:59 PM,,,,,,,,,,,,,0,,,,,"The reform service for DB needs checking.

OutputS

totalDBReckonableService - UAT 19.7068 - Altair 19.7041

AccrualCalcE - UAT - 24.1945 - Altair 24.1890

AccrualCalcF  - UAT - 32.2520 - Altair - 32.2602

Service used in calc - UAT - 26.2764 (26Y101D)  - Altair - 26.2721 (26Y99D)

The changes seems to be applied after the change to the leap year code. We are aware that the reform service in Altair does now include the leap year so just needs a check to make sure we are correct",,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3522f70a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fg2029,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 17,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10252_*:*_1_*:*_0_*|*_10354_*:*_1_*:*_3883_*|*_10056_*:*_1_*:*_1115290,,17/Oct/25 10:48 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] per discussion this can be deleted,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,24/Oct/25 1:59 PM
When creating CARE from salaries incorrect inflation being used,PHX5-551,15878,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,16/Oct/25 4:42 PM,28/Nov/25 4:36 PM,,21/Oct/25 10:49 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,When testing [https://xps-jira.atlassian.net/browse/PHX5-471|https://xps-jira.atlassian.net/browse/PHX5-471|smart-link] removing CARE but inputting the same salaries wasn’t giving the same final CARE pension. I believe this may be related to the inflation addition not being applied. See test case PublicSectorCARECalculationFactory_3 in Public Sector Calculation,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7b2d2648,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzbzi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 17,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2595957_*|*_10252_*:*_1_*:*_30043_*|*_10354_*:*_1_*:*_2595_*|*_10056_*:*_1_*:*_406659228,,20/Oct/25 4:58 PM;640f34fc1273131f2adfede9;I believe the issue is in the CARE Builder module - line 163 addition = 0 so never added. Input to CAREBuilder set in Public Sector of the addition is actually the minimum,"21/Oct/25 10:24 AM;640f34fc1273131f2adfede9;CARE Builder module amended - Line 161 removed “=0” after addition. This lead to changes to {{WithCAREInflation}} to include the addition there.

In Public Sector Calculation in {{PublicSectorCARECalculationFactory}} inputs to {{WithCAREInflation}} added in an additional 0 before the inflationAddition as debugging in VS Code showed this was being treated as the minimum

Added an expected outcome value to PublicSectorCARECalculationFactory_3 test - InflationRate for CARE year beginning 01/04/2023 is now 7.95 whereas was previously 6.7 - shows the additional 1.25 is being added as expected",,,,,,,,,,,,,,,,,,,,,,,13854,PHX5-221,Police - Active to Retirement,Done,21/Oct/25 10:49 AM
A-R runtime input - ER buyout to proceed,PHX5-550,15844,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,15/Oct/25 12:13 PM,24/Oct/25 2:13 PM,,,,,,,,,,,,,,,0,Batch1,,,,"As part of a review of the PPS A-R spec changes. This is a new runtime input requirement.

[PPS AtoR Calc Spec v2.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EUecqhUhkElMnGCKNBcOWJwBJuZaSfamdaCA3sJRrOkJmQ?e=lUdETR]",,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,PHX5-549,,,,,,,,,,,PHX5A-185,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@642a7a9c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00nuv:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,15982,PHX5-575,A to R Spec Changes,To Do,15/Oct/25 12:13 PM
A-R runtime input - Annual Allowance exemption granted,PHX5-549,15843,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,15/Oct/25 12:12 PM,24/Oct/25 2:13 PM,,,,,,,,,,,,,,,0,Batch1,,,,"As part of a review of the PPS A-R spec changes. This is a new runtime input requirement.

[PPS AtoR Calc Spec v2.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EUecqhUhkElMnGCKNBcOWJwBJuZaSfamdaCA3sJRrOkJmQ?e=lUdETR]",,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,PHX5-550,,PHX5-548,,,,,,,,,,,PHX5A-185,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@57ea9677,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00nun:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,15982,PHX5-575,A to R Spec Changes,To Do,15/Oct/25 12:12 PM
A-R runtime input - Ill health higher tier,PHX5-548,15842,Story,Dev required,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,15/Oct/25 12:12 PM,03/Dec/25 12:57 PM,,,,,,,,,,,,,,,0,Batch1,,,,"As part of a review of the PPS A-R spec changes. This is a new runtime input requirement.

[PPS AtoR Calc Spec v2.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EUecqhUhkElMnGCKNBcOWJwBJuZaSfamdaCA3sJRrOkJmQ?e=lUdETR]",,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,PHX5-549,,PHX5-547,,,,,,,,,,,PHX5A-185,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@301fa511,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i01,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-21 13:30:33.822,,,21/Oct/25 2:30 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Need the input to be added to {{ActiveToRetiredInputs}},,,,,,,,,,,,,,,,,,,,,,,,15982,PHX5-575,A to R Spec Changes,To Do,15/Oct/25 12:12 PM
A-R runtime input - Ill health lower tier,PHX5-547,15841,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,15/Oct/25 12:10 PM,23/Oct/25 4:26 PM,,,,,,,,,,,,,,,0,Batch1,,,,"As part of a review of the PPS A-R spec changes. This is a new runtime input requirement.

[PPS AtoR Calc Spec v2.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EUecqhUhkElMnGCKNBcOWJwBJuZaSfamdaCA3sJRrOkJmQ?e=lUdETR]",,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,PHX5-548,,,,,,,,,,,,,PHX5A-185,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3e133caf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00nu7:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13854,PHX5-221,Police - Active to Retirement,To Do,15/Oct/25 12:10 PM
"Non McCloud CARE 2015 member has linked member with NPPS 2006, requiring DBPCLS",PHX5-546,15839,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,14/Oct/25 4:38 PM,28/Nov/25 4:37 PM,,21/Oct/25 10:51 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"Test case 15:

This test covers a specific scenario where a non Mccloud member has two different categories.

For context, test cases 13 and 14 are Non-McCloud members with CARE only and there is no linked member to associate with them.

In the case of test 15:

# The main member record (36213302) is associated with category CARE2015:

!image-20251014-154124 (19e75572-e878-4da2-a23a-eefddfaf6164).png|width=515,alt=""image-20251014-154124.png""!

# They then have a linked member record (36213301) which is associated with category NPPS2006:

!image-20251014-154238 (38097ac9-8b91-44a6-abe6-97a3b131fe27).png|width=497,alt=""image-20251014-154238.png""!

The way the public sector calc works, is to check the category of the main member and then, since it is CARE2015 and non-mccloud, only output CARE options:

!image-20251014-154342 (9578e0ab-9568-48d9-80a4-b4a2ea55d5ab).png|width=497,alt=""image-20251014-154342.png""!

We have successfully calculated the CARE options to match Altair, from the member’s main record.

However, Altair results also have the following DBPCLS calc which is required based on the linked NPPS2006 record:

!image-20251014-154503 (f920f77b-aded-483b-a6a4-81fdcad80acc).png|width=497,alt=""image-20251014-154503.png""!

As an FYI, I (Naomi) did switch the main member to be the linked member and ran it in the A>R just to see what happens and we do get the correct DBPCLS expected outputs, but obviously 0.00 for CARE:

!image-20251014-160014 (595275fa-b1d5-4be0-b076-b6e725e2e821).png|width=497,alt=""image-20251014-160014.png""!

As such, it is a case of determining how to insert the linked member record into the main member calc, so they both the CARE2015 output and the NPPS 2006 output.

Queries:

* How do we establish this specific scenario
** Do we need to check for a linked member with a different category?
** Do we need to say “if this member is CARE2015 and non-mccloud check for _any_ linked member and then run a PCLS calc on it if it exists”?
** Do we check for a linked member by running a check for the member number but swapping the final number from a “2” to a “1” or vice versa?

In pseudo, would it look like this, where we would run a second {{PensionOptionCalculatorFactory}}  switching to the linked member category as well as outputting the care results?

* how would we switch to using the data for the second calc to the linked record?
* or, should be be combining records before we run the builder?

!804e80e4-cf8e-4403-9af7-7cac68aa1755.png|width=1101,alt=""804e80e4-cf8e-4403-9af7-7cac68aa1755.png""!",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14/Oct/25 5:08 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;804e80e4-cf8e-4403-9af7-7cac68aa1755.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10679,14/Oct/25 5:06 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251014-154124 (19e75572-e878-4da2-a23a-eefddfaf6164).png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10676,14/Oct/25 5:06 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251014-154238 (38097ac9-8b91-44a6-abe6-97a3b131fe27).png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10678,14/Oct/25 5:06 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251014-154342 (9578e0ab-9568-48d9-80a4-b4a2ea55d5ab).png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10674,14/Oct/25 5:06 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251014-154503 (f920f77b-aded-483b-a6a4-81fdcad80acc).png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10675,14/Oct/25 5:06 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251014-160014 (595275fa-b1d5-4be0-b076-b6e725e2e821).png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10677,21/Oct/25 9:54 AM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251021-083135.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10736,21/Oct/25 9:54 AM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251021-083613.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10735,21/Oct/25 9:53 AM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251021-084140.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10734,21/Oct/25 10:19 AM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251021-090521.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10737,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@52ff47b7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzbv,,,,,,,,,,,,,,,,2015 CARE,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 17,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-16 07:57:15.211,10251_*:*_2_*:*_136191687_*|*_10250_*:*_2_*:*_357408747_*|*_10252_*:*_1_*:*_2295_*|*_10354_*:*_1_*:*_2812_*|*_10056_*:*_1_*:*_88583571,,"15/Oct/25 5:14 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;I have updated the A>R calc options builder calls for Non-McCloud.

Firstly, in order not to impact test cases 13 and 14 which have no linked member and are producing the expected options categories, I have the code with:{{ if (LinkedMembers != null)}}

Checking the Altair outputs, I can see that the required option type is DBPCLS for the linked member, with CARE options for the main member.

As such, I have added the following code into the A>R, to set the DBPCLS on the linked member data, after the existing non-McCloud care code was run through.

{noformat}if (LinkedMembers != null)
                {
                    IActivePreComPenCalculator activeSalaryLinkedPreComCalculator = new PublicSectorCalculationBuilder(activeSalaryLinkedMemberInfo, activeSalaryLinkedMemberData, GlobalReferenceData, ConvertToSchemeReferenceData(ClientReferenceData), CategoryReferenceData, illHealth, Parameters.DateOfRetirement)
                            .WithoutMcCloud(activeSalaryLinkedMemberData.ServicePeriods, activeSalaryLinkedMemberInfo.DateCommencedPensionableService)
                            .WithParameters(fppParameter)
                            .BuildActivePreComPenCalculator();

                    List<ElementValue> activeSalaryLinkedPreComPen = activeSalaryLinkedPreComCalculator.Calculate();    //produces DBPCLS results for salary linked members with another category to the main member, non-McCloud CARE2015
                    List<ElementValue> DBActiveSalaryLinkedPreComPen = activeSalaryLinkedPreComPen.Where(x => !x.Key.Contains(""CARE"")).ToList(); // DB only

                    IRetirementCalculator activeSalaryLinkedOptionsCalculator = new PublicSectorCalculationBuilder(activeSalaryLinkedMemberInfo, activeSalaryLinkedMemberData, GlobalReferenceData, ConvertToSchemeReferenceData(ClientReferenceData), CategoryReferenceData, illHealth, Parameters.DateOfRetirement)
                        .WithoutMcCloud(activeSalaryLinkedMemberData.ServicePeriods, activeSalaryLinkedMemberInfo.DateCommencedPensionableService) 
                        .WithParameters(fppParameter)
                        .BuildActiveToRetired();

                    Dictionary<InternalCalculationPensionOptionType, PensionOption> activeSalaryLinkedOptions = activeSalaryLinkedOptionsCalculator.Calculate(activeSalaryLinkedPreComCalculator.TotalService, DBActiveSalaryLinkedPreComPen);
                    Dictionary<InternalCalculationPensionOptionType, PensionOption> DBActiveSalaryLinkedOptions = activeSalaryLinkedOptions.Where(x => !x.Key.ToString().Contains(""CARE"")).ToDictionary(x => x.Key, x => x.Value);

                    Dictionary<CalculationPensionOptionType, PensionOption> DBActiveSalaryLinkOptions = new Dictionary<CalculationPensionOptionType, PensionOption>();

                    foreach (KeyValuePair<InternalCalculationPensionOptionType, PensionOption> kvp in DBActiveSalaryLinkedOptions)
                    {
                        DBActiveSalaryLinkOptions.Add(ConvertKey(kvp.Key), kvp.Value);
                    }

                    result.PensionOptions.Add(activeSalaryLinkedMemberInfo.AuroraId, DBActiveSalaryLinkOptions);
                }
{noformat}

I have no changes to test cases 13 and 14 and test case 15 is now passing.

[https://calculate.uat.xpsplc.com/Clients/144/Calculations/1|https://calculate.uat.xpsplc.com/Clients/144/Calculations/1]","16/Oct/25 8:57 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272]  All looks good - exact solution I would have gone for. Only minor comment - using hardcoded strings i.e. “CARE” could cause issues in future. I have created a bunch of constants for strings - especially all the pre com element keys. So that if for any reason these change in the future, we only have to change in one place.

I would also say - that the condition to exclude CARE elements should be redundant. If you run a 2006 member with non mccloud, it should not do any CARE calculation? Would be intrigued to know why it is.

(as an aside - the “CAREPreCom” instances in the same file should also be constants)","21/Oct/25 9:54 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;# Existing CARE2015 code for non-McCloud:

I have removed this line as it was not even being used and wasn’t necessary:

!image-20251021-083135.png|width=774,alt=""image-20251021-083135.png""!

# Managing Pre Com CARE values in the DBPCLS result for the NPPS2006 linked member

I have removed the filter I had put on for the precompen, as it was not doing anything. Due to the way the constants are set up, removing anything containing “CARE” would give the same output, as there is nothing to remove (see interim values:

{noformat}List<ElementValue> activeSalaryLinkedPreComPen = activeSalaryLinkedPreComCalculator.Calculate();    //produces DBPCLS results for salary linked members with another category to the main member, non-McCloud CARE2015
                    InterimValues.Add(""activeSalaryLinkedPreComPen"", activeSalaryLinkedPreComPen);
                    
                    List<ElementValue> DBActiveSalaryLinkedPreComPen = activeSalaryLinkedPreComPen.Where(x => !x.Key.Contains(""CARE"")).ToList(); // LINE REMOVED
                    InterimValues.Add(""DBActiveSalaryLinkedPreComPen"", DBActiveSalaryLinkedPreComPen);{noformat}

!image-20251021-083613.png|width=683,alt=""image-20251021-083613.png""!

# Managing Pension Options with “CARE”  in the DBPCLS result for the NPPS2006 linked member

When running the options builder I do get 0.00 CARE results if I do not filter out options containing “CARE” from the outputs. This is in addition to the correct CARE outputs on the main member.

!image-20251021-084140.png|width=759,alt=""image-20251021-084140.png""!

!image-20251021-090521.png|width=382,alt=""image-20251021-090521.png""!

I couldn’t see the relevant constants for post com values that would prevent this and I didn’t want to say “if (contains “DBPCLS”) as that seemed like the same issue in reverse.

I have said to only add options to the final result if the precommuted value in the final options is not 0.00:

{noformat}Dictionary<CalculationPensionOptionType, PensionOption> DBActiveSalaryLinkOptions = new Dictionary<CalculationPensionOptionType, PensionOption>();

                    foreach (KeyValuePair<InternalCalculationPensionOptionType, PensionOption> kvp in activeSalaryLinkedOptions)
                    {
                        var option = kvp.Value;

                        bool allPreCommutedZero = option.PreCommutedPensionValues.All(v => v.Value == 0m);

                        if (!allPreCommutedZero)
                        {
                            DBActiveSalaryLinkOptions.Add(ConvertKey(kvp.Key), option);
                        }
                    }{noformat}",,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,21/Oct/25 10:51 AM
Target lump sums - to code when LSA logic confirmed,PHX5-545,15836,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,13/Oct/25 4:59 PM,28/Nov/25 5:19 PM,,05/Nov/25 6:31 AM,Client 150 Police A to R Version 6,,,,,,,,,,,,0,,,,,"Pension calcs required for the following target cash options:

* LegacyDBTargetLumpSum - 1987 scheme
* ReformDBTargetLumpSum - 1987 scheme
* DBTargetLumpSum - 1987 scheme

We are waiting on confirmation from Iain on the logic around capping cash when LSA is hit.",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,PHX5-388,,,,,,,,,,,PHX5-433,,,,,,,,,04/Nov/25 3:54 PM;18934601-32fa-4c76-9b74-159dc94fd206;Tracy RE target test cases.msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11221,20/Oct/25 9:25 AM;5796a187-7241-414b-bea0-2d22260a9bed;image-20251020-082543.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10726,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1a40c808,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800i,,,Target cash options now available on PPS 1987.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 19,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-20 08:25:52.425,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_335773090_*|*_10252_*:*_1_*:*_189568611_*|*_10354_*:*_1_*:*_4165_*|*_10056_*:*_1_*:*_1379778055,,"20/Oct/25 9:25 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Inputs are now available in UAT:

!image-20251020-082543.png|width=776,alt=""image-20251020-082543.png""!","29/Oct/25 3:15 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;LSA confirmed to be on hold, so we need to proceed with these calcs on the standard basis, ignoring possible adjustments for LSA.  There is a {{PCLSDBTargetPensionOptionStrategy}} - does this just need bringing into the options at the calculator factory?

Will need to test this.","04/Nov/25 3:54 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[^Tracy RE target test cases.msg]

Admin haven’t yet provided test cases for target cash, as per attached email.  We know how to deal with the simple case for 1987 DB PCLS but have not been advised on how to incorporate the Scheme Maximum cash option.  I have therefore just set up {{PCLSDBTargetPensionOptionStrategy}} for the simple case, which all legacy/reform/non-mccloud PPS options will use for target.

Related ticket 433 will stay in backlog to deal with the Scheme Maximum option if/when we need to.","04/Nov/25 5:11 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;We have 3 tests (named “TargetPCLSDB …”) in public sector for this.  There isn’t much to test on the function itself, as it just ensures that the target cash input is lower than the max cash and then sends data into another function to calculate the post-comm.  I set a test to show the warning logged when target is > max cash, and that we get the right figures when target = max.

I’m happy this is tested sufficiently.  Ticket 433 remains for potential further complexities on the Scheme Maximum calc side (once we hear from admin)",,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,05/Nov/25 6:31 AM
Pensions options - review remedies and adding to dictionaries,PHX5-544,15835,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,13/Oct/25 4:37 PM,28/Nov/25 4:37 PM,,21/Oct/25 6:44 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"This is not related to any specific figures or test cases, but I noted in the A2R code that {{.WithLegacyRemedy()}} is used for both the {{activeNormalLegacyOptionsCalculator}} and the {{activeNormalReformOptionsCalculator}}.  Logic would dictate that the second of these calcs should use .WithCARERemedy instead.  This is around lines 130-140.

Due to how we have already split the pre-com elements prior to this stage, I actually don’t know if making this change would make a difference to results.



Additionally, there is commented out code in this section (around line 180) where we add our calculated options results from above to one of the dictionaries {{allActiveNormalOptions}} or {{allActiveSalaryLinkOptions}}.  This was commented out due to two sets of results under {{allActiveNormalOptions}} sharing the same name and causing an error.

# Will this still cause an error?  Does conversion code change anything?
# Do we actually need both sets of results, or will they be identical?  Active Normal refers to post 22 CARE benefits, and I can’t see how these would change depending on mccloud option.



These issues may tie in together.  If we decide we need only one set of Post 22 CARE results, then we’d also only need one calc for this.  In that case, perhaps we’d just want to rename it so its clearer that the one calc produces results that apply under both legacy and reform options.  It’s worth noting that we don’t currently have any reference to LegacyPost22CARE values within our calcs.",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@558b9427,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzbx,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 17,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-14 06:21:52.738,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_361992121_*|*_10252_*:*_1_*:*_93492464_*|*_10354_*:*_1_*:*_2998_*|*_10056_*:*_1_*:*_149292693,,"14/Oct/25 7:21 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388]  Good catch - yes this does all need doing. I think there is also a {{activeNormalPreComCalculator}} with {{WithLegacyRemedy}} which should be {{WithoutMcCloud}} technically, but changing this this could impact test cases - if only the expected keys.","16/Oct/25 2:03 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+Coding changes:+

* A2R around line 130: {{activeNormalPreComCalculator}} changed from {{.WithLegacyRemedy}} to {{.WithoutMcCloud}}
* A2R around line 169: {{activeNormalReformOptionsCalculator}} changed from {{.WithLegacyRemedy}} to {{.WithCARERemedy}}
* A2R around lines 207+: the foreach loop for {{activeNormalLegacyOptions}}was commented out, I’ve added it back in.  The pension options in here had the same keys as the the {{activeNormalReformOptions}} (ReformPost22CARE … etc) which is why we were getting an error.  These should be Legacy equivalent options
** Therefore needed a change in Public Sector around lines 3295+: we had {{if (mcCloudOption != McCloudOption.None)}} returning Reform options and {{else}} returning {{CAREZeroLumpSum}} etc.  We now have {{if (mcCloudOption == McCloudOption.Reform)}}, {{else if (mcCloudOption == McCloudOption.Legacy)}} and {{else}} covering all 3 care option types
** A2R around lines 260+: These 3 LegacyPost22 lump sum options also needed adding into {{CalculationPensionOptionType}} {{ConvertKey}}
** Worth noting that I believe the ReformPost22 options and LegacyPost22 options could only differ if the member’s other benefits hit the LSA under either/both legacy or reform","16/Oct/25 7:23 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Changes been copied into UAT: pub sect and A2R.  I've reviewed changes to A2R test results and nothing has failed.  Test 17 needed an amend to interim test results, but nothing else knocked out.

Need to continue testing","20/Oct/25 1:00 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;This is quite tricky to test, aside from just reviewing differences from before and after I made the change (I downloaded the csvs directly before and after updates).  

I’ve added expected results for LegacyPost22 values, which will always be the same as ReformPost22 equivalents, unless LSA exceeded (which we’ve not coded for yet anyway)",,,,,,,,,,,,,,,,,,,,,13854,PHX5-221,Police - Active to Retirement,Done,21/Oct/25 6:44 AM
TotalService excluding Transfer In,PHX5-543,15834,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,13/Oct/25 1:45 PM,28/Nov/25 4:37 PM,,15/Oct/25 6:32 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"In Police A>R test 3 errors as member has under 25 years service. Calculation says member has 21 years service but this excludes the transfer in, it should be using 23 years",,Andrew Wilson,Russell Armstrong,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1f14d198,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzcr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 16,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-13 13:42:24.855,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2041394_*|*_10252_*:*_1_*:*_2798_*|*_10354_*:*_1_*:*_4251_*|*_10056_*:*_1_*:*_77693377,,"13/Oct/25 1:48 PM;640f34fc1273131f2adfede9;I believe TotalService in {{ActivePreComPenCalculator}} needs amending - currently does 

{noformat}Period totalServicePeriod = serviceHistoryOverTrancheWithDurations.GetTotalPeriod();
	        TotalService = totalServicePeriod.Years + totalServicePeriod.Months / 12 + totalServicePeriod.Days / 365;{noformat}

This uses {{PartTimeAdjustedPeriod}} but this has not been set for the transfer in. Admin have confirmed it should be total qualifying service so change to {{TotalService = serviceHistoryOverTrancheWithDurations.Sum(x=>x.QualifyingDecimalAmount);}} ",13/Oct/25 2:42 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;create new function in service static - return decimal - and add up the correct amounts (qualifying/reckonable?),"14/Oct/25 11:54 AM;640f34fc1273131f2adfede9;{{GetTotalQualifyingService}} created in Service Static

3 tests added for GetTotalQualifyingService.

Published and updated Service, Service Builder and Public Sector Calculation with new dependencies

Changed TotalService in ActivePreComPenCalculator to use the new function",,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,15/Oct/25 6:32 AM
NPPS - CARE values same for legacy and reform,PHX5-542,15807,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,10/Oct/25 5:59 PM,13/Oct/25 4:35 PM,,13/Oct/25 4:35 PM,,,,,,,,,,,,,0,,,,,"Created off the back of linked ticket 482, which dealt with the DB side of this.

NPPS test cases have same results for total CARE for both legacy and reform.  I can’t remember the details or specific values affected but this was discovered when looking into the calc of DB PCLS. I (Annabelle) am happy to take this one as think it should come back to me once I start looking.

Additionally, some changes have been made to CARE module since, so need to revisit whether this is still an issue.",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,PHX5-482,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@18c82ec,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fg09,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-13 13:11:24.279,10354_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_213220,,13/Oct/25 2:11 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388]  Can you please clarify what this ticket is covering.,"13/Oct/25 4:35 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;No need for this ticket.  I’d forgotten how the calculation builders deal with pre and post 22 CARE separately.  So don’t need to worry about the careStartDate at the legacy and reform levels as we’ve already separated these out into pre and post 22.

I did note however that {{activeNormalReformOptionsCalculator}} is using {{.WithLegacyRemedy()}} which doesn’t seem right.  Changing to {{.WithCARERemedy()}} doesn’t seem to impact any figures though (for reasons above - CARE already been split out, pre22 is under SalaryLink options calcs).  I’m going to create a new ticket to check this and whether we need those lines around 180 added back in.",,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,13/Oct/25 4:35 PM
Invalid Retirements - erroring,PHX5-541,15805,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,10/Oct/25 2:41 PM,28/Nov/25 5:15 PM,,20/Oct/25 6:58 AM,Client 150 Police A to R Version 5,Client 164 Fire A to R Version 1,,,,,,,,,,,0,,,,,"Any case that should not be an allowed retirement, should error with a meaningful message.



Conditions for retirement from active:

* PPS -
** over 30y service (can be any age), OR
** over 25y service AND over age 50, OR
** age 55 for certain ranks, age 60 for all others
* NPPS/NFPS - from age 55
* 2015 (fire and police) - from age 55
* FPS -
** over 25y service AND over age 50, OR
** from age 55

Conditions for retirement from deferred:

* PPS -
** over 25y service AND over age 50, OR
** from age 60
* NPPS/NFPS - from age 55
* 2015 (fire and police) - from age 55
* FPS - from age 60",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,PHX5-285,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@28a0d16d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zyv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 16,PHX5 Sprint 17,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-14 12:19:47.403,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_265275066_*|*_10252_*:*_1_*:*_7392820_*|*_10354_*:*_1_*:*_2191595_*|*_10056_*:*_1_*:*_338909305,,"14/Oct/25 1:19 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Conditions for retirement:

* PPS -
** over 30y service (can be any age), OR
** over 25y service AND over age 50, OR
** age 55 for certain ranks, age 60 for all others
* NPPS - from age 55
* 2015 - from age 55","14/Oct/25 1:27 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;NRA override function in PublicSectorMemberInfo does all the checks we want on scheme, duration of service etc.

I’ve added code into A2R that gets the NRA for both the active and salary linked records and returns the highest.  If the calculation date falls before the date at which the higher of the 2 NRAs would occur (ie. member not yet reached NRA) *AND* the member is not ill-health, an error is logged confirming that a retirement calculation cannot be run.

If these conditions are not satisfied (ie. calc date is after NRA, and/or member is ill-health), then we continue through the A2R calc as normal.","14/Oct/25 3:21 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;My earlier comments can be ignored as I’ve used a different approach.

I’ve created a new method in {{PublicSectorFunctions}} called {{EarliestRetirementAge}} which returns the earliest age member can retire based on scheme, duration of service, status, etc.  This is similar to the NRA {{PublicSectorMemberInfo}} function but has some different checks.

The logic for the earliest ret date when retiring from deferred is very similar to retiring from active, so I’ve included these scenarios, as well as logic for fire schemes (taken from [Police and Fire scheme comparison.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EezHMTNqXwtLrVQYCjPfPU8BSoNW0iDvhjVMzAmSoMXCqA?e=EYbccV])

This new method is called in {{PublicSectorActiveToRetirementCalculatorFactory}} and an error message is returned if the calculationDate is before the date at which the EarliestRetirementAge occurs.  We should be able to call this same method in the DeferredToRetired calc factory once we get there.","14/Oct/25 5:21 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I’ve moved this code into public sector instead, within {{PublicSectorActiveToRetirementCalculatorFactory}} for now.

Need to consider the fact that we pass through this code multiple times.  Eg test 1 returns age 60 for CARE2015 and then returns 55 and an error for PPS.  Presumably the one error is sufficient

NRA code not complete enough.  It doesnt take the 30y service criteria into account, and returns 60 for all 2015 (I thought this was 55, need to double check).  Makes sense as this method is looking for NRA rather than min retirement age.  So perhaps create a very similar function within {{PublicSectorFunctions}} to call instead, which could also look at ill health","15/Oct/25 6:16 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+Testing:+

At Public Sector level: two test functions created, {{RetirementValidationFactory}} for checking the correct strategy is selected based on member category, and {{RetirementValidationStrategy}} to test the actual strategies themselves (ie. is an error logged)

* Set up 2 very basic RetirementValidationFactory tests, which return an interim value confirming the strategy type, based on member’s category
* Set up RetirementValidationStrategy _PPS1987 tests which show the error is logged for a member who is 49, _unless_ they have 30y service, in which case they can retire at any age (ie. only difference in these 2 tests is the totalService input)
* Similarly set up 2 RetirementValidationStrategy _NPPS2006 tests which show the error is logged for a 53yo member, _unless_ they are ill-health, in which case there is no age requirement and therefore no error
* RetirementValidationStrategy _FPS1992 tests show active 59yo member can retire, but same inputs for a _deferred_ member log an error, due to different age requirements
* RetirementValidationStrategy _CARE2015 tests show that retirement is valid from member’s birthday (no error when calc date = birthday, error when calc date is 1d before)
** The {{AgeAtDate}} function in MemberInfo deducts a day from member’s DoB so I wasn’t getting the expected error.  As this code is within MemberInfo, it must be correct.  I’ve therefore amended my code to counteract this by deducting a day from the calculationDate
* Existing A2R tests: test 3 now logs an expected error.  No other tests affected as the other members are all eligible to retire",16/Oct/25 6:10 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Logic from this comment still applies but updated to void strategy format following conversation with Andrew.  I’ve copied updates into UAT and published.  ,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,20/Oct/25 6:58 AM
Test 24 non mccloud - CARE results not matching expected results,PHX5-540,15804,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,10/Oct/25 9:37 AM,28/Nov/25 4:37 PM,,15/Oct/25 6:31 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"The accrued pension of 3367.80 is correct. The issue is with the early retirement factor of 0.924


!image-20251010-083834.png|width=452,alt=""image-20251010-083834.png""!

The expected result is showing a different factor of 0.927


!image-20251010-083908.png|width=673,alt=""image-20251010-083908.png""!

All subsequent outputs seems to be incorrect when comparing to expected result ",,Chris Marshall,Russell Armstrong,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10/Oct/25 9:40 AM;5e266667-8b87-4eb6-9386-71980feac557;image-20251010-083834.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10642,10/Oct/25 9:40 AM;5e266667-8b87-4eb6-9386-71980feac557;image-20251010-083908.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10643,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4b2e0106,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzc,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 16,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-10-13 12:56:30.511,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_80845102_*|*_10252_*:*_1_*:*_3147_*|*_10354_*:*_1_*:*_4461_*|*_10056_*:*_1_*:*_271448581,,13/Oct/25 1:56 PM;640f34fc1273131f2adfede9;Altair see 05/04/2024 to 04/01/2026 as 1 year 8 months. Calculate is calculating this as 1 year 9 months,"14/Oct/25 11:29 AM;640f34fc1273131f2adfede9;In PublicSectorPensionElementStandardStrategy added .PlusDays(-1) to erfApplicationDate

Added ERF Test 9 and ERF Test 10

Test 9 uses the dates from test case and now returns the factor for 1 year and 8 months for 05/04/2024 to 04/01/2026

Test 10 added one day to the date of birth and returns the factor for 1 year and 9 months for 05/04/2024 to 05/01/2026.

All other ERF Tests still pass",,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,15/Oct/25 6:31 AM
Reduction too high on CARE pension,PHX5-539,15803,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,09/Oct/25 6:20 PM,28/Nov/25 4:37 PM,,15/Oct/25 6:32 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"Accrued CARE pension of £7,738.49 coming through correctly on test case 15. Final value is much lower than expectation of £7.3k. We get £6.7k. 

!image-20251009-172115.png|width=282,alt=""image-20251009-172115.png""!",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,09/Oct/25 6:24 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251009-172115.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10641,14/Oct/25 11:07 AM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251014-100453.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10666,14/Oct/25 11:07 AM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251014-100621.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10665,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5748447f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzci,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 16,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-10 07:24:21.337,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_76260404_*|*_10252_*:*_1_*:*_8145_*|*_10354_*:*_1_*:*_3210_*|*_10056_*:*_1_*:*_329721394,,"10/Oct/25 8:24 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;We use ER factor of 0.875 which assumes an NRD of 04-09-2026 (3 years. 0 months early)

They have an ER factor of 0.952 which assumes 1 year 1 month early. Question is which date is wrong? NRD? DOB? DOC?",14/Oct/25 10:32 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Was an error in the set up of the test case which I have corrected. We still disagree with their figure but i think out figure of 2Y5M early is correct based on aurora data and DoR. Query with admin as to whether altair percentage is correct.,"14/Oct/25 11:07 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;After discussion with Chris we realised that we had had to alter the DoB for the member to get the calc to run and test the specific NPPS scenario. Admin did also amend the DoB to give us an altair print, but for some reason the two dates of birth decided on were slightly different.

I have aligned the UAT test case DoB with the one used to create the Altair expected values. Our output now agrees to the matrix/ altair print as shown below:

Per UAT: 1 year 1 month early and factor of 1-0.048= 0.952. Expected final value - £7,367.04

!image-20251014-100453.png|width=215,alt=""image-20251014-100453.png""!

Per altair:

0.048 also used and final value agrees to our output.

!image-20251014-100621.png|width=215,alt=""image-20251014-100621.png""!",,,,,,,,,,,,,,,,,,,,,,,,,Done,15/Oct/25 6:32 AM
Difference in additional pension from commuted lump sum,PHX5-538,15802,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,09/Oct/25 5:33 PM,28/Nov/25 4:37 PM,,15/Oct/25 6:30 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"Test case 8 has an expected value in the matrix for Altair reform 2015 of £7,238.83. This seems to be ignoring “additional pension from commuted lump sum” on the altair print.

Our calc does get a cash pension formula figure of £7,238.83 but uplifts to a final result of 8547.25, so not quite the altair figure. Unsure whether we should be ignoring he additional pension or not.",,Annabelle Stephenson,Naomi Robinson,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,09/Oct/25 5:36 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251009-163356.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10640,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@392e1858,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fg2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 16,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-14 11:01:30.212,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_279445_*|*_10252_*:*_1_*:*_2399612_*|*_10354_*:*_1_*:*_199868_*|*_10056_*:*_1_*:*_412116880,,"09/Oct/25 5:36 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Test case 8 has an expected value in the matrix for Altair reform 2015 of £7,238.83. This seems to be ignoring “additional pension from commuted lump sum” on the altair print.

Our calc does get a cash pension formula figure of £7,238.83 but uplifts to a final result of 8547.25, so not quite the altair figure. Unsure whether we should be ignoring he additional pension or not.

!image-20251009-163356.png|width=242,alt=""image-20251009-163356.png""!","09/Oct/25 5:38 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Note: same issue for both reform and legacy values

Seems to be a similar issue on test case 9, although the altair prints do not record the “additional pension”. We can see though that we match the expected results at the “CashPensionFormula” interim value but then add something on to this before the final output.","14/Oct/25 12:01 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;This is a factor issue.  Pre-com pension and cash are correct.  We are using CCF 22.13 which gets us an additional pension of 1308.  Altair factor is 20.69, which I agree based on member’s age at date of retirement (61y 2m).

We need to look into how we are obtaining the CCF.  Looks like we’ve picked up the factor for 58y 10m for some reason.",14/Oct/25 12:04 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Factor table 504 been loaded in reverse,14/Oct/25 12:49 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;We’ve reloaded the factor table 504 correctly and are now matching these values in test 8.  We’re still red on expected results because we need to swap pre-com and residual pension results for NPPS inverse commutation.  There is another ticket 460 [Jira|https://xps-jira.atlassian.net/browse/PHX5-460] for this,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,15/Oct/25 6:30 AM
ReformPreCARE22 pre commuted values wrong for zero and target,PHX5-537,15801,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,09/Oct/25 4:27 PM,13/Oct/25 4:57 PM,,13/Oct/25 4:57 PM,,,,,,,,,,,,,0,,,,,"Ticket 532 covers ReformDBPCLS figures not including reduction.

When looking at the ReformPre22CAREZeroLumpSum for test case 8 and 9, the value is completely different to expected, i.e. £39k vs expectation of £6.9k.

Potentially a different issue to 532 to be looked into.

!image-20251009-154719.png|width=282,alt=""image-20251009-154719.png""!

Unclear from uploads to desensitised expected results where £6,971.51 comes from for test case 7, so unclear why this is so different.",,Andrew Wilson,Annabelle Stephenson,Naomi Robinson,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,09/Oct/25 4:50 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251009-154719.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10639,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@70f380d6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fj,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-10 07:06:55.668,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_347375055,,"10/Oct/25 8:06 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;I think this is the same issue as [https://xps-jira.atlassian.net/browse/PHX5-528|https://xps-jira.atlassian.net/browse/PHX5-528|smart-link] and [https://xps-jira.atlassian.net/browse/PHX5-518|https://xps-jira.atlassian.net/browse/PHX5-518|smart-link] 

The CARE pension is high becauwse we recalculate - and the period pension data holds the total pension rather than the pension in the period, so the recalculation gets it wrong.","13/Oct/25 4:56 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Agreed with Andrew’s comment, this has been resolved.  Test 8 pre-com is now 6742.27 rather than ~39000",,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,13/Oct/25 4:57 PM
TotalCAREAtEndDate data incorrect,PHX5-536,15799,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,09/Oct/25 1:16 PM,28/Nov/25 4:37 PM,,13/Oct/25 4:14 PM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"Police A>R test case 8 has total care as 4344.34 coming from “TotalPension” within member care. This value is 1804 per altair workings.

!image-20251009-121702.png|width=282,alt=""image-20251009-121702.png""!

!image-20251009-121736.png|width=282,alt=""image-20251009-121736.png""!",,Andrew Wilson,Annabelle Stephenson,Naomi Robinson,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,PHX5-528,,,,,,,,,,,09/Oct/25 1:17 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251009-121702.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10627,09/Oct/25 1:17 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251009-121736.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10626,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3bd196e3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fg04,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 16,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-09 12:32:33.479,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_4124_*|*_10252_*:*_1_*:*_239228293_*|*_10354_*:*_1_*:*_848950_*|*_10056_*:*_1_*:*_103023147,,"09/Oct/25 1:32 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;I think this is the same issue as [https://xps-jira.atlassian.net/browse/PHX5-528|https://xps-jira.atlassian.net/browse/PHX5-528|smart-link] . They have additional credit, so the code is recalculating. Because the PeriodPension is incorrectly holding the total pension, this is adding up to way more than the actual total.  ticket 528 should resolve this issue. However, also be aware of [https://xps-jira.atlassian.net/browse/PHX5-529|https://xps-jira.atlassian.net/browse/PHX5-529|smart-link] .  Any ticket with additional credit is likely to be wrong as apparently Altair is not calculating it correctly.","10/Oct/25 5:51 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;CARE changes from tickets 518 and 528 mean we now get 1895.33 for TotalCAREAtEndDate, which includes 89.16 of TotalAdditionalCredit","10/Oct/25 6:12 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;(notes for self on monday) - i think this ticket is basically resolved by 518 and 528. my understanding is that admin would use the AA calc to manually get the care total. until they give us a full test case, i’m not sure we can do any more checks on these members","13/Oct/25 12:34 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+Summary:+

I’ve checked through a load of other A2R tests and can see where Period Pension and Accrued Pension have been incorrectly populated on member records.  The Total Pension on these historic records however is correct.

Before the changes under 518 and 528 we were using these incorrect values to recalculate the RollingTotal each time, hugely overstating the CARE benefits.  Now we are only calculating RollingTotal for new CARE histories, which have the correct figures in the right places and the right starting figure.

No action required here.",,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,13/Oct/25 4:14 PM
Police A2R TEST 7: Additional 60ths of NPPS members incorrect,PHX5-535,15798,Story,BLOCKED,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,09/Oct/25 12:40 PM,12/Nov/25 2:12 PM,,,,,,,,,,,,,,,0,,,,,"Spotted on test case 7.

Legacy calcs give correct lump sum of £38,947.96 per print, because this is calculated only with the 15Y 80D pensionable service, per the altair print.

!image-20251009-114121.png|width=282,alt=""image-20251009-114121.png""!

We also correctly calculate £9,736.99 as the initial pensionable service, but then there is something strange going on with the precommuted and residual values -

LegacyDBPCLS does not add on the additional 60ths, as with test case 3 and ticket 523, but we can also see the target and zero comm values are commuting a negative.

!image-20251009-114536.png|width=250,alt=""image-20251009-114536.png""!



On the reform calc, we are also getting the precom value without additional 60ths, although oddly the altair calc seems to do some kind of manual addition of this value as it comes out in the print as zero. Our calculation is giving the £5,644.12 figure.

!image-20251009-115514.png|width=282,alt=""image-20251009-115514.png""!",,Andrew Wilson,April Woods,Chris Marshall,Naomi Robinson,Russell Armstrong,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:ffa445ab-b813-4226-9ed2-507a454e9272,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-209,,,09/Oct/25 12:47 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251009-114121.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10622,09/Oct/25 12:47 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251009-114536.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10623,09/Oct/25 12:55 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251009-115514.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10624,07/Nov/25 3:44 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251107-153749.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11346,07/Nov/25 4:12 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251107-161233.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11347,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3509b42b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008000010002,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 20,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-09 13:17:20.138,,,"09/Oct/25 2:17 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Negative values covered by [https://xps-jira.atlassian.net/browse/PHX5-460|https://xps-jira.atlassian.net/browse/PHX5-460|smart-link] .  Awaiting response from admin.

Age addition is being calculated manually, see [https://xps-jira.atlassian.net/browse/PHX5-529|https://xps-jira.atlassian.net/browse/PHX5-529|smart-link] ","13/Oct/25 2:18 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Next steps:

* [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  Are additional 60ths included in lump sum calc","21/Oct/25 9:33 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd] the additional 60ths purchased are not included in the lump sum calculation in Altair. They are included in the calc for the pension.

Can you confirm if Altair is correct and the additional 60ths should only be included in the pension calc. Thanks","21/Oct/25 10:19 AM;712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] Hi Chris. Just to clarify that this is 2006 added pension, and not 1987? If so it should be additional 70ths, and does add to both the pension and lump sum entitlement. So if someone accrued 20 years service and bought 5 years at normal retirement age I would expect to see 25 years used in both the pension and lump sum calculation. What’s the member ref for the test case? I am wondering if it has been set up in Altair correctly or not. Thanks, April","30/Oct/25 3:43 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;[~accountid:712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd] Hi April, This is member 38765802 (linked: 38765801). Thank you.","03/Nov/25 1:42 PM;712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] Hi Naomi, thank you for this. So the Added Pension was set up incorrectly on the Altair record as a 1987 type of service, rather than 2006. This is now amended and I’ve re-ran the calcs that Chris originally ran and they include the service if you want to take a look? Thanks, April",04/Nov/25 3:02 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Updated expected results on both test matrix and in UAT. Uploaded updated expected results to share point. Seems there is an issue with the results in UAT may need to discuss [~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] thanks,07/Nov/25 2:38 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Calc re-run and correct figures now in expected values. Looking into why we are missing 5 years of service.,"07/Nov/25 3:44 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;!image-20251107-153749.png|width=1800,alt=""image-20251107-153749.png""!

The 5 years difference is the added 70ths. 

Legacy service - 15.2921 + 5.0000 = 20.2191 ( 20Y80D)
Reform service - 8.8219 + 5.0000 = 13.8219 (13Y300D)

Altair is correct","07/Nov/25 4:12 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Hey [~accountid:640f34fc1273131f2adfede9] . This is the case i mentioned. Data has been updated to now be correct, but this 5 years additional service credit isn’t showing in the calc. This is an NPPS member. See test 28 for a PPS member with result as expected. 

!image-20251107-161233.png|width=226,alt=""image-20251107-161233.png""!",10/Nov/25 9:00 AM;640f34fc1273131f2adfede9;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] I’ve asked Neil Murrey about this. I’d understood the added years would be added to External Fund Details but they don’t appear to have been. Data as it is is unusable for calculations as there is no link between Historic Benefits and Historic Benefit Elements and data from both is needed to calculate the additional service,10/Nov/25 9:51 AM;640f34fc1273131f2adfede9;Neil Murrey to speak to admin - there appears to be similar data held in two different places in Altair - need to establish if this is actually the same thing and historic poor record keeping or if they are different. If they are different does the spec need reviewing to confirm the treatment of the one currently not covered?,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,To Do,09/Oct/25 12:40 PM
Test case 6 Qualifying and reckonable service one day out (legacy),PHX5-534,15793,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,09/Oct/25 11:33 AM,28/Nov/25 4:37 PM,,16/Oct/25 8:57 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"The altair print uses 17Y124D as its service for legacy annual pension:

!image-20251009-103753.png|width=282,alt=""image-20251009-103753.png""!

Our calc is using 17Y 123D.

The issue appears to be stemming from what is coming through on the service record for {{totalDBQualifyingService}} as this is also 17Y123D (so doesn’t look like it is a later rounding issue).

Note that the reform service period of 10Y 123D is calculating correctly:

!image-20251009-103944.png|width=282,alt=""image-20251009-103944.png""!

Interesting that this uses 10 Y 123 D in its period. Would we not expect a 7Y exact difference between reform and legacy, suggesting maybe our calc is correct and the altair period of 17Y 124D might be incorrect?",,Andrew Wilson,April Woods,Chris Marshall,Naomi Robinson,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,PHX5A-182,,,,,,,,,,,,,,,,,,09/Oct/25 11:40 AM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251009-103753.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10618,09/Oct/25 11:40 AM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251009-103944.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10619,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5f9737,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zyi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 16,PHX5 Sprint 17,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-13 06:12:17.163,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_532285212_*|*_10252_*:*_1_*:*_3009_*|*_10354_*:*_1_*:*_9262_*|*_10056_*:*_1_*:*_2746521,,"13/Oct/25 7:12 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The issue is because we have introduced the CARE tranche. Because we are calculating a period from 1st April 2022 to 6th April 2024, the calculation for the leap year only considers the period of 5 days in April when considering whether to include a leap day. If we did not have the false break at 1st April 2022, the case would be considering the period 25th Jan 2016 to 6th April 2024, it would count the years up and be looking for a leap year between 25th Jan 2024 and 6th April 2024. It would find one and leave it in, giving us 1 extra days service.","14/Oct/25 9:58 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd] following discussion the leap day needs to be factored in for both legacy and reform service. Currently this is only factored into legacy benefits in Altair giving 17y124d. The reform benefits service is given as 10y123d.

Can you confirm the leap day should be factored into both legacy and reform service. Thanks","15/Oct/25 4:10 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd] confirmed the leap day should be factored into the full qualifying service. The CARE service (not including leap day) is then deducted from the qualifying to calculate both reform and legacy DB service

Altair produced the correct result for legacy but not reform. Updated test matrix with correct expected results

Code has been updated to now correct the service","22/Oct/25 5:25 PM;712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] Hi Chris. For the example member 361558 we would expect the output to calculate the service using the start date and period end date. So the figures in the legacy option would be 17/123 and 19/129 and the reform option would be 10/123 and 19/129 The leap year has been factored into the total qualifying service as the leap year is crossed in the year of leaving. Altair is not correct as it has not consistently applied any logic and we don’t agree with either of the outputs it reaches. We have not included the leap year in the reckonable as the period end date is not within a leap year. It would be included in the reckonable if the period end date was in a leap year. Thanks, April",,,,,,,,,,,,,,,,,,,,,15482,PHX5-466,Spec Changes,Done,16/Oct/25 8:57 AM
Update A>R test matrix and UAT outcome values to include Max lump sum as well as pcls,PHX5-533,15792,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,09/Oct/25 11:21 AM,03/Dec/25 11:08 AM,,03/Dec/25 11:08 AM,,,,,,,,,,,,,0,,,,,"We have 6 expected values on the matrix but these do not include max lump sum values. 

Some of the A>R test cases have set expected values for max lump sum instead of pcls.

We need someone to go through and add max lump sum values to the matrix and make sure expected outcome values in UAT cover both PCLS and maxPCLS.

At the moment there is a slight missmatch.",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@126b5187,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fr0007i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-13 13:47:07.424,10354_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_103679,,13/Oct/25 2:47 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] Can you find these figures?,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,03/Dec/25 11:08 AM
Reform Pre22CAREPCLS higher than expected,PHX5-532,15783,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,08/Oct/25 5:36 PM,28/Nov/25 4:37 PM,,20/Oct/25 7:00 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"Whereas test cases 1-4 have no result for reform PRE22CAREPCLS, test case 5 has a higher than expected figure. 

£4,999.06 per the altair calc is being output as the precommuted pension value, with no reduction before commutation:

!image-20251008-164100.png|width=282,alt=""image-20251008-164100.png""!

!image-20251008-164133.png|width=282,alt=""image-20251008-164133.png""!



Second test case: Same issue also found on test 7 (NPPS), with £157,24 not being deducted.

!image-20251009-115942.png|width=282,alt=""image-20251009-115942.png""!",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,08/Oct/25 5:42 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251008-164100.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10616,08/Oct/25 5:42 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251008-164133.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10615,09/Oct/25 12:59 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251009-115942.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10625,16/Oct/25 1:46 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251016-123956.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10693,16/Oct/25 1:46 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251016-124501.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10694,16/Oct/25 1:46 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251016-124553.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10695,17/Oct/25 3:19 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251017-141900.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10698,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@26445a0d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zy9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 17,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-10 06:31:35.426,10251_*:*_2_*:*_62292668_*|*_10250_*:*_2_*:*_43370118_*|*_10252_*:*_1_*:*_529166752_*|*_10354_*:*_1_*:*_3474_*|*_10056_*:*_1_*:*_136609793,,"10/Oct/25 7:31 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The member is PPS1987 so in {{PensionElementCalculatorFactory}} it is selecting {{PublicSectorPensionElementUnreducedStrategy}} which will apply no reduction. However, in the case of reform, the CARE pension will need to be reduced.

Currently the code only has one {{IPublicSectorPensionElementCalculator}}. We need a way for {{CalculateRetirementElements}} to be able to pick a different ElementCalculator for CARE. It possibly makes sense to create a CAREElementCalculator (similar to the way we have {{CashElementCalculator}}) and then in {{PensionElementCalculatorFactory}}  we can set this based on the information available. i.e. for PPS1987 reform, the CARE calculator will need to reduce the member’s pension.","16/Oct/25 1:46 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Hey [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] 

I need some help reviewing this one as my updates are not acting as expected.

The below relates to test case 10 (NPPS). The same must be applied to PPS.

I added a {{CAREElementCalculator}} which sets containsCARE to “true” in {{PensionElementCalculatorFactory}} which should in turn use {{PublicSectorPensionElementStandardStrategy}} for NPPS and PPS categories and apply an ERF.

I added a test case within the module to confirm when set as true the right ERF table was selected.

In order to set the {{CAREElementCalculator}} against reform CARE, in {{CalculateRetirementElements}}

I added the following code:

{noformat}case KeyAccruedPensionConstants.AccruedCAREPension: // new
					if (McCloudOption == McCloudOption.Reform) // Added for reform only
                    {
                        allElementValues.Add(CAREElementCalculator.GetPensionElement(activeToDeferredElementValue, totalService));
                    }{noformat}

However, it is not causing any change to the final results/ no ERF is being applied.



I have noticed in the interim values that, whilst the PreCommElementKey for the value I am targeting is called “ReformCAREPreCom”, it is within a series of results mapped to legacy.

As such, I am unsure I am setting up my if statements correctly.

!image-20251016-123956.png|width=562,alt=""image-20251016-123956.png""!

The other thing I am confused about is I noticed that the original code for NPPS and PPS under pension element calculator factory, was set to used an unreduced strategy for active members. My update was as such:

{code:json}            case ""NPPS2006"":
            case ""NFPS2006MOD"":
            case ""NFPS2006RET"":
                if (memberInfo.IsActive)
                {
                    if (containsCARE)
                    {
                        InterimValues.Add($""PensionElementStrategy for McCloudOption: {mcCloudOption.ToString()}"", $""Using strategy PublicSectorPensionElementStandardStrategy"");
                        return new PublicSectorPensionElementStandardStrategy(2, memberInfo, mcCloudOption, calculationDate, erfTable, schemeReferenceData, 3);
                    }
                    else
                    {
                    InterimValues.Add($""PensionElementStrategy for McCloudOption: {mcCloudOption.ToString()}"", $""Using strategy PublicSectorPensionElementUnreducedStrategy"");
                    return new PublicSectorPensionElementUnreducedStrategy();
                    }
                }{code}

From looking at this code, I would have expected NPPS to have not previously used an ERF in any circumstance, however it was applying one in the case of the CARE pension (non reform). This result remains correct after my updates, under: $.PensionOptions.30205002.CAREZeroLumpSum.ResidualPensionValues[?(@.Key=='PEN')].Value

!image-20251016-124501.png|width=435,alt=""image-20251016-124501.png""!

As such, I think I am reading the code incorrectly to target Reform CARE as here:

!image-20251016-124553.png|width=378,alt=""image-20251016-124553.png""!","16/Oct/25 4:45 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Update: Have coded in to apply an ERF, but erfApplicationDate is not correct. Naomi to check tomorrow. Likely that NPPS and PPS have 55/50 as NRD but need to be set to 60 for the CARE part to match CARE2015 NRD","17/Oct/25 3:19 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Update:

Made sure:

# Ill health results did not have an ERF applied
# ERF age was overridden to 60 for CARE reform results

Cloned a test case to check for an ERF when not ill health and no ERF when there is ill health, on NPPS category:

!image-20251017-141900.png|width=782,alt=""image-20251017-141900.png""!","17/Oct/25 3:53 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Calcs 5 and 7 now applying expected ERF and IH is ignoring, so think this is complete. See comment below which was today’s updates post discussion between [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] and [~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] on 16th Oct, where we  ran through code changes made on screen, to add in a CAREElementCalculator. We agreed all ok except we could remove McCloud marker from this line of code, which was done just after the call.

{noformat}case KeyAccruedPensionConstants.AccruedCAREPension: // new
					if (McCloudOption == McCloudOption.Reform) // Added for reform only
                    {
                        allElementValues.Add(CAREElementCalculator.GetPensionElement(activeToDeferredElementValue, totalService));
                    }{noformat}",,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,20/Oct/25 7:00 AM
Issue with PT service days rounding,PHX5-531,15782,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,08/Oct/25 5:15 PM,28/Nov/25 4:37 PM,,16/Oct/25 9:39 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"UPDATE:

Have narrowed this issue down to PT service (held within: AccrualDoubleStrategy, TotalDBReckonableService | AuroraId: 38540501 | McCloudOption: Legacy) coming through as 23.18 or 8461 days for us and 23.17 or 8460 days on the altair calc).



ORIGINAL DESCRIPTION:

When calculating “Protection of double accrual” there is exactDays rounding in Public Sector Calculation to ensure the final period used (e.g. 36 years 67 days below, test 4) is a complete number of days.

When there is PT service, the calculation for period uses nearest complete days for protection of double accrual (first point of rounding) x (complete days for PT service / complete days for FT service) and then rounds again, to nearest complete number of days.

In the below example from test case 4, you can see 36Y 67D is a rounded result (R1: which our code performs) but the final expected service period rounds a second time (R2)

!image-20251008-162552.png|width=282,alt=""image-20251008-162552.png""!

I am not sure if our calculation is ordered to perform the same rounding? Even if it is rounding, this result will be wrong due to PT service in our calc coming through as 8461 days, not 8460.",,Andrew Wilson,Chris Marshall,Naomi Robinson,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,08/Oct/25 5:26 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251008-162552.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10614,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4d8b29e9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zyr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 16,PHX5 Sprint 17,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-15 15:12:18.472,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_193196622_*|*_10252_*:*_1_*:*_36640_*|*_10354_*:*_1_*:*_2688_*|*_10056_*:*_1_*:*_407783564,,"15/Oct/25 4:12 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Where a member is PT the days used in the service were a day out. Had to strip the service down to days then round at that point before adding back the years to create the full service

The part days of service was being used and no rounding so code update for part time members only in Public Sector Calc module


{noformat}        decimal accrualCalcF = 0;

			var totalservice = serviceHistories[ServiceCalcType.TotalService].Sum(x => x.TotalDurationAmount);
			var ptservice = serviceHistories[ServiceCalcType.TotalService].Sum(x => x.PartTimeAdjustedDurationAmount);
 
        	if (totalservice != ptservice)
       
       		{
				decimal initialAccrualCalcF = accrualCalcC == 0 ? totalDBQualifyingService : accrualCalcE * accrualCalcB / accrualCalcD; // was serviceForAccrual
				InterimValues.Add($""Initial accrualCalcF | AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", initialAccrualCalcF);
    			decimal decimalPartA = (initialAccrualCalcF - (int)initialAccrualCalcF) * 365;
				decimal decimalPartB = Math.Round(decimalPartA, MidpointRounding.AwayFromZero);
    			accrualCalcF = ((decimalPartB / 365) + (int)initialAccrualCalcF);
			}
			else
			{
    			accrualCalcF = accrualCalcC == 0 ? totalDBQualifyingService : accrualCalcE * accrualCalcB / accrualCalcD; // was serviceForAccrual
			}{noformat}","16/Oct/25 9:05 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Have discussed with [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] . The values coming out of the service module are correct, and the rounding applied within the service module is correct. However, Altair applies a second rounding at the accrual stage, and the fix we are applying covers that.

Correct me if my understanding is incorrect Chris.",16/Oct/25 9:08 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] This is correct what you have said,,,,,,,,,,,,,,,,,,,,,,15482,PHX5-466,Spec Changes,Done,16/Oct/25 9:39 AM
Test 3 No Zero Lump Sum Pension Options,PHX5-530,15779,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,08/Oct/25 4:59 PM,28/Nov/25 4:37 PM,,13/Oct/25 4:15 PM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"Whereas in TEST 2 (Police A>R) there are Pension Options populated in the results for zero lump sum, there is an empty Pension Options section “{}” in test 3. ",,Andrew Wilson,Naomi Robinson,Russell Armstrong,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2d46cf68,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zz6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 16,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-09 14:09:06.944,10251_*:*_2_*:*_2998703_*|*_10250_*:*_2_*:*_337863123_*|*_10252_*:*_1_*:*_3873_*|*_10354_*:*_1_*:*_4298_*|*_10056_*:*_1_*:*_79783905,,"09/Oct/25 3:09 PM;640f34fc1273131f2adfede9;Calculation errors “Maximum lump sum entitlement, service under 25years and member has attained age 50 at calculation date. Not eligible for lump sum.” so no Pension Options returned.

Amended MaxLumpSum in Public Sector calculation so the Error is now a warning.

Changed the expected on MaxLumpSum_Test4 so instead of an error it expects a warning and a value of 0 returned","09/Oct/25 3:59 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;We really need a comment on this bit of code. We have been through this three times already it feels like.

It has been agreed this should be an error, as it should never happen. 

 [~accountid:640f34fc1273131f2adfede9]",10/Oct/25 10:11 AM;640f34fc1273131f2adfede9;Changed back to an error and amended text to make it clear the member is not eligible to retire (not just not eligible to commute pension for lump sum). Expected for Test Case 3 changed to look for error and not to check Outcome Values,10/Oct/25 3:53 PM;640f34fc1273131f2adfede9;Raised [https://xps-jira.atlassian.net/browse/PHX5-543|https://xps-jira.atlassian.net/browse/PHX5-543|smart-link] as while test 3 should error transfer in service is being excluded from the total service used to check retirement eligibility,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,13/Oct/25 4:15 PM
Test case 13 - check expected values,PHX5-529,15777,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,08/Oct/25 3:10 PM,31/Oct/25 12:43 PM,,31/Oct/25 12:43 PM,,,,,,,,,,,,,0,,,,,"The test case has an expected accrued pension of 7053.20.

But on the member’s record, the latest care total is 8043.95

Is the expected accrued pension correct?

This is regarding Age Addition also need to check result for test 8, 9",,Andrew Wilson,Annabelle Stephenson,Chris Marshall,Naomi Robinson,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,PHX5A-210,,,,,,,,,,,,,17/Oct/25 3:39 PM;5e266667-8b87-4eb6-9386-71980feac557;Age addition plus assumed test 13.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10700,17/Oct/25 3:39 PM;5e266667-8b87-4eb6-9386-71980feac557;Age addition plus assumed test 8.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10701,17/Oct/25 3:39 PM;5e266667-8b87-4eb6-9386-71980feac557;Age addition plus assumed test 9.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10699,09/Oct/25 12:04 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251009-110342.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10621,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@190b8cf6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008009,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 16,PHX5 Sprint 17,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-09 11:04:19.669,10281_*:*_3_*:*_694511180_*|*_10250_*:*_3_*:*_321164690_*|*_10252_*:*_3_*:*_1016546_*|*_10354_*:*_4_*:*_17986_*|*_10056_*:*_1_*:*_3504874_*|*_10355_*:*_1_*:*_0,,"09/Oct/25 12:04 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Message to April in admin


When you get a chance are you able to have a quick look at member 487782 I have ran a retirement calc but Altair is not picking up the additional credit from the CARE data view. There is nothing to explain this additional credit on record either

_The additional credit is age addition, so appears in the scheme year after he turned 60 ( is it just me finding it odd he became a PC at age 56!) but can see nothing wrong with the record or your calc, and it is doing the same if I run it in live, basically ignoring the age addition entirely , although it is working out assumed age addition for the final year. I think this must be an Altair issue, but not sure if admin have raised it. I do know even when it was pulling the lines it was not getting the correct output..just checked with admin and because they use a spreadsheet they won't have noticed._

Thanks April the correct pension for this member should be 8043.95 and Altair is incorrect?

!image-20251009-110342.png|width=632,alt=""image-20251009-110342.png""!

_Morning...I don't know what the correct pension should be without calculating it but the member should have some age addition so the calc is wrong...but then we know from what we've seen before that the age addition values that Altair gets are wrong, so I'd say the calc and the 8043 is wrong!_

Call setup to discuss this issue","10/Oct/25 5:45 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] I’ve published my CARE changes, we’re now getting 8043.95 for the TotalCAREAtEndDate",17/Oct/25 3:39 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd] I have attached 3 calcs for age addition are you able to review these and advise if correct or not? Thanks,31/Oct/25 12:42 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Duplicated by ticket within Phase 5 Analysis where admin queries have now been collated. See “Relates to”. Have closed this one since no response post Oct 17,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,31/Oct/25 12:43 PM
Test  case 13 - CARE age addition code needs to not recalculate existing totals,PHX5-528,15774,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,08/Oct/25 1:45 PM,28/Nov/25 5:20 PM,,13/Oct/25 11:08 AM,Client 150 Police A to D Version 1,Client 150 Police A to R Version 5,,,,,,,,,,,0,,,,,"We made a fix to DefaultRunningTotalsStrategy to not recalculate for lines that are not new.

The same fix needs to apply to AgeAdditionRunningTotalsStrategy

Also - see [https://xps-jira.atlassian.net/browse/PHX5-518|https://xps-jira.atlassian.net/browse/PHX5-518|smart-link]  as same fix will also need to apply",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,PHX5-536,,,,,,,,,,PHX5-518,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@67dd91e1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zz3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 16,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-09 15:58:55.497,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2267272_*|*_10252_*:*_1_*:*_87363500_*|*_10354_*:*_1_*:*_3866_*|*_10056_*:*_1_*:*_96640819,,09/Oct/25 4:58 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452]  is this suggesting that we should have the {{if (CareHist.IsNew)}} check within the +Age Addition+ rolling totals calc?  I thought age addition was only calculated at retirement and therefore would not be included in any existing CARE history?,"09/Oct/25 6:23 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] I think I might have changed my mind on this actually, I’m sure age addition would have to be calculated year on year once member is past their NRD so ignore my comment!  I should be able to make the same changes to this one as the default strategy under ticket 518","10/Oct/25 5:30 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;See linked ticket [[PHX5-518] CARE Running total will not take into account existing total. - Jira|https://xps-jira.atlassian.net/browse/PHX5-518] for main comments on this.

I have added an additional test “RollingTotal _AgeAddition _warning” that confirms age addition is only recalculated on new CARE history lines.  This member would also be due age addition in 2019/20, but as we have that CARE line in existing history, it is not calculated for that year. 

I also introduced a warning for this scenario, which comes up in this test, highlighting that the existing history does not include age addition for one of the years beyond NPA: “Over NPA at Monday, 1 April 2019. Age Addition credit expected in CARE history.”",,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,13/Oct/25 11:08 AM
Add interim values to calcs,PHX5-527,15763,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,07/Oct/25 4:57 PM,03/Dec/25 10:23 AM,,03/Dec/25 10:23 AM,,,,,,,,,,,,,0,,,,,"Police A>R done and separate ticket for Fire A>R which may be possible to pick up when setting up test cases.

All other calcs to be considered as started.",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@125245c4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fr0008r,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-24 13:00:48.059,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_4904735045,,24/Oct/25 2:00 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272]  Can this be closed? Is it covered elsewhere?,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,03/Dec/25 10:23 AM
Update Fire A>R for interim values,PHX5-526,15762,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,07/Oct/25 4:57 PM,03/Dec/25 9:52 AM,,,,,,,,,,,,,,,0,,,,,Reflect work done in Police A>R with interim value expected values,,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@31c21ba4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fr0008i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-03 09:52:42.488,,,03/Dec/25 9:52 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272]  I think Fire will just get the interim values already set up. Are you happy to close this ticket?,,,,,,,,,,,,,,,,,,,,,,,,13856,PHX5-223,Fire - Active to Retirement,To Do,07/Oct/25 4:57 PM
Update Fire A>R to pick up different factor tables,PHX5-525,15761,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,07/Oct/25 4:31 PM,28/Nov/25 5:15 PM,,07/Nov/25 2:37 PM,Client 164 Fire A to R Version 1,,,,,,,,,,,,0,,,,,"Fire factor tables differ from Police. Need to update Fire A>R code to reflect this.



!image-20251007-153219.png|width=353,alt=""image-20251007-153219.png""!",,Andrew Wilson,Chris Marshall,Russell Armstrong,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,07/Oct/25 4:32 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251007-153219.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10602,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7288b75f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000803,,,"Change so Fire calculations will look to correct Early, Commutation and Age Addition factors",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 20,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-11-05 10:20:42.098,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_194708938_*|*_10252_*:*_1_*:*_5266_*|*_10354_*:*_1_*:*_6519_*|*_10056_*:*_1_*:*_2402426671,,"05/Nov/25 10:20 AM;640f34fc1273131f2adfede9;Setting which factor table to use can no longer rely entirely on Category - CARE2015 categories exist in both schemes and use different factors for commutation, early retirement and age addition for Police and Fire","06/Nov/25 4:01 PM;640f34fc1273131f2adfede9;In MemberInfo Module Added SchemeName to IMemberInfo and set this to Scheme.Name (or Member.Scheme.Name for LinkedMember)

In PublicSectorMemberInfo module, added a class for an enum for SchemeType (Police, Fire or Unknown). Added OverallSchemeType() setting this to one of the options in the enum based on SchemeName. Used this to set the logic for CommutationFactor for CARE2015 categories (always 12 for Fire) and then set up the correct commutation factor tables for FPS1992 and NFPS2006 categories. Table X-505 for FPS1992 has been loaded to factors as not previously there. NFPS2006 categories use 12 at all ages same as CARE2015

In Public Sector Calculation updated ERTable so uses OverallSchemeType to get the correct ER Tables for CARE2015 and the correct ER Tables for FPS1992 and NFPS2006 categories based on the category. In {{PublicSectorCARECalculationFactory}} added logic to select the correct age addition table based on OverallSchemeType and use this in {{careBuilder.WithAgeAddition}}

Changed GetTestMember() to add in a Scheme.Name of “Police” as without this majority of test cases were failing. Changed the test Commutation Factor 1992 to expect the correct result with the changes. Added Commutation Factor CARE Fire to test the correct factor of 12 was returned for CARE2015 Fire members. Added Commutation Factor NFPS2006 to test correct factor returned for this category.

Added ERF tests 11 and 12 to test correct tables being looked at for fire categories and overall scheme types

Brought updated version of Public Sector Calculation into Fire Active to Retired in client 164. Most Tests do appear to still error but does not appear to be due to factors so to be investigated under a separate task",07/Nov/25 6:46 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:640f34fc1273131f2adfede9]  Is it correct to be using the Member scheme for the LinkedMember? I would have pushed for a dev fix to get scheme included on LinkedMember instead.,07/Nov/25 9:34 AM;640f34fc1273131f2adfede9;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] is it necessary? We’re just using it to establish if they are in Police or Fire - this isn’t going to be different between the Member and LinkedMember,,,,,,,,,,,,,,,,,,,,,13856,PHX5-223,Fire - Active to Retirement,Done,07/Nov/25 2:37 PM
QUICK WIN: Cash accrual needs rounding to 2 d.p then several police A>R results will match,PHX5-524,15760,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,07/Oct/25 4:22 PM,28/Nov/25 4:37 PM,,10/Oct/25 6:37 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"Example from test case 7: 

!image-20251007-152305.png|width=283,alt=""image-20251007-152305.png""!

Doesn’t look like {{PublicSectorAccrualCashStrategy}} is rounding final result it is returning. Results otherwise match for members using this strategy.",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,07/Oct/25 4:24 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251007-152305.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10601,09/Oct/25 4:06 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251009-145432.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10638,09/Oct/25 4:06 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251009-150641.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10637,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4ddd7761,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zy,,,,,,,,,,,,,,,,2006 NPPS,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 16,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1299976_*|*_10252_*:*_1_*:*_170496435_*|*_10354_*:*_1_*:*_3117_*|*_10056_*:*_1_*:*_116132,,"09/Oct/25 4:06 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Determined that “Get accrued cash” needed the same .Rounding(Rounding) as GetAccruedPension already had.

Updated to round the same and all test cases passed in Public Sector Calculation, so I have added additional test case “AccruedCashStrategy Testing Rounding” to check we get 2 d.p.

!image-20251009-145432.png|width=230,alt=""image-20251009-145432.png""!

There were two test cases testing the accruedcashstrategy but they had a tolerance level set which didn’t pick up lack of rounding. I l have left those as they are and added one with an exact match required.

Proof of correct value in A>R test case 7:

!image-20251009-150641.png|width=230,alt=""image-20251009-150641.png""!",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,10/Oct/25 6:37 AM
Test 3 has additional 60ths purchased not being picked up,PHX5-523,15754,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,07/Oct/25 2:17 PM,05/Nov/25 2:22 PM,,05/Nov/25 2:22 PM,,,,,,,,,,,,,0,,,,,"Total service does not appear to have been increased by the 140 days of additional service purchased. 

!image-20251007-131814.png|width=283,alt=""image-20251007-131814.png""!",,Andrew Wilson,Chris Marshall,Naomi Robinson,Russell Armstrong,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:ffa445ab-b813-4226-9ed2-507a454e9272,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-169,,,07/Oct/25 2:18 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251007-131814.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10599,08/Oct/25 10:57 AM;5e266667-8b87-4eb6-9386-71980feac557;image-20251008-095750.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10612,05/Nov/25 2:08 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251105-140632.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11262,05/Nov/25 2:08 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251105-140709.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11261,05/Nov/25 2:12 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251105-141208.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11263,05/Nov/25 2:16 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251105-141648.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11264,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7fd60379,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzbzzzy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 19,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-08 06:03:14.454,10281_*:*_1_*:*_1893285250_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_101292309_*|*_10252_*:*_1_*:*_2022_*|*_10354_*:*_2_*:*_443096813_*|*_10056_*:*_1_*:*_71213444,,"08/Oct/25 7:03 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;My first question would be where is this 140 days service stored on the data?

The member has no transfer in elements or additional history, so this implies there is another set of tvin data to pick up from somewhere.

The member has a TVIN record which we are not doing anything with - but that has 153 qualifying days service.","08/Oct/25 10:57 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;The 140 days service not being accounted for is the pro rate added years


!image-20251008-095750.png|width=752,alt=""image-20251008-095750.png""!",09/Oct/25 2:58 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  If we had to work from the 0.72 figure - would we get to the same result? Or do we need the 261 to get to the 140 days?,09/Oct/25 3:24 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;0.72 * 365 = 262.8 which is not 261 so I would think it needs to use the 261 days. If the added service is longer service using the decimal could be even more out I think so to use the actual years/days would be better,13/Oct/25 1:10 PM;640f34fc1273131f2adfede9;See [https://xps-jira.atlassian.net/browse/PHX5-383|https://xps-jira.atlassian.net/browse/PHX5-383|smart-link] - need confirmation on where data being held,"27/Oct/25 4:47 PM;640f34fc1273131f2adfede9;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] coding for this is done in Public Sector Calculation and I’m happy my test in there is doing the pro rata correctly for the data below. Do we have a replacement test member in Active to Retired covering added years purchase as test 3 is now just expecting an error?

Code not published to be used by Active to Retired yet",03/Nov/25 11:18 AM;640f34fc1273131f2adfede9;I believe Test 7 will cover this but will need the External Fund Details adding with the relevant data - may also then cover off [https://xps-jira.atlassian.net/browse/PHX5-535|https://xps-jira.atlassian.net/browse/PHX5-535|smart-link] ?,"04/Nov/25 3:39 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;On speaking to admin test 7 is not deemed reliable as they think the altair calc has been run incorrectly. I have left test 7 in so we can update the expected and still test, but added test 28 which is a PPS member with additional 60ths. Have spoken to Russell who says next data load will include the “ProspectiveAddedYears, ProspectiveAddedDays, EffectiveFrom and EffectiveTo” fields needed in Exernal Fund Details to correctly add the 60ths, but I will also update the JSON input for this test case in 144 to check if it accepts the data.",05/Nov/25 12:56 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Needs test against new data - as this is getting set up tonight probably best to roll into next sprint to finalise?,"05/Nov/25 2:08 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Added details to JSON: 

!image-20251105-140632.png|width=228,alt=""image-20251105-140632.png""!

Now seeing an additional value: 

!image-20251105-140709.png|width=228,alt=""image-20251105-140709.png""!

This calculates correctly from FPS, 1/60ths and 120 days. 

!image-20251105-141648.png|width=214,alt=""image-20251105-141648.png""!

Output values have increased by the amount. We now get a pre com value of £21,302.48 where we were getting £21,057.08. Expected value is £21,306.55. We are £4 out due to normal service calculating as 28Y 77 Days not 28Y 29D, so it is deemed this particular issue is resolved.

!image-20251105-141208.png|width=214,alt=""image-20251105-141208.png""!",,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,05/Nov/25 2:22 PM
A>R IH PPS cases do not have the IH enhancement added to final Altair CARE pension from 2022,PHX5-522,15745,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,07/Oct/25 10:23 AM,28/Nov/25 4:37 PM,,09/Oct/25 12:20 PM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"In the A>R test matrix figures under “Altair CARE pension from 2022” should be the total of basic accrued care and the enhancement. In the accrued results, the figures are being shown under the following headings (example from Test 18):

!image-20251007-092458.png|width=282,alt=""image-20251007-092458.png""!

The £5,412 figure under “AccruedDBPension” is the ill health enhancement, which is also output here, correctly:

!image-20251007-092711.png|width=282,alt=""image-20251007-092711.png""!

The issue seems to be that the winning enhancement is not correctly added to the final output for CARE.

 ",,Andrew Wilson,Annabelle Stephenson,Naomi Robinson,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,07/Oct/25 10:27 AM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251007-092458.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10597,07/Oct/25 10:27 AM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251007-092711.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10596,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@48ff76fb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zxr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 16,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-08 05:53:02.013,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1258537_*|*_10252_*:*_1_*:*_88482162_*|*_10354_*:*_1_*:*_84829185_*|*_10056_*:*_1_*:*_285933,,"08/Oct/25 6:53 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;I think this is a mismatch between the way the code is breaking down the final results and the test matrix. The way the code currently works, we would not add any DB pension to Post 2022 CARE pension. I think to solve this ticket we might need to step back and think what values we are comparing.","09/Oct/25 10:57 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;So the problem here was that the ill health pension was being classes as AccruedDBPension, and as the member was active normal, it was only looking at the AccruedCAREPension. To fix this, we needed to ensure that for these 2015 ill health cases, the accrued CARE pension includes the accrued DB.

To do this, I have changed the ACrrued strategies so that the KEY used is passed in to the constructor within the factory set up.

{noformat}case ""CARE2015RET"":
					if (illHealth == IllHealthType.HigherTier)
					{
						InterimValues.Add($""AccrualRate for McCloudOption: {mcCloudOption.ToString()}"", ""ill health care"");

						List<ServiceTranche> prospectiveServiceTranche = new List<ServiceTranche>();

						prospectiveServiceTranche.Add(new ServiceTranche { Key = KeyServiceTrancheConstants.ProspectiveKey, EffectiveFrom = calculationDate.PlusDays(1), EffectiveTo = memberInfo.DateReachesAge(60) });

						IServiceCalculator serviceCalculator = new ServiceBuilder(prospectiveServiceTranche, servicePeriods, new List<ServiceBreak>(), calculationDate.PlusDays(1), memberInfo.DateReachesAge(60))
																.WithUnits(ServiceUnits.PublicSector) //AS amend - not sure if necessary
																.WithMethod(ServiceMethod.PublicSector)
																.WithFillType(ServicePeriodFillType.LastPeriodToBeFilled)
																.Build();

						return new PublicSector2015IllHealthHigherTierStrategy(60, serviceCalculator, memberData.MemberCare, memberInfo, mcCloudOption, KeyAccruedPensionConstants.AccruedCAREPension);
					}
					else
					{
						InterimValues.Add($""AccrualRate for McCloudOption: {mcCloudOption.ToString()}"", ""1/60ths"");
						return new PublicSectorAccrualZeroStrategy(memberInfo, mcCloudOption, KeyAccruedPensionConstants.AccruedDBPension);
{noformat}

I also added a new interim value

{{InterimValues.Add($""AccruedCARE for AuroraId: {MemberInfo.AuroraId} | McCloudOption: {McCloudOption.ToString()}"", elementValues.Where(x => x.Key == KeyAccruedPensionConstants.AccruedCAREPension).First().Value);}}

raised within {{CalculateAccruedPensionValues}}

The previous interim value was raised within the accrued pension. It was incorrect as well, but even had it been correct, it would not have been the value used in the calculation. This way, the new interim value is the one that will be used.

Having published, and updated interim values (also updated the key to be PEN on some cases), we are now matching most of the figures.

The only value not matching is the Pre2022 CARE value being zero, but that is covered under another ticket.",09/Oct/25 10:58 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388]  Could you take a look at this one please? The current history on public sector should be just my changes (there are a few saves so compare to the earliest).,"09/Oct/25 12:20 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] no comment/queries from me. Based on your explanation below and seeing the code changes in UAT, this seems correct",,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,09/Oct/25 12:20 PM
1987 Accrual Module required,PHX5-520,15738,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,07/Oct/25 6:50 AM,21/Jan/26 4:43 PM,,04/Nov/25 2:41 PM,Client 162 Police A to D Version 1,,,,,,,,,,,,0,,,,,"{{AccruedPensionCalculatorFactory}} needs to be updated so that for 1987 active to deferred cases, we call a new accrual module. This will require a new parameter to {{AccruedPensionCalculatorFactory}} so that it knows which calc is running. Probably best that this is an enum in case we need it for anything else.

We then need a new PublicSectorDeferredDoubleStrategy.

This will need to incorporate the following logic (from A to D spec):

{adf:display=block}
{""type"":""table"",""attrs"":{""isNumberColumnEnabled"":false,""layout"":""center"",""localId"":""3f752e09-10fd-4ec2-a394-7fd37de506e8""},""content"":[{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":6},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Age deferred benefits are payable from""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Name""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Description""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Further comments""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Deferred age ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Member age <50, service <25 years = 60""},{""type"":""hardBreak""},{""type"":""text"",""text"":""Member age <50, service >=25 years = 50""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Payable from date = age 60""},{""type"":""hardBreak""},{""type"":""text"",""text"":""Payable from date = age 50""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Deferred age ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Service >30 = immediate""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""These members are still working in the police therefore cannot yet take their pension benefits but have opted out of the scheme after obtaining 30 years service. They will be entitled to payment of their deferred benefits once they leave employment.""},{""type"":""hardBreak""},{""type"":""text"",""text"":""Payable date  = date of leaving +1""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Deferred age ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Member age > 50, service>=25 years = immediate only if optant out ""},{""type"":""hardBreak""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""These are members who have opted out of the scheme but not left employment so not entitled to take benefits until they leave. ""},{""type"":""hardBreak""},{""type"":""text"",""text"":""Payable date  = date of leaving +1""}]}]}]}]}
{adf}

{adf:display=block}
{""type"":""table"",""attrs"":{""isNumberColumnEnabled"":false,""layout"":""center"",""localId"":""4eb73285-d18f-49ef-a275-f0490822ac8b""},""content"":[{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":6},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Deferred Pension Calculation""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Name""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Description""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Further comments""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Deferred age = 60, else = 0""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Hypothetical calculation""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""ServiceTo20Years""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""MIN(Min(30, DB_Deferred_QualifyingService) , 20)""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""ServiceOver20Years""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""MAX(Min(30, DB_Deferred_QualifyingService) - 20, 0)""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_ProspectiveAge""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""55 where rank = Constable or Sargeant""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""60 where rank = Inspector, Chief Inspector, Superintendant or Chief Superintendant""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""65 where rank  = Assistant Chief Constable, Deputy Chief Constable or Chief Constable""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_ProspectiveService""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""MIN(Min(30, DB Qualifying Service [DJS to DB_ProspectiveAge ]) , 20)""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_ProspectiveService_Over20Years""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""MAX(Min(30, DB Qualifying Service [DJS to DB_ProspectiveAge ]) - 20, 0)""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""For members with >20 years service and <25 years service""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_ProspectiveService_Doubling""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_ProspectiveService + (DB_ProspectiveService_Over20Years x 2)""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_DeferredPen_60""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""(DB_Deferred_QualifyingService / (DB_ProspectiveService + DB_ProspectiveService_Over20Years)) x (DB_ProspectiveService_Doubling / 60) x DB_final_pay_1987 x""},{""type"":""hardBreak""},{""type"":""text"",""text"":""(DB Deferred_ReckonableService / DB_Deferred_QualifyingService)""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Deferred age = 50, else = 0""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Weighted accrual calculation""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_DeferredPen_50""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""AccrualCalc_F / 60 * DB_final_pay_1987 * (DB Deferred_ReckonableService  / DB_Deferred_QualifyingService)""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Deferred age = immediate, else = 0""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Weighted accrual calculation""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB_DeferredPen_Immediate""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""AccrualCalc_F / 60 * DB_final_pay_1987 * (DB Deferred_ReckonableService  / DB_Deferred_QualifyingService)""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]}]}
{adf}

This will need quite a few test cases to cater for all the variations here.",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-431,PHX5-791,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@79d7e74c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzbzv,,,Accrual calculation set for deferred elements. PPS 1987,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 18,PHX5 Sprint 19,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-10-20 11:34:40.376,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_891124938_*|*_10252_*:*_1_*:*_89185982_*|*_10354_*:*_1_*:*_1143402179_*|*_10056_*:*_1_*:*_457613,,"20/Oct/25 12:34 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Current inputs for accrual strategies:

* salary
* service histories
* accrual rate
* calc date
* service periods
* member info
* mccloud option
* accrued pension key

What we need for the deferred double strategy:

* age (memberInfo + calc date)
* service histories (full objects)
* rank (memberInfo)
* DJS (memberInfo)
* final pay (salary)

Therefore should be fine to set up new strategy containing this logic. Testing will be the bigger piece of work. We know we’ll need tests for the following, and plenty of other areas will crop up from the coding stage

* lots of edge cases for age and service duration
* part-time members and/or service breaks",21/Oct/25 5:08 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Need to find out if the service checks (both for deferredAge and for calculating pension) should be on DB only or total service.  Could be different answers for each of these,"22/Oct/25 6:45 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+Testing:+

* on calc of deferred age (with service exactly 30, 25; with bday on calc date, etc)
* on each 3/4 calc types / deferred ages
* prospective svc calc","23/Oct/25 12:14 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+Coding changes:+

* enum for CalculationType introduced in BaseStrategy module
** several modules updated with new dependency: pub sect death, pub sect reval, pub sect calc
** CalculationType is needed at {{PublicSectorCalculationBuilder}} so I had to update all of the calculator factories (and some test methods) with the relevant calc type. no existing tests in public sector have been knocked out
* new accrual strategy {{PublicSectorAccrualDeferredDoubleStrategy}} brought in that calculates member’s deferred age, and then uses that to calculate accrued pension
* {{AccruedPensionCalculatorFactory}} updated to use new strategy when {{calculationType == CalculationType.ActiveToDeferred}}","24/Oct/25 6:29 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Comments:

# Deferred age should be a function
# Ditto Prospective age
# {{totalDBQualifyingService}} and {{totalDBReckonableService}} should be based on just DBOnly service, and not total less care (you must have taken a copy before I reversed this change everywhere else)
# We will need way more interim results / log.informations in this to make it obvious what we are doing. Especially as there is a huge else on the deferred age.   (it is hugely annoying that deferred age is based on calculated service - meaning we can’t make the split in the factory)","24/Oct/25 6:32 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Also, beware that if you have changed base strategy, that now enters public sector via two dependencies, so you will need to update both the death and revaluation modules","31/Oct/25 6:38 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+Coding changes:+

* {{GetDeferredAge}} function in {{PublicSectorFunctions}} uses logic from above on the totalDBQualifyingService.  *Please note* that this function is used to determine which calculation type (hypothetical vs weighted accrual) to use for the deferred elements.  It is not meant to confirm the date the benefits are payable from (see linked ticket 431)
* {{GetProspectiveDate}} is also in {{PublicSectorFunctions}}. It returns the age to use for prospective service, based on member’s rank
* Within the actual strategy calc, the _Hypothetical type_ calculates the prospective service up to the relevant age, applies the doubling logic and uses this to calculate the accrued pension
* Alternatively, the _Weighted accrual type_ does the standard accrualCalcA - F doubling logic to calculate the accrued pension
* Interim values added for {{Age for prospective service}}, {{Age for deferred calculation type}} and {{Deferred calculation type}}, as well as for the various service and accrual values
* All changes from Andrew’s comments below have been incorporated



+Testing:+

* Tests 1-7 in the A>D calc confirm our code works, by checking against the interim values ‘deferredElements’ (currently JSON path not picking up value, but I’ve manually checked these and they’re correct)
* In public sector module, I set up test functions {{AccruedPensionDeferredDoubleStrategy}}, {{GetDeferredAge}} and {{GetProspectiveDate}} and added a handful of simple tests for each.  The tests for the strategy calc are replicas and variations of some of the A>D tests, to cover the different calc options and criteria","03/Nov/25 5:37 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] please can you review this.  I’m afraid coding changes occurred across a few different versions of the public sector module as I needed to publish a couple of times before I was finished for testing purposes.  So might be tricky to check but I’ve tried to outline all of my code changes in comments below.

Logic for this is similar to logic in related ticket 431, also in this sprint, so you may want to consider these two together.","04/Nov/25 2:23 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452]  {{GetProspectiveDate}} and {{GetDeferredAge}} are now in {{PublicSectorMemberInfo}}.  Testing has been updated to reflect our figures from the A>D tests, all passing. I’m happy for this to be closed now.",,,,,,,,,,,,,,,,13853,PHX5-220,Police - Active to Deferred,Done,04/Nov/25 2:41 PM
"Tests 8, 9, 13, 15, 17, 18, 19, 20, 21 - CARE post 22 incorrect, issue with data fields organisation including additional credit.",PHX5-519,15735,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,06/Oct/25 5:14 PM,13/Oct/25 2:51 PM,,13/Oct/25 2:51 PM,,,,,,,,,,,,,0,,,,,,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1f319248,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fr001,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_596227371,,,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,13/Oct/25 2:51 PM
CARE Running total will not take into account existing total.,PHX5-518,15712,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,06/Oct/25 11:53 AM,28/Nov/25 5:20 PM,,13/Oct/25 11:09 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"See TestCase1 in A2D

In CARE {{CalculateCARERunningTotals}}, the code sets the running total to 0, and then only cycles through the IsNew records.

The IsNew code was only recently added.

I think the code should set the rolling total to the most recent totalpension prior to the foreach. That way the starting place would be correct.",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,PHX5-528,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@18993a38,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zz4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 16,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-10-09 16:11:02.389,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_100197447_*|*_10252_*:*_1_*:*_2572_*|*_10354_*:*_1_*:*_2649_*|*_10056_*:*_1_*:*_264293305,,"09/Oct/25 5:11 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;There are 3 {{CalculateCARERunningTotals}} functions in CARE.  One default strategy (line 986), one age addition strategy (line 1026), and one void that I’m not sure gets used (line 444) 



+Code changes:+

In the {{DefaultRunningTotalsStrategy}} I have amended the following line:

{{decimal RollingTotal = sortedMemberCare.Where(x => x.IsNew == false).Select(x => x.TotalPension).DefaultIfEmpty(0).Last();}}

(previously RollingTotal = 0m;)  This returns 0 if there is no existing care history to look at.



In {{AgeAdditionRunningTotalsStrategy}} I have made the same change as above, and also introduced the {{if (CareHist.IsNew)}} statement within the foreach loop.  I also added {{AdditionalCredit = x.AdditionalCredit,}} into {{CreateMemberCAREList}} (around line 810) as this was not getting pulled through from existing CARE history.



I dont think we use the void function? I’ve not made any changes to it.



+Testing:+

Added at CARE module level. 

“RollingTotal _default strategy _existing history” tests the default strategy change, showing that the TotalPension value of 829.24 from the existing history is carried forward into the new CARE histories, giving total CARE of 1385.46.  Without this code change, this result would only include TotalPension from new histories.

“RollingTotal _CalculateMemberCareWithAgeAddition _existing history” tests the same thing on the age addition strategy.  Existing TotalPension 407.78 is carried forward and included in TotalCAREAtEndDate.",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,13/Oct/25 11:09 AM
Update FIRE A>R test matrix and expected results,PHX5-517,15674,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,03/Oct/25 3:44 PM,28/Nov/25 5:15 PM,,06/Oct/25 1:29 PM,Client 164 Fire A to R Version 1,,,,,,,,,,,,0,Expected_Results,,,,,,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@48bc0fff,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 15,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_246651491_*|*_10252_*:*_1_*:*_4326_*|*_10354_*:*_1_*:*_5057_*|*_10056_*:*_1_*:*_19933,,"06/Oct/25 12:14 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Added 3 test cases for NPPS & CARE and CARE only non McCloud eligible members to the matrix. Ran all expected results and updated matrix with these saved here:

[A-R Fire Test Matrix.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/Eaf8BtFzPCBMiRBD3jXcPzIBBMhb7JtxDJCKYnbpJtJDaw?e=zgSbxF]

Saved out copies of the calc prints and desensitsed here 

[A to R|https://xpsplc.sharepoint.com/:f:/s/ProjectPhoenix/Eo6QUPQcv3ZLjUxPwyV6aV4B9x4gJp-lg4PnHGEjdP4gJQ?e=zWkq4f]",,,,,,,,,,,,,,,,,,,,,,,,,,,Done,06/Oct/25 1:29 PM
"IH PPS tests 16, 17 & 18 - Reform DB & Reform CARE results need looking over as do not match expected results",PHX5-516,15673,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,03/Oct/25 12:10 PM,13/Oct/25 2:53 PM,,13/Oct/25 2:53 PM,,,,,,,,,,,,,0,,,,,,,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4ecc199b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fr01,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_873766849,,,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,13/Oct/25 2:53 PM
Test 20 errors with 'More than 1 salary history with the same effective date from',PHX5-515,15672,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,03/Oct/25 12:03 PM,28/Nov/25 4:37 PM,,09/Oct/25 1:56 PM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Chris Marshall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,08/Oct/25 3:49 PM;5e266667-8b87-4eb6-9386-71980feac557;6813a920-38ca-44fb-b150-aa56ff5d2e79.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10613,03/Oct/25 12:05 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20251003-110507.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10582,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@c744dde,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zxv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 16,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-10-03 14:23:38.486,10251_*:*_3_*:*_4979715_*|*_10250_*:*_3_*:*_91758704_*|*_10252_*:*_1_*:*_161587218_*|*_10354_*:*_1_*:*_24685144_*|*_10056_*:*_1_*:*_242133165,,"03/Oct/25 12:05 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;The error is output 4 times in the logs of the calc

!image-20251003-110507.png|width=420,alt=""image-20251003-110507.png""!","03/Oct/25 3:23 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The issue is in {{PublicSectorCARECalculationFactory}}

The following code:

{noformat}var CareSalaryList = existingMemberCare
		                .Select(x => new Aurora.Model.Client.SalaryHistory
		                {
		                    Amount = x.PeriodEarnings,
		                    EffectiveFrom = x.EffectiveFrom,
		                    EffectiveTo = x.EffectiveTo
		                })
		                .ToList();{noformat}

We are sending all the existing member care data in as salary history. But there are two member care benefit types, and this code makes no distinction between them, so adds them both.

This should be easy to fix, as we don’t actually need to send in any salaries. Phase 5 is taking all care data direct from the existing care, so there is no need to pass in any salaries at all.



If we stop passing in any salaries, we would then need to ensure that the CARE code runs without them. Looks like {{PopulateCareSalaries}} might fail as it has a {{FirstOrDefault}} on the {{salaryHistories}} and assumes it will always have something in it","08/Oct/25 3:49 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Update to Public Sector module line 2612
Removed


{noformat}var CareSalaryList = existingMemberCare
						.Select(x => new Aurora.Model.Client.SalaryHistory
						{
							Amount = x.PeriodEarnings,
							EffectiveFrom = x.EffectiveFrom,
							EffectiveTo = x.EffectiveTo
						})
						.ToList();{noformat}

Added 
{{var CareSalaryList = new List<Aurora.Model.Client.SalaryHistory>();}}

Updated CARE Salary module Line 54 to end of module
Error is no longer outputting


!6813a920-38ca-44fb-b150-aa56ff5d2e79.png|width=420,alt=""6813a920-38ca-44fb-b150-aa56ff5d2e79.png""!

Test 20 in Active to Retired shows results in logs","08/Oct/25 4:07 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Thanks [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] . Can we add test case(s) within CARESalary for this issue please? To show that the code can deal with empty salary list.

The CARE code is generic code used by everyone. So if someone makes a change in future, they will need to know at the point of making a change in CARESalary that they have not knocked it out. It is unlikely they will know they have to run Phase 5 A to R test cases to check this code.",08/Oct/25 4:16 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Also need to re-input comments not copied over from code that was updated in VS Code,"09/Oct/25 12:01 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Updated CARESalary with comments added back in

Test case set up - CARE Salary test
[CARESalary - Global Module Editor|https://calculate.uat.xpsplc.com/global-modules/4]",09/Oct/25 1:08 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] Do we need a test to ensure it works when there are no salaries? The “CARE Salary test” test has inputs with values in them.,09/Oct/25 1:55 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Updated test by removing salaries and test passes as expected,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,09/Oct/25 1:56 PM
Police A2R TEST 19: Calc Erroring,PHX5-514,15671,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,03/Oct/25 12:00 PM,28/Nov/25 4:38 PM,,11/Nov/25 6:49 AM,Client 150 Police A to R Version 6,,,,,,,,,,,,0,Expected_Results,,,,,,Andrew Wilson,Chris Marshall,Naomi Robinson,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@49739874,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800gz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 20,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-10-06 06:23:00.213,10281_*:*_1_*:*_2262308024_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1903_*|*_10252_*:*_1_*:*_436792956_*|*_10354_*:*_1_*:*_170983685_*|*_10056_*:*_1_*:*_425671966,,"06/Oct/25 7:23 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Error is in ModelConversion.ActiveSalaryLinkedMemberData ToMemberData. Value cannot be null.

Looks like Service Breaks is null. Can we genuinely be given null service breaks? If so, then we can adapt the conversion to deal with this and sub in an empty list. Or we need to find out if the data passed to us is incorrect.",06/Oct/25 2:14 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;The test member has service breaks on both salary linked record & active record. The issue may be on the active record where the service break does not have an end date,"10/Nov/25 2:29 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Was checking data for null values but then rolled forward to client 162 and the data has been updated and the code now runs as expected, so I think we can close this. I was concerned people on a service break at time of retirement would continue to error, but it seems to pick this up as service is calculating as expected (apart from being 1 day out which is not related to this issue).",,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,11/Nov/25 6:49 AM
"Tests 8, 9, 13, 15, 17, 18, 19, 20, 21 - CARE post 22 results do not match expected",PHX5-513,15670,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,03/Oct/25 11:51 AM,28/Nov/25 4:37 PM,,07/Oct/25 6:39 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Chris Marshall,Steven Wright,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3dfbb3e5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fr006,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 15,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-10-03 13:49:48.049,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_386632_*|*_10252_*:*_1_*:*_10086819_*|*_10354_*:*_1_*:*_24913348_*|*_10056_*:*_1_*:*_242821652,,03/Oct/25 11:52 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Some results are not far from matching and others either no outputs or massively inflated figures,"03/Oct/25 2:49 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;test case 8 - the age addition is wrong.

Problem is in CARE. {{AgeAdditionRunningTotalsStrategy}} . {{CalculateCARERunningTotals}}

The last CARE record has no effective to, so calculationDate becomes the null date (beginning of time), so Age addition is calculated as the different between the NPA date and Jesus' birthday - somewhat inflating the additional credit.

Following this back to {{DefaultCreateMemberCAREListStrategy}}.{{CreateMemberCAREList}}

the effectiveTo date is not copied from {{ExistingMemberCare}}

We just need to add a line to ensure effectiveTo is picked up",06/Oct/25 5:12 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Added line EffectiveTo = x.EffectiveTo to the two CreateMemberCareList functions. Line 271 and 798. Added Log.Error in AgeAdditionRunningTotalsStrategy > CalculateCARERunningTotals so that admin is prompted to add an effective to date in the latest yearly care data if it’s null or missing. Quick look at the updated figures for above test cases in post22 CARE in the A>R and they are off. Creating new ticket instead of increasing the story points in this one.,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,07/Oct/25 6:39 AM
"Test 5, test 21 & test 22 - Legacy & reform results do not match expected results",PHX5-512,15669,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,03/Oct/25 11:49 AM,13/Oct/25 2:53 PM,,13/Oct/25 2:53 PM,,,,,,,,,,,,,0,Expected_Results,,,,,,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@e5caaca,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fr0i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_875051128,,"03/Oct/25 11:50 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Test 5, test 21 & test 22 - Legacy & reform results do not match expected results

The results are not far away from the expected",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,13/Oct/25 2:53 PM
PPS Test 1  & test 6- Reform DB options outputting same results as Legacy. Reform CARE results output as 0,PHX5-511,15668,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,03/Oct/25 11:38 AM,13/Oct/25 2:54 PM,,13/Oct/25 2:54 PM,,,,,,,,,,,,,0,Expected_Results,,,,Test 1 PPS & test 6 - Reform DB options outputting same results as Legacy. Reform CARE results output as 0,,Andrew Wilson,Annabelle Stephenson,Chris Marshall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,PHX5-482,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@52e6513b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fr1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-10-03 12:46:05.565,10354_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_243611614,,03/Oct/25 1:46 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Problem is in {{PublicSectorServiceFactory}} . We are using the members dcps - which for Test 1 is 2022.  We should change the code to use the earliest of dcps and the earliest service period effective from.,09/Oct/25 10:19 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] is this any different from ticket 482 currently at review stage?,09/Oct/25 12:17 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] 482 is related to NPPS. This ticket is for the PPS members. Maybe they are linked but for now will leave here in case further work is needed for this,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,13/Oct/25 2:54 PM
"Test 2, 3 & 4 PPS - no legacy or reform figures being output",PHX5-510,15667,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,03/Oct/25 11:31 AM,13/Oct/25 2:54 PM,,13/Oct/25 2:54 PM,,,,,,,,,,,,,0,Expected_Results,,,,,,Andrew Wilson,Chris Marshall,Naomi Robinson,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,07/Oct/25 2:03 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251007-130303.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10598,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@79ede7d5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fr2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-10-03 12:39:50.312,10354_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_244038896,,03/Oct/25 1:39 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The members are being treated as NonMCloud. Check the inputs - reload the member data if possible.,"07/Oct/25 2:03 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Noticed that they are using the zero accrual strategy for CARE2015 not AccrualDoubleStrategy as with test case 1: 



!image-20251007-130303.png|width=230,alt=""image-20251007-130303.png""!","07/Oct/25 2:16 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Have reloaded data and it has updated the results. Can see an issue with service and additional 60ths not being picked up. Will add a separate ticket for this.

Remaining issue on this ticket is that there are results under ""Key"": ""activeNormalOptions"",
      ""Value"": {
        ""CAREZeroLumpSum""



but no results under “Pension Options”, whereas test case 1 does give results under “Pension Options”. Interim values show correct result of £2,291.43 for Net CARE pension option, but nothing get fed through to a pension option, which “outcome values” have been set set to expect.",07/Oct/25 2:29 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] If they are CARE members then they should not be accruing any DB pension - hence the zero accrual strategy. ,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,13/Oct/25 2:54 PM
Move remaining ModelConversions from Public Sector Calculation to ModelConversions module,PHX5-509,15665,Story,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Lowest,,,,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,03/Oct/25 10:48 AM,03/Dec/25 10:23 AM,,,,,,,,,,,,,,,0,,,,,Remove remaining Model Conversions (ToMember and ToActiveToDeferredElementValues) from Public Sector Calculation to the  ModelConversions module,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@65eb16cc,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00p1i:i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,15555,PHX5-490,Calculate Overheads,To Do,03/Oct/25 10:48 AM
Create PublicSectorConstants Module,PHX5-508,15662,Story,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Lowest,,,,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,03/Oct/25 10:42 AM,03/Dec/25 11:07 AM,,,,,,,,,,,,,,,0,,,,,Create Public Sector Constants module - move constants classes from Public Sector Calculation to this module and KeyPreComConstants from Public Sector Member Info. Set as a dependency for PublicSectorMemberInfo so it feeds through to Public Sector Calculation,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@a54261b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00p1i:r,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,15555,PHX5-490,Calculate Overheads,To Do,03/Oct/25 10:42 AM
Reset DB for publishing,PHX5-507,15656,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,02/Oct/25 10:43 AM,30/Jan/26 3:21 PM,,30/Jan/26 3:21 PM,,,,,,,,,,,,,0,,,,,Need to publish A2R calc on client 150 on UAT. This will involve deleting the test cases,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,CSD-179,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4e2495ed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fri,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10281_*:*_1_*:*_0_*|*_10252_*:*_1_*:*_7770_*|*_10354_*:*_1_*:*_346952977_*|*_10056_*:*_1_*:*_12979,,"06/Oct/25 11:07 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The DB is reset and the test cases have been removed from 150. However, there is no way to attach the published calculation to run for the client. See [https://xps-jira.atlassian.net/browse/CSD-179|https://xps-jira.atlassian.net/browse/CSD-179|smart-link] ",,,,,,,,,,,,,,,,,,,,,,,,15555,PHX5-490,Calculate Overheads,Done,30/Jan/26 3:21 PM
A>R Reform calcs have incorrect effective to date on service,PHX5-506,15653,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,01/Oct/25 5:04 PM,28/Nov/25 4:37 PM,,09/Oct/25 2:30 PM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,,,Naomi Robinson,Russell Armstrong,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,01/Oct/25 5:37 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251001-163409.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10572,01/Oct/25 5:37 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251001-163506.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10573,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4024885d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 16,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-08 13:48:35.724,10250_*:*_1_*:*_0_*|*_10252_*:*_1_*:*_91468991_*|*_10354_*:*_1_*:*_578629175_*|*_10056_*:*_1_*:*_805229,,"01/Oct/25 5:14 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;In A>R tests the Legacy and Reform calcs are giving the same results. Seems effective To date for all values is set to 31/03/2022 whereas the {{totalDBReckonableService}} and {{totalDBQualifyingService}}on the altair prints is using a smaller period up to 31/03/2015: 

!image-20251001-163506.png|width=277,alt=""image-20251001-163506.png""!

Updating the effective to date for dbQualifyingService and dbReckonableService should give correct Precomm and pcls. TotalQualifyingService used for AccrualCalcA should remain up as is.

Spec has been reviewed and we can confirm it identifies that dbReckonableService and dbQualifyingService (AccrualCalcE) should be either 31/03/2015 or 31/03/2022. Currently it is always set to 2022.

!image-20251001-163409.png|width=277,alt=""image-20251001-163409.png""!",08/Oct/25 2:48 PM;640f34fc1273131f2adfede9;Possibly instead of changing end date do other accrual strategies need a similar change that was done to {{PublicSectorAccrualCashStrategy}} under [https://xps-jira.atlassian.net/browse/PHX5-482|https://xps-jira.atlassian.net/browse/PHX5-482|smart-link] where the serviceHistory list is filtered to only look at those with a tranchekey of “DB”,09/Oct/25 2:30 PM;640f34fc1273131f2adfede9;Covered under [https://xps-jira.atlassian.net/browse/PHX5-482|https://xps-jira.atlassian.net/browse/PHX5-482|smart-link]. Other accrual strategies already had the appropriate filter in where needed,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,09/Oct/25 2:30 PM
Review all test cases,PHX5-505,15639,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,01/Oct/25 10:05 AM,28/Nov/25 4:37 PM,,06/Oct/25 6:45 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,Go through all A to R test cases and create story tickets for all remaining differences/issues.,,Andrew Wilson,Chris Marshall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@524a2ffd,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zwi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 15,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-10-03 14:35:17.016,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_191244217_*|*_10252_*:*_1_*:*_2903_*|*_10354_*:*_1_*:*_6579_*|*_10056_*:*_1_*:*_1324590,,03/Oct/25 3:35 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;All test cases for Police A>R reviewed and findings document. Created tickets for each issue found. Not all figures have issues and we are matching quite a lot. Some though need further development.,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,06/Oct/25 6:45 AM
Test 6 - this member has a TVIN covering part of the service after 2015,PHX5-504,15638,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,01/Oct/25 9:28 AM,03/Dec/25 10:24 AM,,,,,,,,,,,,,,,0,,,,,"Due to the TVIN service covering part of the service post 01/04/2015, when we calculate the reform DB service we are not including the TVIN CARE service. The service for the DB reform calc is incorrect",,Andrew Wilson,Chris Marshall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@52c4bcd7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-12-03 10:24:56.583,,,"03/Dec/25 10:24 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  Can this ticket be closed now? We are not focused on fixing individual test cases now. So either there is an issue with TVIN service, and a ticket in backlog to resolve that, or this has been resolved and can be closed.",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,To Do,01/Oct/25 9:28 AM
Set up top level A to D code,PHX5-503,15637,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,01/Oct/25 8:35 AM,28/Nov/25 5:20 PM,,07/Oct/25 11:02 AM,Client 150 Police A to D Version 1,,,,,,,,,,,,0,,,,,"We will need a top level set of code for A to R. This will need to:

* Deal with Legacy/reform/nonmccloud
* Populate a final A 2 R object with all the elements



While setting up this code, we may find that the underlying code is not set up in the best way to populate the final object. If so, create tickets for updating the underlying structure.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,PHX5-253,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5cd720be,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzh,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 15,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_269577944_*|*_10252_*:*_1_*:*_163234257_*|*_10354_*:*_1_*:*_4830622_*|*_10056_*:*_1_*:*_225652,,,,,,,,,,,,,,,,,,,,,,,,,,13853,PHX5-220,Police - Active to Deferred,Done,07/Oct/25 11:02 AM
Set up top level A to R Fire code,PHX5-502,15636,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,01/Oct/25 8:32 AM,28/Nov/25 5:15 PM,,06/Oct/25 6:44 AM,Client 164 Fire A to R Version 1,,,,,,,,,,,,0,,,,,"When we have moved central code into a new module, we need to set up the core Fire A2R code.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@72a48d03,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:x,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 15,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1374555_*|*_10252_*:*_1_*:*_172256109_*|*_10354_*:*_1_*:*_5929886_*|*_10056_*:*_1_*:*_53638,,,,,,,,,,,,,,,,,,,,,,,,,,13856,PHX5-223,Fire - Active to Retirement,Done,06/Oct/25 6:44 AM
Move shared code to central module,PHX5-501,15635,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,01/Oct/25 8:28 AM,28/Nov/25 5:20 PM,,06/Oct/25 6:44 AM,Client 150 Police A to D Version 1,Client 150 Police A to R Version 5,,,,,,,,,,,0,,,,,"The following functions in A2R code need to move into a central “ModelConversion” module:

* {{ConvertToSchemeReferenceData}}
* {{ActiveNormalMemberInfo}}
* {{ActiveNormalMemberData}}
* {{ActiveSalaryLinkedMemberInfo}}
* {{ActiveSalaryLinkedMemberData}}
* all of {{StaticToMoveToGlobal}}",,Andrew Wilson,Russell Armstrong,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6ecb81,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:v,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 15,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-02 14:04:12.594,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_89488590_*|*_10252_*:*_1_*:*_85095883_*|*_10354_*:*_1_*:*_5122420_*|*_10056_*:*_1_*:*_97095,,"02/Oct/25 3:04 PM;640f34fc1273131f2adfede9;Code from comment below moved to new ModelConversionModule.

MemberData Class removed from PublicSectorCalculation and MemberData Module published

PublicSectorMemberInfo class moved from PublicSectorCalculation into MemberInfo Module. 

KeyPreComConstants class moved to MemberInfo module from Public Sector Calculation Module as needed for PublicSectorMemberInfo - is this the right approach?","02/Oct/25 3:21 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Ah, ok, that is not right. the key constants are public sector specific and should not be in MemberInfo module.  You will need to create a PublicSecotrMemberInfo module.  [~accountid:640f34fc1273131f2adfede9]",,,,,,,,,,,,,,,,,,,,,,,13853,PHX5-220,Police - Active to Deferred,Done,06/Oct/25 6:44 AM
Test 1 FT member need to check the calc as the outputs are not what is expected and we have reck less than qual which for FT should not be the case,PHX5-500,15634,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,30/Sep/25 4:27 PM,01/Oct/25 8:36 AM,,01/Oct/25 8:36 AM,,,,,,,,,,,,,0,,,,,,,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,PHX5-497,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4593368e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n7b:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_58172911,,"30/Sep/25 4:28 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Result not matching expected. Need to check service as member FT but we are calculating pension based on reck being less than qual which shouldn't be for FT members

[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] can we discuss this at sprint turn?",01/Oct/25 8:34 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Hi [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] please can you delete this as it is a duplicate of 497. Thanks,,,,,,,,,,,,,,,,,,,,,,,,,,Done,01/Oct/25 8:36 AM
CARE additional inflation not tested for future values,PHX5-499,15633,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,30/Sep/25 4:11 PM,28/Nov/25 4:37 PM,,21/Oct/25 1:56 PM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"Steven asked for this to be added as he closed ticket 487 but since all test cases coming through have up to date CARE tables, there is not sufficient testing to check future inflation is coming through correctly.

Can be tested by removing a line from the care table (via member JSON) and then checking if inflation code brings the value up to match the Aurora table/ test case. Since all test cases have a run date to 2024 this would have to be done.

We can also put general test cases into the global care code for cases run for 2025 and onwards to see if an inflation percentage is being picked up.",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,21/Oct/25 11:39 AM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251021-094148.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10738,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@55573a9e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzbr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 15,PHX5 Sprint 17,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-13 13:33:22.811,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_8219897_*|*_10252_*:*_1_*:*_1181551804_*|*_10354_*:*_1_*:*_607357655_*|*_10056_*:*_1_*:*_954586,,13/Oct/25 2:33 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;next step - set up proof of concept test case(s),"21/Oct/25 11:39 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;In order to establish what this needed to cover I spoke to Steven, Chris and Russell as I was aware of other tickets and test cases which may have covered this.

Proof of concept and test cases:

* Is a future inflation rate picked up at all when added as an input: These were already covered under a variety of test cases in the “CARE” including boundary testing.
* Where we have CARE tables up to date (2024/25) but retirement date is in the future, is future inflation rate applied?
** PublicSectorCARECalculationFactory_10. Rate input of 11.35 added up to 2024/2025 (not an accurate rate but just a rate that we can prove comes into the results). We can see that results projected from 2025/26 onwards use future inflation of 1.25. I have set expected result of 11.35 for 2024/25 and 1.25 for 2025/26.
* Where we have out of date CARE tables (e.g. up to 2023) does future inflation get applied for missing dates, as an estimate, or does test fail?
** PublicSectorCARECalculationFactory_10: We can see this member now has the rate from their table for 2023 (7.95) but then it goes ahead and uses 1.25 as the future rate for any empty years, including 2024. The member data table would need to be brought up to date for 2024/25 for the known rate to be used. There was also the code update to allow for some recent years of CARE salaries to be added as inputs to allow for this. Previously this was just applying 0.

!image-20251021-094148.png|width=423,alt=""image-20251021-094148.png""!",,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,21/Oct/25 1:56 PM
CARE values not matching CARE tables in A>R test cases,PHX5-498,15632,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,30/Sep/25 3:52 PM,28/Nov/25 4:37 PM,,08/Oct/25 6:22 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"Adding in after speaking to Steven (following completion of ticket PHX5-472.

He was concerned that values were now showing in results but they did not exactly match the CARE tables in Aurora. There may not be an issue, as it may be taking the tables and applying an ERF, but he wanted someone to look into the differences.",,Naomi Robinson,,,,,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,07/Oct/25 5:08 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251007-160249.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10606,07/Oct/25 5:08 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251007-160320.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10604,07/Oct/25 5:08 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251007-160356.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10603,07/Oct/25 5:08 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251007-160430.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10607,07/Oct/25 5:08 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251007-160603.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10605,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@66e492a1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzhi,,,,,,,,,,,,,,,,2015 CARE,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 15,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2131_*|*_10252_*:*_1_*:*_2447_*|*_10354_*:*_1_*:*_607310687_*|*_10056_*:*_1_*:*_2066743,,"07/Oct/25 5:08 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Hi [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] . I think this ticket can probably be closed as having added interim values for CARE, I can see that care tables are bringing through values as expected, as highlighted in memberCARE below (test 1 as an example):

Expected:

!image-20251007-160249.png|width=230,alt=""image-20251007-160249.png""!

!image-20251007-160320.png|width=230,alt=""image-20251007-160320.png""!



Actual:

!image-20251007-160430.png|width=230,alt=""image-20251007-160430.png""!



!image-20251007-160356.png|width=230,alt=""image-20251007-160356.png""!

As such, memberCARE tables are coming through but the issue is with getting a result out for the reform CARE. We have an interim value test for each result with the 1804 passing and the 6725.30 failing to populate:

!image-20251007-160603.png|width=230,alt=""image-20251007-160603.png""!

This issue seems to be covered in [https://xps-jira.atlassian.net/browse/PHX5-518|https://xps-jira.atlassian.net/browse/PHX5-518|smart-link] and so I think this ticket here can be closed?",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,08/Oct/25 6:22 AM
PreComm pension for LegacyDBPCLS using incorrect value for service under protection of double accrual,PHX5-497,15631,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,30/Sep/25 3:38 PM,21/Jan/26 4:35 PM,,06/Oct/25 11:02 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"When looking at the pre commutation balance for A>R test case 1, of £17,597.59 I noticed that the value is calculated using FPP x 1/60 x service (as calculated under protection of double accrual).

The FPP and 1/60 agree to interim values but the service figure is different.

I had a quick look into how Altair prints calculated the service figure and can see there are differences when compared to Interim values being returned by {{PublicSectorAccrualDoubleStrategy}}in the Public Sector Calculation Module.

I have attached the comparative workings with a couple of comments on what appears to be creating the difference.

!image-20250930-143929.png|width=166,alt=""image-20250930-143929.png""!",,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,PHX5-500,,,,,,,,PHX5-791,,,30/Sep/25 3:43 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;Phase 5 Test case 1 Accrual workings.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10565,30/Sep/25 3:42 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20250930-143929.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10564,01/Oct/25 3:14 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251001-135926.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10570,01/Oct/25 3:14 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251001-140602.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10567,01/Oct/25 3:14 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251001-140731.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10569,01/Oct/25 3:14 PM;7d56773e-c77c-4250-94bc-7f1832a56d82;image-20251001-141047.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10568,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@22c1668d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:i,,,,,,,,,,,,,,,,2015 CARE,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 15,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-02 05:41:46.721,10251_*:*_2_*:*_51221479_*|*_10250_*:*_2_*:*_360284478_*|*_10252_*:*_1_*:*_2994_*|*_10354_*:*_1_*:*_86360707_*|*_10056_*:*_1_*:*_2883524,,"01/Oct/25 3:14 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;After discussions with admin over this issue found on Test case 1 and other test cases with the same types of TVINs and Legacy DB outputs required, we have established 3 changes required:

*Change 1:* totalDBQualifyingService in {{GetAccruedPension}}(Public Sector Calculation) should include CARE values.

Currently the code says: 

{{decimal totalDBQualifyingService = serviceHistory.Where(x => x.TrancheKey != KeyServiceTrancheConstants.CareKey).Sum(x => x.QualifyingDecimalAmount);}}

When looking at the spec, totalDBQualifyingService should include CARE and we can tell by Altair prints that the calcs in the matrix include CARE in their figures. AccrualCalc A and E should both include care. Currently, in the code, Accrual Calc A does include CARE and E does not. See spec snip below:

!image-20251001-135926.png|width=402,alt=""image-20251001-135926.png""!

Suggested correction: {{decimal totalDBQualifyingService = totalQualifyingService;}} 

Impact on global test cases: All would still pass.



*Change 2:* Service needs to be rounded down to a full number of days before multiplying by 1/60 and FPP. 

Currently {{GetAccruedPension}}says: {{return (salary * (accrualCalcF / 60) * totalDBReckonableService / totalDBQualifyingService).Round(Rounding);}}

As seen in the snip below of Altair workings, the protection of double accrual calc occurs first and the result is rounded down to nearest whole days (as discussed with admin). Our code would use a result of approx 22Y 229.3 D. 

!image-20251001-140602.png|width=327,alt=""image-20251001-140602.png""!



Suggested correction: If we wish to exactly match £16,904.94 and results seen in other test cases (e.g. test case 5), we would need to replace the above return line with the following code:

{noformat}decimal exactDaysService = Math.Round(accrualCalcF * totalDBReckonableService / totalDBQualifyingService * 365) / 365;
return (salary * (1/60m) * exactDaysService).Round(Rounding);{noformat}

Impact on global test cases: All would still pass.



*Change 3:* Transfer in figure used is always the “PENSSERV” aurora figure.

Aurora has two figures available for TVINs, PENSSERV and QUALSERV.

!image-20251001-140731.png|width=624,alt=""image-20251001-140731.png""!

We have used the following code in Public Sector Calculation:

{noformat}foreach (MemberTransferInElement memberTransferInElement in MemberTransferInElements)
  {
      additionalQualifyingService += memberTransferInElement.ElementType == ""QUALSERV"" ? memberTransferInElement.Amount : 0;
      additionalFinalService += memberTransferInElement.ElementType == ""PENSSERV"" ? memberTransferInElement.Amount : 0;
  }{noformat}

The QUALSERV figure is often much larger than the PENSSERV figure, e.g. Test case 1 QUALSERV is 6 years more than PENSSERV, Test case 5 is about 3 years greater.

We can see that Altair calcs always use the PENSSERV figure, whether calculating qualifying or reckonable service:

!image-20251001-141047.png|width=505,alt=""image-20251001-141047.png""!

We spoke to April Woods who does not think that we should use the QUALSERV figure and has confirmed Altair calcs use the same figure in all cases. Chris agrees that the QUALSERV data is potentially unreliable, although should not be deleted from the member record.

Suggested change: Update the code to use PENSSERV for all TVIN values:

{noformat}foreach (MemberTransferInElement memberTransferInElement in MemberTransferInElements)
  {
      additionalQualifyingService += memberTransferInElement.ElementType == ""PENSSERV"" ? memberTransferInElement.Amount : 0;
      additionalFinalService += memberTransferInElement.ElementType == ""PENSSERV"" ? memberTransferInElement.Amount : 0;
  }{noformat}

Impact on global test cases: 2 test cases are in Public Sector Calculation to check the additionalQualifyingService is brought in from “QUALSERV” values in Aurora. 

If we are to accept admin’s position that they do not want the QUALSERV values used in calcs, these two test cases would need expected values updated. We so far only have two calculations where we can confirm admin use the PENSSERV values (only two of the 22 A>R cases have applicable values).","01/Oct/25 4:25 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Update: Changes 2 and 3 put through after discussion with Andrew.

Change 1 deemed unnecessary as, although the altair calc included CARE in its service figures, it was a simplified service calc compared to Accrual Calc A-F per the spec.

It was noted that when running through the code’s complex spec calc, the correct final figure was reached as “DB Qualifying Service [from DJS to date left Legacy i.e. 31.3.2015, 31.3.2022 , or taper date if retrospective calculation]” was used as both a nominator and denominator, this equating to 1.

So far all legacy DB figures tested match the matrix so it is suggested that no update is made in respect of Change 1 below.



Changes 2 and 3 have been published and expected results are now matching matrix for DB Legacy with TVIN.

This ticket is ready to be signed off and closed.","02/Oct/25 6:41 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452; [~accountid:712020:ffa445ab-b813-4226-9ed2-507a454e9272] If we were able to publish, then I assume that making change 2 made no impact on any of the existing test cases? If that is the case, then we should set up an accrual test case that would fail if the change was not made, to ensure that this logic is encapsulated in a test case and protect us against future changes to this code.

Equally for change 3, although that would be a test case on the TVIN code.","02/Oct/25 9:34 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Hi Andrew, there were two test cases knocked out by change 3, which we briefly discussed on the phone and you asked for me to put a comment next to the code update to explain why were were using “PENSSERV”. 

These two cases were 1. checking the expected qualifying service pulled in from aurora and 2. checking that if there were multiple lines of data that qualifying still came through. I put a note in each test case to say that the expected data for qualifying should come from the PENSSERV source and updated the expected value.

_Comment copied from below: Impact on global test cases: 2 test cases are in Public Sector Calculation to check the additionalQualifyingService is brought in from “QUALSERV” values in Aurora._

_If we are to accept admin’s position that they do not want the QUALSERV values used in calcs, these two test cases would need expected values updated. We so far only have two calculations where we can confirm admin use the PENSSERV values (only two of the 22 A>R cases have applicable values)._

Will add test cases for the rounding change now.","06/Oct/25 10:44 AM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Further to the below these test cases cover the changes on this ticket:

# Accrual Test exactDaysRounding: This is a member whose total serve would be .3 of a day so needs rounding down in order to get the exact days of service to match Altair. Confirmed the correct result is given for the rounded days.
# As mentioned below, two existing tickets TransferInFactor_Overtime_ransferIn and TransferInFactory_TransferIn both updated with comment that QUALSERV is not relevant for the cases and PENSSERV is used",,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,06/Oct/25 11:02 AM
The reckonable service from a transfer in is not being included only the qualifying service,PHX5-496,15628,Task,Done,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,30/Sep/25 12:24 PM,30/Sep/25 2:30 PM,,30/Sep/25 1:50 PM,,,,,,,,,,,,,0,Expected_Results,,,,Reckonable service from a transfer in not being included in the calc. Qualifying service however is included ,,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4f0e0c01,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1i:zr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2053_*|*_10252_*:*_1_*:*_4024_*|*_10354_*:*_1_*:*_4246_*|*_10056_*:*_1_*:*_5107690,,30/Sep/25 1:49 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Slight code change and service is now matching,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,30/Sep/25 1:50 PM
Annual Allowance,PHX5-495,15614,Epic,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,29/Sep/25 3:45 PM,18/Dec/25 11:22 AM,,,Annual Allowance (Stand alone) Day 1,,,,,,,,,,,,0,,,,,"Adding some details for later:

Current AA inputs:

{noformat}public class AnnualAllowanceInput
{
    public LocalDate DateOfCalculation { get; set; }
}{noformat}

Current AA outputs:

{noformat}public class AnnualAllowanceResult : ICalculationResult
{
    public List<string> Warnings { get; set; } = new();
    public List<string> Errors { get; set; } = new();
    public List<InterimValue> InterimElements { get; set; } = new();

    public string AuroraId { get; set; }
    public int MemberId { get; set; }
    public decimal ClosingDbPension { get; set; }
    public decimal DcContributionsInPeriod { get; set; }
    public decimal PensionInputAmount { get; set; }
    public decimal UnusedAnnualAllowanceAmount { get; set; }
    public decimal TaxableExcess { get; set; }
    public decimal TransferInAnnualAllowanceValue { get; set; }
    public decimal TransferOutAnnualAllowanceValue { get; set; }
    public decimal PensionCredits { get; set; }
    public decimal PensionDebits { get; set; }
    public decimal CpiFactor { get; set; }
    
    public bool HasErrors => Errors.Any();
    public bool HasWarnings => Warnings.Any();
}{noformat}",,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-168,,,,,,,,,30/Sep/25 12:03 PM;862ca789-6c5f-4d0a-b054-60929f0a27a7;image-20250930-110345.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10562,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1dd8a8a6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-11,,,,,,,,,,,,,,teal,,,,,,,,,,,,,0|i00n3b:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Sep/25 3:57 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87] . Please could you confirm if the Annual Allowance calculations need to be included in the Active to Retired calculation i.e. do we need to calculate the Pension Input Amount at retirement date as part of the Active to Retired calc, or is this done at the end of the pension input period as part of the Active Benefit Statement calculation? Thanks","30/Sep/25 12:03 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;!image-20250930-110345.png|width=1312,alt=""image-20250930-110345.png""!",,,,,,,,,,,,,,,,,,,,,,,,,,To Do,29/Sep/25 3:45 PM
Max Lump Sum - Revert final else if statement to Log.Error instead of Log.Warning and update messages.,PHX5-494,15583,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,26/Sep/25 6:18 PM,28/Nov/25 5:15 PM,,06/Oct/25 1:28 PM,Batch 1,Client 150 Police A to R Version 5,Client 164 Fire A to R Version 1,,,,,,,,,,0,,,,,The else if (totalService < 25 && memberInfo.DateReachesAge(50) <= calculationDate) statement in MaxLumpSum function in Public Sector Calculator has a log.error to say member not entitled to lump sum. This was changed to a log.warning because it was causing some test cases to error in A>R. May have been because member rank data was not being pulled through correctly and affects lump sum age. Rank data now coming through ok. Reverted back to log.error,,Andrew Wilson,Steven Wright,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3c82ebd3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1r:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 14,PHX5 Sprint 15,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-09-30 06:13:05.62,10251_*:*_2_*:*_305403206_*|*_10250_*:*_2_*:*_536039249_*|*_10252_*:*_1_*:*_2087_*|*_10354_*:*_1_*:*_244517_*|*_10056_*:*_1_*:*_14202,,"30/Sep/25 7:13 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;This should be an error. We have been informed that this should never happen. If that is the case, then it should definitely be an error rather than a warning.",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,06/Oct/25 1:28 PM
Delete CalcualteWithInputs in A>R client code and delete clone export Testcases - GlobalRefData filter no longer needed for export.,PHX5-493,15582,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,26/Sep/25 10:20 AM,28/Nov/25 4:37 PM,,30/Sep/25 7:14 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,CaculateWithInputs function was created in client level A>R code because GlobalReferenceData and SchemeReferenceData were null when exporting the code to VScode. This was used to filter the data and add to test cases manually. This has now been fixed by devs and no longer required. Revert client A>R code to original set up and delete clone test cases.,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@16b0ab51,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1j:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 14,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_564289_*|*_10252_*:*_1_*:*_2296_*|*_10354_*:*_1_*:*_2955_*|*_10056_*:*_1_*:*_37215,,,,,,,,,,,,,,,,,,,,,,,,,,15555,PHX5-490,Calculate Overheads,Done,30/Sep/25 7:14 AM
Reload main member and linked member data for all test cases in A>R,PHX5-492,15580,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,26/Sep/25 10:20 AM,06/Oct/25 10:48 AM,,06/Oct/25 10:37 AM,,,,,,,,,,,,,0,,,,,"Member Data pass in updates over the course of a week made by devs now available in UAT environment, member data for both main record and linked record now need to be reloaded to account for missing data items needed for calcs.



Completed by Naomi.",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@62791634,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzd,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 15,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10252_*:*_1_*:*_0_*|*_10354_*:*_1_*:*_7189_*|*_10056_*:*_1_*:*_79758686,,,,,,,,,,,,,,,,,,,,,,,,,,15555,PHX5-490,Calculate Overheads,Done,06/Oct/25 10:37 AM
Update Member info Rank,PHX5-491,15575,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,25/Sep/25 2:25 PM,28/Nov/25 5:15 PM,,08/Oct/25 6:22 AM,Client 150 Police A to R Version 5,Client 164 Fire A to R Version 1,,,,,,,,,,,0,,,,,"The current code for rank is:

{noformat}public string Rank()
	    {
	        return this.ExtraDataStringField(""Employment Type"");
	    }{noformat}

We need to change this to get the information from memberidentifiers instead.

We are looking for the member identifer with type 6 - which is Employment Type.

To do this, we will need to ensure that MemberIdentifiers is available.

Which will mean making it a property of MemberInfo.

Ensuring it is mapped across when converting from Member and LinkedMember

Then updating the Rank property to use this in identifying the Rank.",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,PHX5-478,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@747acf0f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fr005,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 15,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-01 15:34:48.708,10251_*:*_2_*:*_2987_*|*_10250_*:*_2_*:*_83303729_*|*_10252_*:*_1_*:*_179959702_*|*_10354_*:*_1_*:*_345290589_*|*_10056_*:*_1_*:*_170435,,"01/Oct/25 4:34 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+Coding changes+

* {{List<MemberEmployerHistory> EmployerHistory}} has been brought into MemberInfo module
* {{ToMemberInfo}} has been updated in {{ModelConversions}} in PublicSector module to include EmployerHistory (also updated in {{StaticToMoveToGlobal}} in A2R though I understand this will be removed eventually)
* {{Rank}} function in {{PublicSectorMemberInfo}} has been updated with logic retrieve the Department value from the latest EmployerHistory record.  If there is no EmployerHistory record (I believe the CARE records are missing this as they don’t need to know rank) then we return 0



I have made similar changes for the McCloud property we recently introduced.

* {{List<MemberFlag> MemberFlags}} has been brought into MemberInfo module (required {{using Aurora.Model.Client.Members;}})
* {{ToMemberInfo}}  in public sector and A2R updated as above
* It seems we only require this information at the client level.  I’ve therefore not introduced a new function within Public Sector, but just amended a line in the A2R, as follows:
** {{if (activeNormalMemberInfo.MemberFlags.All(x => x.SchemeFlagType.FlagType != ""PROTMCCLOUD""))}}
** this line previously read {{if (activeNormalMemberInfo.McCloud == false)}}
* Russell had brought a boolean McCloud into MemberInfo module, which I am removing / replacing with MemberFlags","01/Oct/25 5:29 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452]  please see comment below RE my proposed changes.  I’ve not brought any of these into calculate yet as I’d need to publish both MemberInfo and PublicSector modules, and my work includes changes to Russell’s code (trying to avoid re-publishing multiple times if I’ve made mistakes).  I’m hoping the below comment has enough info for you to confirm whether I’ve understood correctly, so that when I log on I can quickly make all these changes and get testing.","02/Oct/25 1:05 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Since making these amends offline, Russell has moved part of the public sector code out to MemberInfo.  Therefore, the Rank() function with new logic is now within MemberInfo v11","02/Oct/25 1:07 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;“SchemeMaximumDB _MaxLumpSum _rank” test has been set up in Public Sector, which fails without the changes to Rank.","02/Oct/25 3:30 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] ready for review now.  The changes to Rank() are now in MemberInfo following Russell’s changes (though I think he said he needs to move them somewhere else now?)


As discussed briefly, I amended 3 of our test functions in Public Sector to bring in EmployerHistory, and have refreshed/updated affected test cases accordingly, all of which are now passing.


McCloud bool is still in MemberInfo.",03/Oct/25 7:22 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388]  Just to check - do we have a test case for when there is no EmployerHistory? (I can see we have coded for it),,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,08/Oct/25 6:22 AM
Calculate Overheads,PHX5-490,15555,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,24/Sep/25 11:22 AM,24/Sep/25 11:24 AM,,,,,,,,,,,,,,,0,Overheads,,,,Tasks that need completing as a result of Calculate issues/changes that have an ongoing time cost.,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7e26d2c9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,purple,,,,,,,,,,,,,0|i00my7:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,24/Sep/25 11:22 AM
Service for PT members is potentially out when doing the comparison to expected results,PHX5-489,15553,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,24/Sep/25 9:56 AM,28/Nov/25 5:21 PM,,30/Sep/25 12:23 PM,Client 150 Police A to D Version 1,Client 150 Police A to R Version 5,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,0,,,,,Where a member is part time and has a service break factored in the service being output differs slightly,,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@52289b82,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x0209795,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 14,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_445404352_*|*_10252_*:*_1_*:*_81438768_*|*_10354_*:*_1_*:*_3657_*|*_10056_*:*_1_*:*_392481,,"30/Sep/25 12:23 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Code updated to only use service break where this is non pensionable and service now shows as correct

Further story created to look over the TVIN only factoring in reckonable service",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,30/Sep/25 12:23 PM
Math.Round amend to .Round,PHX5-488,15551,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,23/Sep/25 3:57 PM,28/Nov/25 5:21 PM,,26/Sep/25 6:57 AM,Client 150 Police A to D Version 1,Client 150 Police A to R Version 5,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,0,,,,,"Math.Round uses bankers rounding which is incorrect.  We instead want all instances of this to use .Round.  The format is slightly different, see the following example:

{{decimal decimalPart = Math.Round((initialAccrualCalcF - (int)initialAccrualCalcF) * 365, 0);}}  becomes

{{decimal decimalPart = ((initialAccrualCalcF - (int)initialAccrualCalcF) * 365).Round(0);}}",,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@429b1317,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 13,PHX5 Sprint 14,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_20559_*|*_10252_*:*_1_*:*_3767_*|*_10354_*:*_1_*:*_3506_*|*_10056_*:*_1_*:*_20303456,,"23/Sep/25 9:39 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;only a handful of instances of this in public sector. {{GetAccruedPension}} functions in {{PublicSectorAccrualDoubleStrategy}} and {{PublicSector2015IllHealthHigherTierStrategy}}

i’ve updated these to .Round, all tests still passing, probably no need for a review",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,26/Sep/25 6:57 AM
CareBenefitTypes Apply Additional Percentage increase to Care global module.,PHX5-487,15549,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,23/Sep/25 2:33 PM,28/Nov/25 5:21 PM,,30/Sep/25 1:13 PM,Client 150 Police A to D Version 1,Client 150 Police A to R Version 5,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,0,,,,,"Added Switch statement in Public Sector Calculator global module to apply additional set percentage to CareCPI table in Decimal Reference Values depending on the CareBenefitType in member data. See line 2529. 

Need extra logic for dealing with CPI + National Average Weekly Earnings case. (Tvin Armed Forces and Tvin Fire care benefit types). Adding extra ticket. ",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,PHX5-618,,PHX5-484,PHX5-173,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@21e38d12,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fg,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 14,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_503700163_*|*_10252_*:*_1_*:*_22319871_*|*_10354_*:*_1_*:*_69282762_*|*_10056_*:*_1_*:*_698826,,,,,,,,,,,,,,,,,,,,,,,,,,13807,PHX5-197,CARE Module,Done,30/Sep/25 1:13 PM
Check reform DB benefits for PPS tests,PHX5-486,15548,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,23/Sep/25 11:59 AM,28/Nov/25 4:37 PM,,01/Oct/25 9:47 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,Expected_Results,,,,Need to compare and check reform DB results for PPS member tests 1 to 6,,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4b3ae23,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1v:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 14,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10250_*:*_1_*:*_0_*|*_10252_*:*_1_*:*_529500367_*|*_10354_*:*_1_*:*_3055_*|*_10056_*:*_1_*:*_76935736,,,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,01/Oct/25 9:47 AM
Review Police DIS spec changes,PHX5-485,15546,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,23/Sep/25 11:00 AM,23/Sep/25 11:00 AM,,,,,,,,,,,,,,,0,,,,,,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@141024e3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mwn:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,15482,PHX5-466,Spec Changes,To Do,23/Sep/25 11:00 AM
Care - Create CPI Increase Table in Police SchemeReferenceTable. ,PHX5-484,15544,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,23/Sep/25 10:43 AM,28/Nov/25 5:21 PM,,30/Sep/25 7:16 AM,Client 150 Police A to D Version 1,Client 150 Police A to R Version 5,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,0,,,,,"September to September CPI Percentage Change which have effective to and from dates in tandem with the Phase5 Care Years added to [https://calculate.uat.xpsplc.com/Clients/144/Factors/Decimal-Reference-Values|https://calculate.uat.xpsplc.com/Clients/144/Factors/Decimal-Reference-Values]. See CARECPI keys. Used Altair Care Reval percentage rates which agree with Aries tables as the appropriate percentage rates. 
",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,PHX5-173,,,,,,PHX5-487,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@43a26fa0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979ff,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 14,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_3155_*|*_10252_*:*_1_*:*_22353872_*|*_10354_*:*_2_*:*_1755336_*|*_10056_*:*_1_*:*_13897626_*|*_10355_*:*_1_*:*_67960102,,,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,30/Sep/25 7:16 AM
Options outputs - pension key inconsistent,PHX5-483,15542,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,22/Sep/25 3:49 PM,28/Nov/25 5:21 PM,,08/Oct/25 6:24 AM,Client 150 Police A to D Version 1,Client 150 Police A to R Version 5,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,0,,,,,"On the full output for our test cases, the key used for the pension values (pre-com, post-com and commuted) changes, depending on which pension option it is under.

The key is “PEN” for the majority of the options, however keys “CAREPreCom” and “ReformCAREPreCom” are used under CAREZeroLumpSum and ReformCAREZeroLumpSum options, respectively. 

This may not be a problem, but using CAREPreCom as the key for pre-com, post-com and the commuted pension values is obviously unclear, and it seems that using PEN across the board would make sense.

!image-20250922-145638.png|width=301%,alt=""image-20250922-145638.png""!",,Annabelle Stephenson,Russell Armstrong,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,22/Sep/25 3:57 PM;18934601-32fa-4c76-9b74-159dc94fd206;image-20250922-145638.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10480,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@40043462,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:z,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 15,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-07 14:04:10.561,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_4108_*|*_10252_*:*_1_*:*_536494936_*|*_10354_*:*_1_*:*_649004232_*|*_10056_*:*_1_*:*_107780567,,"30/Sep/25 4:37 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I’d hoped to be able to get this ready for sprint 15 tomorrow, but I can see Russell is currently working on changes in {{PensionOptionCalculatorFactory}} which will affect these results.  This ticket might need to be pushed back until those changes are finalised?","07/Oct/25 3:04 PM;640f34fc1273131f2adfede9;{{PublicSectorZeroCashPensionOptionStrategy}} changed. 

PreCommutedPensionValues changed from {{elementValues.Where(x => x.Key == PreComPenKey).ToList(),}} to {{PublicSectorFunctions.CreateSingleElementValue(KeyPensionConstants.TotalPension, dbPreComPension),}} consistent with other Pension Option Strategies

Three ZeroCashPensionOptionStrategyTest tests set up for the three possible preComPenKeys that can go into this strategy. All now output PEN as the key for Pre Commuted and Residual Pensions",,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,08/Oct/25 6:24 AM
NPPS test cases - legacy and reform db pcls returning same results,PHX5-482,15541,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,22/Sep/25 3:48 PM,28/Nov/25 5:21 PM,,09/Oct/25 1:16 PM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,"It looks like on the NPPS test cases, the outputs for reform and legacy are identical.  Need to investigate why this is",,Annabelle Stephenson,Russell Armstrong,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,PHX5-511,,,,,,,,,,,,,PHX5-542,PHX5-668,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7b0d0838,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zx,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 15,PHX5 Sprint 16,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-08 10:57:09.283,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_503935751_*|*_10252_*:*_1_*:*_107596110_*|*_10354_*:*_1_*:*_156584073_*|*_10056_*:*_1_*:*_600627877,,"30/Sep/25 4:55 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;We seem to be calculating the accrued DB pension for both reform and legacy options, using the full service up to calc date (2024) rather than just the DB service which would end at either 2015 or 2022.  I was sure the code was not doing this a few weeks ago but could be wrong.  It may be that we have overwritten a previous change by mistake, or we don’t have the right information being passed into the PreComCalculators.

I don’t have the solution yet, but I know the area that needs looking at.","02/Oct/25 4:03 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+Coding changes:+

{{decimal totalServiceDuration = serviceHistory.Where(x => x.TrancheKey == ""DB"").Sum(x => x.FinalDecimalAmount);}}

This line change occurs in both {{GetAccruedPension}} and {{GetAccruedCash}} in the {{PublicSectorAccrualCashStrategy}}.  The change means the DB figures are now correct as they are no longer including CARE service.



A separate fix is needed for CARE, which I need to discuss with Andrew.  I think it needs to happen at the stage when we build the care calculators as currently for both legacy and reform we are just taking the member’s full care history from their record.  Hoping we can amend the careStartDate being used or even trim the full list, so long as that happens before we actually calculate, as we need to run through CalculateRollingTotals or whatever thats called.","02/Oct/25 5:12 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;need specific test for db change, especially as i’ve already copied in the code",08/Oct/25 11:57 AM;640f34fc1273131f2adfede9;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] any issues with CARE would be a separate story? Have progressed this based on it being an issue with DB PCLS only,"08/Oct/25 12:01 PM;640f34fc1273131f2adfede9;Added two tests to public sector Accrued Cash Strategy 1 and 2 - test 1 includes a CARE tranchekey in Service history. Test 2 amended the CARE tranchekey to DB. Both test give the results for pension and lump sum I would expect using the service where tranchekey is DB based on the salary, service and accrual rates",,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,09/Oct/25 1:16 PM
Update expected values for NPPS ill-health test cases,PHX5-481,15536,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,22/Sep/25 12:09 PM,23/Sep/25 11:28 AM,,22/Sep/25 4:00 PM,,,,,,,,,,,,,0,,,,,"All A-R test cases have expected residual pension results set for LegacyDBZeroLumpSum, ReformDBZeroLumpSum, ReformCAREZeroLumpSum, and CAREZeroLumpSum.  However, following ticket 476, NPPS ill-health members should no longer get pension options for DB zero lump sums, as inverse commutation is not available under ill-health.

We therefore need to remove LegacyDBZeroLumpSum and ReformDBZeroLumpSum as expected results, perhaps replacing with the pre-com pension values for the DB max cash options?",,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-462,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@48b94c4e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x02097,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 13,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_22703_*|*_10252_*:*_1_*:*_11446383_*|*_10354_*:*_1_*:*_3232_*|*_10056_*:*_1_*:*_2375194,,"22/Sep/25 12:22 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I’ve updated test Police A>R Test 19 NPPS IH.  The JSON paths for the care sums were also incorrect, which I’ve updated.

We should be able to copy these JSON paths to the other NPPS IH cases","22/Sep/25 4:01 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;i’ve updated all of the NPPS IH cases expected value paths.  Passed the ticket straight through review to done, as this shouldn’t need any checking",,,,,,,,,,,,,,,,,,,,,,,,,,Done,22/Sep/25 4:00 PM
Review Police A-D spec changes,PHX5-480,15535,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,22/Sep/25 11:13 AM,22/Sep/25 12:18 PM,,,,,,,,,,,,,,,0,,,,,,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,22/Sep/25 12:18 PM;862ca789-6c5f-4d0a-b054-60929f0a27a7;image-20250922-111746.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10478,22/Sep/25 12:18 PM;862ca789-6c5f-4d0a-b054-60929f0a27a7;image-20250922-111807.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10477,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@10df9c7f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mvb:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Sep/25 12:16 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;A new runtime input has been added ('Final pensionable salary date'). This is not used in the calc.

!image-20250922-111746.png|width=910%,alt=""image-20250922-111746.png""!

In the “PI Dates” section, there is reference to ‘DB_PI_Date_1987’. This is not used in the calc.

!image-20250922-111807.png|width=1260%,alt=""image-20250922-111807.png""!

Are these because the spec is incomplete, or are they redundant?

",,,,,,,,,,,,,,,,,,,,,,,,15482,PHX5-466,Spec Changes,To Do,22/Sep/25 11:13 AM
Post comm pen being output for max lump sum calc for legacy benefits is incorrect,PHX5-479,15527,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,19/Sep/25 3:13 PM,30/Sep/25 3:37 PM,,30/Sep/25 3:37 PM,,,,,,,,,,,,,0,Expected_Results,,,,Calculation of post comm pen for max lump sum seems incorrect. Off the back of this the max taxable lump sum is incorrect,,Annabelle Stephenson,Chris Marshall,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,CSD-176,PHX5-474,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@161bc295,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x002,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 13,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-09-30 14:17:51.783,10281_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_330450667_*|*_10252_*:*_1_*:*_2481_*|*_10354_*:*_1_*:*_2506_*|*_10056_*:*_1_*:*_61430,,"23/Sep/25 11:01 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;The issue with the max lump sum is due to this [[PHX5-474] MaxLumpSum - problem with identifying rank - Jira|https://xps-jira.atlassian.net/browse/PHX5-474]

 

Once this is fixed then I think the output will be correct as the formula is right we are hitting capped lump sum and not full lump sum due to the lump sum age being 60 when it should be 5","30/Sep/25 3:17 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] I’m going to close this ticket because we have 491 to fix the rank issue, so I’m not sure what the purpose of this one is.  Do you agree, or have I missed something?",30/Sep/25 3:25 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] Yes agree it can be closed as the issue is the rank issue,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,30/Sep/25 3:37 PM
"A>R tests 1, 2, 3 & 6 results need to be compared with expected once Lump Sum age issue is fixed",PHX5-478,15521,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,19/Sep/25 11:42 AM,06/Oct/25 2:07 PM,,06/Oct/25 2:07 PM,,,,,,,,,,,,,0,,,,,"Once Lump Sum age issue is fixed and tests run without errors, need to compare results to expected. If any issues further tickets to be created",,Annabelle Stephenson,Chris Marshall,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,PHX5-474,PHX5-491,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@637e7e6f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fr00i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-09-22 12:31:00.175,10281_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_516439841,,"22/Sep/25 1:31 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;i’ve attempted to add the rank data to test 1 inputs manually, so that we can continue with testing while awaiting the update, however so far not been able to get it working.  Extra data in the JSON is currently as follows

{noformat}""ExtraData"": ""{\r\n  \""Reason Left\"": null\r\n}"",{noformat}

[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] any chance you can suggest how to amend this to also include a rank of C1 for example? Or perhaps we’re better off just waiting for this to be sorted by devs?",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,06/Oct/25 2:07 PM
A>R test 5 PT service is incorrect. Need to investigate,PHX5-477,15520,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,19/Sep/25 11:40 AM,22/Sep/25 11:00 AM,,19/Sep/25 3:12 PM,,,,,,,,,,,,,0,Expected_Results,,,,PT service not being calculated correctly compared to expected results. This in turn means the pre com pen is incorrect and all following results for any commutation,,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@111857c4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x02096,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 13,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_12711813_*|*_10252_*:*_1_*:*_2647_*|*_10354_*:*_1_*:*_4270_*|*_10056_*:*_1_*:*_5717,,19/Sep/25 3:11 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Service is correct in calculate when checking service in Altair there was a service break within part time service that was not factoring the part time service in. When including the part time adjustment the service is correct,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,19/Sep/25 3:12 PM
NPPS commutation - ill-health options,PHX5-476,15518,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,18/Sep/25 5:14 PM,23/Sep/25 11:28 AM,,23/Sep/25 11:18 AM,,,,,,,,,,,,,0,,,,,Russell’s original comment from ticket 456: “Possibly a second issue - I think the code is trying to go through the inverse commutation code band failing to find a factor for the member’s age but inverse commutation should not take place on ill-health as per the PPS Pre Commutation Module spec”,,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,PHX5-456,,,,,,,,,18/Sep/25 5:16 PM;18934601-32fa-4c76-9b74-159dc94fd206;image-20250918-151747.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10471,18/Sep/25 5:21 PM;18934601-32fa-4c76-9b74-159dc94fd206;image-20250918-162028.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10472,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@a78457e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020976,,,,,,,,,,,,,,,,2006 NPPS,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 13,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_327998752_*|*_10252_*:*_1_*:*_6621_*|*_10354_*:*_1_*:*_2837_*|*_10056_*:*_1_*:*_396060,,"18/Sep/25 5:16 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I agree that inverse commutation is not available under ill-health (NPPS).  We had already accounted for this by excluding the DB ZeroLumpSum options when the member is ill-health, however I have now also excluded DB TargetLumpSum options as this would also require inverse commutation under NPPS.

!image-20250918-151747.png|width=681%,alt=""image-20250918-151747.png""!

I attempted to create a test function that could check which options are returned from the factory, but having trouble setting up a working test due to the necessity of schemeReferenceData.  Does it need testing?  Worth noting that we don’t have tests for anything else in the {{PensionOptionCalculatorFactory}}","18/Sep/25 5:21 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I debugged some tests in VSC to check my changes, and noted that {{LegacyDBPCLS}} was returning 0 cash.  This is due to a previous change I made in A-R (for ticket 459) to filter the pre-com elements going into calculators.  I’ve amended this to just exclude any CARE elements, rather than pick up only PENPreCom:

!image-20250918-162028.png|width=681%,alt=""image-20250918-162028.png""!","22/Sep/25 12:26 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;The only way I’m really able to test this is by running through A-R tests and noting that the DB Zero Lump Sum options are no longer in the full output, so I haven’t added additional tests, just looked at existing.  I’m happy it’s working as it should be",,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,23/Sep/25 11:18 AM
NPPS - calculation of DB cash,PHX5-475,15510,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,18/Sep/25 3:51 PM,18/Sep/25 3:59 PM,,18/Sep/25 3:59 PM,,,,,,,,,,,,,0,,,,,,,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1cf37748,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_465174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,18/Sep/25 3:59 PM
MaxLumpSum - problem with identifying rank,PHX5-474,15509,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,18/Sep/25 3:24 PM,30/Sep/25 3:15 PM,,30/Sep/25 3:15 PM,,,,,,,,,,,,,0,,,,,"There is an issue when we look for the member’s rank, which determines how the cash is calculated and when payable from.

Identified from test 1 (also impacting tests 2, 3 and 6), where the member is C1 and should therefore have fullLumpSumAge of 55, but in fact we are getting 60 which is incorrect.  I have debugged test 1 but cannot yet follow where rank comes in.",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,PHX5-478,PHX5-479,,,,,,,,PHX5-465,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@28461e21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x02098,,,,,,,,,,,,,,,,1987 PPS,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-09-18 15:10:19.32,10354_*:*_2_*:*_4065_*|*_10056_*:*_1_*:*_335104405_*|*_10356_*:*_1_*:*_12752077,,"18/Sep/25 3:32 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] I’d be grateful for your insight on this one, as I can’t work out where we’re getting member’s Rank from.  And just to clarify, this issue has been highlighted because of the error message I brought into MaxLumpSum earlier, not because my change was incorrect, but because the fullLumpSumAge being calculated for C1/S1 members is incorrect.","18/Sep/25 4:10 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388]  It comes from ExtraData field on Member object. Double check - there is a high chance this got missed from the LinkedMember object. If it is not even there as a property, we will need to get a dev change.","19/Sep/25 10:17 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] thanks.  All we are getting through from ExtraData is {\r\n \""Reason Left\"": null\r\n} so yes I assume it must have been missed.  Please raise with the devs",22/Sep/25 12:52 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] Before we go to devs - can we check with the data team where they are putting the Rank information? It might just have moved since we initially coded.,22/Sep/25 4:03 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Queried with Paul - he is looking into this,23/Sep/25 3:47 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] the rank info is still held within the member’s employment information so I think we do need to go back to devs.  Let me know if more info is needed,"30/Sep/25 3:14 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I think ticket 491 is a replica of this, and actually contains the info needed to make the code change.  Therefore I’m passing this one to close",,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,30/Sep/25 3:15 PM
1987 - Scheme Sanction Charge (SSC),PHX5-473,15507,Story,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,18/Sep/25 1:03 PM,11/Feb/26 12:36 PM,,,,,,,,,,,,,,,0,TEST_CASES,,,,,,Andrew Wilson,Annabelle Stephenson,Matt Lilwall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,PHX5-221,,,,,,,,,PHX5-900,,,,,,PHX5A-112,,,10/Feb/26 4:02 PM;18934601-32fa-4c76-9b74-159dc94fd206;Public Sector - Scheme Sanction Charge (queries for admin).msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/17837,11/Feb/26 12:36 PM;18934601-32fa-4c76-9b74-159dc94fd206;SSC queries sent on to admin.msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/17979,18/Sep/25 5:02 PM;862ca789-6c5f-4d0a-b054-60929f0a27a7;image-20250918-160202.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10470,11/Feb/26 12:36 PM;18934601-32fa-4c76-9b74-159dc94fd206;response from Kev.msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/17978,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@29aed14c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i01y000000000hs,,,,,,,,,,,,,,,,1987 PPS,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-15 10:27:56.702,,,"18/Sep/25 1:23 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87] 

I note that the Scheme Sanction Charge (SSC) section of the [Police A-R spec|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EUecqhUhkElMnGCKNBcOWJwBJuZaSfamdaCA3sJRrOkJmQ?e=P5gjnK] is incomplete. Please can you confirm when this will be completed. 

I also note that in the McCloud code, we calculated Post A-Day overtime, which is used in the SSC calculation. Please can you confirm if this is still the case in current coding.

Thanks


Matt","18/Sep/25 5:02 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;!image-20250918-160202.png|width=1050%,alt=""image-20250918-160202.png""!","09/Oct/25 9:36 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Review A-R spec (LSA changes) to see if SSC now covered. April confirmed that this isn’t LSA related. There’s a SSC section of the spec that’s not completed, plus a link to a Word doc explaining how it’s calculated. We may be able to use the McCloud code for this.

[Scheme Sanction Charge.docx|https://xpsplc.sharepoint.com/:w:/s/ProjectPhoenix/Eawhf1X_RRNFnbfxm4XhP5UBeJOGyOp9tyb4QGnVdaZE-g?e=R3ADHq]","09/Oct/25 11:19 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] , I’ve isolated the McCloud code below to show how the SSC is calculated:

{noformat}// --- Calculation Dependencies ---

// Calculate Tax-Free Limits
var dbTaxFreeLimit = ((dbMaxPostCommPension * 20m + dbSchemeMaxPCLS) * 0.25m).Round(2);

// Calculate Excess over the allowable limit
var dbPCLSoverLimit = Math.Max(dbSchemeMaxPCLS - dbTaxFreeLimit, 0);

// Post-2006 Service Inc Weighting (see detailed logic in main file for context)
var preADayService = dbTotalFullTimeService + dbReckonableServiceTVinAddedYearsDays - postADaydbTotalFullTimeService;
var post2006ServiceIncWeighting = accrualCalcF - preADayService;

// (If ill-health, calculate ill-health scheme sanction charge percentage)
var dbIllHealthPostADayPlusEnhancement = dbIllHealthEnhancement + postADaydbTotalReckonableService;
var dbIllHealthSchemeSanctionChargePercentage = dbIllHealthPostADayPlusEnhancement / dbIllHealthCalcServ;

// Scheme Sanction Charge calculation
if (isIllHealth)
{
    dbSchemeSanctionCharge = (dbPCLSoverLimit * dbIllHealthSchemeSanctionChargePercentage * 0.15m).Round(2);
}
else
{
    dbSchemeSanctionCharge = (
        dbPCLSoverLimit
        * post2006ServiceIncWeighting / accrualCalcF
        * 0.15m
        * postADaydbTotalReckonableService / (postADaydbTotalFullTimeService - postADaytotalServiceBreak)
    ).Round(2);
}

// --- Supporting Variable Calculations (directly required for above) ---

// dbSchemeMaxPCLS
bool twoPointTwoFiveTimesPenTest = (...); // See full logic in original code
var dbPenMultipliedBy2Point25 = (dbPreCommutationPension * 2.25m).Round(2);
var dbSchemeMaxPCLS = isIllHealth 
    ? dbMaxPCLS 
    : twoPointTwoFiveTimesPenTest
        ? dbPenMultipliedBy2Point25
        : dbMaxPCLS;

// dbMaxPCLS
var dbMaxPCLS = twoPointTwoFiveTimesPenTest 
    ? dbPenMultipliedBy2Point25 
    : (dbPreCommutationPension * 0.25m * ccf).Round(2);

// dbMaxPostCommPension
var dbMaxCommutedPension = (dbSchemeMaxPCLS / ccf).Round(2);
var dbMaxPostCommPension = dbSchemeMaxPCLS == 0 
    ? 0 
    : dbPreCommutationPension - dbMaxCommutedPension;

// Other prerequisites (see full code for these, included here for dependency completeness):
// - dbPreCommutationPension
// - ccf (Commutation factor based on age, table lookup)
// - part-time/full-time service and breaks (dbTotalFullTimeService, postADaydbTotalFullTimeService, etc.)
// - reckonable service (dbReckonableServiceTVinAddedYearsDays, postADaydbTotalReckonableService)
// - accrualCalcF
{noformat}","15/Dec/25 10:27 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The new function in lsa code {{GetMemberUnauthorisedPayments}} populates objects that have a field for scheme sanction charge. So where ever our scheme sanction code ends up, the results should probably be an input to {{GetMemberUnauthorisedPayments}}  so that they can be added to the same object","04/Feb/26 5:54 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+Useful documents:+

[PPS Scheme Sanction Charge Spec.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQAPTBaRUs6vRpj3QsE6KbX_AUeyL9Ui9GDgUbXvssaThyE?e=OhFcsp]

[Scheme Sanction Charge.docx|https://xpsplc.sharepoint.com/:w:/s/ProjectPhoenix/IQCsIX9V_0UTRZ238ZuF4T-VAXiThsjqfbcm-EBp1XWmRPo?e=KFIZCz] 

[SSC on lump sums.xls|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQDDppKleCPATLlagkrakKH9AXPQ7ueguiXI_8QLi6QP3QM?e=jlr3SB]



+Outstanding queries for admin+ (see attached email - currently with Kevin W in case he has any answers, I’ll then forward on to April) : 

* Two different methods for calculating post06 service in the reference docs provided.  Clarification requested
* Confirmation that we do adjust for part-time, as per the word doc resource
* Confirmation that the spreadsheet resource is incorrect and/or not being used properly
* What components make up the various service durations we consider.  TVin, added years, overtime
* Does SSC apply to both DB and CARE benefits?
* When is SSC applied? After LSA but before GAD?



+Coding thoughts:+

We need to use service calculators to get the required durations for this, but the existing ones do not have enough info so we’ll need something new, specific to A-Day dates. We will need those service figures to be available after we have calculated the full pension options including LSA, as the SSC is calculated based on the PCELS value.

* Add PreADay as a ServiceCalcType to GlobalEnums
* Build preADay svc calc in {{PublicSectorServiceFactory}}
* Add decimals ServiceForSSC and PartTimeForSSC to {{IPublicSectorCalculator}} object
** these will need passing into {{RetirementResults Calculate()}}
* New functions needed to 
** a) get the service figures, and calculate and store ServiceForSSC and PartTimeForSSC ({{GetSchemeSanctionChargeService}})
** b) apply the above figures to PCELS and then add result to OtherValues in pensionOption ({{CalculateSchemeSanctionCharge}})
** Also function for double accrual (not necessary to deliver this but worth doing, see linked ticket 900)
* Call {{GetSchemeSanctionChargeService}} in {{ActivePreComPenCalculator}}
* Call {{CalculateSchemeSanctionCharge}} in {{RetiredCalculator}}
* SSC value from OtherValues in pensionOption added to {{GetMemberUnauthorisedPayments}}","10/Feb/26 4:01 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+Coding suggestions, to be looked at alongside my earlier comment:+

Also waiting on answers from admin that might mean changes are needed.

{noformat}public static (decimal, decimal) GetSchemeSanctionChargeService(Dictionary<ServiceCalcType, List<ServiceHistoryOverTrancheWithDuration>> serviceWithTVin)
{

// there may be various service caps to apply here. not on PT but on reckonable

    var totalDBReckonableService = serviceWithTVin[ServiceCalcType.DBOnly].Sum(x => x.FinalDecimalAmount);
    var doubledTotalService = DoubleAccrual(totalDBReckonableService);

    var preADayService = serviceWithTVin[ServiceCalcType.PreADay].Sum(x => x.FinalDecimalAmount);
    var doubledPostADayService = doubledTotalService - preADayService;
    // assuming admin agree word doc is correct. otherwise this is a lot more complicated

    decimal serviceForSSC = doubledPostADayService / doubledTotalService;

    var totalDBQualifyingService = serviceWithTVin[ServiceCalcType.DBOnly].GetTotalQualifyingService();
    var preADayQualifyingService = serviceWithTVin[ServiceCalcType.PreADay].GetTotalQualifyingService();

    var actualPostADayService = totalDBReckonableService - preADayService;
    var postADayQualifyingService = totalDBQualifyingService - preADayQualifyingService;

    decimal partTimeForSSC = postADayQualifyingService / actualPostADayService;	 // might want to round here

    return (serviceForSSC, partTimeForSSC);
}{noformat}

{noformat}public static PensionOption CalculateSchemeSanctionCharge(PensionOption pensionOption, decimal serviceForSSC, decimal partTimeForSSC)
{
    decimal pcels = pensionOption.OtherValues.Where(x => x.Key == ""DB_PCELS"").Select(x => x.Value).FirstOrDefault();
    //assuming i am right to do db only

    decimal schemeSanctionChargeDue = ((pcels * serviceForSSC * 0.15m).Round(2) * partTimeForSSC).Round(2);
     
    pensionOption.OtherValues.Add(new ElementValue { Key = ""SchemeSanctionCharge"", Value = schemeSanctionChargeDue });
     
    return pensionOption;
}{noformat}

Note to self: I have all of this saved in VS ‘P184 A2R 02.02’.","11/Feb/26 12:36 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Kev has replied and given the go ahead to raise my questions with admin, as he and Matt never got to the bottom of some of their own queries when working on McCloud.  Response from Kev and email on to admin attached. [^SSC queries sent on to admin.msg] [^response from Kev.msg] ",,,,,,,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,To Do,18/Sep/25 1:03 PM
Care calc not using existing Care Benefits tables,PHX5-472,15505,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,18/Sep/25 11:13 AM,28/Nov/25 5:21 PM,,01/Oct/25 8:49 AM,Client 150 Police A to D Version 1,Client 150 Police A to R Version 5,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,0,,,,,"Andrew helped with fix. Bool added to Care global module for AllResults which will check if the code needs to actually calculate any yearly care pension for years after the existing member care data in member record, if it does not, just return the existing member care data and use total pension in held in there in the most recent field. ",,Matt Lilwall,Steven Wright,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@37e33839,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1q:i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 14,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-09-18 15:17:09.251,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_323083475_*|*_10252_*:*_1_*:*_203649096_*|*_10354_*:*_2_*:*_444986049_*|*_10056_*:*_1_*:*_1151557_*|*_10355_*:*_1_*:*_67298647,,"18/Sep/25 4:17 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e] , [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] , just adding a comment here to capture something Iain said on the 11:30 weekly phase 5 call today. Namely that he doesn’t think that we need to use existing CARE data in the CARE calculation. Andrew mentioned that the code can do either.

This needs further info/conversations with Iain.","18/Sep/25 5:02 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] thanks Matt, call booked in with Iain tomorrow to discuss.",23/Sep/25 8:58 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Iain confirmed in call on 22/09/2025 that we can use existing care table data on member record in the care calcs. To discuss further with Andrew about code changes.,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,01/Oct/25 8:49 AM
CARE Salary Input,PHX5-471,15504,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,18/Sep/25 10:46 AM,28/Nov/25 5:21 PM,,21/Oct/25 9:19 AM,Client 150 Police A to D Version 1,Client 150 Police A to R Version 5,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,0,TEST_CASES,,,,"CARE salaries are input as a separate list:

!image-20251014-060908.png|width=778,alt=""image-20251014-060908.png""!

Behind, this is:

{{public List<CareSalary> CareSalaries { get; set; }}}

Where CareSalary is:

{noformat}public class CareSalary
{
    public decimal Amount { get; set; }

    public LocalDate? EffectiveFrom { get; set; }
}{noformat}



{{PublicSectorCARECalculationFactory}} needs to be updated to take the data from this list and send it in as 

{{var CareSalaryList = new List<Aurora.Model.Client.SalaryHistory>();    }}

This should hopefully ensure that the salaries go through existing logic for CARE and be included in new CARE records.

We either need to create new test cases, OR adapt existing cases by removing existing care records and replacing them with CARE salary inputs so that we calculate the last year/two from scratch.",,Andrew Wilson,April Woods,Matt Lilwall,Russell Armstrong,Steven Wright,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,640f34fc1273131f2adfede9,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,26/Sep/25 6:54 AM;5796a187-7241-414b-bea0-2d22260a9bed;image-20250926-055416.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10497,26/Sep/25 6:54 AM;5796a187-7241-414b-bea0-2d22260a9bed;image-20250926-055422.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10498,14/Oct/25 7:13 AM;5796a187-7241-414b-bea0-2d22260a9bed;image-20251014-060908.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10664,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5d184083,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzby,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 17,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-09-22 15:39:49.647,10281_*:*_1_*:*_604758756_*|*_10251_*:*_2_*:*_50936322_*|*_10250_*:*_2_*:*_312222024_*|*_10252_*:*_2_*:*_246041353_*|*_10354_*:*_2_*:*_605530944_*|*_10056_*:*_1_*:*_963247000,,18/Sep/25 12:04 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Discussion with Iain. He said there could be two salaries being input. It is unknown if one of the salaries (pertaining to the full year) can be updated on the members record or not.,22/Sep/25 4:39 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Confirmed on a call with Iain and April today. 2 CARE salary run time inputs required. 1 for the last full year. 1 for the salary at DOR,"22/Sep/25 4:50 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;What are the requirements here?{color:#ff5630} As below.{color}

How does this work with existing data? {color:#ff5630}Add/replace{color}

Do we need to validate against existing? Merge with existing? [~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e] do you think we need any further clarification on this? My understanding is that the admin team may wish to add the last full year’s salary, even if this is already on the system, in case it’s wrong etc? [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] , are we getting effective dates as run time inputs, alongside the salaries themselves?","23/Sep/25 1:50 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Talking to the devs, we will hopefully be given a list of salary objects each with:

* AuroraID
* SalaryType
* SalaryAmount
* EffectiveFrom

This list will be on the standard input object",23/Sep/25 3:23 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] I created a salary object earlier in PublicSectorCareCalculationFactory by manually forcing the period earnings data from member care tables into an aurora salary list object. Filtered on amounts and effective to/from dates. Your comment seems to suggest we will be getting something new from the devs but I will leave my new update in for now as it is using correct salary in Care calcs now.,"23/Sep/25 4:05 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd] , [~accountid:712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87] 

Below I’ve explained our suggested solution for the 2 CARE salary inputs:

Salary for last complete CARE year - should only be entered where not already on data

Salary at DOR  - needs to entered as the annual salary The code will pro-rate the salary down when it needs to be i.e. it want pro-rate it where the calculation date is a future CARE year and it will where the period is a part year. 

Please can you let us know if this meets your expectations. Thanks, Matt","25/Sep/25 9:44 AM;712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] Hi Matt.  For an actual the pay figure entered in the box will be actual earnings in that period. For a quote it depends if the date of leaving is within the same scheme year. Where it does fall within the scheme year, then like the actual, the entry will be actual earnings for the period. For a date outside of the scheme year the pay entered will be a full year of earnings. These entries will be runtimes but we will want a default pay showing with the option to overwrite, but not sure who we need to speak to about the default number?

Thanks, April","26/Sep/25 6:54 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;This is the change that devs have made for the salary inputs. This is currently in dev - but should get to UAT very soon:

!image-20250926-055416.png|width=287,alt=""image-20250926-055416.png""!

!image-20250926-055422.png|width=287,alt=""image-20250926-055422.png""!



We will need to talk to admin about this - as the DB salary will have a defined salary type - but care salary will not. We will need to know what the salary type will be when they enter a care salary.

 

If we don't want this to block the coding, we can set a constant up and call it ""CARE"" for now, and change at a later date.","29/Sep/25 12:04 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] , please see April’s response. Based on our conversation last week. I think this is going to be problematic. Do you agree?",30/Sep/25 9:07 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] We will need examples of both. We will have to amend the CARE factory so that based on the logic - we pro rate or not accordingly.,"30/Sep/25 4:42 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;I think it boils down to this:



|Runtime Input|Mandatory Input|Salary Entered|SalaryEffectiveDate|Is projection|Description|
|Latest|Yes|Yes|DOR in same CARE year as SalaryEffectiveDate|No|No need to prorate in calc. Actual earnings will be entered|
|Latest|Yes|Yes|DOR in later CARE year to SalaryEffectiveDate  |Yes|Annual salary will be used. Don't prorate except the part year at DOR|
|Penultimate|No|Yes|Must be penultimate CARE year|N/A|Will overwrite the salary with the same effective date if this exists in the data|
|Penultimate|No|No|N/A|N/A|Will use the salary used in the data, or error when this doesn't exist.|","01/Oct/25 3:39 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] , updated the table following our meeting. We will need the front end to show the input date as effective from date to avoid ambiguity:



|Runtime Input|Mandatory Input|Salary Entered|SalaryEffectiveFromDate|Is projection|Description|
|Latest|Yes|Yes|DOR in same CARE year as SalaryEffectiveFromDate|No|No need to prorate in calc. Actual earnings will be entered|
|Latest|Yes|Yes|DOR in later CARE year to SalaryEffectiveFromDate|Yes|Annual salary will be used. Don't prorate except the part year at DOR|
|Penultimate|No|Yes|Must be penultimate CARE year effective from date|N/A|Use entered salary. No prorating|
|Penultimate|No|No|N/A|N/A|Use data. If data doesn't exist, error|","16/Oct/25 4:23 PM;640f34fc1273131f2adfede9;Updated {{PublicSectorCARECalculationFactory}}  to take in a List<CareSalary> named careSalaries and then add them to CareSalaryList where not null

{noformat}if (careSalaries != null)
			{
				foreach (var careSalary in careSalaries)
				{
					if (careSalary.EffectiveFrom == null)
					{
						Log.Error($""No Effective From Date added for CARE Salary with value of {careSalary.Amount}  - please input a date"");
					}
					else
					{
						var careSalaryHistory = new Aurora.Model.Client.SalaryHistory
						{
							EffectiveFrom = careSalary.EffectiveFrom.Value,
							Amount = careSalary.Amount
						};
						CareSalaryList.Add(careSalaryHistory);
					}
				}
			}{noformat}

Changed careBuilder to use {{.WithCARESalaryMethod(CARESalaryType.SalaryInForce)}} instead of ProRate as this is consistent with how CARE data is held.

Updated PublicSectorCalculationSetUp to have the CareSalaryList as an input. This then meant changes to {{PublicSectorRetirementCalculatorSetUp}}, {{PublicSectorActivePreComPenCalculatorFactory}}, {{PublicSectorDeathInServiceCalculatorFactory}}, {{PublicSectorActiveToDeferredCalculatorFactory}}, {{PublicSectorActiveToRetirementCalculatorFactory}}and {{PublicSectorCalculationBuilder}} to have the CareSalaries as an input

Set up 3 tests PublicSectorCARECalculationFactory 1 to 3 - test 1 shows that with a null input for CareSalary the CARE calculation still works and picks up the existing CARE. Tests 2 and 3 are to see if removing one then 2 years of CARE history and adding 1 then 2 CareSalary inputs would get to the same final figure. These showed a problem possibly with the CARE inflation addition to be looked at under PHX5-551. Tests left with no expected values and passing to allow publishing",16/Oct/25 4:54 PM;640f34fc1273131f2adfede9;Active to Retired updated to pass Parameters.CareSalaries into all instances of {{PublicSectorCalculationBuilder}},"17/Oct/25 7:03 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:640f34fc1273131f2adfede9]  Just saw your not on pro rating. If you look further down this comment trail you will see the logic we need to use. It gets quite complex - but sometimes we do need to prorate, and other times we don’t. 

Code looks good - not sure if you were aware, but you could have achieved the same with a linq query. You could put a where clause on the input list to filter down, then just do a .Select(x=> new SalaryHistory{effectivefrom = x.effectivefrom etc}). Not essential to change - your code will work, but feel free to update if you have time.","20/Oct/25 3:31 PM;640f34fc1273131f2adfede9;Amended{{PublicSectorCARECalculationFactory}} code to cope with different scenarios for pro rating - if no CARE salaries input or latest input is for the CARE year before the final CARE year, otherwise use the salary as input.

Added error if no CARE salary input and end date of CARE calculation is in the CARE year after the latest existing member CARE

Tests PublicSectorCARECalculationFactory_1 to 7 set up checking different scenario of number of CARE salaries input and needed and missing data

Raised [https://xps-jira.atlassian.net/browse/PHX5-558|https://xps-jira.atlassian.net/browse/PHX5-558|smart-link] as appears pro rata of salary is dividing by 366 incorrectly","21/Oct/25 6:58 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:640f34fc1273131f2adfede9]  All looks good. Only thing I was wondering about was when we are doing projections into the future, and would this still work. However, given that none of the current processes will be doing this, it might make more sense to create a ticket for the benstat process to cover this later.",21/Oct/25 9:16 AM;640f34fc1273131f2adfede9;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Added PublicSectorCARECalculationFactory_8 with a date of retirement in 2029 and this continues to use the last input salary for all future years,21/Oct/25 9:19 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:640f34fc1273131f2adfede9] awesome - thank you Russell,,,,,,13807,PHX5-197,CARE Module,Done,21/Oct/25 9:19 AM
Update Police A>R test cases with expected interim values,PHX5-470,15493,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Naomi Robinson,712020:ffa445ab-b813-4226-9ed2-507a454e9272,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,17/Sep/25 10:07 AM,28/Nov/25 4:36 PM,,08/Oct/25 6:22 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Naomi Robinson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2806cb51,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 15,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-09-30 15:26:24.242,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_109427958_*|*_10252_*:*_1_*:*_2577_*|*_10354_*:*_1_*:*_1642927929_*|*_10056_*:*_1_*:*_203036,,30/Sep/25 4:26 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Have the info i need for this from Chris so can start populating.,"07/Oct/25 4:56 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;I have published Public Sector Calc to provide all interim values necessary and then added those appropriate to each test case in the Police A>R. 

I have already noticed some clear reasons for figures not being as expected and have added 506, 522, 523 and 524 to record these issues, but have not looked further into them yet.

Requirements of this ticket met.

For clarity i have renamed this ticket “updated police A>R…” and then have added a new ticket for other calcs. That work will be less than this ticket as this ticket covers setting up Interim values within the Public Sector Calculation as well as setting expected values.",,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,08/Oct/25 6:22 AM
AcrruedDBCash not being calculated,PHX5-469,15487,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,17/Sep/25 7:25 AM,18/Sep/25 2:31 PM,,18/Sep/25 2:31 PM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@229ee321,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020924,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 13,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1986_*|*_10252_*:*_1_*:*_9061_*|*_10354_*:*_1_*:*_3732_*|*_10056_*:*_1_*:*_27578077,,,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,18/Sep/25 2:31 PM
Active normal members creating a DBPreCom pen,PHX5-468,15486,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,17/Sep/25 7:24 AM,18/Sep/25 2:31 PM,,18/Sep/25 2:31 PM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1841896,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020929,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 13,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_3594_*|*_10252_*:*_1_*:*_91879_*|*_10354_*:*_1_*:*_3224_*|*_10056_*:*_1_*:*_27490203,,,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,18/Sep/25 2:31 PM
Review Police A-R spec changes,PHX5-467,15483,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,16/Sep/25 3:09 PM,24/Oct/25 2:12 PM,,24/Oct/25 2:12 PM,,,,,,,,,,,,,0,Specification,,,,Updates made by Iain Wilson on 9th Sep.,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2b310fc7,,,,,Police,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mon:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_3279799401,,,,,,,,,,,,,,,,,,,,,,,,,,15482,PHX5-466,Spec Changes,Done,24/Oct/25 2:12 PM
Spec Changes,PHX5-466,15482,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,16/Sep/25 2:58 PM,16/Sep/25 3:00 PM,,,,,,,,,,,,,,,0,,,,,Used to collect all post-sign-off spec changes,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4d564091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,purple,,,,,,,,,,,,,0|i00mof:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,16/Sep/25 2:58 PM
MaxLumpSum function - if else conditions,PHX5-465,15481,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,16/Sep/25 1:01 PM,18/Sep/25 3:24 PM,,18/Sep/25 2:31 PM,,,,,,,,,,,,,0,,,,,"While debugging A-R tests (specifically test 3), no DBMaximumLumpSum was calculated in the public sector MaxLumpSum function, as the member did not meet either of the sets of conditions in the if else statement.  These conditions need to be reviewed.

Unless there is something I’ve missed in the spec, which suggests a DB max LS is not always calculated.  In that case, I assume this can just be closed.",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-474,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@12544b04,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x02093i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 13,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-09-18 06:13:03.45,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_26806_*|*_10252_*:*_1_*:*_14869_*|*_10354_*:*_1_*:*_3565670_*|*_10056_*:*_1_*:*_169152633,,"18/Sep/25 7:13 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The code is not going into any of the lines of code because service is less than 25.

The spec has this to say on the matter:

{noformat}IF Age >= 50 and service<25 -- n/a as deferred pension{noformat}

Questions:

# Is the test case just invalid?
# If it is possible for a case to reach this point in the code, should we be capturing it earlier? If not possible to capture earlier, then maybe we need and else on the statement with an error?","18/Sep/25 12:51 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I’ve confirmed with Isobel that if a member is over 50 (but under 55/60/fullLumpSumAge) and has under 25y service, then they are not entitled to any retirement benefits until they reach age the fullLumpSumAge (I wanted to check this covered all retirement benefits, and wasn’t specific to the MaxLumpSum).  If the member leaves service/employment, their benefits are deferred until fullLumpSumAge (55/60).

Therefore I think the test case is invalid as this member is 58 but is neither constable or sergeant, so would not be eligible to retire.  I still think it is worth having an error message within MaxLumpSum so I’ve added another else statement.","18/Sep/25 1:00 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;MaxLumpSum_Test4 now gets this error message, so i’ve updated expected test results.   All other tests in public sector are still passing",,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,18/Sep/25 2:31 PM
PPS1987 use earliest factor in commutation table if ill-health and under age given in table,PHX5-464,15311,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,16/Sep/25 9:16 AM,22/Sep/25 9:12 AM,,22/Sep/25 9:11 AM,,,,,,,,,,,,,0,,,,,PPS1987 factor table shows if ill health and under 48 years and 6 months at age of retirement use same commutation factor given in table for 48 years and 5 months. If under 48 years and 6 months and not an ill-health retirement need a warning or error to refer to GAD for commutation factor,,Andrew Wilson,Russell Armstrong,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-452,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5343a00a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x02092,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 13,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-09-18 05:36:55.61,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_121100590_*|*_10252_*:*_1_*:*_73425985_*|*_10354_*:*_1_*:*_3024403_*|*_10056_*:*_1_*:*_86750574,,17/Sep/25 4:19 PM;640f34fc1273131f2adfede9;Change made to use earliest factor if under 48 as per the notes on the factor table. Warning added if under 48 years and 6 months and not ill health. Changes published in Public Sector Calculation v12,18/Sep/25 6:36 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:640f34fc1273131f2adfede9]  Can we add testcase(s) for this also please,"18/Sep/25 6:56 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Also, would probably have said that the code that finds the minimum factor years and months should be a function in the factors module

Something like:

{noformat}public static (int, int) GetMinYearsAndMonths(List<DecimalFactor> decimalFactors)
		{
			if (decimalFactors.Any())
			{
				int minimumAgeinYears = decimalFactors.MinBy(x => x.Year).Year;
				int minimumAgeInMonths = decimalFactors.Where(x => x.Year == minimumAgeinYears).MinBy(x => x.Month).Month;

				return (minimumAgeinYears, minimumAgeInMonths);
			}
			else
			{
				return (0, 0);
			}
		}{noformat}

This would allow the code to look like:

{noformat}(int minimumAgeinYears, int minimumAgeInMonths) = GetMinYearsAndMonths(schemeReferenceData.DecimalLookups(""504""));{noformat}

Also {{ageInMonths}} is only used once, so no need for it to be a variable","19/Sep/25 4:15 PM;640f34fc1273131f2adfede9;Changes made to Factors module and used in Public Sector Calculation. Tests added for commutation factor in range, commutation factor out of range and ill health and commutation factor out of range and not ill-health",,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,22/Sep/25 9:11 AM
NPPS2006 no inverse commutation should take place on ill health retirements,PHX5-463,15310,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,16/Sep/25 9:12 AM,18/Sep/25 2:22 PM,,18/Sep/25 6:58 AM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Russell Armstrong,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-452,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@41a58afb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x02093,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 13,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-09-18 05:57:57.817,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1296601_*|*_10252_*:*_1_*:*_73423699_*|*_10354_*:*_1_*:*_3039072_*|*_10056_*:*_1_*:*_86944960,,16/Sep/25 9:14 AM;640f34fc1273131f2adfede9;For NPPS2006 category no inverse commutation should take place for ill health retirements. Need to stop it looking for a factor (as this can cause errors due to factors not being available) but also prevent inverse commutation taking place,17/Sep/25 4:22 PM;640f34fc1273131f2adfede9;Set to return a factor of 1 if ill health retirement. Change made to only output zero lump sum option (after inverse commutation) if not an ill health. Changes published in v12 of Public Sector Calculation,"18/Sep/25 6:57 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Looks good, don’t think currently possible to add a test case for this right now",,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,18/Sep/25 6:58 AM
"NPPS results do not match expected results, need further investigation",PHX5-462,15308,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,15/Sep/25 3:30 PM,28/Nov/25 4:37 PM,,07/Oct/25 11:02 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,Expected_Results,,,,The reform benefits being output for the DB part are the same results that are output for the Legacy DB. ,,Andrew Wilson,Annabelle Stephenson,Chris Marshall,Russell Armstrong,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,PHX5-481,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@511b337,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 15,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-09-22 11:44:21.456,10251_*:*_2_*:*_53178387_*|*_10250_*:*_2_*:*_32176471_*|*_10252_*:*_1_*:*_1798071082_*|*_10354_*:*_1_*:*_2686_*|*_10056_*:*_1_*:*_47722,,15/Sep/25 3:32 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Need to investigate NPPS results in Calculate compared to expected results as the do not match and do not seem to be close,"22/Sep/25 12:44 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;See linked ticket 481, as the pension options (and therefore outcome results) for some NPPS members have changed",22/Sep/25 2:23 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  Can we close this one now?,24/Sep/25 2:37 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] I have checked the results for Test 8 and this still needs some investigation,03/Oct/25 4:18 PM;640f34fc1273131f2adfede9;Test 8 returns 0 for DB options - I believe this is due to DCPS being 01/04/2022 on the salary linked record so service calculator returns 0,06/Oct/25 6:24 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Thanks [~accountid:640f34fc1273131f2adfede9] . Looks like could be the same thing as [PHX5-511|https://xps-jira.atlassian.net/browse/PHX5-511],"06/Oct/25 3:47 PM;640f34fc1273131f2adfede9;The following added to PublicSector

{noformat}LocalDate serviceStartDate = memberInfo.DateCommencedPensionableService.Value;
				
				if (servicePeriods.Any())
		            {
		                if (servicePeriods.OrderBy(x => x.EffectiveFrom).FirstOrDefault().EffectiveFrom < serviceStartDate)
		                {
		                    serviceStartDate = servicePeriods.OrderBy(x => x.EffectiveFrom).FirstOrDefault().EffectiveFrom;
		                }
		            };{noformat}

Subsequent references to dateCommencedPensionableService.Value changed to servcieStartDate

PublicSectorServiceFactory _NPPS 2006 _DCPS is 01042022 test added - failed on old code, passes on new code. ","07/Oct/25 6:38 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;We need to pass the dcps into the service code as it is actually required. It is a date that is nowhere else, and for members who have a service gap, the dcps is the only place we know where it ends.

We just needed to amend the dcps used when calculating the tranches. But the start date sent into the builder needs to be the dcps.

See [[PHX5-240] Service Module - McCloudTest12 - test case doesn't agree - Jira|https://xps-jira.atlassian.net/browse/PHX5-240]

We should probably set up a test case in public sector for mccloudtest12 to ensure that any further changes like this are caught.

This might involve a new test function that sets up the servicefactory and then calculates the service. 

If you set that test case up, you should see that your code fix breaks it.","07/Oct/25 10:31 AM;640f34fc1273131f2adfede9;Changed so memberInfo.DateCommencedPensionableService.Value is still passed into the ServiceBuilder instead of serviceStartDate.

I believe the initial problem was in creating the service tranches - no service tranche was being created prior to the DCPS. Service builder has service tranches and DCPS being passed in and I believe this handles using the earliest service period effective from where it is before the DCPS.

Added PublicSectorServiceFactory McCloud Test 12 into Public Sector Calculation with expected total service interim values set to the same as McCloud Test 12 in Service Module. When passing serviceStartdate into the Service Builder this returns a different total service. When pass in DCPS result matches the output from the test in Service",,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,07/Oct/25 11:02 AM
"PPS results do not match expected results, need further investigation",PHX5-461,15307,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,15/Sep/25 3:29 PM,19/Sep/25 1:17 PM,,19/Sep/25 11:43 AM,,,,,,,,,,,,,0,Expected_Results,,,,,,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2d8d5d05,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020922,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 13,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_90457359_*|*_10252_*:*_1_*:*_241542382_*|*_10354_*:*_1_*:*_2569_*|*_10056_*:*_1_*:*_22090,,15/Sep/25 3:32 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Need to investigate PPS results in Calculate compared to expected results as the do not match although they are not far from what the expected results are,"19/Sep/25 11:39 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Test 1 & test 4 pre com pen is matching. Test 5 PT service is incorrect so need to investigate. Ticket added for this.

Also added ticket for tests 2, 3 & 6 to check results once lump sum age error is correct",,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,19/Sep/25 11:43 AM
Target Lump Sum - Inverse commutation negative values,PHX5-460,15303,Story,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,15/Sep/25 10:51 AM,03/Dec/25 11:17 AM,,,,,,,,,,,,,,,0,,,,,"Target functions successfully created under ticket 434, however for inverse commutation we are getting negative “commuted pension” values on the pension option output.",,Andrew Wilson,Annabelle Stephenson,Iain Wilson,Matt Lilwall,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,PHX5-434,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@60f8fff3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x0209d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-06 05:38:06.236,,,22/Sep/25 2:29 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] to query with admin - do they need the commuted value? can it just be 0?,"22/Sep/25 4:12 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Queried with Iain and April, who have confirmed:

“We don’t need a “commuted pension” field, but we would need an inverse commuted field”

This inverse commuted pension value would just be the positive of the commuted pension value.  

[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] are we able to add this field to only some of the pension options results?  It seems if we can then it would be sensible to default the “commuted pension” value to 0, but if thats another dev change then should I also clarify that with Iain?  Ie. do we need that change, or are they okay with a negative commuted pension if they also have a positive inverse commuted pension?","06/Oct/25 6:38 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388]  [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] 

In a conversation with Iain - he said for 2006 cases we should swap the values on the pre com/residual. This would get rid of the negative values. That information probably unblocks this ticket - but I think we still need confirmation of this in writing / spec updated.","06/Oct/25 8:56 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87], for completeness, please can you confirm in writing that for 2006 the pre comm/residual pension values should be swapped","06/Oct/25 8:56 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] , I’ve requested this confirmation.",07/Oct/25 8:02 AM;712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] Matt - we are currently working on this and need to confirm with Neil Murray the way in which historical data has been mapped. Once we have the confirmation the details will be added into the Outputs for the retirement calculations,03/Dec/25 11:17 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87] This is still outstanding as a question. Are you able to respond on this one yet?,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,To Do,15/Sep/25 10:51 AM
PublicSector2015IllHealthHigherTierStrategy returns a Divide by 0 error,PHX5-459,15302,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,15/Sep/25 10:10 AM,16/Sep/25 9:12 AM,,16/Sep/25 9:12 AM,,,,,,,,,,,,,0,,,,,Test Case 17 gives a divide by 0 error in PublicSector2015IllHealthHigherTierStrategy > Get AccruedPension. careFactor is 0 because the member has worked a complete number of CARE years. This leads to the error in CAREpayillhealth,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@fa61fe9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00llz:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10281_*:*_1_*:*_2655_*|*_10253_*:*_1_*:*_82145480_*|*_10354_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_740998,,15/Sep/25 10:22 AM;640f34fc1273131f2adfede9;Closed as a duplicate,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,16/Sep/25 9:12 AM
PublicSector2015IllHealthHigherTierStrategy returns a Divide by 0 error,PHX5-458,15300,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,12/Sep/25 1:39 PM,23/Sep/25 11:28 AM,,23/Sep/25 11:17 AM,,,,,,,,,,,,,0,,,,,Test case 17 returns a divide by 0 error in PublicSector2015IllHealthHigherTierStrategy - careFactor is 0 and this then causes CAREpayillhealth to error as is dividing by 0,,Andrew Wilson,Russell Armstrong,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1e8f008c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020974,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 13,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-09-23 10:08:27.514,10281_*:*_1_*:*_2630_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_17238010_*|*_10253_*:*_1_*:*_808527_*|*_10252_*:*_1_*:*_11609_*|*_10354_*:*_1_*:*_605489558_*|*_10056_*:*_1_*:*_246593621,,22/Sep/25 1:58 PM;640f34fc1273131f2adfede9;Retirement date is at 31/03. Error caused as careFactor is 0 as there are no days over the whole number of years. Intention of careFactor is to convert a carePay for a part year up to an annual amount. As retirement is at 31/03 this conversion isn’t necessary. Change needed to CAREpayillhealth to return  carePay where careFactor is 0,"22/Sep/25 3:22 PM;640f34fc1273131f2adfede9;Change made. Existing tests Ill Health 2015 Higher Test 1 to 3 test old code still working. Added Ill Health 2015 Higher Test 4, produced the divide by 0 error before the code change, no longer does after the change",23/Sep/25 11:08 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:640f34fc1273131f2adfede9] Can you please add a note with code change - as I am struggling to find what code was changed here.,"23/Sep/25 11:16 AM;640f34fc1273131f2adfede9;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] In {{PublicSector2015IllHealthHigherTierStrategy}} , GetAccruedPension , CAREpayillhealth changed from = {{(carePay / careFactor).Round(2)}} to  careFactor == 0 ?
carePay :  (carePay / careFactor).Round(2)",,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,23/Sep/25 11:17 AM
A>R Ill Health test 17 failing,PHX5-457,15298,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,12/Sep/25 10:43 AM,18/Sep/25 1:04 PM,,18/Sep/25 1:04 PM,,,,,,,,,,,,,0,,,,,IH test 17 fails due to error ‘unable to divide by 0’,,Annabelle Stephenson,Chris Marshall,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,12/Sep/25 2:42 PM;18934601-32fa-4c76-9b74-159dc94fd206;image-20250912-134136.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10460,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4201eeb3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x0i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-09-12 13:42:53.88,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_526856189,,"12/Sep/25 2:42 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I can’t debug for this as I hit this error first, when determining commutation factor: 

!image-20250912-134136.png|width=827,height=433,alt=""image-20250912-134136.png""!

I can raise another ticket for this issue, but I’m not entirely sure what it is? ","12/Sep/25 2:54 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Following conversation with [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] - the error I printed below is a known issue, as the factor tables only start from age 48, we will error for anyone younger than that, which this member is.",18/Sep/25 1:04 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;duplicate of 458 - can be closed,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,18/Sep/25 1:04 PM
"A>R Ill Health tests 18, 19, 20 & 21 looking for ERF's",PHX5-456,15297,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,12/Sep/25 10:39 AM,19/Sep/25 1:19 PM,,19/Sep/25 1:18 PM,,,,,,,,,,,,,0,TEST_CASES,,,,"The 4 tests stated are erroring as states there are no early retirement factors for the years early. Ill Health does not factor in ERF so the calc should not be looking for these


!image-20250912-094237.png|width=537,height=285,alt=""image-20250912-094237.png""!",,Andrew Wilson,Annabelle Stephenson,Chris Marshall,Russell Armstrong,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,PHX5-448,,,,,,,,,,PHX5-476,,,12/Sep/25 10:42 AM;5e266667-8b87-4eb6-9386-71980feac557;image-20250912-094237.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10457,12/Sep/25 11:11 AM;5796a187-7241-414b-bea0-2d22260a9bed;image-20250912-101115.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10458,18/Sep/25 2:05 PM;18934601-32fa-4c76-9b74-159dc94fd206;image-20250918-125220.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10468,18/Sep/25 2:05 PM;18934601-32fa-4c76-9b74-159dc94fd206;image-20250918-125250.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10467,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@236e0fad,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020921,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 13,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-09-12 10:11:18.44,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_6791027_*|*_10252_*:*_1_*:*_5267237_*|*_10354_*:*_1_*:*_918204_*|*_10056_*:*_1_*:*_529830096,,"12/Sep/25 11:11 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The code in {{PensionElementCalculatorFactory}} is set to used unreduced strategy if the ill health = 1 (lower tier). test case 18 is higher tier. If higher tier should also be unreduced, we need to update this line:

!image-20250912-101115.png|width=627,height=251,alt=""image-20250912-101115.png""!",12/Sep/25 2:48 PM;640f34fc1273131f2adfede9;Possibly a second issue - I think the code is trying to go through the inverse commutation code band failing to find a factor for the member’s age but inverse commutation should not take place on ill-health as per the PPS Pre Commutation Module spec,"18/Sep/25 2:05 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;!image-20250918-125220.png|width=681%,alt=""image-20250918-125220.png""!

!image-20250918-125250.png|width=681%,alt=""image-20250918-125250.png""!

I interpret these as saying that neither lower or higher tier ill-health should have ERF applied.  As such, I agree Andrew’s proposed change below and have updated the code.

This caused test PensionElementCalculatorFactory _CARE2015RET higher to fail as was expecting the standard strategy; I have updated the test to expect the unreduced strategy.  All other tests within public sector calc are passing, and A-R tests 18-21 are no longer erroring (not published public sect yet but had copied my changes into VSC to debug)","18/Sep/25 5:22 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Created ticket 476 for this, as I noted another issue while looking into it",,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,19/Sep/25 1:18 PM
CARE results,PHX5-455,15291,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,11/Sep/25 10:36 AM,22/Sep/25 2:28 PM,,22/Sep/25 2:28 PM,,,,,,,,,,,,,0,Expected_Results,,,,"The CARE results for the main active record from 2022 are being output as 0
",,Andrew Wilson,Annabelle Stephenson,Chris Marshall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@35cb85e6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-09-12 06:11:09.056,10354_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_5566406,,"12/Sep/25 7:11 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Looks like we are not being given any CARE benefits in the main record. I have raised this multiple times, but can raise it again.",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,22/Sep/25 2:28 PM
Non McCloud NPPS &CARE only members,PHX5-454,15290,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,11/Sep/25 10:29 AM,28/Nov/25 4:37 PM,,01/Oct/25 8:49 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,Expected_Results,,,,"When a member is NPPS & CARE and not McCloud eligible (test 15), there is a salary linked record but test fails

!image-20250911-093132.png|width=702,height=220,alt=""image-20250911-093132.png""!

!image-20250911-093204.png|width=701,height=529,alt=""image-20250911-093204.png""!




",,Andrew Wilson,Chris Marshall,Russell Armstrong,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,11/Sep/25 10:32 AM;5e266667-8b87-4eb6-9386-71980feac557;image-20250911-093132.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10455,11/Sep/25 10:32 AM;5e266667-8b87-4eb6-9386-71980feac557;image-20250911-093204.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10454,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@29520244,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x0209792,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 14,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-09-12 06:03:14.67,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_424757865_*|*_10252_*:*_1_*:*_174675274_*|*_10354_*:*_1_*:*_1121623321_*|*_10056_*:*_1_*:*_188306,,12/Sep/25 7:03 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;see solution on [[PHX5-453] Non McCloud CARE only members - Jira|https://xps-jira.atlassian.net/browse/PHX5-453],01/Oct/25 8:37 AM;640f34fc1273131f2adfede9;See [[PHX5-453] Non McCloud CARE only members - Jira|https://xps-jira.atlassian.net/browse/PHX5-453] for details of changes,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,01/Oct/25 8:49 AM
Non McCloud CARE only members,PHX5-453,15289,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,11/Sep/25 10:25 AM,28/Nov/25 4:37 PM,,01/Oct/25 8:49 AM,Client 150 Police A to R Version 5,,,,,,,,,,,,0,Expected_Results,,,,"When a member is CARE only and not McCloud eligible (tests 13 & 14), there will not be a salary linked record but both tests are expecting this to be added
",,Andrew Wilson,Chris Marshall,Russell Armstrong,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3b081b3f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1q:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 14,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-09-12 06:02:58.11,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_424711726_*|*_10252_*:*_1_*:*_174675400_*|*_10354_*:*_1_*:*_1121918931_*|*_10056_*:*_1_*:*_130756,,"12/Sep/25 7:02 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;In {{ActiveNormalMemberInfo}} (and all four equivalents for normal/salary link info/data) - wrap the foreach in an if {{LinkedMembers}} != null .

Then in Calculate main function:

Move

{noformat}Dictionary<CalculationPensionOptionType, PensionOption> activeSalaryLinkedReformOptions = activeSalaryLinkedReformOptionsCalculator.Calculate(activeSalaryLinkedReformPreComCalculator.TotalService, allPreComPen);{noformat}

to the top so it is always run, and then wrap all the code that references salary linked objects in an 

if({{activeSalaryLinkedMemberInfo.SubStatus == InferredSubStatus.SalaryLinkageClosedDB)}}","30/Sep/25 4:25 PM;640f34fc1273131f2adfede9;Changes made

MemberInfo - added McCloud boolean. Published v9

Public Sector Calculation 

Added setting the McCloud in MemberInfo in ToMemberInfo

Added None to the McCloudOption enum

Made changes to {{PensionOptionCalculatorFactory}} to use the McCloudOption to provide the none McCloud results

Added WithoutMcCloud to Public Sector Calculation Builder (to be used in Active to Retired calculation)



Added the test {{PensionOptionCalculatorFactoryKeys}}

Used this test on the Tests where the name starts PensionOptionCalculatorFactoryKeys to make sure the correct options are to be calculated and output based on category, McCloud option and ill health type","01/Oct/25 8:36 AM;640f34fc1273131f2adfede9;Published v24 off Public Sector Calculation

Updated dependency in A>R calculation

Added section for if (activeNormalMemberInfo.McCloud == false) at line 66 to output the relevant options.

Wrapped the foreach in an if (linkedMembers != null) for ActiveNormalMemberInfo, ActiveSalaryLinkedMemberInfo, ActiveNormalMemberData and ActiveSalaryLinkedMemberData

Added a salary to the Parameters of Test 13 to ensure calculation completes without errors. Did not save as unsure what the salary input should be

Checked test 1 still processes without errors (salary parameter already exists)",,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,01/Oct/25 8:49 AM
Ill Health Test Cases - Commutation Factors - The method or operation is not implemented.,PHX5-452,15288,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,10/Sep/25 4:57 PM,19/Sep/25 1:19 PM,,19/Sep/25 1:19 PM,,,,,,,,,,,,,0,,,,,"All ill health test cases are erroring with The method or operation is not implemented. Aurora.Calculations.Functions.RetirementAdjustmentFactorExtensions.GetInterpolatedFactor.

Likely because all don’t have a retirement factor or commutation factor for their age at retirement. ",,Andrew Wilson,Russell Armstrong,Steven Wright,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,640f34fc1273131f2adfede9,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,PHX5-464,PHX5-463,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7bd6446c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x02095,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 12,PHX5 Sprint 13,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-09-12 09:37:34.442,10251_*:*_2_*:*_51502933_*|*_10250_*:*_2_*:*_211538700_*|*_10252_*:*_1_*:*_8622_*|*_10354_*:*_1_*:*_336150327_*|*_10056_*:*_1_*:*_159373158,,12/Sep/25 10:37 AM;640f34fc1273131f2adfede9;Commutation factors extended to cover back to age 18,16/Sep/25 9:21 AM;640f34fc1273131f2adfede9;Made this only about CARE2015 category - on ill health needs to look at table 1 801 instead of 2 802 for commutation factor. See linked stories for related issues on commutation factors for NPPS2006 and PPS1987,16/Sep/25 9:22 AM;640f34fc1273131f2adfede9;[~accountid:640f34fc1273131f2adfede9] Undone this as not actually what is required,"17/Sep/25 4:16 PM;640f34fc1273131f2adfede9;Change made to Public Sector Calculation module, published in v12",18/Sep/25 6:35 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Thanks [~accountid:640f34fc1273131f2adfede9]  Can we please add test case(s) to ensure this case is always tested please.,19/Sep/25 11:40 AM;640f34fc1273131f2adfede9;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Two tests cases added (Commutation Factor CARE Ill Health and Commutation Factor CARE Serious Ill Health),,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,19/Sep/25 1:19 PM
PublicSectorAccrualDoubleStrategy.GetAccruedPension Divide By Zero Error,PHX5-451,15286,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,10/Sep/25 4:54 PM,15/Sep/25 3:51 PM,,15/Sep/25 3:51 PM,,,,,,,,,,,,,0,,,,,"3 PPS Category Police Test Cases which are currently erroring all have an error “Attempted to divide by zero” in  PublicSectorAccrualDoubleStrategy.GetAccruedPension.

Police PPS 1, 3, 6 test cases affected. 

!image-20250911-153006.png|width=623,height=379,alt=""image-20250911-153006.png""!",,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,11/Sep/25 4:30 PM;bfea69ca-e7d9-488d-b01b-103621fa1516;image-20250911-153006.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10456,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@454b13c3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x04,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10354_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_65129129,,"11/Sep/25 3:40 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Update made by Andrew in Service Module, filtered to Service Builder and Public Sector Calculator. 3 PPS category test cases previously hitting this error now producing results. Can be closed. ",,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,15/Sep/25 3:51 PM
Police A>R Test 4 PPS - 38540501 - PT service - PCLS commutation,PHX5-450,15284,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,10/Sep/25 4:15 PM,17/Sep/25 9:51 AM,,15/Sep/25 3:29 PM,,,,,,,,,,,,,0,,,,,"Following input of expected results for LegacyDBPCLS, ReformDBPCLS, ReformCAREPCLS & CAREPCLS, the output results do not match the expected results

Also failing due to the same issue

*Police A>R Test 5 PPS - 8334501 - PT service - Max lump sum*
LegacyDBMaximumLumpSum, ReformDBMaximumLumpSum, ReformCAREPCLS & CAREPCLS

*Police A>R Test 7 NPPS - 38765801 - PT Service*
LegacyDBZeroLumpSum, ReformDBZeroLumpSum, ReformCAREZeroLumpSum & CAREZeroLumpSum

*Police A>R Test 8 NPPS - 48143301*
LegacyDBZeroLumpSum, ReformDBZeroLumpSum, ReformCAREZeroLumpSum & CAREZeroLumpSum

*Police A>R Test 9 NPPS - 48139301 - PT Service*
LegacyDBZeroLumpSum, ReformDBZeroLumpSum, ReformCAREZeroLumpSum & CAREZeroLumpSum

*Police A>R Test 10 NPPS - 30205001*
LegacyDBZeroLumpSum, ReformDBZeroLumpSum, ReformCAREZeroLumpSum & CAREZeroLumpSum

*Police A>R Test 11 NPPS - 39242401* 
LegacyDBZeroLumpSum, ReformDBZeroLumpSum, ReformCAREZeroLumpSum & CAREZeroLumpSum

*Police A>R Test 12 NPPS - 39245301*
LegacyDBZeroLumpSum, ReformDBZeroLumpSum, ReformCAREZeroLumpSum & CAREZeroLumpSum

*Police A>R Test 1 PPS - 48218401*

*Police A>R Test 6 PPS - 36155801*
",,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@10ba6ccf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008zr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 12,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_264775671_*|*_10252_*:*_1_*:*_77141909_*|*_10354_*:*_1_*:*_86964552_*|*_10056_*:*_1_*:*_320373,,15/Sep/25 3:29 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Tweak to code made in Public Sector Calculation module as service output was incorrect due to line 1703 showing CARE 2022 start date being 31/03/2022. Service now correct and results are slightly out. As Some tests are NPPS and some PPS that need investigating. Separating out to investigate separate issues,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,15/Sep/25 3:29 PM
Police A>R Test 3 PPS - 30290301 - No commutation,PHX5-449,15282,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,10/Sep/25 3:48 PM,17/Sep/25 9:53 AM,,17/Sep/25 9:53 AM,,,,,,,,,,,,,0,,,,,"When updating expected results, test fails with:

!image-20250910-145036.png|width=1024,height=372,alt=""image-20250910-145036.png""!

On the full output there are 3 lots of outputs for residual pension


!image-20250910-145142.png|width=230,height=250,alt=""image-20250910-145142.png""!

The results will not match expected results anyway and the 3 different amounts for residual pension are being added together to get a full residual pension of 48150.62.

This issue is also there for ReformDBZerolumpSum

For the reform CARE and standalone CARE the output is 0",,Andrew Wilson,Annabelle Stephenson,Chris Marshall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,PHX5-441,,,,,,,,,,,,,,12/Sep/25 12:38 PM;18934601-32fa-4c76-9b74-159dc94fd206;Screenshot 2025-09-12 123820.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10459,10/Sep/25 3:54 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20250910-145036.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10447,10/Sep/25 3:54 PM;5e266667-8b87-4eb6-9386-71980feac557;image-20250910-145142.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10448,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1cd1f0a2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 12,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-09-12 10:00:56.594,10251_*:*_2_*:*_1748880_*|*_10250_*:*_2_*:*_368532662_*|*_10252_*:*_1_*:*_12995_*|*_10354_*:*_1_*:*_157443933_*|*_10056_*:*_1_*:*_116984,,"12/Sep/25 11:00 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The issue here is that when we do the three initial calculations to get the Pre com values, there is no way to distinguish which pre com pen came from which initial calculation. They all just have PRECOmPen. Easiest solution here is to filter which pre com elements we send back into calculations. At the moment we are adding them all to the same list. I think we should be more selective. It is only the CARE and ReformCARE that we need to be adding on. So I would:

instead of having {{allPreComPen}}, just ensure that each of:

{{activeSalaryLinkedReformPreComPen}}

{{activeSalaryLinkedLegacyPreComPen}}

{{activeNormalPreComPen}}

have both care pre com pens, and then send these into the corresponding final part of the calculation.","12/Sep/25 12:28 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] I think I have fixed this, but of course the results i’m getting still do not match the expected results for various other reasons, so it is hard to know if i’m pulling through all of the right data.

As you suggested, I removed reference to allPreComPen altogether, and replaced the instances where that was a calc input with one of the 3 relevant PreCom lists.  We are now getting a single pension value where we were previously getting 3","12/Sep/25 12:38 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;change brought through to Calculate and saved. snip from test 3 attached, showing now only 1 residual pension value",12/Sep/25 1:09 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;You can’t just send through the existing values - that would be the same as running the whole calc. The reason for splitting it up was so that we had access to both CARE pre com figures so could send both of those back through into a calculation. We need to ensure that the CARE pre com figures are added to each of the pre com lists before sending them back in.,"12/Sep/25 5:06 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I’ve reversed the change I made on calculate.  Will revisit on Monday as cannot get my head around this now.

Notes to remind myself on Monday:

What I do know, is that {{activeSalaryLinkedReformPreComCalculator}} looks at full service from DJS to calc date, CARE start date is 2015, anything prior is DB.  {{activeSalaryLinkedLegacyPreComCalculator}} also looks at the full history but with CARE start date in 2022, DB for anything prior.  {{activeNormalPreComCalculator}} looks only at the active CARE service from 2022 to calc date (no DB).

But we need the pre-com elements we get as a result of these calculators to include CAREPreCom (2022 - 2024) and ReformCAREPreCom (2015 - 2024) ??? or at least those need to be passed back into the OptionsCalculators with whichever other relevant pre-com elements?","16/Sep/25 4:54 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;{noformat}public ActiveToRetiredResult CalculateWithInputs(ReferenceData globalReference, ClientReferenceData clientReference)
   {
 
    ActiveToRetiredResult result = new ActiveToRetiredResult();
 
    decimal salaryToUseForNowUntilWeGetAnFPPOverride = 0;
 
    List<Aurora.Model.Client.SalaryHistory> pensionableSalaryList = Member.SalaryHistory
    .Where(x => x.SalaryType.Type == ""PENSIONABLE"")
    .ToList();
 
    if (Member.SalaryHistory.Any())
            {
                salaryToUseForNowUntilWeGetAnFPPOverride = pensionableSalaryList.OrderByDescending(x => x.EffectiveFrom).First().Amount;
                Log.Debug($""salaryToUseForNowUntilWeGetAnFPPOverride: {salaryToUseForNowUntilWeGetAnFPPOverride}"");
            }
 
    //TODO: FPP overrride needs to come from params
    Parameters parameters = new Parameters { FppOverride = salaryToUseForNowUntilWeGetAnFPPOverride };
 
             IllHealthType illHealth = Parameters.SeriousIllHealthRetirement ? IllHealthType.HigherTier : Parameters.IllHealthRetirement ? IllHealthType.LowerTier : IllHealthType.None;
    
             //InterimValues.Add(""ClientReferenceData"", ClientReferenceData);
             //InterimValues.Add(""GlobalReferenceData"", GlobalReferenceData);
             //Log.Debug($""SchemeReferenceData, {SchemeReferenceData.AsJson()}"");
    //Log.Debug($""ClientReferenceData, {ClientReferenceData.AsJson()}"");
    List<ElementValue> reformPreComPen = new List<ElementValue>();
    List<ElementValue> legacyPreComPen = new List<ElementValue>();
 
    IMemberInfo activeNormalMemberInfo = ActiveNormalMemberInfo(Member, LinkedMembers);
    MemberData activeNormalMemberData = ActiveNormalMemberData(Member, LinkedMembers);
    IMemberInfo activeSalaryLinkedMemberInfo = ActiveSalaryLinkedMemberInfo(Member, LinkedMembers);
    MemberData activeSalaryLinkedMemberData = ActiveSalaryLinkedMemberData(Member, LinkedMembers);
 
   // InterimValues.Add(""activeNormalMemberInfo"",activeNormalMemberInfo);
   // InterimValues.Add(""activeSalaryLinkedMemberInfo"",activeSalaryLinkedMemberInfo);
 
    IActivePreComPenCalculator activeNormalPreComCalculator = new PublicSectorCalculationBuilder(activeNormalMemberInfo, activeNormalMemberData, globalReference, ConvertToSchemeReferenceData(clientReference), CategoryReferenceData, illHealth, Parameters.DateOfRetirement)
         .WithLegacyRemedy()
         .WithParameters(parameters)
         .BuildActivePreComPenCalculator();
 
    List<ElementValue> activeNormalPreComPen = activeNormalPreComCalculator.Calculate();    //produces DB and CARE results for the post22 active record
			List<ElementValue> activeNormalCAREPreComPen = activeNormalPreComPen.Where(x => x.Key == ""CAREPreCom"").ToList();	//CARE only
 
    reformPreComPen.AddRange(activeNormalCAREPreComPen);
    legacyPreComPen.AddRange(activeNormalCAREPreComPen);
 
    IActivePreComPenCalculator activeSalaryLinkedLegacyPreComCalculator = new PublicSectorCalculationBuilder(activeSalaryLinkedMemberInfo, activeSalaryLinkedMemberData, globalReference, ConvertToSchemeReferenceData(clientReference), CategoryReferenceData, illHealth, Parameters.DateOfRetirement)
         .WithLegacyRemedy()
         .WithParameters(parameters)
         .BuildActivePreComPenCalculator();
 
    List<ElementValue> activeSalaryLinkedLegacyPreComPen = activeSalaryLinkedLegacyPreComCalculator.Calculate();    //produces DB and CARE results for the salary-link record, on legacy basis
	List<ElementValue> activeSalaryLinkedLegacyDBPreComPen = activeSalaryLinkedLegacyPreComPen.Where(x => x.Key == ""PENPreCom"").ToList();	//DB only

    legacyPreComPen.AddRange(activeSalaryLinkedLegacyDBPreComPen);
 
    IActivePreComPenCalculator activeSalaryLinkedReformPreComCalculator = new PublicSectorCalculationBuilder(activeSalaryLinkedMemberInfo, activeSalaryLinkedMemberData, globalReference, ConvertToSchemeReferenceData(clientReference), CategoryReferenceData, illHealth, Parameters.DateOfRetirement)
         .WithCARERemedy()
         .WithParameters(parameters)
         .BuildActivePreComPenCalculator();
 
    List<ElementValue> activeSalaryLinkedReformPreComPen = activeSalaryLinkedReformPreComCalculator.Calculate();    //produces DB and CARE results for the salary-link record, on reform basis

			foreach (ElementValue element in activeSalaryLinkedReformPreComPen)		//rename CAREPreCom elements as ReformCAREPreCom
			{
				if (element.Key == ""CAREPreCom"") { element.Key = ""ReformCAREPreCom""; }
				else { element.Key = element.Key; }
			}

    reformPreComPen.AddRange(activeSalaryLinkedReformPreComPen);
 
    IRetirementCalculator activeNormalLegacyOptionsCalculator = new PublicSectorCalculationBuilder(activeNormalMemberInfo, activeNormalMemberData, globalReference, ConvertToSchemeReferenceData(clientReference), CategoryReferenceData, illHealth, Parameters.DateOfRetirement)
       .WithLegacyRemedy()
       .WithParameters(parameters)
       .BuildActiveToRetired();
 
    Dictionary<CalculationPensionOptionType, PensionOption> activeNormalLegacyOptions = activeNormalLegacyOptionsCalculator.Calculate(activeNormalPreComCalculator.TotalService, legacyPreComPen);

    IRetirementCalculator activeNormalReformOptionsCalculator = new PublicSectorCalculationBuilder(activeNormalMemberInfo, activeNormalMemberData, globalReference, ConvertToSchemeReferenceData(clientReference), CategoryReferenceData, illHealth, Parameters.DateOfRetirement)
       .WithCARERemedy()
       .WithParameters(parameters)
       .BuildActiveToRetired();
 
    Dictionary<CalculationPensionOptionType, PensionOption> activeNormalReformOptions = activeNormalReformOptionsCalculator.Calculate(activeNormalPreComCalculator.TotalService, reformPreComPen);
 
    //InterimValues.Add(""activeNormalOptions"", activeNormalOptions);

    IRetirementCalculator activeSalaryLinkedLegacyOptionsCalculator = new PublicSectorCalculationBuilder(activeSalaryLinkedMemberInfo, activeSalaryLinkedMemberData, globalReference, ConvertToSchemeReferenceData(clientReference), CategoryReferenceData, illHealth, Parameters.DateOfRetirement)
       .WithLegacyRemedy()
       .WithParameters(parameters)
       .BuildActiveToRetired();
 
    Dictionary<CalculationPensionOptionType, PensionOption> activeSalaryLinkedLegacyOptions = activeSalaryLinkedLegacyOptionsCalculator.Calculate(activeSalaryLinkedLegacyPreComCalculator.TotalService, legacyPreComPen);
 
    //InterimValues.Add(""activeSalaryLinkedLegacyOptions"", activeSalaryLinkedLegacyOptions);
 
    IRetirementCalculator activeSalaryLinkedReformOptionsCalculator = new PublicSectorCalculationBuilder(activeSalaryLinkedMemberInfo, activeSalaryLinkedMemberData, globalReference, ConvertToSchemeReferenceData(clientReference), CategoryReferenceData, illHealth, Parameters.DateOfRetirement)
       .WithCARERemedy()
       .WithParameters(parameters)
       .BuildActiveToRetired();
 
    Dictionary<CalculationPensionOptionType, PensionOption> activeSalaryLinkedReformOptions = activeSalaryLinkedReformOptionsCalculator.Calculate(activeSalaryLinkedReformPreComCalculator.TotalService, reformPreComPen);
 
    //InterimValues.Add(""activeSalaryLinkedReformOptions"", activeSalaryLinkedReformOptions);
 
    Dictionary<CalculationPensionOptionType, PensionOption> allActiveSalaryLinkOptions = new Dictionary<CalculationPensionOptionType, PensionOption>();
 
    foreach (KeyValuePair<CalculationPensionOptionType, PensionOption>  kvp in activeSalaryLinkedLegacyOptions)
    {
     allActiveSalaryLinkOptions.Add(kvp.Key, kvp.Value);
    }
 
    foreach (KeyValuePair<CalculationPensionOptionType, PensionOption>  kvp in activeSalaryLinkedReformOptions)
    {
     allActiveSalaryLinkOptions.Add(kvp.Key, kvp.Value);
    }
    
    Dictionary<CalculationPensionOptionType, PensionOption> allActiveNormalOptions = new Dictionary<CalculationPensionOptionType, PensionOption>();
 
    foreach (KeyValuePair<CalculationPensionOptionType, PensionOption>  kvp in activeNormalLegacyOptions)
    {
     allActiveNormalOptions.Add(kvp.Key, kvp.Value);
    }
 
    foreach (KeyValuePair<CalculationPensionOptionType, PensionOption>  kvp in activeNormalReformOptions)
    {
     allActiveNormalOptions.Add(kvp.Key, kvp.Value);
    }
 
    //TODO: remove conversion when we can use CalculationPensionOptionType in calcuat and can republish public sector code
    result.PensionOptions.Add(activeNormalMemberInfo.AuroraId, allActiveNormalOptions); //SW commented out see below line
    result.PensionOptions.Add(activeSalaryLinkedMemberInfo.AuroraId, allActiveSalaryLinkOptions);
    //result.PensionOptions.Add($""{Member.AuroraId}_Legacy"", Convert(activeNormalOptions)); //SW added line - added Legacy after aurora ID to fix dictionary duplication error in test case. 
 
    return result;
   }{noformat}

Proposed code change to {{CalculateWithInputs}} within A-R (above).

{noformat}				if (carePreComPen > 0)
				{
					preComElementValues.Add(
						new ElementValue
						{
							Key = KeyPreComConstants.CAREPreCom,	//AS amend from .Cash
							Value = carePreComPen
						}
					);
				}{noformat}

Snippet of proposed change to the end of {{CalculateRetirementElements}} in Public Sector calc (above)","16/Sep/25 5:47 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;We’ve introduced reformPreComPen and legacyPreComPen as element value lists, to replace the original allPreComPen.  Following through the code extract below, the process is as follows:

* {{activeNormalPreComPen}}is calculated on the active post-22 record.  This gives us 2 values: a DBPreCom made up of service x salary / 60; and a CAREPreCom made up of the accrued care pension calculated from scratch
** We do not require the DB value, so only the CARE figure is sent through to both reformPreComPen and legacyPreComPen 
* {{activeSalaryLinkedLegacyPreComPen}} is calculated on the salary-linked record on a legacy basis. We get 2 values: DBPreCom for service up to 2022 ; and CAREPreCom for 22-24, calculated from scratch
** We only require the DB value, as any CARE benefits under the legacy option would come from the active record.  The DB figure is sent to legacyPreComPen 
* {{activeSalaryLinkedReformPreComPen}} is calculated on the salary-linked record on a reform basis.  We get 2 values: DBPreCom for service up to 2015; and CAREPreCom for 2015-24
** We want both of these values, but we rename CAREPreCom to ReformCAREPreCom before adding to reformPreComPen 



reformPreComPen now contains the following:

CAREPreCom (2022-24)

DBPreCom (DCPS - 2015)

ReformCAREPreCom (2015-24)



and legacyPreComPen contains:

CAREPreCom (2022-24)

DBPreCom (DCPS - 2024)","16/Sep/25 6:08 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452]  I’ve copied my changes into the A-R code, but I commented out one of the instances of adding results to lists using KeyValuePair (as we know this will currently error while we wait for the latest public sector changes).  I intend to add that back in following the next publish.  I also haven’t yet updated from <CalculationPensionOptionType to <InternalCalc… within A-R, but this will be a quick update once public sector is published.

*Importantly* - I made a tiny tweak to the Public Sector code itself, but I’m not completely confident on it.  Snippet in one of my comments below, but the change is around line 540, from .Cash to .CAREPreCom.  I couldn’t fully get my head around why it was .Cash to begin with so this may be a problematic change, however it didn’t knock out any test cases.","17/Sep/25 6:33 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Cash was there because we need cash. It was incorrectly called care in the first place. I have corrected cash to read cash, and the care code to output an interim element for care",,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,17/Sep/25 9:53 AM
Ill Health Retirement - Error in Retirement Factor Code,PHX5-448,15241,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,10/Sep/25 1:56 PM,22/Sep/25 2:27 PM,,22/Sep/25 2:27 PM,,,,,,,,,,,,,0,Expected_Results,,,,Test case IH members are under age 55 so no retirement factor available. Causing error in interpolation code. Steven to investigate whether ill health members need to bypass retirement factor code. ,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,PHX5-456,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@55dfe73e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x09,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10354_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_99149,,,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,22/Sep/25 2:27 PM
Agree element Keys for Legacy and Remedy elements,PHX5-447,15239,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,10/Sep/25 12:45 PM,28/Nov/25 5:21 PM,,07/Oct/25 11:02 AM,Client 150 Police A to D Version 1,Client 150 Police A to R Version 5,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,0,Specification,,,,"The code currently has:

{noformat}public static class KeyDeferredElementConstants
{
    public const string DeferredDBPension = ""PEN"";
    public const string DeferredCAREPension = ""CARE"";
}{noformat}

the spec has:

* Legacy option DB Pension = PEN
* Legacy option Cash = RA
* Reform option DB Pension = MCPN
* Reform option Cash = MCRA
* Reform Pre 2022 CARE = MCCR
* CARE Post 2022 = CARE

We will need to update the code for all of these.",,Andrew Wilson,Matt Lilwall,Russell Armstrong,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,02/Oct/25 7:01 AM;5796a187-7241-414b-bea0-2d22260a9bed;Phase 5 expected deferred elements.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10575,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5c3ab41b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzg,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 15,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-10-01 10:35:09.381,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_85384777_*|*_10252_*:*_1_*:*_75927259_*|*_10354_*:*_1_*:*_7843518_*|*_10056_*:*_1_*:*_1796892730,,"01/Oct/25 11:35 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The accrued keys are reliant on the {{KeyAccruedPensionConstants}} keys. Which currently do not make a distinction for legacy/reform etc, so we will need to ensure that this code is also updated","02/Oct/25 7:01 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]  Can you check my understanding of the deferred element keys we would expected to be producing for the various category/mccloud status combinations.

[^Phase 5 expected deferred elements.xlsx]

","02/Oct/25 11:02 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] , this is correct for the Police schemes. This information isn’t present in the Fire spec, so I will go back to admin and ask them to add this.","03/Oct/25 6:52 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Deferred Element Strategies have been created:

{noformat}public interface IDeferredElementStrategy
	{
	
	    string DeferredElementKey { get; set; }
	
	    ActiveToDeferredElementValue GetElementValue(List<ElementValue> accruedElementValues);
	}
	
	public abstract class BaseDeferredElementStrategy : BaseStrategy
	{
	    public string DeferredElementKey { get; set; }
	
	    public BaseDeferredElementStrategy(string deferredElementKey, IMemberInfo memberInfo, McCloudOption mcCloudOption, Context context = null) : base(memberInfo, mcCloudOption, context)
	    {
	        DeferredElementKey = deferredElementKey;
	    }
	}
	
	public class DBPensionDeferredElementStrategy : BaseDeferredElementStrategy, IDeferredElementStrategy
	{
	    public DBPensionDeferredElementStrategy(string deferredElementKey, IMemberInfo memberInfo, McCloudOption mcCloudOption, Context context = null) : base(deferredElementKey, memberInfo, mcCloudOption, context)
	    {
	
	    }
	    public ActiveToDeferredElementValue GetElementValue(List<ElementValue> accruedElementValues)
	    {
	        if (accruedElementValues.GetValue(KeyAccruedPensionConstants.AccruedDBPension) > 0)
	        {
	            return
	                new ActiveToDeferredElementValue
	                {
	                    Key = DeferredElementKey,
	                    Value = accruedElementValues.GetValue(KeyAccruedPensionConstants.AccruedDBPension),
	                    SpouseValue = ((accruedElementValues.GetValue(KeyAccruedPensionConstants.AccruedDBPension)
	                                    - accruedElementValues.GetValue(KeyAccruedPensionConstants.PSOPensionDebit)) * 0.5m).Round(2)
	                }
	            ;
	        }
	        else
	        {
	            return new ActiveToDeferredElementValue();
	        }
	    }
	}
	
	public class DBCashDeferredElementStrategy : BaseDeferredElementStrategy, IDeferredElementStrategy
	{
	    public DBCashDeferredElementStrategy(string deferredElementKey, IMemberInfo memberInfo, McCloudOption mcCloudOption, Context context = null) : base(deferredElementKey, memberInfo, mcCloudOption, context)
	    {
	
	    }
	    public ActiveToDeferredElementValue GetElementValue(List<ElementValue> accruedElementValues)
	    {
	        if (accruedElementValues.GetValue(KeyAccruedPensionConstants.AccruedDBCash) > 0)
	        {
	            return
	                new ActiveToDeferredElementValue
	                {
	                    Key = DeferredElementKey,
	                    Value = accruedElementValues.GetValue(KeyAccruedPensionConstants.AccruedDBCash),
	                    SpouseValue = (accruedElementValues.GetValue(KeyAccruedPensionConstants.AccruedDBCash) * 0.5m).Round(2)
	                }
	            ;
	        }
	        else
	        {
	            return new ActiveToDeferredElementValue();
	        }
	    }
	}
	
	public class CAREPensionDeferredElementStrategy : BaseDeferredElementStrategy, IDeferredElementStrategy
	{
	    public CAREPensionDeferredElementStrategy(string deferredElementKey, IMemberInfo memberInfo, McCloudOption mcCloudOption, Context context = null) : base(deferredElementKey, memberInfo, mcCloudOption, context)
	    {
	
	    }
	    public ActiveToDeferredElementValue GetElementValue(List<ElementValue> accruedElementValues)
	    {
	        if (accruedElementValues.GetValue(KeyAccruedPensionConstants.AccruedCAREPension) > 0)
	        {
	            return
	                new ActiveToDeferredElementValue
	                {
	                    Key = DeferredElementKey,
	                    Value = accruedElementValues.GetValue(KeyAccruedPensionConstants.AccruedCAREPension),
	                    SpouseValue = (accruedElementValues.GetValue(KeyAccruedPensionConstants.AccruedCAREPension) * 0.5m).Round(2)
	                }
	            ;
	        }
	        else
	        {
	            return new ActiveToDeferredElementValue();
	        }
	    }
	}{noformat}

A factory has been created to select the correct strategy based on category and McCloud option

{noformat}public static List<IDeferredElementStrategy> DeferredElementFactory(IMemberInfo memberInfo, McCloudOption mcCloudOption)
	    {
	        List<IDeferredElementStrategy> deferredElementStrategies = new List<IDeferredElementStrategy>();
	
	        switch (memberInfo.Category)
	        {
	            case ""CARE2015"":
	            case ""CARE2015MOD"":
	            case ""CARE2015RET"":
	                deferredElementStrategies.Add(new CAREPensionDeferredElementStrategy( KeyDeferredElementConstants.Post22CAREPension, memberInfo, mcCloudOption));
	                break;
	            case ""NFPS2006"":
	            case ""NPPS2006"":
	            case ""NFPS2006MOD"":
	            case ""NFPS2006RET"":
	                if (mcCloudOption == McCloudOption.Legacy)
	                {
	                    deferredElementStrategies.Add(new DBPensionDeferredElementStrategy(KeyDeferredElementConstants.LegacyDBPension, memberInfo, mcCloudOption));
	                    deferredElementStrategies.Add(new DBCashDeferredElementStrategy( KeyDeferredElementConstants.LegacyDBCash, memberInfo, mcCloudOption));
	                }
	                else if (mcCloudOption == McCloudOption.Reform)
	                {
	                    deferredElementStrategies.Add(new DBPensionDeferredElementStrategy(KeyDeferredElementConstants.ReformDBPension, memberInfo, mcCloudOption));
	                    deferredElementStrategies.Add(new DBCashDeferredElementStrategy( KeyDeferredElementConstants.ReformDBCash, memberInfo, mcCloudOption));
	                }
	                else
	                {
	                    deferredElementStrategies.Add(new DBPensionDeferredElementStrategy(KeyDeferredElementConstants.LegacyDBPension, memberInfo, mcCloudOption));
	                    deferredElementStrategies.Add(new DBCashDeferredElementStrategy( KeyDeferredElementConstants.LegacyDBCash, memberInfo, mcCloudOption));
	                }
	                break;
	            case ""PPS1987"":
	            case ""FPS1992"":
	                if (mcCloudOption == McCloudOption.Legacy)
	                {
	                    deferredElementStrategies.Add(new DBPensionDeferredElementStrategy(KeyDeferredElementConstants.LegacyDBPension, memberInfo, mcCloudOption));
	                }
	                else if (mcCloudOption == McCloudOption.Reform)
	                {
	                    deferredElementStrategies.Add(new DBPensionDeferredElementStrategy(KeyDeferredElementConstants.ReformDBPension, memberInfo, mcCloudOption));
	                }
	                else
	                {
	                    deferredElementStrategies.Add(new DBPensionDeferredElementStrategy(KeyDeferredElementConstants.LegacyDBPension, memberInfo, mcCloudOption));
	                }
	                break;
	            default:
	                break;
	        }
	
	        return deferredElementStrategies;
	    }{noformat}

And code has been added to the Deferred calculation to call these:

{noformat}public IEnumerable<ActiveToDeferredElementValue> CalculateDeferredElementValues(List<ElementValue> accruedElementValues)
	    {
	        List<ActiveToDeferredElementValue> activeToDeferredElementValues = new List<ActiveToDeferredElementValue>();
	
	        foreach (IDeferredElementStrategy deferredElementStrategy in DeferredElementStrategies)
	        {
	            ActiveToDeferredElementValue activeToDeferredElementValue = deferredElementStrategy.GetElementValue(accruedElementValues);
	            if (activeToDeferredElementValue.Value > 0)
	            {
	                activeToDeferredElementValues.Add(activeToDeferredElementValue);
	            }
	        }
	        
	        return activeToDeferredElementValues;
	        
	    }{noformat}",03/Oct/25 6:52 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Test cases have been added as per the spreadsheet attached to this ticket ,,,,,,,,,,,,,,,,,,,,13853,PHX5-220,Police - Active to Deferred,Done,07/Oct/25 11:02 AM
Review test cases with expected outcome values that are failing to match,PHX5-445,15233,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,10/Sep/25 11:38 AM,03/Dec/25 10:33 AM,,03/Dec/25 10:33 AM,,,,,,,,,,,,,0,TEST_CASES,,,,,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@259d6c0f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00lfr:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_7257328044,,,,,,,,,,,,,,,,,,,,,,,,,,13853,PHX5-220,Police - Active to Deferred,Done,03/Dec/25 10:33 AM
Investigate initial errors with test cases,PHX5-444,15231,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,Russell Armstrong,640f34fc1273131f2adfede9,10/Sep/25 11:37 AM,16/Sep/25 10:37 AM,,16/Sep/25 10:37 AM,,,,,,,,,,,,,0,,,,,,,Russell Armstrong,,,,,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6247132f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008zi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 12,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10354_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_169379651,,12/Sep/25 10:40 AM;640f34fc1273131f2adfede9;Commutation factors extended back to age 18,,,,,,,,,,,,,,,,,,,,,,,,13853,PHX5-220,Police - Active to Deferred,Done,16/Sep/25 10:37 AM
Export A>R to new TD version of Police Data.,PHX5-443,15229,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,10/Sep/25 11:01 AM,17/Sep/25 9:52 AM,,15/Sep/25 10:33 AM,,,,,,,,,,,,,0,,,,,Scheme Factors also need to be exported and imported to new client. Client ID 1204,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@e0cf952,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008zy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 12,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_4050_*|*_10252_*:*_1_*:*_416524881_*|*_10354_*:*_1_*:*_13757085_*|*_10056_*:*_1_*:*_49521,,10/Sep/25 11:02 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Completed. ,,,,,,,,,,,,,,,,,,,,,,,,13854,PHX5-221,Police - Active to Retirement,Done,15/Sep/25 10:33 AM
Implement workaround for Global and Scheme Reference Data at client level to be able to debug in VScode.,PHX5-442,15227,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,10/Sep/25 10:59 AM,24/Sep/25 4:14 PM,,22/Sep/25 9:04 AM,,,,,,,,,,,,,0,TEST_CASES,,,,,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@53ddd135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x02096i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 13,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_3789_*|*_10252_*:*_1_*:*_2641_*|*_10354_*:*_1_*:*_800201722_*|*_10056_*:*_1_*:*_9571,,19/Sep/25 5:07 PM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Copies of test cases created and named (copy for export). Text files of filtered GlobalRefData and ClientRefData produced and added to the test cases.,,,,,,,,,,,,,,,,,,,,,,,,15555,PHX5-490,Calculate Overheads,Done,22/Sep/25 9:04 AM
Review test cases with expected outcome values that are failing to match.,PHX5-441,15225,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,10/Sep/25 10:57 AM,17/Sep/25 9:51 AM,,15/Sep/25 3:27 PM,,,,,,,,,,,,,0,,,,,,,Chris Marshall,Steven Wright,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,PHX5-449,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@27485062,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008v,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 12,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-09-15 14:27:19.635,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_433861059_*|*_10252_*:*_1_*:*_2184_*|*_10354_*:*_1_*:*_14326074_*|*_10056_*:*_1_*:*_6366,,"15/Sep/25 3:27 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;All tests reviewed PPS tests are close to expected results, NPPS needs more investigation and there are 2 tickets to look into IH and no mccloud members",,,,,,,,,,,,,,,,,,,,,,,,13854,PHX5-221,Police - Active to Retirement,Done,15/Sep/25 3:27 PM
CARE pension options not producing values - Investigate,PHX5-440,15223,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,10/Sep/25 10:56 AM,18/Sep/25 2:22 PM,,18/Sep/25 10:35 AM,,,,,,,,,,,,,0,,,,,,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@72e93d93,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x02092i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 12,PHX5 Sprint 13,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_63174345_*|*_10252_*:*_1_*:*_613516553_*|*_10354_*:*_1_*:*_13218571_*|*_10056_*:*_1_*:*_5279,,,,,,,,,,,,,,,,,,,,,,,,,,15213,PHX5-435,Issues From Testing Batch 1,Done,18/Sep/25 10:35 AM
Debug initial code errors in A>R test cases. ,PHX5-439,15221,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,10/Sep/25 10:55 AM,16/Sep/25 10:35 AM,,16/Sep/25 10:35 AM,,,,,,,,,,,,,0,,,,,,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@66547c04,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 12,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10354_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_26565,,,,,,,,,,,,,,,,,,,,,,,,,,13854,PHX5-221,Police - Active to Retirement,Done,16/Sep/25 10:35 AM
Ill Health Retirement Cases - Does the Calculate parameter input work? Investigate stack trace error for retirement factors,PHX5-438,15219,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,10/Sep/25 10:53 AM,17/Sep/25 9:51 AM,,15/Sep/25 10:37 AM,,,,,,,,,,,,,0,,,,,,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1f2c823,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008zv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 12,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_3730_*|*_10252_*:*_1_*:*_417557941_*|*_10354_*:*_1_*:*_13451880_*|*_10056_*:*_1_*:*_24875,,,,,,,,,,,,,,,,,,,,,,,,,,13854,PHX5-221,Police - Active to Retirement,Done,15/Sep/25 10:37 AM
Add expected outcome results to test cases,PHX5-437,15217,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,10/Sep/25 10:51 AM,17/Sep/25 9:52 AM,,17/Sep/25 9:52 AM,,,,,,,,,,,,,0,,,,,,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@13d4f285,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 12,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_416274245_*|*_10252_*:*_1_*:*_1109716_*|*_10354_*:*_1_*:*_13593053_*|*_10056_*:*_1_*:*_8834,,,,,,,,,,,,,,,,,,,,,,,,,,13854,PHX5-221,Police - Active to Retirement,Done,17/Sep/25 9:52 AM
Update client level code to remove PensionOptionType convert,PHX5-436,15215,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,10/Sep/25 10:46 AM,17/Sep/25 9:52 AM,,15/Sep/25 10:33 AM,,,,,,,,,,,,,0,,,,,,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,PHX5-432,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@62789984,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x0000087,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 12,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_3125_*|*_10252_*:*_1_*:*_417253914_*|*_10354_*:*_1_*:*_13986030_*|*_10056_*:*_1_*:*_10405,,,,,,,,,,,,,,,,,,,,,,,,,,13854,PHX5-221,Police - Active to Retirement,Done,15/Sep/25 10:33 AM
Issues From Testing Batch 1,PHX5-435,15213,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,10/Sep/25 10:07 AM,10/Sep/25 10:07 AM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2742e030,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ldr:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,10/Sep/25 10:07 AM
Target Lump Sum - 2006 Inverse Commutation,PHX5-434,15209,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,09/Sep/25 12:19 PM,17/Sep/25 9:52 AM,,17/Sep/25 9:52 AM,,,,,,,,,,,,,0,,,,,"Specifically for 2006 schemes, we need a target cash function for the PCLSAccruedCashDBPensionOptionStrategy, however due to the nature of the calculation method, this will need to use InversePostCommutationPension",,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,PHX5-423,,,,,,PHX5-460,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@534ce88b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x0000083,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 11,PHX5 Sprint 12,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_501222161_*|*_10252_*:*_1_*:*_3898_*|*_10354_*:*_1_*:*_6887_*|*_10056_*:*_1_*:*_11799418,,09/Sep/25 3:42 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;TargetCashInverseDBPensionOptionStrategy created (and PCLSAccruedCashPensionOptionStrategy deleted),"09/Sep/25 6:22 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;With the absence of actual test cases, I think I’m happy we are covering what we can here.  

The new function takes the difference between the maximum cash from the inputs and the target cash (ie. the amount of cash being given up for additional pension), and passes this into the InversePostCommutationPension function to calculate the inversely commuted pension to be added to the pre-com.  Min() checks are in place to ensure the target doesn’t exceed the maximum or the LSA, and a test to back this up.  Not much else to test that I can think of.

*One thing to note is that the CommutedPensionValues on the Pension Option output are negative, as are calculated on the difference between pre- and post-com elements.  We had a similar issue with PIE global code.  We should find out from admin if this is a problem, or perhaps that comes at their testing stage?* [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] do you have any insight on this? ",15/Sep/25 10:50 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Creating new ticket for the negative commuted values.,,,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,17/Sep/25 9:52 AM
Target Lump Sum - DB Scheme Maximum,PHX5-433,15208,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,09/Sep/25 12:19 PM,12/Dec/25 10:00 AM,,03/Dec/25 6:39 AM,Client 172 Fire A to R Version 3,Client 176 Police A to R Version 4,,,,,,,,,,,0,,,,,"For 1987 PPS, we need information on how to calculate the target lump sum when we have the DB PCLS and the DB Scheme Maximum. We have a target strategy for DB PCLS set up (simple case, no taxation to consider), but I think need to know when in the calc process the target comes in",,Annabelle Stephenson,,,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,PHX5-423,,,,,,PHX5-545,,,27/Nov/25 5:40 PM;18934601-32fa-4c76-9b74-159dc94fd206;image-20251127-173340.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/12355,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2daad9b2,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i0009,,,"DB target cash coded to allow for calculation of tax charge, where target cash > DB PCLS maximum.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 23,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10281_*:*_1_*:*_1988230921_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_263700076_*|*_10252_*:*_1_*:*_72623845_*|*_10354_*:*_2_*:*_524830614_*|*_10056_*:*_1_*:*_4334923629,,29/Oct/25 3:28 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;LSA has been tabled for now.  Can we proceed with this now?  Or are there still questions on where the tax comes in?,"04/Nov/25 4:00 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I have set up the strategy for the simple case under linked ticket 545.  This ticket is regarding how the Scheme Maximum cash method comes in, when a member wants a target level of cash.  There is no guidance on this in any of the specs.  We have asked admin for a case to check against (see attached email) but they don’t yet have any available.  Therefore I think this is blocked until they can advise.

To be clear: we +are+ able to produce target cash and post-comm pension results for PPS, but using only the simple method for PCLS rather than the Scheme Maximum method.  Admin may confirm that this is all that we need, in which case this ticket becomes obsolete.",06/Nov/25 5:19 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Since the spec change saying CARE isn’t included in MaxLumpSum calc - does that change anything here?  Is it possible to get lump sum after tax to = target?  And is it still a given (for my made up strategy) that scheme max would be higher than pcls?,"27/Nov/25 2:59 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Note to self: the main {{SchemeMaximumDBPensionOptionStrategy}} (not target version) also needs some tidying up, as still calculates care cash and post-comm values, but just doesn’t do anything with them.","27/Nov/25 5:40 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Admin response regarding calculation of target using Scheme Max cash method (where tax is deducted from lump sum) : 

!image-20251127-173340.png|width=669,alt=""image-20251127-173340.png""!

We need to work backwards to get the gross cash amount that will result in {{lumpSumAfterTax}} = target value.  I’ve done this in excel.  We need a new function that will use my logic to calculate the gross lump sum based on a chosen target value.

In line with my original thoughts, April has confirmed that if the target cash is less than the PCLS cash amount (not taxable), then we essentially don't need to worry about this Scheme Max version, as the gross and net cash will be equal (gross = net = target).  So it might make sense to have an all-in-one target function for this scheme as I’d originally planned, that allows for both calc types, rather than running two types of target calcs.","27/Nov/25 5:42 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Gross lump sum = (dbTargetCash - 2*dbPreCom) / (0.7 - 2/CCF)

(result of working {{LumpSumAfterTax}} function backwards from {{lumpSumAfterTax}} = target value)

This is horribly unclear though so don’t write it like this!  Can I go through step by step as I did in my working, assigning values for relevant variables?  Or using existing functions in some kind of reverse way?  Need to think about this as I go","28/Nov/25 4:45 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+Coding changes:+

* {{LumpSumBeforeTax}} added to *Public Sector Functions*.  This calculates what the member’s +gross+ lump sum would be, given that we want the +net+ lump sum (after tax) = target lump sum.  I got the equation by working backwards through the {{LumpSumAfterTax}} function.
* {{WithTargetCash}} added to {{IPublicSectorCalculationBuilder}} in *Public Sector Calculation* 
* Removed {{PCLSDBTargetPensionOptionStrategy}} from *Public Sector Calculation* (being replaced by {{DBTargetPensionOptionStrategy}}, which existed as a skeleton function already but wasn’t being used).  Also updated test function {{TargetPCLSDBPensionOptionStrategy}} to use the new strategy (and cleared some other test functions out that aren’t being used).  
* Removed {{SchemeMaximumCAREPensionOptionStrategy}} as this is not a relevant strategy, and cleaned up {{SchemeMaximumDBPensionOptionStrategy}} as it was still referencing CARE (but not using it, so hasn’t made any changes to final values)
* New strategy {{DBTargetPensionOptionStrategy}} calculates the two maximum DB lump sums using {{PCLS}} and {{MaxLumpSum}} functions.  In line with logic confirmed by April in the below comment:
** where the target cash input is +less than+ the DBPCLS (the “simple case”), we know there is no tax due so dbCash = target cash, and post-comm pension is calculated based on that;
** where the target cash is +greater than+ the DBPCLS but +less than+ the SchemeMaximum PCLS, we know that there is a tax charge due.  We use our new function {{LumpSumBeforeTax}} to determine the gross lump sum that would result in a net lump sum of the target cash value.  Post-commutation pension is calculated based on this gross lump sum, both of which are then passed through {{LumpSumAfterTax}} to return the net db cash ( = target cash);
*** There is a warning message that is logged if {{(lumpSumAfterTax != DBTargetCash)}}.  To my knowledge, this would only occur as a result of rounding differences.  Given that we don’t have any target cash test cases to work from or test against, this feels sufficient warning until admin can tell us otherwise.
** where the target cash is +greater than+ both DBPCLS and SchemeMaximum PCLS, a warning message is returned stating this, along with cash = 0, and post-com pension = pre-com pension.
* {{PensionOptionCalculatorFactory}} in *Public Sector Calculation* updated to replace all instances of {{PCLSDBTargetPensionOptionStrategy}} with the new strategy.  
* {{.WithTargetCash}} added to each of the +options calculators+ in *PPS A>R* and *FPS A>R* (not the pre-comm calculators as these don’t require it)



+Testing:+

* Tests set up at Public Sector Calculation level (named “TargetPCLSDBStrategy …”) that cover the following:
** target cash input > both db cash maximums (warning and cash=0 returned)
** target cash = either of the db cash max options (cash and post-com values are the same as in max cash option)
** target cash < pcls max → this is the simple case, no tax charge due
** pcls max < target cash < scheme cash max → tax charge is due
** target = 0
* At client level I can see target amounts come through, but without test cases from admin, I am just checking my own figures against themselves.  The bulk of testing is done at global level.  I have set up 2 tests in PPS A>R using member from test case 1 and my own target results.  (I didn’t want to add expected results to an existing test from the matrix, as target figures are not signed off.)  These will highlight if anything is changed in the DB target code.",,,,,,,,,,,,,,,,,,16739,PHX5-655,Target Lump Sum,Done,03/Dec/25 6:39 AM
Remove Convert for PensionOptionTypes,PHX5-432,15193,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,09/Sep/25 10:18 AM,17/Sep/25 9:51 AM,,15/Sep/25 10:33 AM,,,,,,,,,,,,,0,,,,,There is no longer a requirement for PensionOptionType to be converted to CalculationPensionOptionType as pension results types from dev have now been updated. This can now be updated in Public Sector Calculator module and the A>R Client Code. ,,Steven Wright,,,,,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-436,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@92a650,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 12,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_8920_*|*_10252_*:*_1_*:*_430038738_*|*_10354_*:*_1_*:*_2884_*|*_10056_*:*_1_*:*_85354268,,,,,,,,,,,,,,,,,,,,,,,,,,10708,PHX5-195,General Calculation Items,Done,15/Sep/25 10:33 AM
Set payable from date for A2D elements,PHX5-431,15179,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,09/Sep/25 7:19 AM,28/Nov/25 5:21 PM,,04/Nov/25 2:43 PM,Client 162 Police A to D Version 1,Client 164 Fire A to D Version 1,,,,,,,,,,,0,,,,,"From the spec (1987):

{adf:display=block}
{""type"":""table"",""attrs"":{""isNumberColumnEnabled"":false,""layout"":""center"",""localId"":""3633ac86-2e33-4466-9839-5f39bf26fc94""},""content"":[{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":6},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Age deferred benefits are payable from""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Name""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Description""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Further comments""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Deferred age ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Member age <50, service <25 years = 60""},{""type"":""hardBreak""},{""type"":""text"",""text"":""Member age <50, service >=25 years = 50""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Deferred age ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":3},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Service >30 = immediate""}]}]},{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""These members are still working in the police therefore cannot yet take their pension benefits but have opted out of the scheme after obtaining 30 years service. They will be entitled to payment of their deferred benefits once they leave employment.""}]}]}]}]}
{adf}

This logic needs to be added to the final active to deferred result.

If this is linked to the NRD< we should be able to use the existing logic for NRD. Else we might need to work out where this is calculated, as it will be different for each category.

There is now a set of {{PensionDueDateStrategy}} classes in the code:

* {{StatePensionDateDueDateStrategy}}
* {{Age65DueDateStrategy}}
* {{PPS1987DueDateStrategy}}

The top two are straight forward and should work, the last needs to be coded and tested.

We also need to clarify what should happen for {{FPS1992}}",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,PHX5-520,,,,,,,,,03/Nov/25 5:31 PM;18934601-32fa-4c76-9b74-159dc94fd206;Admin sign-off RE PPS1987 Age Deferred Benefits Due.msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11092,31/Oct/25 11:54 AM;18934601-32fa-4c76-9b74-159dc94fd206;Query to admin - PPS1987 Age Deferred Benefits Due.msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10957,31/Oct/25 2:54 PM;18934601-32fa-4c76-9b74-159dc94fd206;Response from admin - RE PPS1987 Age Deferred Benefits Due.msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10962,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@209777d8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzbzzzr,,,Payment/due dates set for deferred elements,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 19,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-10-31 11:54:26.993,10281_*:*_1_*:*_3547_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_2_*:*_108347452_*|*_10252_*:*_2_*:*_2067283800_*|*_10354_*:*_3_*:*_364620284_*|*_10056_*:*_1_*:*_1993553189_*|*_10355_*:*_1_*:*_258584179,,"31/Oct/25 11:54 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[^Query to admin - PPS1987 Age Deferred Benefits Due.msg]

Logic query sent to Isobel",31/Oct/25 2:54 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;and response (awaiting April’s sign off)[^Response from admin - RE PPS1987 Age Deferred Benefits Due.msg] ,"31/Oct/25 5:04 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+Coding changes:+

{{PPS1987DueDateStrategy}} has been completed with spec logic including Isobel’s comments in attached email.  _(This is very similar to, but_ +_not_+ _exactly the same as, the logic for_ {{GetDeferredAge}} _used in the_ {{PublicSectorAccrualDeferredDoubleStrategy}} _(see related ticket 520))_

* Total service (DB + CARE) >= 30 → benefits due day following calc date
* Total service >= 25 *and* member >= 50y → benefits due from day following calc date
* Total service >= 25 *and* member < 50y → benefits payable from 50th birthday
* Total service < 25 *and* member < 55y → benefits payable from 60th birthday

(The above does not account for someone over the age of 55 with <25y svc.  I believe this scenario should not occur as member would have been eligible for NPPS instead of PPS)



+Testing:+

* The best way to test this is by checking the A>D results.  See interim values in tests 1-7
* The dates shown on altair calc prints for the test cases are not reliable.  See admin’s email response confirming the actual dates/ages to expect
* However for completeness I’ve added a test function and a couple of tests to public sector module
** svc = 30y exactly → benefits payable immediately
** svc = 26y, member is 48 → benefits payable at age 50
** svc <25y, member is 54 → benefits payable at age 60",03/Nov/25 5:31 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;April has now confirmed changes: [^Admin sign-off RE PPS1987 Age Deferred Benefits Due.msg] ,"03/Nov/25 5:35 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452]  please review this for me, in line with the attached emails with admin regarding the logic which has changed from the spec slightly (admin are adding a ticket to reflect change in spec, and I’ve made Matt aware)

The logic here is similar to the logic for related ticket 520 so you may want to review these together. Please do see my comments on both tickets though, that explain how this logic does differ","04/Nov/25 2:40 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] similarly to linked ticket 520, i’ve replicated details from the A>D tests for this due date strategy.  The tests all begin “PPS1987DueDateStrategy …” and are all passing.  Again I’m happy for this to be closed now",,,,,,,,,,,,,,,,,,,13853,PHX5-220,Police - Active to Deferred,Done,04/Nov/25 2:43 PM
Define full input/output lists,PHX5-430,15170,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,08/Sep/25 2:11 PM,24/Oct/25 2:04 PM,,24/Oct/25 2:04 PM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Barrie Moroney,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@26c61529,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00008w,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-09-08 14:58:58.604,10354_*:*_1_*:*_9925_*|*_10056_*:*_1_*:*_6428632_*|*_10355_*:*_1_*:*_0,,"08/Sep/25 3:58 PM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Emailed Iain regarding the inputs / outputs on the calculation specifications for A>D, A>R & DIS for Police and Fire schemes;

[Phoenix Phase 5 - The Fire Pension Scheme - Input and Output Fields.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EXmO2gVOFF1FuP6xKNvhQicB4T8BCA4UINHxh_TR4He9qw?e=qa2HnH]

[Phoenix Phase 5 - The Police Pension Scheme - Input and Output Fields.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EaisGMFHXD9AuqMgWhPRA1cBzl-NEXyEZPZyyk9qu0TDWg?e=luwv1o]","08/Sep/25 4:47 PM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Reply from Iain. Fire A>D amended and back with Iain. Inputs need to be added to other specs once they have been agreed with coders.

[RE Phoenix Phase 5 - The Fire Pension Scheme - Input and Output Fields 2.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EV3WAHra3qtEi8KJfr32Xd8BEZXDU0Ti0O4pDr-Ib3qj7A?e=SV7Len]

[RE Phoenix Phase 5 - The Fire Pension Scheme - Input and Output Fields.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EQNXEHi68d1Eh7GpJSQ58XAB2XW4nxrbRZmOL9BtDaMi3w?e=THLDgf]

[RE Phoenix Phase 5 - The Police Pension Scheme - Input and Output Fields.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EfRS9KaH7HVHkb7m1o5QZTIB11uWgPYqa8wsAeqeujAItA?e=GLJxrB]",,,,,,,,,,,,,,,,,,,,,,,10708,PHX5-195,General Calculation Items,Done,24/Oct/25 2:04 PM
Service breaks from 2022 record required for certain 1987 records,PHX5-429,15156,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,05/Sep/25 4:14 PM,24/Sep/25 9:56 AM,,24/Sep/25 9:56 AM,,,,,,,,,,,,,0,Expected_Results,,,,,,Andrew Wilson,Annabelle Stephenson,Chris Marshall,Matt Lilwall,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,PHX5-172,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3175435c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000m,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-09-18 15:21:07.623,10281_*:*_1_*:*_5888_*|*_10252_*:*_1_*:*_1123415986_*|*_10354_*:*_2_*:*_2764_*|*_10056_*:*_1_*:*_10273,,"18/Sep/25 4:21 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] , before I query this with Iain, can I just check that the code isn’t already doing this i.e. taking service break data from the 2022 record and applying them to the Pre 2022 calc.

Thanks","18/Sep/25 4:24 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;No, it won’t be, we would need to take the service breaks from the active normal member data and add them to the activesalarylink service breaks. A straight forward change.","18/Sep/25 4:30 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] , Andrew mentioned you may have already checked this with Iain/admin and got an answer. Could you add the details the ticket if that’s the case. Otherwise I’ll check with them. Thanks","19/Sep/25 10:33 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;This is for the 1987 scheme members with greater than 20 years total service at DOL. Accrual calc A, which is part of the weighted accrual calculation, is total qualifying service to DOL so that's where we need those breaks ",22/Sep/25 12:48 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;This seems to be a duplicate of 172 - can we close one of them?,,,,,,,,,,,,,,,,,,,,,,,Done,24/Sep/25 9:56 AM
Create save to calc print functionality,PHX5-426,15119,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,02/Sep/25 11:53 AM,24/Oct/25 2:01 PM,,24/Oct/25 2:01 PM,,,,,,,,,,,,,0,,,,,"for the moment this will just do log.information, but when calc prints are done properly, we want to only update one function rather than every single point where we call log.information.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,PHX5-401,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@73e93151,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979fxf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10252_*:*_1_*:*_0_*|*_10354_*:*_1_*:*_2727_*|*_10056_*:*_1_*:*_127375,,,,,,,,,,,,,,,,,,,,,,,,,,10708,PHX5-195,General Calculation Items,Done,24/Oct/25 2:01 PM
Update hard coded strings with constants,PHX5-425,15117,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,02/Sep/25 9:51 AM,10/Sep/25 9:46 AM,,04/Sep/25 2:26 PM,,,,,,,,,,,,,0,,,,,"We have a few places where we have still hard coded some strings.

# {{PublicSectorServiceFactory}} this has CARE and DB hardcoded. We need a new KeyServiceTrancheConstants class and these added to there. Then anywhere that uses these also updated (see ill health 2015 high tier code) - may also need prospective?
# {{PensionOptionStrategy}} a lot of the pension option strategies have “PEN” hard coded. This is now in KeyPensionConstants, and so we should us that instead.
# {{ERBuyoutLS}} also appears several times - not sure which batch this goes into - but should probably be a constant

Need to look through the code for any other hard coded strings and ensure they are also moved to constants if we can.",,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6bded461,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jm6:9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 11,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-09-04 12:50:39.808,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_3347_*|*_10252_*:*_1_*:*_182528961_*|*_10354_*:*_1_*:*_4403_*|*_10056_*:*_1_*:*_4623158,,"04/Sep/25 1:50 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] , I’ve made the requested changes to Public Sector Calculation. Ready for your review if you consider it necessary.",,,,,,,,,,,,,,,,,,,,,,,,10708,PHX5-195,General Calculation Items,Done,04/Sep/25 2:26 PM
Non McCloud Members,PHX5-424,15116,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,02/Sep/25 8:49 AM,22/Sep/25 2:38 PM,,22/Sep/25 2:38 PM,,,,,,,,,,,,,0,,,,,"Should be a simpler case, but we need to ensure they run through correctly.

They will definitely need some new Pension Options added.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@ea48117,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x0004,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10252_*:*_1_*:*_0_*|*_10354_*:*_1_*:*_2761_*|*_10056_*:*_1_*:*_8197473,,,,,,,,,,,,,,,,,,,,,,,,,,10708,PHX5-195,General Calculation Items,Done,22/Sep/25 2:38 PM
Target Lump Sum,PHX5-423,15115,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,02/Sep/25 8:47 AM,10/Sep/25 9:45 AM,,09/Sep/25 2:37 PM,,,,,,,,,,,,,0,,,,,"We will be given two target lump sums, one for DB and one for CARE

We need to deal with these appropriately.

By default we will always provide the target lump sum option, but it will default to lump sum = 0.

For the CARE lump sum we need to deal with it being split between the two CARE benefits. (test case required?)",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,PHX5-167,,,,,,PHX5-434,PHX5-433,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7b0e1c42,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jm5:i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 11,,,,,,8.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-09-05 18:28:57.06,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_347666066_*|*_10252_*:*_1_*:*_266971366_*|*_10354_*:*_1_*:*_11734_*|*_10056_*:*_1_*:*_9291268,,"05/Sep/25 7:28 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Strategies added:

* PCLSDBTargetPensionOptionStrategy: DB PCLS calc method with db target
* PCLSCARETargetPensionOptionStrategy: reform CARE cash, with CARE target pro-rated against total CARE","08/Sep/25 7:11 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388]  Looking good. I know it is wip, but a few suggestions:

# in the Db Target function, call the target cash DBTargetCash to make it extra clear what is expected.
# Maybe rename {{PCLSCARETargetPensionOptionStrategy}}? make it clearer? Is it actually CARETargetMaxPCLS?
# Can we confirm how we are pro rating? In discussions we said to pro rate on pre com pen. You have pro rated on the cash. We will need confirmation on which is the correct method.
# The pro rate might not work for cases where we pass in the CAREPreCom pen key. I think the pro rating has to be more explicit. I would expect us to have to make reference to both CARE pre com pen keys at come point.","08/Sep/25 5:27 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Thank you [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452]  I agree all your comments and have incorporated them.  Although we should get confirmation on whether we pro-rate on pre-com or cash, I have amended my code to do it against pre-com elements, as that is what we were told initially.

A question for either myself or you, if you know the answer: for DB cash, we have the two methods of calculation, as shown in strategies PCLSDBPensionOptionStrategy (for legacy/reform DBPCLS) and SchemeMaximumDBPensionOptionStrategy (for legacy/reform DBMaximumLumpSum).  I’ve done the target strategy for the former which is the basic case.  The latter is much more complex, as we also calc the CAREPCLS and use it to output the LumpSumAfterTax.  Do we need a target strategy for this too?","09/Sep/25 2:06 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Target for CARE cash complete.  Strategy is named {{CARETargetMaxPCLS}} and is used at various points in the options factory where CARE cash is required.  The function pro-rates the target amount required (reform or non) against the total CARE pre-com elements.

No warning or error messages logged currently.

Tests set up for dividing by 0 (if nil CARE pre-com), if target is above max cash or LSA, if only one type of CARE pre-com input.  All passing.

[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] I’m pretty confident we can wrap this one up.",,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,09/Sep/25 2:37 PM
Define options,PHX5-421,15079,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,28/Aug/25 8:09 AM,03/Sep/25 9:44 AM,,03/Sep/25 9:44 AM,,,,,,,,,,,,,0,,,,,"Do we have, or can we create a cheat sheet of what we are doing? Something like:

| | | |Quotation|
|1987 Case|1987 member|DB benefit|LegacyZeroLumpSumCommuted|
| | | |LegacyPCLSCommuted|
| | | |LegacyMaximumLumpSumCommuted|
| | |CARE benefit|LegacyZeroLumpSumCommuted|
| | | |LegacyPCLSCommuted|
| |2022 member|CARE benefit|LegacyZeroLumpSumCommuted|
| | | |LegacyPCLSCommuted|

We have to be very careful with our terminology - as Iain has already pointed out that the 2022 member does not get legacy benefits. So as well as compiling all these benefits/options etc we need to know what the naming conventions will be. ",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,02/Sep/25 8:53 AM;5796a187-7241-414b-bea0-2d22260a9bed;Phase 5 options summary.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10382,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1e487d2c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x05r,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 10,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_12597_*|*_10252_*:*_1_*:*_3268_*|*_10354_*:*_1_*:*_5357_*|*_10056_*:*_1_*:*_524050745,,02/Sep/25 8:54 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Added latest understanding that has been agreed by Iain,,,,,,,,,,,,,,,,,,,,,,,,10708,PHX5-195,General Calculation Items,Done,03/Sep/25 9:44 AM
Write top level A to R code to run multiple members and combine results,PHX5-403,15017,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,27/Aug/25 10:35 AM,03/Sep/25 9:44 AM,,03/Sep/25 9:39 AM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4c43128d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x05i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 10,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_85499762_*|*_10252_*:*_1_*:*_512163020_*|*_10354_*:*_1_*:*_3230_*|*_10056_*:*_1_*:*_150114,,,,,,,,,,,,,,,,,,,,,,,,,,10708,PHX5-195,General Calculation Items,Done,03/Sep/25 9:39 AM
Ensure public sector code doesn't use member object,PHX5-402,15011,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,27/Aug/25 10:22 AM,03/Sep/25 9:44 AM,,03/Sep/25 9:38 AM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3c7e1b86,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x05,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 10,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_12418_*|*_10252_*:*_1_*:*_185885744_*|*_10354_*:*_1_*:*_3716_*|*_10056_*:*_1_*:*_459742,,,,,,,,,,,,,,,,,,,,,,,,,,10708,PHX5-195,General Calculation Items,Done,03/Sep/25 9:38 AM
Add Log.Information for Admin UAT,PHX5-401,15010,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,27/Aug/25 10:16 AM,28/Nov/25 5:21 PM,,05/Nov/25 2:21 PM,Client 150 Police A to R Version 6,Client 162 Police A to D Version 1,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,0,,,,,"Also think about Log.Information?

What information required for admin to UAT?",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,PHX5-426,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@9b6e366,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00000800hi,,,"Several new information logs will now output in Aurora when running member calculations depending on the type. For example, information about the DB comm factor, ERF factor, Service, Averaged Pensionable Pay, Ill Health. These should give the admin team a more detailed view of the components of the calculation.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 18,PHX5 Sprint 19,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10281_*:*_1_*:*_3709090246_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_497613843_*|*_10252_*:*_1_*:*_696160272_*|*_10354_*:*_1_*:*_621218345_*|*_10056_*:*_1_*:*_524342772,,,,,,,,,,,,,,,,,,,,,,,,,,10708,PHX5-195,General Calculation Items,Done,05/Nov/25 2:21 PM
Add Log.Debugs for testing,PHX5-400,15009,Story,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Lowest,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,27/Aug/25 10:15 AM,18/Dec/25 1:41 PM,,,,,,,,,,,,,,,0,,,,,"Also consider log.debugs for debugging any issues later

Think about naming convention for debug?

AuroraID_Class_Function_Parameter",,Andrew Wilson,Steven Wright,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@301448af,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00p1i:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10708,PHX5-195,General Calculation Items,To Do,27/Aug/25 10:15 AM
Add Interim Values for testing,PHX5-399,15008,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,27/Aug/25 10:05 AM,23/Sep/25 11:28 AM,,23/Sep/25 11:28 AM,,,,,,,,,,,,,0,,,,,"To ensure we have interim values throughout the public sector code to store all key values.



Also consider log.debugs for debugging any issues later

Think about naming convention for debug?

Class_Function_Parameter



Also think about Log.Information?

What information required for admin to UAT?",,Andrew Wilson,Steven Wright,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@56a5ff48,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x0104j,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 11,PHX5 Sprint 13,,,,,8.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_953696488_*|*_10252_*:*_1_*:*_2600_*|*_10354_*:*_1_*:*_258767236_*|*_10056_*:*_1_*:*_799798843,,"22/Sep/25 9:13 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e]  Just to check - do we need to add member id to any of these interim values - so that we know which member is being run? i.e. if service comes up more than once, how do we know if it is legacy or reform calc bring done?",,,,,,,,,,,,,,,,,,,,,,,,10708,PHX5-195,General Calculation Items,Done,23/Sep/25 11:28 AM
CARE Added Pension (Joint Life and Single Life),PHX5-398,14952,Story,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Isobel Mounsey,712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,21/Aug/25 10:10 AM,12/Feb/26 5:28 PM,,,,,,,,,,,,,,,0,CARE,TEST_CASES,,,,,Barrie Moroney,Isobel Mounsey,Matt Lilwall,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,PHX5-197,PHX5-290,,,,,,,,,,,,,,PHX5A-114,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@39f53fa9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00008zr,,,,,,,,,,,,,,,,2015 CARE,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2026-02-11 08:24:45.582,,,"21/Aug/25 10:24 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f] , updates have been made to PPS CARE module ([ PPS CARE Module -V1.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/Eel_5J-JsSxOgeS3p_Ma45IBZUUfVRbb72KBI7HM9_HdkA?e=EnFqWC]):


* CARE_Addedpension_Basic_JL
* CARE_Addedpension_Basic_SL

These items have not been sufficiently defined to know how to calculate them. Please can you provide more information, and we will also need test cases to show the calculation of these.

Thanks

Matt","11/Feb/26 8:24 AM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Hi [~accountid:712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f] We are not aware of ever receiving a response to this query. Please could we have a response to this as it as soon as possible as it will form of part of the APB coding. 

Many Thanks

Barrie

FYI [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] ","12/Feb/26 5:28 PM;712020:1ec2d4e0-68a4-4dab-9a6a-20ef5fd33d5f;Hi Matt and Barrie, sorry for the delay in responding to this one, Added Pension SL and Added Pension JL will be held on the members record, they are a CARE benefit type. As far as i am aware, for the purpose of this specification it will be treated as an element already held on the record - thanks",,,,,,,,,,,,,,,,,,,,,,13807,PHX5-197,CARE Module,To Do,21/Aug/25 10:10 AM
Age Addition - Code review,PHX5-397,14804,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,18/Aug/25 3:06 PM,10/Sep/25 9:45 AM,,03/Sep/25 12:23 PM,Batch 1,,,,,,,,,,,,0,Accrual,,,,"This ticket covers coding CAREAgeAdditionTemplate so that it calculates and populates the new AdditionalCredit field with the AgeAddition.

Once this has been done, fully tested and published AND we have the latest dev updates that add the new fields to MemberCare, we can tie this into public sector code.",,Andrew Wilson,Chris Marshall,Matt Lilwall,Steven Wright,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,PHX5-259,,,,PHX5-131,,,,,,,,,,,,,,18/Aug/25 3:06 PM;862ca789-6c5f-4d0a-b054-60929f0a27a7;Age Addition.docx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10332,18/Aug/25 3:06 PM;862ca789-6c5f-4d0a-b054-60929f0a27a7;Age addition - template for testing.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10331,18/Aug/25 3:06 PM;862ca789-6c5f-4d0a-b054-60929f0a27a7;Age addition plus assumed example 2 - AS amends.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10333,18/Aug/25 3:06 PM;862ca789-6c5f-4d0a-b054-60929f0a27a7;Age addition testing notes.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10330,03/Sep/25 9:13 AM;bfea69ca-e7d9-488d-b01b-103621fa1516;image-20250903-081237.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10383,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5f3fcaa5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Documentation,,,Amber,,0|i00jm5:4,,,,,,,,,,,,,,,,2015 CARE,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 9,PHX5 Sprint 10,PHX5 Sprint 11,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-08-18 14:06:40.971,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_689524362_*|*_10252_*:*_1_*:*_3669_*|*_10354_*:*_1_*:*_5196_*|*_10056_*:*_1_*:*_670176612,,18/Aug/25 3:06 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Waiting for test cases to be provided by admin ,"18/Aug/25 3:06 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Test cases saved here:

\\ad.xafinity.com\London\Data\Admin Services Group\Management Controls (Procedures)\_ Phoenix Phase 5\Calculations\A to R\Example cases age addition",18/Aug/25 3:06 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Waiting for data changes to CARE for additional credit,"18/Aug/25 3:06 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;We will need a new CARE template - most likely making use of {{CARESalaryTemplate}} for the salary logic, but which adds functionality for age addition.",18/Aug/25 3:06 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Test cases saved here: [CARE (2015)|https://xpsplc.sharepoint.com/:f:/s/ProjectPhoenix/Es9zr5w29YpHvZhGbpZeCbIBCamUZTMk1jsSLe1alRxhWA?e=vjlcfH],"18/Aug/25 3:06 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Code changes:

* Override functions created for CreateMemberCAREList and CalculateCARERunningTotals.  Age addition calculated within running totals, added to AdditionalCredit, and included within TotalPension
* PopulateMemberCareSalary - I made an amend from == to >= following salaries not being picked up in my test cases, comment added to code to explain this
* Admin have two different sets of age addition factors for use, dependant on CARE date (ie. both tables may be used within one member calc).  We’ve not coded for this as I assume that is scheme level?
* RollingTotal / TotalPension is calculated from scratch year on year, regardless of totals already recorded in existing CARE history.  This means that any existing CARE history must be complete and accurate RE accrued inflation etc, or the TotalPension (and therefore the Age Addition pension) will be incorrect","18/Aug/25 3:06 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Testing:

* Testing function CalculateMemberCareWithAgeAddition been set up.  Tested on interim values TotalAdditionalCredit and TotalCAREAtEndDate
* 3 admin test cases set up. Queried test 2 as I think there has been user error, awaiting response.  Set it up with my amends
* Tested NPA and calc dates falling on the CARE end/start dates to test the counting of months at boundary dates
* Also NPA date on 2nd day of CARE pd as factor is determined by age as at 01/04 (so testing selection of correct factor) 
* Tested calc date falling just under/over 1m to/from NPA date
* Tested start date before NPA, showing CARE calc still correct when no AA calculated
* Tested incorrect existing history input, to show accurate recalculation of TotalPension each CARE period
* Tested NPA date occurring within existing history, so AA needs calculating and adding to existing as well as new",18/Aug/25 3:06 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;admin have confirmed that my amended test 2 is correct,18/Aug/25 3:07 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] please can you review Annabelle’s code as part of sprint 9,"26/Aug/25 9:20 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388]  in CAREAgeAdditionTemplate, you have added to CreateMemberCAREList. These do not look like age addition specific changes. So should these changes actually be made to CARESalaryTemplate, or should we not be inheriting this template, or do our test cases not match the actual CARE data?  Need to understand what data case this is covering? This is all very dependent on the way the care data will be stored.","03/Sep/25 9:13 AM;712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e;Test case in A>R hits an exception error when accessing CAREAgeAdditionTemplate in CARE global. It is not implementing the CalculateCAREPensionRowValue method. Discussed with [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] going to look at it alongside refactoring the CARE code. Only affects members retiring after age 60 and when this line in Public Sector Calculation global is executed 

{noformat}careBuilder.WithAgeAddition(memberInfo.DateReachesAge(60), schemeReferenceData.DecimalLookups(""A403"").ToList());{noformat}

!image-20250903-081237.png|width=75%,alt=""image-20250903-081237.png""!",03/Sep/25 12:23 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Happy with the work for this,,,,,,,,,,,,,,,,Done,03/Sep/25 12:23 PM
Ill Health 2015 Lower Tier members,PHX5-396,14713,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,07/Aug/25 1:19 PM,27/Aug/25 11:18 AM,,27/Aug/25 9:36 AM,,,,,,,,,,,,,0,,,,,"|CARE_ill_health_enhancement|# Lower tier - Accrued pension only granted unreduced.|Accrued pension, no ERF|

To ensure no ERF applied, we need to update PensonElementCalculatorFactory to ensure that PublicSectorPensionElementUnreducedStrategy is used for 2015 lower tier ill health members. 

Also need to add illheathtype as an input

Should be a very simple additional if statement - and associated (interim value) test case added.",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@328bf9f0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x01,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 9,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-08-20 11:59:54.105,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_518751690_*|*_10252_*:*_1_*:*_1030214706_*|*_10354_*:*_1_*:*_4606_*|*_10056_*:*_1_*:*_90316476,,20/Aug/25 12:59 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Introduced an if statement within PensonElementCalculatorFactory to use the unreduced strategy for 2015 members with lower tier ill-health.  Continues to use standard strategy for any other ill-health (none or higher tier).,"20/Aug/25 2:19 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Test function PensionElementCalculatorFactory, 3 tests added for 2015 members, all passing on interim value PensionElementStrategy",,,,,,,,,,,,,,,,,,,,,,,13810,PHX5-200,ER/LR Factors Module,Done,27/Aug/25 9:36 AM
FPS Split Pension,PHX5-395,14711,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,07/Aug/25 11:35 AM,24/Oct/25 2:09 PM,,,,,,,,,,,,,,,0,TEST_CASES,,,,Holding place for the work. Spec not yet complete,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6970e20b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004y:jyr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,13.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13856,PHX5-223,Fire - Active to Retirement,To Do,07/Aug/25 11:35 AM
Create InterimValues for all required test comparison values,PHX5-394,14690,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,06/Aug/25 12:00 PM,24/Oct/25 2:11 PM,,24/Oct/25 2:11 PM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Chris Marshall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@605e05f2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jlz:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 10,PHX5 Sprint 11,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-09-01 12:55:19.453,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_423855429_*|*_10252_*:*_1_*:*_20464663_*|*_10354_*:*_2_*:*_772363291_*|*_10056_*:*_1_*:*_1036568980_*|*_10355_*:*_1_*:*_15769,,"01/Sep/25 1:55 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;List of Interim Values to be created:
[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] can you cross check and advise if anything needs adding/removed I can then start to update these. Thanks

*CARE record*

*No comm*

·         Accrued Pension

·         Ill Health Enhanced Pension

·         Assumed Age Addition

*With comm*

·         Accrued Pension

·         Ill Health Enhanced Pension

·         Assumed Age Addition

·         Less Pension commuted to lump sum

·         CARE lump sum

*Salary Linked Record*

*No comm*

*DB*

·         Pensionable Service

·         Total Pension

·         Total Lump Sum

·         Spouse Pension

*CARE*

·         Total Accrued Pension

·         Assumed Age Addition

·         Total CARE Pension

*With comm*

*DB*

·         Pensionable Service

·         Total Pension

·         Total Lump Sum

·         Spouse Pension

·         Protection of Double Accrual (PPS only)

·         Additional Pension from commuted lump sum (NPPS only)

·         Less Retirement Grant converted to Pension (NPPS only)

*CARE*

·         Total Accrued Pension

·         Assumed Age Addition

·         Total CARE Pension

·         Less Pension commuted to lump sum

·         CARE lump sum","03/Sep/25 10:47 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Prefix?

AuroraID_CalcType

CalcType

* Normal
* SalaryLinkReform
* SalaryLinkLegacy
* NonMcCloud?","03/Sep/25 12:23 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Updated to included calculate naming conventions

[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] [~accountid:712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e] can we review when we can all get together


*CARE record*

*No comm / ZeroLumpSumCommuted*

·         Accrued Pension / *CAREPreCom*

·         Ill Health Enhanced Pension

·         Assumed Age Addition

·         Total Pension /  *CARE*  *or newValue (if early ret)*

*With comm / PCLSCommuted*

·         Accrued Pension / *CAREPreCom*

·         Ill Health Enhanced Pension

·         Assumed Age Addition

·         Less Pension commuted to lump sum / *commutedPension*

·         Total Pension / *CARE or newValue (if early ret)*

·         CARE lump sum / *Cash*

*Salary Linked Record*

*No comm / ReformZeroLumpSumCommuted*

*DB*

·         Pensionable Service / *accrualCalcA*

·         Total Pension / *PEN or newValue (if early ret)*

·         Total Lump Sum / *CASH*

·         Spouse Pension

*CARE*

·         Accrued Pension / *CAREPreCom*

·         Ill Health Enhanced Pension

·         Assumed Age Addition

·         Total Pension / *CARE or newValue (if early ret)*

·         CARE lump sum / *Cash*

 

*With comm / ReformedPCLSCommuted*

*DB*

·         Pensionable Service / *accrualCalcA*

·         Less Pension Commuted / *commutedPension*

·         Total Pension / *PEN or newValue (if early ret)*

·         Total Lump Sum / *CASH*

·         Spouse Pension

*CARE*

·         Accrued Pension / *CAREPreCom*

·         Ill Health Enhanced Pension

·         Assumed Age Addition

·         Less Pension commuted to lump sum / *commutedPension*

·         Total Pension / *CARE or newValue (if early ret)*

·         CARE lump sum / *Cash*

*With comm / ReformedMaximumLumpSumcommuted*

*DB*

·         Pensionable Service / *accrualCalcA*

·         Less Pension Commuted / *commutedPension*

·         Total Pension / *PEN or newValue (if early ret)*

·         Total Lump Sum / *CASH*

·         Spouse Pension

*CARE*

·         Accrued Pension / *CAREPreCom*

·         Ill Health Enhanced Pension

·         Assumed Age Addition

·         Less Pension commuted to lump sum / *commutedPension*

·         Total Pension / *CARE or newValue (if early ret)*

·         CARE lump sum / *Cash*

 

*No comm / LegacyZeroLumpSumCommuted*

*DB*

·         Pensionable Service / *accrualCalcA*

·         Total Pension / *PEN or newValue (if early ret)*

·         Total Lump Sum / *CASH*

·         Spouse Pension

*With comm / LegacyPCLSCommuted*

*DB*

·         Pensionable Service / *accrualCalcA*

·         Less Pension Commuted / *commutedPension*

·         Total Pension / *PEN or newValue (if early ret)*

·         Total Lump Sum / *CASH*

·         Spouse Pension

*With comm / LegacyMaximumLumpSumcommuted*

*DB*

·         Pensionable Service / *accrualCalcA*

·         Less Pension Commuted / *commutedPension*

·         Total Pension / *PEN or newValue (if early ret)*

·         Total Lump Sum / *CASH*

·         Spouse Pension

 

For NPPS commutation differs for both reform and legacy options. Only inverted commutation if offered so member can chose to reduce lump sum for additional pension only

 

·         Additional Pension from commuted lump sum

·         Less Retirement Grant converted to Pension",,,,,,,,,,,,,,,,,,,,,,10708,PHX5-195,General Calculation Items,Done,24/Oct/25 2:11 PM
Update CARE for new member care fields,PHX5-393,14689,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,06/Aug/25 9:50 AM,23/Sep/25 11:28 AM,,23/Sep/25 11:18 AM,,,,,,,,,,,,,0,,,,,"the following fields are being added to the member care object:

{noformat}    public MemberCareBenefitType MemberCareBenefitType { get; set; }
    public LocalDate? EffectiveTo { get; set; }
    public decimal AdditionalCredit { get; set; }{noformat}

We had EffectiveTo as part of MemberCareCalc, so we can now remove that.

I have temporarily added AdditionalCredit to MemberCareCalc - so that we can code up the calculation for age addition. So again, remove this once we have the updated version so that we can use the underlying field

MemberCareBenefitType I have not updated anything yet. To update our code, we need to update PublicSectorCARECalculationFactory so that it cycles through the member’s care types and creates a CARECalculation for each one. We should also change it from:

Dictionary<string, CARECalculation>

to

Dictionary<MemberCareBenefitType, CARECalculation> to make use of the new enum",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3a329ed1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x00i29,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 13,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10281_*:*_1_*:*_189381881_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2278_*|*_10252_*:*_1_*:*_16552421_*|*_10354_*:*_2_*:*_5819_*|*_10056_*:*_1_*:*_9665_*|*_10356_*:*_1_*:*_3875858029,,,,,,,,,,,,,,,,,,,,,,,,,,13807,PHX5-197,CARE Module,Done,23/Sep/25 11:18 AM
Transfer In Added Service,PHX5-392,14639,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,31/Jul/25 8:39 AM,28/Nov/25 5:21 PM,,30/Sep/25 1:46 PM,Client 150 Police A to D Version 1,Client 150 Police A to R Version 5,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,,0,,,,,"We need code in PublicSectorServiceFactory that can convert

List<MemberTransferInElement> to List<AddedServicePeriod> to be able to pass in to the service builder.

Looking at the data, added service is stored in years as a decimal amount. It is also potentially stored directly as PENSSERV/QUALSERV as a decimal amount.

We need to understand:

* how do we know if added service is overtime?
* are we meant to use the decimal amount directly to add to the service? (if so we cannot use the standard tvin code)",,Andrew Wilson,Annabelle Stephenson,April Woods,Matt Lilwall,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-174,PHX5-375,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3f1aa5b0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1p:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 14,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-08-12 11:57:16.26,10281_*:*_2_*:*_2845891137_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_495823901_*|*_10252_*:*_2_*:*_175633494_*|*_10354_*:*_3_*:*_1738250337_*|*_10056_*:*_1_*:*_15498898_*|*_10355_*:*_1_*:*_17570877,,"04/Aug/25 2:40 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]  as discussed, can you find out how we map the data to our service object",12/Aug/25 12:57 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;I’m checking with Neil Murrey r.e. mapping to MemberTransferInElements.ElementType and how this differs from the McCloud migrations.,"19/Aug/25 11:36 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Overtime is mapped to MemberAdditionalHistoryData.

AddedYears is being mapped to MemberHistoricBenefits","02/Sep/25 11:28 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]  as discussed, to confirm if the data is held as decimal or years/months etc","04/Sep/25 11:00 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;initial thoughts:

We need the following (or similar) in service static

{noformat}	public class AddedServiceAmounts
	{
	    public AddedServiceType AddedServiceType { get; set; }
	    public ServiceHistoryOverTranche addedServiceHistoryOverTranche { get; set; }
	}{noformat}

and then service code will just take these directly. (might need to tweak this to be a list)

essential idea is that we pick up the data from the transfer in record and immediately transform it into a ServiceHistoryOverTranche with the various qualifying/reckonable populated.



Then in service, under {{ServiceCalculator}} under where we look at existing AdedServicePeriods, we also look at AddedServiceAmounts.

The builder will need to include a new with to take the addedserviceamounts",08/Sep/25 10:00 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;We will need new code in global transfer in module that takes the tvin records (or where ever the data is stored) and returns ServiceHistoryOverTranche (or a list if makes more sense).,"09/Sep/25 7:02 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The storage of the data has changed again. It is now stored as a set of decimal figures, one for each year.

* Are we meant to keep it yearly / add it to those historic benefits. Or just sum these all up?
* Is this figure reckonable or qualifying? Whichever of those it is, it will be hard to get to the other one. Or are we back to a single figure that gets added to both qualifying and reckonable.
* If we are calculating reform for a case with added years between 2015 and 2022, should we be adding these to the CARE benefit instead?",18/Sep/25 1:39 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;qual serv and reck service data is in MemberTransferInElements,"18/Sep/25 3:07 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] 

Following our meeting, and responding to your questions:


* Are we meant to keep it yearly / add it to those historic benefits. Or just sum these all up? {color:#ff5630}Yes, the overtime records should be summed up, but only overtime accrued during service in the legacy scheme should be included.{color}

* Is this figure reckonable or qualifying? Whichever of those it is, it will be hard to get to the other one. Or are we back to a single figure that gets added to both qualifying and reckonable. {color:#ff5630}Overtime should only be added to reckonable service (and only where the member has part time){color}
* If we are calculating reform for a case with added years between 2015 and 2022, should we be adding these to the CARE benefit instead? {color:#ff5630}Overtime → as mentioned above. Added years TV-in → TBC{color}","19/Sep/25 1:29 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;There is now a structure in place. We just need to add the logic to the two new strategies:

*PublicSectorOvertime*

This needs to take the data from MemberAdditionalHistoryData and return a single {{ServiceHistoryOverTrancheWithDuration}}

There will be a value for every single year. We need to sum them up when they are below the calculationDate. We may need to amend this date, I have sent in calculationDate, but this is not correct. We probably want the DB end date to be passed in, which could vary. We have CAREStartDate available and can just deduct a day from this.

On the new tranche object, we need to populate the final amount (reckonable) but not qualifying.

*PublicSectorTransferIn*

This needs to take the data from MemberTransferInElements and return a single {{ServiceHistoryOverTrancheWithDuration}}

We will have a qualifying service amount and a reckonable service amount (decided by the key) so need to add these to the correct properties.



For both of the above, we need to populate the key. I have passed in the DB key - this should ensure that when we get to accrual and we try and sum up the DB service, the transfer in will be included.","22/Sep/25 2:15 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;What happens if a TVIN is linked to a date after 2015? How is this dealt with in a CARE reform calc?

The dates are only in a string reference field, so very hard to get to in the code","23/Sep/25 11:16 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd] 

We have a query regarding transferred-in service for PPS 1987. While looking at the coding requirements for overtime, we note that only overtime accrued during the period of legacy scheme service should be included e.g. if we are calculating the reform option where the legacy scheme service ends at 31/03/2015, any overtime accrued after this date should not be included.

For transferred-in service, I don’t think the same logic should apply i.e. regardless of the effective dates of the TV-in, this should always be added to the PPS 1987 service. Please can you let me know if my understanding is correct. Thanks","23/Sep/25 11:51 AM;712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] Hi Matt. Yes, you are correct. For the overtime sitting in the legacy record for the reform period on the reform option this needs to be ignored. This overtime will be reflected in the CARE values for the remedy period instead. 

For transfers in, if they are are showing on the record as service they should be used in the calculation, yes. 

Thanks, April","23/Sep/25 4:09 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] , I think this is ready to code and have updated the status accordingly.","24/Sep/25 7:59 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Logic added to both {{PublicSectorOvertime}} and {{PublicSectorTransferIn}}.  Need to set up some test functions to determine if additional info needs adding to the {{ServiceHistoryOverTrancheWithDuration}}, and to figure out how this ties together with the service code.","26/Sep/25 2:57 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Ongoing things to consider:

* Elsewhere in public sect, TotalService sums up {{PartTimeAdjustedPeriod}} - should this include OT and/or TVs?  Will need to work out how to populate that if so, currently returning a zero period  {color:#ff5630}This only occurs within a testing function for checking interim values, so doesn’t matter for A-R.{color}
** Are there any other instances where parts of svc objects are used, that I’m not currently populating?  {color:#ff5630}No, but query raised with April above on accrual calc.{color}
* What if the member only has PT service post CARE date.  Is their OT still pensionable?  {color:#ff5630}I think not.  Similarly to only including OT that occurred pre-CARE date, we are only looking for PT that occurred pre-CARE date.{color}
* There are hours contained in the notes for MemberAdditionalHistoryData - what do these refer to, and do we need them?   {color:#ff5630}These dont seem to have any bearing on the Value we get{color}","29/Sep/25 4:04 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Hi [~accountid:712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd] - I have a query on the overtime aspect of this.  I understand any additional service due from overtime should only be added to the total reckonable (or final) service, and not the qualifying service.  I wanted to point out that our calculation for the accrual protection / double accrual strategy uses both Qualifying and Reckonable/final service amounts.  Can you confirm that it is correct that within the accrual calc, the member’s reckonable total will include overtime, whereas the qualifying total will not?

Feel free to give me a call if easier to discuss.  Thanks in advance.","29/Sep/25 4:36 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+Code changes+

* {{PublicSectorOvertime}} determines whether the member IsPartTime, by looking for any PT periods in the service periods that occurred before the CAREStartDate.
* If IsPartTime is true, and {{memberAdditionalHistoryData}} contains any overtime types that occurred before the CAREStartDate, these values are added together
** In determining when the overtime pds occurred, we check the EffectiveTo date against the CAREStartDate, as in the McCloud code.  No pro-rating occurs on any overtime that may have started pre-CARE and ended post-CARE
* If this value >0 then a new {{ServiceHistoryOverTrancheWithDuration}} is created, populating {{FinalDecimalAmount}} with the value we calculated, the tranche key as DB, and IsAddedService as true.
* If this value=0 (ie. if for some reason a member had an overtime record but value of 0, which I did come across) then no tranche is created, the code returns null. 



* {{PublicSectorTransferIn}} goes through the {{MemberTransferInElements}}, adding any QUALSERV values together, and separately adding any PENSERV values together
* Provided either of these values is >0, a new {{ServiceHistoryOverTrancheWithDuration}} is created, populated with the QUALSERV total as {{QualifyingDecimalAmount}} and the PENSERV total as {{FinalDecimalAmount}}.  Tranche key set to DB, and IsAddedService set to true
* Unlike in the overtime code, here we do not take consideration of the dates of the transferred-in service, as admin confirmed (in comment below) that all transferred service should be included in DB rather than CARE.
* As in overtime code, we return null if we have transfer-in service record but no values.","29/Sep/25 4:48 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;+Testing+

* I tested against part-time periods +starting+ on the day before/of/after the CAREStartDate, as we only consider the member to be “part-time” if they have a PT period that started before the CAREStartDate
* Similarly tested on overtime periods that +end+ on the day before/of/after the CAREStartDate, as we only want to include OT periods that end _before_ the CAREStartDate
* Tested with both overtime data and transferred-in service together, to ensure we get 2 new service tranches created if a member has both
* There’s not much to test on the transferred service side, as there are no conditions to be satisfied
* [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] pointed out an incorrect service value in A-R test 4 last week when I was mid-way through coding this.  Now that the code is complete, I can confirm that the added service for this member is now being calculated correctly
** I debugged this test so I could see exactly how my changes came in, and it was in line with what I expected

Not a test as such, but I have scoured the Public Sector, A-R and Service calculations/modules for instances of the other service tranche properties (is this the right terminology? eg. {{PartTimeAdjustedPeriod}}, and various other periods and durations) that may need to be populated with the overtime or transferred-in service.  I am confident that FinalDecimalAmount and QualifyingDurationAmount are the only two values that get used, so we should not need to populate the rest of the properties with any data.","30/Sep/25 7:20 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] Check the old McCloud code: [https://calculate.calcuat.xpsplc.com/Clients/1129/Schemes/7054/Calculations/6|https://calculate.calcuat.xpsplc.com/Clients/1129/Schemes/7054/Calculations/6]

As far as I can see, overtime is only counted if the overtime end date is before the care start date (less one day)","30/Sep/25 11:10 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] my code does do this, I realised in my comment below I had said we want OT that ends after the CARE start date, this was a typo which I’ve now amended to read _before_ the CAREStartDate","30/Sep/25 12:47 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] just FYI, Chris noted in an A-R test case that the reckonable/final value wasn’t being picked up for transferred-in service.  The reason for this is because I had mistyped PENSSERV in the code as PENSERV.  Wasn’t picked up in my unit testing because of course I just created the PENSERV inputs myself, which worked.  Code now amended and tests updated",30/Sep/25 1:16 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] Have we made this a constant so that the string is only in one place (should we ever need to have it in more than one location),"30/Sep/25 1:42 PM;712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] Good morning Annabelle,

 

Part time overtime should only increase the reckonable service, not the qualifying service yes.

 

Thanks, April",13806,PHX5-196,Service Module,Done,30/Sep/25 1:46 PM
Set up test cases for commutation factors,PHX5-391,14584,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,30/Jul/25 9:37 AM,27/Aug/25 11:18 AM,,19/Aug/25 9:38 AM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Annabelle Stephenson,Chris Marshall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@699e1b19,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x0h,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 6,PHX5 Sprint 7,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-07-30 15:23:36.891,10281_*:*_1_*:*_4054_*|*_10251_*:*_3_*:*_525078172_*|*_10250_*:*_3_*:*_89746918_*|*_10253_*:*_1_*:*_1111173043_*|*_10252_*:*_2_*:*_6729_*|*_10354_*:*_1_*:*_4541_*|*_10056_*:*_1_*:*_2032459_*|*_10058_*:*_1_*:*_2223,,30/Jul/25 4:23 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Test set up and passing for 1987 2006 inverse and CARE commutation factors,"06/Aug/25 12:26 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;* results added to existing test cases
* inputs updated with all scheme reference data, not just relevant table
* test added for FPS 1992

All passing, testing complete",,,,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,19/Aug/25 9:38 AM
"Refactor 1987 accrual code, to output A to F values",PHX5-390,14583,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,30/Jul/25 9:19 AM,27/Aug/25 11:18 AM,,19/Aug/25 9:37 AM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@15672f9c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x0f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 7,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-08-06 13:20:26.875,10281_*:*_1_*:*_7778_*|*_10251_*:*_3_*:*_600306168_*|*_10250_*:*_3_*:*_434122042_*|*_10253_*:*_1_*:*_66250640_*|*_10252_*:*_2_*:*_628256658_*|*_10354_*:*_1_*:*_6288_*|*_10056_*:*_1_*:*_90175_*|*_10058_*:*_1_*:*_22906,,06/Aug/25 2:20 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Change required to GetServiceForAccrual,12/Aug/25 10:20 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Refactor complete. All test cases agree,,,,,,,,,,,,,,,,,,,,,,,13808,PHX5-198,Accrual Module,Done,19/Aug/25 9:37 AM
Service - leap year logic,PHX5-389,14582,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,30/Jul/25 7:52 AM,01/Aug/25 12:38 PM,,01/Aug/25 12:38 PM,,,,,,,,,,,,,0,,,,,"Leap year is not being included. See [[PHX5-377] Service/Accrual - UAT 1 feedback - Jira|https://xps-jira.atlassian.net/browse/PHX5-377]

|35566001|355660|Accrual Test 17|McCloudTest6|

Looking at the code, the new leap year logic was removed at some point. However, looking even closer, it still would not have resolved this. New code has been written to cater for this, but it will need thorough testing.

In service, ServiceUnitCalculationPublicSectorPPS , the code should be changed to:

{noformat}public override Period PeriodBetween(LocalDate startDate, LocalDate endDate)
{
    var yearsbetween = Period.Between(startDate, endDate, PeriodUnits.Years).Years;
    var daysbetween = Period.Between(startDate, endDate, PeriodUnits.Days).Days;
    //var totalfeb29ths = PensionableService.CountLeapDays(startDate, endDate);

    var adjustedStartDate = startDate.PlusYears(yearsbetween);
    var days = Period.Between(adjustedStartDate, endDate, PeriodUnits.Days).Days;
    var totalfeb29thsfordays = PensionableService.CountLeapDays(adjustedStartDate, endDate);
    var daysToAddExcludingFeb29th = (days - totalfeb29thsfordays);

	var daysToAddIncludingFeb29thInLast365Days = daysToAddExcludingFeb29th;

    LocalDate feb29thInLastYear = _calculationDate.PlusDays(-365).NextFeb29th();

    if (feb29thInLastYear >= startDate && feb29thInLastYear <= endDate)
    {
        daysToAddIncludingFeb29thInLast365Days+= 1;
    }

    return Period.FromYears(yearsbetween) + Period.FromDays(daysToAddIncludingFeb29thInLast365Days);

}{noformat}

This logic removes all the feb 29ths every time, and then only adds it back if the feb29th is in the last 265 before the end date AND within the period being considered.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@21a88990,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004y:jx,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 6,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_190007559,,,,,,,,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,01/Aug/25 12:38 PM
LSA limit,PHX5-388,14581,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,29/Jul/25 4:19 PM,02/Jan/26 12:56 PM,,17/Dec/25 2:16 PM,Client 172 Fire A to R Version 4,Client 176 Police A to R Version 6,Client 176 Police D to R Version 1,,,,,,,,,,0,TEST_CASES,,,,"See updates to A to R spec.

Notes on solution:

h3. *TaxRates*

These should be stored as client level factors to enable easy changing at a later date.

h3. *Inputs*

We will need the following set up as inputs:

* LSA_member
* LSDBA_member

This will need a discussion with dev, as I am not not exactly what format these will come through to us as.

h3. *Outputs*

The LSA used will need to be added to Other Values on all options - so that it can be picked up at the Retirement level and passed into subsequent member calculations

h3. Strategy factory input update

Currently all strategies take the LSA limit as an initial input. This will need to change. As the LSA will be coming as a run time input. It will also need to become the two values. LSA and LSDBA

Given we should have all the information at the factory stage to be able to calculate the new LSA limit - we should be able to pass the new LSA limit into each strategy. However, this will need to be a whole new function. We will need a function that can map each pre 2022 option to its post 2022 option for LSA purposes. All pre 2022 options can just use the run time inputs.

To be able to do this, we will need the list of previous pension options as an input to the final active to retirement stage.

h3. *Change to inputs to final stage*

Currently all options go through to Pre com stage so that at the client level we have access to all the pre com values when we then calculate the pension options.

For the LSA code to work, for the 2015 pension options we will also need to be aware of the pre 2015 pension options.

We will need to ensure the order of calculation at client level so that pre 2015 (salary linked member) is calculated first.

We need the information to be available at factory stage. So we will need a new 

.WithPensionOptions({{Dictionary<InternalCalculationPensionOptionType, PensionOption>}} existing pensionOptions)

that can take these if required.

Because these will be optional, any code written will need to have a check on the dictionary being empty.

h3. New Pension Option Required

We will need a new SchemeMaximum option for 2015 cases.

This will require the following:

* {{ReformPost22PCLSIfDBMaximumLumpSum}}
* {{LegacyPost22PCLSIfDBMaximumLumpSum}}

The first is definitely required to be able to take the LSA used from the reform maximum option

We will then need the legacy maximum to take the LSA used from the legacy maximum option. And if we have one legacy option, we probably need the others.

This is only required for 1987 members. To keep the logic on which options are required within the factory, we will need the factory to be aware of other categories when running a 2015 member. Cleanest way to do this:

* Add a Dictionary of current categories keyed by auroraid to the iMemberInfo object.
* Populate this at the client level - which is aware of both members.
* Add a get only property to the PublicSectorMemberInfo called “Is87Member” or similar. This will use the information in the dictionary to return true if there is a 1987 ctageory in the dictionary
* Within the factory, use this new boolean property to add a new CAREMaximum pension option calculator to the collection.



Need to change 

{noformat}public Dictionary<InternalCalculationPensionOptionType, IPublicSectorPensionOptionCalculator> PensionOptionCalculators { get; set; }
{noformat}

to an OrderedDictionary so that we cycle through in the order they were added. To ensure that DB is calculate before care for reform case





Also need a mapping dictionary, that for each key will tell us the pension option key to get the LSA from.

EG: 

ReformPost22CAREPCLS from ReformPre22CAREPCLS

ReformPre22CAREPCLS  from ReformDBPCLS

ReformDBPCLS would not have an entry - and in this case the code would default to take the LSA from the inputs.",,Andrew Wilson,Annabelle Stephenson,Chris Marshall,Iain Wilson,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87,,,,,,,,,,,,PHX5-545,,,,,,,,,,,,,,,PHX5A-121,PHX5A-170,,08/Oct/25 8:57 AM;5796a187-7241-414b-bea0-2d22260a9bed;image-20251008-075645.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10610,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@18cb27d4,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000i00z,,,"Base level LSA code.

We now calculate salary link members before normal members.

The LSA used for each option is stored.

Options are calculated in order to ensure that reform db is calculated before reform care

All options are tied to each other so that the correct lsa used is used. i.e. LegacyPost22CAREZeroLumpSum will use the LegacyDBZeroLumpSum option.

Most options deal with the quotes stage, as both db and care assume the same lump sum choice.

For settlements, the target options has been coded to use a single lsa. This option is also used to populate {{MemberUnauthorisedPayment}} and {{RelevantBenefitCrystallisationEvent}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 25,,,,,,13.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-08-01 10:44:45.584,10281_*:*_2_*:*_614506783_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_405116014_*|*_10252_*:*_2_*:*_119008403_*|*_10354_*:*_2_*:*_5602260745_*|*_10056_*:*_1_*:*_242702962_*|*_10355_*:*_1_*:*_5174257089,,"29/Jul/25 4:20 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Code to be added
Line 1199

{noformat}      /*  if (totalCash > LSALimit) 
        { 
            
            Log.Warning($""Total Cash of {totalCash} is capped at LSA Limit"");
            totalCash = LSALimit;

        }*/{noformat}

Line 1144


{noformat}       /* decimal totalCash = carePCLS + dbCash;
        if (totalCash > LSALimit) 
        { 
            
            Log.Warning($""Total Cash of {totalCash} is capped at LSA Limit"");
            totalCash = LSALimit;

        }*/{noformat}

Also need to work out what test cases are needed to cover all scenarios",01/Aug/25 11:44 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;On hold. Iain to come back to us with the details,01/Aug/25 11:56 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;need to consider the case where LSA covers both the pre 2022 and post 2022 record,"10/Sep/25 10:58 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Additionally, we need to ensure the LSA limit is applied to all PCLS strategies correctly.  Currently not in place on ZeroAccruedCashInverseDBPensionOptionStrategy","06/Oct/25 7:08 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Iain has confirmed that the logic for LSA will change existing pension option logic

We also need to be ready to add a few outputs to “Other Values”","07/Oct/25 7:17 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;After looking at spec, initial questions:

# How many of the new values are required as outputs for letters/calcprints.
# Is the value “DB_LSAused_1987” on 2015 scheme the figure “OptA_DB_LSAused_1987” from the 1987 tab (similarly for the CARE used figure.

 [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] [~accountid:712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97] ","07/Oct/25 7:58 AM;712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] 

Andrew

 

Morning. IN response:

 

1 - We are still working on the outputs tab, but the main items are included. This should give you answers

2 - Yes it is. The part “Opt A” was only being used to help differentiate between the calculation run or the different lump sum amounts. In reality they can be removed now that we have the 4 different lump sum options sorted out

 

Iain","08/Oct/25 8:57 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87] 

On the Spec on the 2015 page, we have the following:

!image-20251008-075645.png|width=894,alt=""image-20251008-075645.png""!

Should the LSDBA be based on the initial LDSBA_member value rather than the LSA_member value?



FYI [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] [~accountid:712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97] ","08/Oct/25 8:59 AM;712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] It should, but give me 5 to review","04/Nov/25 3:59 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;How does LSA work on settlement, if a member can pick different options for different members? i.e. PCLS for active normal and zero lump sum for active salary link.  We currently only link options like for like. There is no way for us to mix and match all options without creating a mess. We would need to know we were running a settlement, and which options had been chosen so that we could simplify the calculation.","12/Nov/25 2:26 PM;712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Afternoon Andrew

 

We discussed this point when we met with Dev about the retirement process.

 

It was agreed that when we are running the retirement settlement that all the member elections would be entered and so you will only have one “set” of options to run through the calcs

 

Iain","12/Nov/25 3:08 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87] I agree that this is what was agreed in the meeting, but it requires a substantial amount of work from the devs, potentially creating some unmaintanable code. I am just pointing out that we cannot code the calculation without this large change from the devs.","16/Dec/25 7:03 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Tests required:

{{PensionOptionLSAFactory}}

Given members category, do we set up the correct lsa strategies - with the correct keys.  Might be possible to set up a test at the PSC level, using {{PensionOptionCalculatorFactory}} to set up the member’s pension options, and then calling {{PensionOptionLSAFactory}}, and flagging if there are any pension options in {{PensionOptionCalculatorFactory}}  that are not in {{PensionOptionLSAFactory}}. This would be a very bespoke test, and would need a case for every path in {{PensionOptionCalculatorFactory}}  (every category, mccloud option, ill health choice), but it would cover us if changes are made to {{PensionOptionCalculatorFactory}} .

{{GetLSAFromPensionOption}}

Simple test cases required. Given a list of pension options and a key, do we return the correct LSA and LSDBA. If they key is not found, so we return the existing lsa and lsdba.

{{GetStartingLSA}}

This will be harder to set up, every test case will need a {{Dictionary<InternalCalculationPensionOptionType, PensionOption>}} of pension options, and the correct pension options will need to be pre updated with lsa values in other values. We are less interested in what the figures are, and just that for a given pension option, we have taken the lsa from the correct previous option.   So to be sure on this, if the dictionary contained every single pension option - each with a different lsa and lsdba (could have 101, 102, 103, 104 etc), then for a given key, to we pick out the correct one?

{{GetMemberUnauthorisedPayments}}

Given a pension option, do we return the correct {{List<MemberUnauthorisedPayment>}}

* If has db, should return db
* if has care shoudl return care
* if has both, should return both

But only if values > 0

{{GetRelevantBenefitCrystallisationEvents}}

Given a pension option, do we return the correct {{List<RelevantBenefitCrystallisationEvent>}} For now we are returning just one value.  There is no current way to store both care and db, so we are summing them up. If there is a requirement to have both, then there will need to be a table change, and this function and its tests will need to change.

{{LSAStrategy}}

There are currently four strategies, we need to test each one of these, as they have different logic for UPLS and PCLS

* {{DefaultDBLSAStrategy}}
* {{Fire2006DBLSAStrategy}}
* {{HMRCPCLSDBLSAStrategy}}
* {{CARELSAStrategy}}

Each of these strategies will use the base {{GetLSAOtherValues}} to calculate the LSA figures. So these tests should also cover whether we are calculating the correct values.",,,,,,,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,17/Dec/25 2:16 PM
DIS Warnings,PHX5-387,14560,Story,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,28/Jul/25 8:52 AM,05/Dec/25 6:41 AM,,,,,,,,,,,,,,,0,,,,,"Need to add the warnings from the spec:

{adf:display=block}
{""type"":""table"",""attrs"":{""isNumberColumnEnabled"":false,""layout"":""center"",""localId"":""d9ec226b-9030-4179-8ad2-6ebcc19a9cf0""},""content"":[{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colspan"":11},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Scheme Specific Warnings and Errors""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Warning ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Test condition""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":8},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Message Required""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Warning ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Member has Divorce pension debit""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":8},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Member has Divorce pension debit, Check if manual calculation required.""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Warning ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Member has Annual Allowance debit""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":8},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Member has Annual Allowance debit, check if manual calculation required.""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Warning ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""all NPPS""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":8},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""If there are more than 2 eligible children, the total amount of pension must not be more than 50% of the member's pension ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Warnings""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""all CARE""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":8},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""If there are more than 2 eligible children, the total amount of pension must not be more than 50% of the member's pension ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Warning ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""All CARE""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":8},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""If spouse is more than 12 years younger than the member then the yound spouse rule will apply""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Warning ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Capital value of spouse's pension plus DC benefits is less than £30,000""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":8},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""The capital value of the spouse's pension plus DC benefits is less than £30,000, therefore spouse's benefit may be trivially commuted.   ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Warning ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Capital value of child's pension is less than £30,000""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":8},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""The capital value of the child's pension is less than £30,000, therefore child's benefit may be trivially commuted.   ""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""Admin to confirm other E & W required""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]},{""type"":""tableCell"",""attrs"":{""colspan"":8},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":"" ""}]}]}]}]}
{adf}",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5df4b252,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000007i000j0w,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13855,PHX5-222,Police - Death in Service,To Do,28/Jul/25 8:52 AM
Ill Health - FPS 2006 service amendment in accrual module.,PHX5-386,14551,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,25/Jul/25 1:06 PM,02/Sep/25 11:37 AM,,02/Sep/25 11:37 AM,Batch 1,,,,,,,,,,,,0,,,,,No ill health for these members,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@8bda111,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzyu:xe,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_3364300157,,07/Aug/25 2:22 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] / [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  Would you agree that this ticket can just be closed?,,,,,,,,,,,,,,,,,,,,,,,,13808,PHX5-198,Accrual Module,Done,02/Sep/25 11:37 AM
Ill Health - 2015 Accrued pension,PHX5-385,14550,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,25/Jul/25 10:39 AM,03/Sep/25 9:44 AM,,02/Sep/25 9:55 AM,Batch 1,,,,,,,,,,,,0,,,,,"|Ill Health| | |
|Name|Description|Further comments|
|CARE_ill_health_enhancement|# Lower tier - Accrued pension only granted unreduced.|Accrued pension, no ERF|
| |# Higher tier - Accrued pension plus a service dependant enhancement. See further comments for this calculation. |If member has more than 5 years service in the PPS 2015, they will receive: 
CARE_pay_illhealth / CARE_accrual_rate x assumed period of pensionable service / 2  (where 'assumed period of pensionable service' is the service from the day after ill-health retirement to normal pension age (60) )   
If member has less than 5 years service in the PPS 2015, they will receive the lesser of: 
* Accrued pension x 3 
\\
or
* CARE_pay_illhealth / CARE_accrual_rate x assumed period of pensionable service / 2  (where 'assumed period of pensionable service' is the service from the day after ill-health retirement to normal pension age (60) )                                                                                                    |

There is a new strategy PublicSector2015IllHealthHigherTierStrategy set up.

AccruedPensionCalculatorFactory has already been set up to use this for any higher tier ill health 2015 members. We just need the above logic coded in PublicSector2015IllHealthHigherTierStrategy. This has also been set up to create a service calculator for the prospective service.

*Potential issues -* 

# The prospective service calculator is set up to use service periods.So if a member is currently part time, it will assume part time hours till age 60. Is this correct, or should it be full time? If we discover it should be all full time, then change the code to pass in an emtpy list of service periods to the new service builder.
# What if the member is over 60? What happens in this case?

To set up test cases, we can copy the other accrual strategy test methods (e.g. AccruedPensionDoubleStrategy) and just change to use the new strategy",,Andrew Wilson,Chris Marshall,Matt Lilwall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,08/Aug/25 12:40 PM;862ca789-6c5f-4d0a-b054-60929f0a27a7;image-20250808-114018.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10291,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@193d131,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x04,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 9,PHX5 Sprint 10,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-08-07 13:26:47.279,10251_*:*_3_*:*_476450983_*|*_10250_*:*_3_*:*_712577223_*|*_10252_*:*_1_*:*_954616229_*|*_10354_*:*_2_*:*_6239264_*|*_10056_*:*_1_*:*_1215875092_*|*_10355_*:*_1_*:*_991737,,"06/Aug/25 2:44 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  The spec mentions “'assumed period of pensionable service' is the service from the day after ill-health retirement to normal pension age (60)”. Our standard service object may not hold this - as we won’t by default calculate service into the future.

We may need to think about introducing a third service tranche for ill health. “Prospective” (or something) that calculates from day after retirement to age 60","06/Aug/25 3:28 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Actually, easier to just do a mini service calculation within the accrual code, and use this to get 'assumed period of pensionable service'



{noformat}        IServiceBuilder serviceBuilder = new ServiceBuilder(a list with a single tranche between day after DOR and age 60, members service periods, empty list of breaks, day after DOR, age 60 date)
                                                .WithUnits(ServiceUnits.YearsAndCompleteMonths)
                                                .WithMethod(ServiceMethod.PublicSector)
                                                .WithFillType(ServicePeriodFillType.LastPeriodToBeFilled); {noformat}","07/Aug/25 10:41 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]  As discussed, we will check with Iain if the prospective service needs to to consider the leap year logic, or if it can do service as per mccloud code, with a simple years and days/365","07/Aug/25 2:26 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87] 

In reference to the CARE_ill_health_enhancement for higher tier, we need to calculate service from the day after ill-health retirement to normal pension age (60). Do we need to include the leap day if there is one in the member’s final year of prospective service to NRD? 

Thanks

Matt","08/Aug/25 12:40 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;!image-20250808-114018.png|width=1162,height=342,alt=""image-20250808-114018.png""!","08/Aug/25 12:41 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] , based on Sophie’s/Iain’s response, the prospective service will will have to go through the main service code.","20/Aug/25 8:22 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Message sent to admin regarding queries stated:



Morning April just have a couple of questions on ill health for care members: Thanks

# if a member is currently part time, we assume part time hours till age 60. Is this correct, or should it be full time? 
# What if the member is over 60? What happens in this case?","26/Aug/25 12:13 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Reply from admin

Morning Chris! This should be in the calc spec parameters but there is no ill health enhancement after 60 in CARE as it is the NRA (if you are meaning the 2015 scheme) and the prospective service is always based on qualifying, not reckonable.","26/Aug/25 12:16 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Whilst coding the calc, noticed that the CARE_pay_illhealth needs calculating in the first instance prior to the logic provided on the spec. 

Need to use the latest CARE posting from the data view then / reckonable service for that period alone

Also need the full CARE service to determine if member has more than 5 years or less

 [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452]I think it is best to publish the module without any of my inputs as there is more to this now than first thought. I can then work through this once published?",26/Aug/25 1:47 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  There is already a ticket for the salary: [[PHX5-384] Pensal for ill health - Jira|https://xps-jira.atlassian.net/browse/PHX5-384]   Create another ticket for the >5 years option.,"27/Aug/25 4:10 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Coding now finished. Results tested and compared to Altair and results match.

Module updated here: [Public Sector Calculation - Global Module Editor|https://calculate.calcuat.xpsplc.com/global-modules/63]

Expected results saved to share point here: [Project Phoenix - 2015 Ill Health - All Documents|https://xpsplc.sharepoint.com/sites/ProjectPhoenix/Shared%20Documents/Forms/AllItems.aspx?id=%2Fsites%2FProjectPhoenix%2FShared%20Documents%2FPhase%205%2FImplementation%20Services%20Team%2FCalculations%2FExpected%20results%2F2015%20Ill%20Health&viewid=23aab45f%2D393f%2D40f3%2Da838%2D80e33f9afe9b&p=true&ct=1742906190704&or=Teams%2DHL&ga=1&LOF=1]",27/Aug/25 4:10 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855; [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452]Are you able to review this for me. Thanks,"28/Aug/25 7:51 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  Looks good. Feedback:

# {{prospectiveServiceDuration}} is rounded to 2 and {{careService}} is rounded to 6. They are effectively both coming from {{FinalDecimalAmount}} so why different rounding?
# Should we consider renaming {{prospectiveServiceDuration}} and {{careService}}. Calling one duration and one service makes them seem very different, when they are the same concepts just one is care and one is prospective.
# For all the lines where we get something from a list, have we checked it works when there are no values? i.e. will it hit object not set to instance of object?
# Further to that thought, should we be raising errors if any of these have no information? i.e. if there are no {{serviceHistory}} tranches with a key of CARE would it be more helpful to raise an error saying this?
# for lines 1000 and 1006 where we round the final result, use the Rounding parameter instead. This should have been set to 2, but allows for easy changing later.","28/Aug/25 12:18 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;# {{prospectiveServiceDuration}} is rounded to 2 and {{careService}} is rounded to 6. They are effectively both coming from {{FinalDecimalAmount}} so why different rounding?

The rounding differs as it needs to be 6 decimal places for the careFactor to calculate the correct CARE pay for the final year when equating up to full year. Spoke with Graeme in admin regarding this.

# Should we consider renaming {{prospectiveServiceDuration}} and {{careService}}. Calling one duration and one service makes them seem very different, when they are the same concepts just one is care and one is prospective.

Amended to {{prospectiveService}}

# For all the lines where we get something from a list, have we checked it works when there are no values? i.e. will it hit object not set to instance of object?

Updated code when picking up CARE values from Aurora to fall out if there is no data

# Further to that thought, should we be raising errors if any of these have no information? i.e. if there are no {{serviceHistory}} tranches with a key of CARE would it be more helpful to raise an error saying this?

Updated with 
if (!serviceHistory.Any(x => x.TrancheKey == ""CARE""))
{
throw new InvalidOperationException(""There are entries with TrancheKey not equal to 'CARE'."");
}

# for lines 1000 and 1006 where we round the final result, use the Rounding parameter instead. This should have been set to 2, but allows for easy changing later.

Updated as shown
return Math.Min(option1, option2).Round(Rounding);
return Math.Round(result, Rounding);","02/Sep/25 8:58 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] Should have mentioned before, but there are a few places here were we have hardcoded a TrancheKey (Care and Prospective). We should be referring to the key constants.",02/Sep/25 9:51 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Following discussion with  [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] wider coding changes are required. Passing back to review and further story to be created to incorporate changes which are not ill health specific,02/Sep/25 9:55 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Have created [https://xps-jira.atlassian.net/browse/PHX5-425|https://xps-jira.atlassian.net/browse/PHX5-425|smart-link]  to cover the updating of hard coded strings,,,,,,,,13808,PHX5-198,Accrual Module,Done,02/Sep/25 9:55 AM
Pensal for ill health,PHX5-384,14549,Story,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,25/Jul/25 10:13 AM,19/Dec/25 9:20 AM,,,Batch 1,,,,,,,,,,,,0,TEST_CASES,,,,"| | |NPCC Technical Guidance note - Ill Health Underpin v2.pdf|
|PenSal_for illhealth|Take max Pen pay (31.3.2015, 31.3.2014, 31.3.2013) add PI from either (31.3.2015, 31.3.2014, 31.3.2013) to DOR|The salary data is avaiable on the system - PI increase from standard PI tables from GAD|
| |Take max Pen pay (31.3.2022, 31.3.2021, 31.3.2020) add PI from either (31.3.2022, 31.3.2021, 31.3.2020) to DOR|The salary data is avaiable on the system - PI increase from standard PI tables from GAD|",,Andrew Wilson,Chris Marshall,Matt Lilwall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-115,PHX5A-249,,10/Sep/25 11:53 AM;5e266667-8b87-4eb6-9386-71980feac557;Pensal for Ill Health.msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10445,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6bb82946,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00008v,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-09-10 10:52:09.859,,,25/Jul/25 2:35 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  Next steps - to clarify what we need to do here. Do we need test cases?,08/Sep/25 2:32 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  To clarify where we are with the test cases,10/Sep/25 11:52 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Email sent to admin (attached) for test cases to be provided,09/Oct/25 9:33 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Double checked with Chris. We still haven’t received any test cases for this.,"24/Oct/25 2:03 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] I think we have been told this is going to be an input, can you please confirm?",,,,,,,,,,,,,,,,,,,,13809,PHX5-199,FPS Module,To Do,25/Jul/25 10:13 AM
Added years bought - pro rate,PHX5-383,14548,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,25/Jul/25 9:59 AM,28/Nov/25 4:37 PM,,29/Oct/25 1:41 PM,Batch 1,Client 150 Police A to R Version 5,,,,,,,,,,,0,TEST_CASES,,,,"|Added Years Bought| |
|Name|Description|
|db_AddedService|Added service in contract * (contract start date to MIN(contract end date, date of leaving)) / (contract start date to contract end date)|",,Andrew Wilson,Annabelle Stephenson,Naomi Robinson,Russell Armstrong,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:ffa445ab-b813-4226-9ed2-507a454e9272,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,16/Sep/25 1:06 PM;b661603b-01c2-4777-a078-ea42f749ddd8;PPS Added Years Bought.msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10462,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2dec68d1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzbzx,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 14,PHX5 Sprint 15,PHX5 Sprint 18,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-09-08 15:05:58.58,10281_*:*_2_*:*_2152375619_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_373314664_*|*_10252_*:*_2_*:*_1652375360_*|*_10354_*:*_3_*:*_607331768_*|*_10056_*:*_1_*:*_881856054_*|*_10355_*:*_1_*:*_2482255728,,25/Jul/25 2:48 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] to clarify if this is needed for A to R / A to D - and we need test cases.,08/Sep/25 2:39 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:640f34fc1273131f2adfede9]  Are you able to clarify how the pro rating works,"08/Sep/25 4:05 PM;640f34fc1273131f2adfede9;Points to clarify

* How are leap days counted when measuring the period from contract start date to contract end date/date of leaving? Is this the same as when calculating service periods?
* Impact of breaks and part time - is the amount of service purchased reduced for any breaks or part time periods of service?",16/Sep/25 1:06 PM;640f34fc1273131f2adfede9;Email sent to Admin 15/09 [^PPS Added Years Bought.msg] ,"17/Sep/25 9:20 AM;640f34fc1273131f2adfede9;Answer received 

* When calculating the periods from contract start date to contract end date and contract start date to date of leaving, are leap days included using the same rules as when calculating service? Yes, but the ‘Added service in contract’ value cannot be exceeded. So, if the member’s full Added Years contract is for 5 years it cannot grant 5 years and 1 day for the leap year. If the date of leaving is before the contract end date and it is working out the proportion of service to date of leaving it should use the leap year days.
* Are any adjustments made to the calculation of db_AddedService if there are any changes to the hours worked or service breaks after the contract start date? No, the adjustment would be in the ‘Added service in contract’ value held on the record before the calculation is ran.","09/Oct/25 4:23 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The days will actually come from a decimal amount on the MemberHistoricBenefitElementValues table. This was just to 2dp, but talking to Neil, this will be changed to 6dp - so should get us the accuracy we need.

Also, the end date was missing. Neil has changed the mapping to put Due to terminate into the end date so we will have that available.

Note - this change will not be on client 144",10/Oct/25 4:37 PM;640f34fc1273131f2adfede9;Asked Neil about using the External Fund Values screen instead as this has the relevant fields to store prospective years and days and dates from and to,23/Oct/25 10:04 AM;640f34fc1273131f2adfede9;Neil said would be fine to use External Fund Details - will load to that and Historic Benefit Elements and we should let him know which we are using and he would remove the other one,"27/Oct/25 4:44 PM;640f34fc1273131f2adfede9;Added {{PublicSectorAddedYearsPurchased}} into {{ITransferInServiceCalculator}}. Included this in {{TransferInFactory}} expanding the inputs. Added to {{KeyServiceTrancheConstants}} to include a {{PurchasedKey = ""Purchased"";}} to allow filtering when adding service together as from the Pre Comm spec it appears the added years purchased are not included in other service calculations (e.g. double accrual).

Updated accrual strategies to calculate the pension/lump sum from the added years purchase completed and add to the final element values.

Added tests TransferInFactory _AddedPensionPurchased to test the pro rata was working as expected for the member in [https://xps-jira.atlassian.net/browse/PHX5-523|https://xps-jira.atlassian.net/browse/PHX5-523|smart-link] where we do have an expected pro rata. Also added a sesond test TransferInFactory _AddedPensionPurchased PPS1987 ill health to cover the scenario for 1987 members where there is no pro rata on ill-health retirement",28/Oct/25 7:06 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I added {{ExternalFundDetails = member.ExternalFundDetails}} to ModelConversions to get this working at client level,29/Oct/25 1:41 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Code and test cases reviewed. Suggest closing this one off and adding [https://xps-jira.atlassian.net/browse/PHX5-523|https://xps-jira.atlassian.net/browse/PHX5-523|smart-link]to next sprint as well as publishing into A>R. Can confirm comment made by Russell in that ticket to confirm what further testing is needed to close that ticket off as well as this one.,,,,,,,,,,,,,,10708,PHX5-195,General Calculation Items,Done,29/Oct/25 1:41 PM
GAD contributions,PHX5-382,14547,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Highest,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,25/Jul/25 8:57 AM,06/Jan/26 12:25 PM,,24/Dec/25 4:28 PM,Batch 1,Client 172 Fire A to R Version 4,Client 172 Fire D to R Version 1,Client 176 Police A to R Version 6,Client 176 Police D to R Version 1,,,,,,,,0,Module,TEST_CASES,,,"1987:

|Name|Description|Further comments|
| |DB_NetPCLS - GAD contributions if member chooses lump sum |Obtain current net GAD contribution value (we expect this will be a separate calculation as it will be included in other calculations i.e transfers, divorce etc) This will either be owed to or owed from the member|
|Member owes|Where DB_NetPCLS > 0
DB_NetPCLS - GADconts | |
|Member owes|Where DB_NetPCLS = 0
DB_PostCommPension - (GADconts / CCF)| |

2006:

|Name|Description|Further comments|
| | |Obtain current net GAD contribution value (we expect this will be a separate calculation as it will be included in other calculations i.e transfers, divorce etc) This will either be owed to or owed from the member.|
|Member owed|dB_TotalCash + net_GADconts|If member chooses pension only and is owed GAD conts member cannot inverse commute GAD conts value.|
|Member owes|db_TotalCash - net_GADconts| |
| | | |
|Member owes|Where db_TotalCash = 0 
db_MaxPension - (net_GADconts / dbInverseCommccf)| |",,Andrew Wilson,Annabelle Stephenson,Naomi Robinson,Russell Armstrong,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:ffa445ab-b813-4226-9ed2-507a454e9272,640f34fc1273131f2adfede9,,,,,,,,,,CSD-185,,PHX5-704,,,,,,,,,PHX5A-196,,,,,,PHX5-756,PHX5-770,,03/Nov/25 5:10 PM;18934601-32fa-4c76-9b74-159dc94fd206;Remedy Contributions process V1.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11089,03/Nov/25 5:10 PM;18934601-32fa-4c76-9b74-159dc94fd206;image-20251103-160914.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11090,03/Nov/25 5:40 PM;18934601-32fa-4c76-9b74-159dc94fd206;image-20251103-174010.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11093,04/Nov/25 9:48 AM;18934601-32fa-4c76-9b74-159dc94fd206;image-20251104-094840.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/11122,27/Nov/25 5:31 PM;18934601-32fa-4c76-9b74-159dc94fd206;image-20251127-163518.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/12353,27/Nov/25 5:31 PM;18934601-32fa-4c76-9b74-159dc94fd206;image-20251127-163657.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/12354,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3cd35710,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pta:uzzz,,,"GAD Contributions will now be applied to (deducted from) member’s relevant DB cash, in A>R and D>R calcs.  This deduction takes place after the benefits have been adjusted for LSA limits, but before any PI prepayment is applied.

PLEASE NOTE that currently the contributions are not applied in TargetLumpSumCommuted calculations, and a warning is returned.  This is to be addressed as soon as possible in the next release.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 25,PHX5 Sprint 26,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-03 17:10:09.815,10281_*:*_2_*:*_770597647_*|*_10251_*:*_3_*:*_148595484_*|*_10250_*:*_3_*:*_964773122_*|*_10252_*:*_1_*:*_162625154_*|*_10354_*:*_4_*:*_1978669931_*|*_10056_*:*_1_*:*_616334322_*|*_10356_*:*_1_*:*_1279135807_*|*_10355_*:*_2_*:*_7142172288,,"25/Jul/25 2:51 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  to clarify if these values are already on the record, where they are stored.  Do we have test cases?",01/Aug/25 12:10 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;on hold - for data reasons,"01/Aug/25 12:13 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;to discuss with Iain - how mych is data or a calc. There is an external gad calculator

for benstats - we will need to revalue in bulk, so we could need this coded.



we will need a GAD interest calculator","03/Nov/25 5:10 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I’ve had a look at data tables MemberMcCloudTaxContributions (a) and MemberMcCloudTaxContributionTotals (b), and the attached remedy contributions process [^Remedy Contributions process V1.xlsx] from this analysis ticket [[PHX5A-196] Remedy contributions process (GAD) - Jira|https://xps-jira.atlassian.net/browse/PHX5A-196]

My understanding is that we need to consider the calculation of the GAD contributions themselves (1), and how those GAD contributions impact the retirement benefits (2).  The table in the description for this ticket outlines (2) which seems to be simple logic, so the following questions are around calculation (1).

The remedy contributions process file suggests that we will have figures for contributions owed by / due to the member readily available from their record, which we calculate interest on.

Table (a) has values for different contribution types, the tax due, the interest accrued, and the +net result+ (contribution - tax + interest = net; this net figure is what we will deduct from / add to member’s benefits).  See table below.  Most common types are 3 and 4, but 2 and 5 are also present.  ContributionTypes table is empty so I don’t know what these refer to, but they could perhaps be the following 4 adjustment types from the remedy process doc: 

Contributions due to member Option 1 (Legacy)		
Contributions owed by member Option 1 (Legacy)		
Contributions due to member Option 2 (CARE)		
Contributions owed by member Option 2 (CARE)		*(going to check this with Neil)*

!image-20251103-160914.png|width=576,alt=""image-20251103-160914.png""!

Table (b) shows the +gross+ contribution amounts from table (a) above added to (what I assume are) the member’s total contributions.  I think these total conts values may be relevant for annual allowance, but I don't think they are used for calculation of actual retirement benefits so I’m ignoring table (b) for now.



-Looking back at table (a) and considering what we need to do in calc (1), we need to determine how both the interest and the tax are calculated.  The interest as a proportion of the gross contribution value varies, and the attached remedy process says to just use 1 until fully spec’d (presumably different rates can apply).-

-The tax varies greatly, in fact in some cases the tax value to deduct is much higher than the contribution value, and in others the tax value is added on rather than deducted, so the net contribution total is higher than the initial contribution.  So the major question I have is- +*-how is the tax calculated?-*+

-It is worth noting that tax is not mentioned in the remedy process file.  So are we in fact to assume that it is the Contributions + Interest that is deducted from / added to member’s benefits, and that tax is not considered?  However, we were of the understanding that these GAD conts were impacted by LSA calcs/logic.  So perhaps the tax is required and will need LSA incorporated?-



[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] *-TLDR:-* -data tables show a tax value on these contributions, but we have no information whatsoever on how the tax would be calculated (presumably this is also where LSA would come in).  The logic at the commutation level is straightforward, but we don’t yet know all of the inputs that will be required to calculate the contribution to be deducted/added.  I will query the tax with April (and run a data query outlined above by Neil) and add more info when I have an update.  This item is not yet ready.-

*UPDATE:* April has confirmed (below) that only the interest needs calculating, no tax or original GAD value.  As we have been told to go ahead without the interest calc spec’d, all we need to do is create a function where the interest will be applied, and incorporate this net value into our cash/commutation functions.  *I therefore think this is ready, assuming we are agreed we should proceed without having the basis for the interest calc.*","03/Nov/25 5:40 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;from Neil on ContributionTypes 

!image-20251103-174010.png|width=331,alt=""image-20251103-174010.png""!","04/Nov/25 9:48 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;and response from April on tax position: 

!image-20251104-094840.png|width=616,alt=""image-20251104-094840.png""!",04/Nov/25 11:37 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;We will need [https://xps-jira.atlassian.net/browse/CSD-185|https://xps-jira.atlassian.net/browse/CSD-185|smart-link]  to be done first,25/Nov/25 11:53 AM;640f34fc1273131f2adfede9;See linked analysis task - still don’t know where data is going to be stored in Aurora,"27/Nov/25 5:31 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I think it will be ‘McCloud Tax & Contributions’ table, which has the following headings: 

!image-20251127-163518.png|width=616,alt=""image-20251127-163518.png""!

and potentially 'McCloud Tax & Contribution Total', which has these: 

!image-20251127-163657.png|width=616,alt=""image-20251127-163657.png""!

Options 1 and 2 refer to legacy and reform, respectively.  (We are expecting 2 outputs: db_Contsadjleg and db_Contsadjref.  Is this table where figures would write back to at settlement or deferment stage?  Should we expect this to be empty for active members?)

I’m not sure how data updates filter through to us.  These tables are now available in client 162, but it doesn't seem like the ones we need are being populated.  Will that happen in the next data cut or should that have happened already? [~accountid:640f34fc1273131f2adfede9] do you know?",28/Nov/25 9:43 AM;640f34fc1273131f2adfede9;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] I can’t see it in client 169 and the McCloud option in member records seems to have disappeared,"01/Dec/25 12:52 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;MemberMcCloudTaxContributions tables not populated.

Raised with Neil 01/12/2025 

His response:

“It is populated in Validate... looks like the load failed in the Console App.  The Remedy Tables are all there, it's the Tax Contributions that aren't.  I'll talk to Phil”","16/Dec/25 11:17 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;*Public Sector Functions:*

The relevant data is held in {{MemberMcCloudTaxContributions}} table.  The table shows any GAD contributions owed by, and due to, the member, in respect of both Legacy and Reform options.  These are identified by the ContributionType ID.  This data is only held on salary link/DB records, as GAD does not apply to CARE.

We need to get the relevant contributions from this table, and prepare them to be deducted from member’s final benefits.  This must happen after all tax from LSA/LSDBA has been calculated

Three new functions created for the different levels of this.

* {{CombineGADContributions}} brings together the contributions from memberData into combined legacy and combined reform, after the relevant interest rate has been applied (this is currently set to 1 on admin’s guidance).  That is, eg, legacy combined = legacy conts owed by member x interest rate - legacy conts due to member x interest rate.  Note that this value would be negative if the contributions due to the member exceed the contributions owed.  We return an element list.
** There are the same contribution types for Scottish and Welsh members as well as the ‘main’ ones.  So there are multiple iterations in this code to create the correct reform and legacy contribution values.
** This runs in {{RetiredCalculator}} in *Public Sector Calculation* and creates a new list of elements ready to be available to each PensionOption.
* {{AdjustGADContributions}} takes our now combined GAD conts and returns the relevant GAD value (legacy or reform) to be applied to member’s benefits (cash +and+ residual pension).  
** This code runs in *Public Sector Calculation* at the time we calculate each DB pension option and adds the final contribution element to OtherValues.  If lump sum = 0, the contribution is divided by the DB CCF.  This amount is deductible from member’s residual pension.  Otherwise, contribution value is unchanged and is deductible from member’s cash.
** An element list is returned.  At this stage, nothing has been applied to the member’s benefits, we are simply storing an element within the PensionOption for later use.
* {{ApplyGADContributions}} is to apply the GAD contributions to the member’s benefits, ie. deduct from pension option values.  This needs to run through +after+ the LSA code.  {{KeyValuePair<InternalCalculationPensionOptionType, PensionOption>}} is returned
** This runs in {{RetiredCalculator}} in *Public Sector Calculation*, cycling through each of the pensionOptions.  The GAD contributions held in OtherValues are applied to member’s benefits: cash contribution deducted from cash, pension contribution deducted from residual pension.

I added {{KeyGADConstants}} to *Public Sector Constants* so that we have consistent key names to use and can cycle through our functions more clearly.



*Testing:*

* I’ve tested {{CombineGADContributions}} at PSF level.  Covering data aspects such as missing or duplicate contributions held, and contributions that have already been settled.  Also tested on calculation aspects such as when the contributions due > contributions owed, and therefore GAD amount is negative
* I’ve tested {{AdjustGADContributions}} also at PSF level.  Testing application of DB factor when LS = 0; testing that we only create elements for DB pension, not CARE.
* {{ApplyGADContributions}} can only reasonably be tested at the next level up (otherwise I need to create a test function that creates KVPs with pension options, would take me forever).  So in *Public Sector Calculation* I’ve added some tests (“testRetirementResults _GAD deductions …”) that run through the whole thing.  These test the actual application of the contributions, not the combining/adjusting etc that is tested in PSF.  
** Tested for an error message when GAD conts owed exceed cash due (this would only happen when target cash input is very low.  Admin have confirmed that conts cannot be split to take some from cash and some from pension, so therefore calc would error and higher target cash needed).
** Tested simple legacy DB only case
** Tested when conts are negative (ie. so GAD is due to member rather than owed, and benefits increase)
** Tested non-mccloud (so GAD not applicable)
** Tested reform combined where DB has GAD deduction but CARE does not

Beyond this, the altair calc prints we have for admin’s test cases do not seem to include GAD, and I therefore cannot test against any actual agreed A>R tests.  We have followed the spec so my understanding is that it is now up to admin to prove that our code is incorrect, if that is the case.

Additionally, the mccloud tax data is only being pulled through to the ‘main’ member input, not the ‘linked’ member.  So without adding the data to inputs manually, any tests where the active member is the main one would not pick up GAD.



The only other issue I have hit at this point is out of our hands.  When lump sum = 0 in a pension option and the GAD conts therefore are deducted from residual pension, some background code automatically calculates the commuted pension values based on the difference between pre- and post-com pensions.  We hit a similar issue when coding the NPPS2006 inverse commutation PCLS, as in that case we were getting negative commuted values.  Admin may just need to be made aware that the commuted values are not always accurate.","18/Dec/25 11:10 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;As discussed, just passing back to add some defensive coding",18/Dec/25 11:40 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] all done. changes made in Functions and brought through to Calculation,"18/Dec/25 5:13 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] I’ve updated {{AdjustGADContributions}} so that it only creates and returns a GAD cash element (not a pension element).  This means we no longer require the DB CCF or the lump sum value to be passed in to this function, however I’m still calling it in OtherValues in the relevant Pension Options, as we do need the mccloudOption and finalPensionKey inputs and we want to store the returned GAD value within the pension option.

Also amended {{ApplyGADContributions}} so that we no longer amend any pension values.  If there is a GAD cash element present then we deduct it from the cash.  If the result of that is <0 then a warning message is logged stating that the cash does not cover the GAD conts owed and so member must take a higher value of cash.  The original cash value (before GAD deduction) is returned.  So this warning message will appear for ZeroLumpSum options, and if the DB target cash entered is < GAD cash owed.

We definitely don’t want an error for the ZeroLumpSum options as the whole calc would fail whenever member has GAD conts, but we may want an error for {{DBTargetPensionOptionStrategy}} rather than a warning?

I’ve updated the results of some of my tests that were testing the pension deduction side.  Changes have been brought through to Public Sector Calculation level.","22/Dec/25 10:56 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Friday evening ran into an issue where retirement calcs are defaulting to legacy mccloud option and therefore always returning legacy GAD figures.  This was not an issue previously, so unsure if something has broken or if it wasn’t impacting figs before?  Do I need to revert my GAD change? (If can’t fix then yes.  Even if not perfect solution, better to have something that works that we can fix later)","23/Dec/25 12:32 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I’ve investigated and debugged the code extensively and cannot trace why the McCloudOption picked up at that point is always legacy.  I don’t think it is a change in the code, I just don’t think we’ve used McCloud at the RetirementResults stage prior to now so we wouldn’t have been aware.

In Andrew’s absence and needing to get this over the line, I have amended {{CombineGADContributions}} to determine the McCloudOption based on whether the {{InternalCalculationPensionOptionType}} contains “Legacy” or “Reform”.  This works, except for {{TargetLumpSumCommuted}} which could be any mccloud option.  Our code will default to McCloudOption.None for this case and therefore not apply any GAD conts.  A warning will be returned to flag this.

Obviously not an ideal solution particularly as we are relying on {{TargetLumpSumCommuted}} for settlement figures.  But it means we can get this out for testing (with the caveat that target doesn’t work) until I can get Andrew’s help resolving this properly.","24/Dec/25 4:28 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Discussed on 3pm call with Annabelle to go through logic.

Agreed thar 5 story points of work has been completed and GAD testing indicates logic is sound.

Issue on identifying McCloud member and it defaulting to Legacy has been worked around with calculation type and warning added for target calcs. Since there is a new ticket to resolve this, I’ve passed this to Closed as the fix will allow this to run as expected and will be a very small change to replace CalculationType with McCloudOption.

Having read over the code, the repeated Scottish/ Welsh logic could be made into a helper method and the different constants fed in but this is presentational and does not impact functionality.",,,,,,,18647,PHX5-718,A to R Day 1 Requirement,Done,24/Dec/25 4:28 PM
Accrual - service max,PHX5-381,14546,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,25/Jul/25 8:53 AM,27/Aug/25 11:18 AM,,20/Aug/25 2:52 PM,Batch 1,,,,,,,,,,,,0,,,,,"The below is from a couple of the specs. We should review the spec to ensure we have captured all the potential maximums

Pre 1987 we are not doing the max service here, as the double accrual logic needs us to apply a maximum separately to DB qualifying and the total BD and CARE qualifying, so for that case, it is easier to skip capping on the service calc, and do the capping as part of the accrual calculation.

NPPS 2006

|db_AccruedPen|min ( 35 , dbTotalReckonableService [ date joined scheme to date of retirement ] ) * dbAccrualRate_2006 * dbAveragePensionablePay|

FPS:

|Accrual - 2006 Scheme| | |
|Name|Description|Further comments|
|AccrualCalc_A|MIN(
       DB Reckonable Service, 
       40
       )|Maximum service accrual is 40. No doubling concept in this scheme. |

One we know what maximums that apply, we should ensure the logic in PublicSectorServiceFactory is correct.",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2c33fff1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00g9z:9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 8,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-08-15 14:53:59.827,10281_*:*_1_*:*_5418_*|*_10251_*:*_2_*:*_427913985_*|*_10250_*:*_2_*:*_858012_*|*_10253_*:*_1_*:*_98549_*|*_10252_*:*_2_*:*_1819348418_*|*_10354_*:*_1_*:*_4665_*|*_10056_*:*_1_*:*_19605537_*|*_10058_*:*_1_*:*_55534,,"15/Aug/25 3:53 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Agreed caps as above: 40 for FPS 2006, 35 for PPS 2006, none on CARE schemes, and caps applied within accrual on PPS 1987 and FPS 1992","15/Aug/25 3:57 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Passing to “review” but can probably just close, as testing done under ticket 258",,,,,,,,,,,,,,,,,,,,,,,13808,PHX5-198,Accrual Module,Done,20/Aug/25 2:52 PM
APP Runtime inputs,PHX5-380,14545,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,25/Jul/25 8:30 AM,06/Oct/25 2:37 PM,,06/Oct/25 2:37 PM,Batch 1,,,,,,,,,,,,0,,,,,"the spec lists the following as separate inputs:

|DB_final_pay_1987|Runtime entries|
|DB_final_pay_2006|Runtime entries|
|Care_pay|Runtime entries|
|Care_pay_illhealth|Runtime entries|

Do we need to have each of these as individual inputs?

member cannot be both 1987 and 2006? but they could have one of those and one of the care, so we certainly need more than one.

How does care pay work if we do not have the full care history? 

Do we need to flag gaps?",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1d6f8919,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00001,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10281_*:*_1_*:*_1296730658_*|*_10252_*:*_1_*:*_864713463_*|*_10354_*:*_2_*:*_3954_*|*_10056_*:*_1_*:*_22173345_*|*_10356_*:*_1_*:*_3541641776,,25/Jul/25 2:39 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;have 2 salary inputs - Db salary and care salary,25/Jul/25 2:39 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;this covers passing the CARE salary through as an input,04/Aug/25 2:52 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;need to confirm with devs that CARe salary will be an extra input,,,,,,,,,,,,,,,,,,,,,,13809,PHX5-199,FPS Module,Done,06/Oct/25 2:37 PM
Salary errors when processing FPP calc not affecting output,PHX5-378,14527,Task,Ready,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Lowest,,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,23/Jul/25 4:10 PM,03/Dec/25 11:12 AM,,,Batch 1,,,,,,,,,,,,0,Expected_Results,,,,,,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7c8bcbb7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00p1i:v,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13809,PHX5-199,FPS Module,To Do,23/Jul/25 4:10 PM
Service/Accrual - UAT 1 feedback,PHX5-377,14525,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,23/Jul/25 3:32 PM,24/Oct/25 2:11 PM,,24/Oct/25 2:11 PM,Batch 1,,,,,,,,,,,,0,Service,,,,"Review UAT 1feedback from admin. Comments added to matrix, here:

[Accrual Module Matrix.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EeU6EymCICFLnEoaHzFoTvEBskcWdDV57qiW0mIpeNIb1A?e=Pn0LIM]",,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@597f88f0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ig7:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,0.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_8030290351,,,,,,,,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,24/Oct/25 2:11 PM
Overtime - not pensionable for whole time members,PHX5-375,14513,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,23/Jul/25 9:18 AM,28/Nov/25 5:21 PM,,30/Sep/25 1:46 PM,Batch 1,Client 150 Police A to D Version 1,Client 150 Police A to R Version 5,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,0,,,,,"Need test case and code to cover this.

Taken from service spec:

|Calculate total overtime as Years + Days as decimal. 
Source data: MEMBER_AVC_FUND_AMOUNT.AVC_ADDED_YRS holds data as days|This will only apply to a part time member, overtime is not pensionable for a whole time member. |",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,PHX5-392,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1227d446,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1n:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 14,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-09-29 11:52:54.002,10281_*:*_1_*:*_1641645707_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_406369519_*|*_10252_*:*_2_*:*_2451714127_*|*_10354_*:*_1_*:*_1197293587_*|*_10056_*:*_1_*:*_191072825,,"25/Jul/25 7:55 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The code to change is in the service module. It will be class {{AddedServicePublicSectorMethod}} as this is a public sector specific section of code that includes the added service. It already has the overtime details, and is adding them to the list. However, this code does not currently know if the member is part time.

We need to add a new public property isPartTime.

This can be set in ServiceBuilder. {{WithAddedService}} as this is the point that is creating the added servicemethod and can set this property.

{{WithAddedService}} should be called after serviceperiods have been set. So we can do a check on {{serviceCalculator}}.ServicePeriods, and if we find any part time periods, we can set the isPartTime property to true.",29/Sep/25 12:52 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;This is incorporated under ticket 392 - see comments there,,,,,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,30/Sep/25 1:46 PM
Service Break - Getting data from record,PHX5-374,14512,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,23/Jul/25 9:11 AM,04/Aug/25 2:50 PM,,04/Aug/25 2:50 PM,Batch 1,,,,,,,,,,,,0,,,,,"We need to treat different types separately. See Service spec:

|Migrated to Aurora - ServiceBreaks 
Source data: MEMBER_SERVICE_BREAK where MEMBER_SERVICE_BREAK.REASON <> 'P' (Conts Paid Break) 
Calculate duration between MEMBER_SERVICE_BREAK.START_DATE and MEMBER_SERVICE_BREAK.END_DATE 
Types of service breaks: Leave of absence (A) 
Education break (E) 
Parental break (M) 
Conts paid back (P) 
Strike (S) 
Unauthorised (U)|

|Only 'Conts paid back' will be pensionable and included in the service calculation, all other types are non pensionable and will be deducted from qualifying and reckonable service. |",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3171cabf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x7f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,1.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_1057131712,,"25/Jul/25 8:01 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;We need a whole new data area for public sector. This area needs to take the member object and return the relevant information. We will need this for various bits of data.

This part will look through the service breaks and return all the service breaks.

It will perform some checks, flagging if conts paid back is not set as pensionable, or if any of the other types are set as pensionable.

Should we also flag if there is a service break outside the above list.

Are these errors or warnings?",,,,,,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,04/Aug/25 2:50 PM
Set up Test Cases in Calculate,PHX5-372,14500,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,22/Jul/25 11:01 AM,13/Nov/25 10:03 AM,,,,,,,,,,,,,,,0,Batch3,TEST_CASES,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3d470627,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:z,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14497,PHX5-369,Fire - Transfer Out External,To Do,22/Jul/25 11:01 AM
Fire - Transfer Out External,PHX5-369,14497,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,22/Jul/25 10:54 AM,22/Jul/25 10:55 AM,,,,,,,,,,,,,,,0,Batch3,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@44c28937,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00idb:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,22/Jul/25 10:54 AM
Set up Test Cases in Calculate,PHX5-367,14495,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,22/Jul/25 10:51 AM,13/Nov/25 10:03 AM,,,,,,,,,,,,,,,0,Batch3,TEST_CASES,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5bc07fd1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:y,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14492,PHX5-364,Fire - Transfer Out,To Do,22/Jul/25 10:51 AM
Fire - Transfer Out,PHX5-364,14492,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,22/Jul/25 10:46 AM,22/Jul/25 10:46 AM,,,,,,,,,,,,,,,0,Batch3,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@b1362ba,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00icv:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,22/Jul/25 10:46 AM
Set up Test Cases in Calculate,PHX5-362,14490,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,22/Jul/25 10:40 AM,13/Nov/25 10:03 AM,,,,,,,,,,,,,,,0,Batch3,TEST_CASES,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1584b70a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:x,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14487,PHX5-359,Fire - Transfer In Non Club,To Do,22/Jul/25 10:40 AM
Fire - Transfer In Non Club,PHX5-359,14487,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,22/Jul/25 10:37 AM,22/Jul/25 10:38 AM,,,,,,,,,,,,,,,0,Batch3,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@f49965e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00icf:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,22/Jul/25 10:37 AM
Set up Test Cases in Calculate,PHX5-357,14465,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 5:04 PM,13/Nov/25 10:03 AM,,,,,,,,,,,,,,,0,Batch3,TEST_CASES,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1718b4d2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:v,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14462,PHX5-354,Fire - Transfer In Club,To Do,21/Jul/25 5:04 PM
Fire - Transfer In Club,PHX5-354,14462,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 4:58 PM,21/Jul/25 4:58 PM,,,,,,,,,,,,,,,0,Batch3,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@67b27416,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ibj:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,21/Jul/25 4:58 PM
Set up Test Cases in Calculate,PHX5-352,14460,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 4:53 PM,13/Nov/25 10:03 AM,,,,,,,,,,,,,,,0,Batch3,TEST_CASES,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3181754e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:r,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14457,PHX5-349,Fire - Divorce Debit and Credit,To Do,21/Jul/25 4:53 PM
Fire - Divorce Debit and Credit,PHX5-349,14457,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 4:50 PM,21/Jul/25 4:50 PM,,,,,,,,,,,,,,,0,Batch3,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@66d69c4e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ib3:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,21/Jul/25 4:50 PM
Set up Test Cases in Calculate,PHX5-347,14455,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 4:44 PM,13/Nov/25 10:03 AM,,,,,,,,,,,,,,,0,Batch2,TEST_CASES,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7e2982ff,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14452,PHX5-344,Fire - Death in Retirement,To Do,21/Jul/25 4:44 PM
Fire - Death in Retirement,PHX5-344,14452,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 4:39 PM,15/Aug/25 4:49 PM,,,,,,,,,,,,,,,0,Batch2,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1ad4da72,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ian:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,21/Jul/25 4:39 PM
Set up Test Cases in Calculate,PHX5-342,14450,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 4:33 PM,13/Nov/25 10:03 AM,,,,,,,,,,,,,,,0,Batch2,TEST_CASES,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3b33ef50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14447,PHX5-339,Fire - Death in Deferment,To Do,21/Jul/25 4:33 PM
Fire - Death in Deferment,PHX5-339,14447,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 4:28 PM,15/Aug/25 4:48 PM,,,,,,,,,,,,,,,0,Batch2,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1a7baa8a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ia7:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,21/Jul/25 4:28 PM
Set up Test Cases in Calculate,PHX5-337,14445,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 4:19 PM,13/Nov/25 10:03 AM,,,,,,,,,,,,,,,0,Batch2,TEST_CASES,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7702520e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2p:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14442,PHX5-334,Fire - Deferred to Retirement,To Do,21/Jul/25 4:19 PM
Fire - Deferred to Retirement,PHX5-334,14442,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 4:12 PM,03/Dec/25 9:33 AM,,,,,,,,,,,,,,,0,Batch2,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@660bf795,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-13,,,,,,,,,,,,,,dark_green,,,,,,,,,,,,,0|i00i9r:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,21/Jul/25 4:12 PM
Set up Test Cases in Calculate,PHX5-332,14440,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 4:07 PM,13/Nov/25 11:14 AM,,,,,,,,,,,,,,,0,Batch3,TEST_CASES,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@59bdb201,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zzi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14437,PHX5-329,Police - Transfer Out External,To Do,21/Jul/25 4:07 PM
Police - Transfer Out External,PHX5-329,14437,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 4:02 PM,15/Aug/25 4:50 PM,,,,,,,,,,,,,,,0,Batch3,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7fc8d39f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00i9b:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,21/Jul/25 4:02 PM
Set up Test Cases in Calculate,PHX5-327,14435,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 3:58 PM,13/Nov/25 11:14 AM,,,,,,,,,,,,,,,0,Batch3,TEST_CASES,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@19b16428,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14432,PHX5-324,Police - Transfer Out,To Do,21/Jul/25 3:58 PM
Police - Transfer Out,PHX5-324,14432,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 3:54 PM,15/Aug/25 4:50 PM,,,,,,,,,,,,,,,0,Batch3,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7782419f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00i8v:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,21/Jul/25 3:54 PM
Set up Test Cases in Calculate,PHX5-322,14430,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 3:50 PM,13/Nov/25 11:14 AM,,,,,,,,,,,,,,,0,Batch3,TEST_CASES,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@353248a5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14427,PHX5-319,Police - Transfer In Non Club,To Do,21/Jul/25 3:50 PM
Police - Transfer In Non Club,PHX5-319,14427,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 3:42 PM,15/Aug/25 4:50 PM,,,,,,,,,,,,,,,0,Batch3,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6be3d034,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00i8f:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,21/Jul/25 3:42 PM
Set up Test Cases in Calculate,PHX5-317,14425,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 3:33 PM,13/Nov/25 11:14 AM,,,,,,,,,,,,,,,0,Batch3,TEST_CASES,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6eb2dfb4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zx,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14422,PHX5-314,Police - Transfer In Club,To Do,21/Jul/25 3:33 PM
Police - Transfer In Club,PHX5-314,14422,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 3:29 PM,15/Aug/25 4:49 PM,,,,,,,,,,,,,,,0,Batch3,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6fabc82b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00i7z:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,21/Jul/25 3:29 PM
Set up Test Cases in Calculate,PHX5-312,14419,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 11:47 AM,13/Nov/25 11:14 AM,,,,,,,,,,,,,,,0,Batch3,TEST_CASES,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1be7ac3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zzr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14416,PHX5-309,Police - Divorce Debit and Credit,To Do,21/Jul/25 11:47 AM
Police - Divorce Debit and Credit,PHX5-309,14416,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 11:44 AM,24/Nov/25 2:44 PM,,,,,,,,,,,,,,,0,Batch3,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-198,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4a62fa8e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00i7b:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,21/Jul/25 11:44 AM
Set up Test Cases in Calculate,PHX5-307,14414,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 11:40 AM,13/Nov/25 11:14 AM,,,,,,,,,,,,,,,0,Batch2,TEST_CASES,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@703b2e61,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14411,PHX5-304,Police - Death in Retirement,To Do,21/Jul/25 11:40 AM
Police - Death in Retirement,PHX5-304,14411,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 11:37 AM,21/Jul/25 11:37 AM,,,,,,,,,,,,,,,0,Batch2,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2a67d2ed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00i6v:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,21/Jul/25 11:37 AM
Set up Test Cases in Calculate,PHX5-302,14409,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 11:25 AM,13/Nov/25 11:14 AM,,,,,,,,,,,,,,,0,Batch2,TEST_CASES,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6d86b553,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14406,PHX5-299,Police - Death in Deferment,To Do,21/Jul/25 11:25 AM
Police - Death in Deferment,PHX5-299,14406,Epic,In Progress,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 11:17 AM,24/Jul/25 2:23 PM,,,,,,,,,,,,,,,0,Batch2,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@28311d1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00i6f:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jul/25 2:23 PM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Calc Specification drafted 24/7/25;

[Police Pension Scheme DID Calculation Specification V1.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EZY3_f0VDoBEhQF-q1F2piwBn5EG7IwBYeRKYP28w4oRww?e=ZYwJa8]",,,,,,,,,,,,,,,,,,,,,,,,,,,In Progress,24/Jul/25 2:23 PM
Set up Test Cases in Calculate,PHX5-297,14404,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 11:13 AM,13/Nov/25 11:13 AM,,,,,,,,,,,,,,,0,Batch2,TEST_CASES,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2a474cbb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14400,PHX5-294,Police - Deferred to Retirement,To Do,21/Jul/25 11:13 AM
Review Calc Spec following Review by Admin,PHX5-296,14403,Task,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 11:12 AM,14/Nov/25 3:31 PM,,,,,,,,,,,,,,,0,Batch2,Specification,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1feb70be,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1i:r,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25/Sep/25 4:23 PM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;specification reviewed following feedback from admin. Outputs still to be confirmed & awaiting sign off from admin.,"14/Nov/25 3:31 PM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Query following comparison with Police and Fire Specs. Back with April 14/11/25

[Phoenix Phase 5 - Police and Fire DR Specification Comparison.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EW_1gYlFAM9On-HxPliBemMBY8KiISe4H_Q3i4VPf3P05A?e=NNedci]",,,,,,,,,,,,,,,,,,,,,,,14400,PHX5-294,Police - Deferred to Retirement,To Do,21/Jul/25 11:12 AM
Police - Deferred to Retirement,PHX5-294,14400,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,21/Jul/25 11:09 AM,03/Dec/25 7:20 AM,,,,,,,,,,,,,,,0,Batch2,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@39d7fc5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-13,,,,,,,,,,,,,,dark_green,,,,,,,,,,,,,0|i00i5r:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,21/Jul/25 11:09 AM
MaxLumpSum,PHX5-293,14329,Subtask,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,18/Jul/25 2:32 PM,30/Jul/25 9:37 AM,,30/Jul/25 9:37 AM,,,,,,,,,,,,,0,,,,,"This should deal with the following logic:

|IF IsConstableOrSargent
    IF illhealth -- full lump sum [DB_PreCommPension * 25% * CCF]
    IF service >=30 -- full lump sum [DB_PreCommPension * 25% *CCF]
    IF Age >= 55 -- full lump sum [DB_PreCommPension * 25% *CCF]
    IF Age >= 50 and service<25 -- n/a as deferred pension
    IF Age >= 50 and service>=25 -- capped lump sum [ DB_PreCommPension * 2.25 ]
  
IF NOT IsConstableOrSargent
    IF illhealth -- full lump sum [DB_PreCommPension * 25% * CFF]
    IF service >=30 -- full lump sum [DB_PreCommPension * 25% * CCF]
    IF Age >= 60 -- full lump sum [DB_PreCommPension * 25% * CCF]
    IF Age >= 50 and service<25 -- n/a as deferred pension
    IF Age >= 50 and service>=25 -- capped lump sum [ DB_PreCommPension * 2.25 ]|",,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@10a7e0ea,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00e7z:i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 4,PHX5 Sprint 5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-07-22 16:45:44.121,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_86371045_*|*_10252_*:*_1_*:*_2635_*|*_10056_*:*_1_*:*_425462039,,"22/Jul/25 5:45 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Looking at the NRA logic, I don’t think there are any occasions where capped lump sum will be used.","23/Jul/25 12:43 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Made code change to change from using all NRA code to just the part relating to rank. Agree all test cases:

MaxLumpSum_Test1 - MaxLumpSum_Test8",,,,,,,,,,,,,,,,,,,,,,,13548,PHX5-168,PCLS - Low Level Functions,Done,30/Jul/25 9:37 AM
CAREPCLS,PHX5-292,14328,Subtask,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,18/Jul/25 2:29 PM,30/Jul/25 9:37 AM,,30/Jul/25 9:37 AM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@787531c8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00e80:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 4,PHX5 Sprint 5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-07-18 15:09:25.289,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_6902_*|*_10252_*:*_1_*:*_3542_*|*_10056_*:*_1_*:*_5994432,,"18/Jul/25 4:09 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Added CAREPCLS_Test1, which passes.",,,,,,,,,,,,,,,,,,,,,,,,13548,PHX5-168,PCLS - Low Level Functions,Done,30/Jul/25 9:37 AM
LRF for CARE deferred members,PHX5-291,14325,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Russell Armstrong,640f34fc1273131f2adfede9,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,18/Jul/25 9:15 AM,23/Dec/25 1:09 PM,,23/Dec/25 1:09 PM,,,,,,,,,,,,,0,Factors,,,,Review calc requirements,,Annabelle Stephenson,Chris Marshall,Russell Armstrong,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,640f34fc1273131f2adfede9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4770640a,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Documentation,,,Amber,,0|i00pta:uw,,,Apply LRF to Police CARE benefits when retiring from deferred,,,,,,,,,,,,,2015 CARE,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 25,PHX5 Sprint 26,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-12-22 11:47:44.301,10251_*:*_2_*:*_30076610_*|*_10250_*:*_2_*:*_926307897_*|*_10252_*:*_1_*:*_8028984641_*|*_10354_*:*_1_*:*_316788_*|*_10056_*:*_1_*:*_4676951970,,"22/Dec/25 11:47 AM;640f34fc1273131f2adfede9;Looking at the specs, Police CARE benefits are the only ones that use an LRF on retirement from deferred. Added a new {{PublicSectorPensionElementWithLRFStrategy}} that was basically a copy of the standard strategy with the LRF included.

Amended {{PensionElementCalculatorFactory}} to use this strategy when retiring from deferred for CARE benefits for Police. Checked tests around this are passing and added additional tests to ensure the correct PensionElement strategy was being used","22/Dec/25 8:14 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;{{PublicSectorPensionElementWithLRFStrategy}} is referring to ER factor throughout, needs some tweaks to LR instead.  [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] would you have time to pick this up in the morning? give me a shout if needed.",23/Dec/25 11:26 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Updated any reference to early ret with late ret. However still showing ERFTable in code but noted this is also being used for late ret,,,,,,,,,,,,,,,,,,,,,,14400,PHX5-294,Police - Deferred to Retirement,Done,23/Dec/25 1:09 PM
Spouses Pension A to R,PHX5-290,14306,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,17/Jul/25 7:17 AM,01/Dec/25 3:06 PM,,18/Nov/25 3:30 PM,Active To Retired Fire Day 1,Active To Retired Police Day 1,Batch 1,Client 162 Police A to R Version 2,Client 164 Fire A to R Version 1,,,,,,,,0,TEST_CASES,,,,"This is calculated from a different combination of the active to deferred elements. So we need to calculate from those rather than from the pre com pen.



This needs both coding and testing",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,PHX5-398,,,,,,,,,,,PHX5A-194,,,,,,PHX5-674,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@499a0d09,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00olq:y,,,Contingent Spouse’s pension coded for Police and Fire A>R.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 20,PHX5 Sprint 21,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-04 10:49:06.508,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_448984682_*|*_10252_*:*_1_*:*_9507523833_*|*_10056_*:*_1_*:*_716188782,,01/Aug/25 11:50 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;can use “adjusted pension” = basic + scheme,"04/Nov/25 10:49 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;|1987|A>D|A>R|
| |50% DB_DeferredPen_Total|50% below|
| |def pen + added yrs|pre com + scheme pays debit|
| | | |
|2006|50% DB_DeferredPension2006|50% below|
| |accrued pen + added yrs|accrued + scheme pays debit - inverse comm|
| | | |
|FPS 2006 mod/ret| |50% *unless spouse is 12y+ younger than member*|
| | | |
| | | |
|2015|50% below|50% below|
| |CARE + TVin + added JL only|CARE + TVin + added JL - PSO debit ( + IH enhancement if valid) - CAREPCLS/ccf|
| | |depends on ill health status|","06/Nov/25 4:48 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Full list of required inputs across 1987, 2006 and 2015 police schemes (not yet checked for differences on fire), for all calc types (A>R, A>D, D>R, DID, DIS, DIR)

|DB pre-commutation pension|
|Scheme Pays debit|
|Accrued DB pension|
|Added years pension|
|Deferred DB pension|
|Pension increase factor (there should be a table apparently)|
|PSO debit|
|{color:#ff5630}Ill-health scheme pension{color}|
|{color:#ff5630}Ill-health max pension{color}|
|{color:#ff5630}Pension Increases to DOD{color}|
|CARE pension|
|TVin pension|
|Added pension (joint life only)|
|CARE PCLS|
|CARE CCF|
|CARE deferred commuted pension (obtained from running D>R calc)|
|Inversely commuted pension (NPPS 2006 A>R)|
|CARE ill-health enhancement (higher tier)|
|PYRV|

I’ve put the items I think could cause problems {color:#ff5630}in red{color}.  There are some things I’m not sure we’ve even started coding for, eg. pension increases?

DIS calcs for PPS1987 require the deceased member’s ill-health pension entitlement as well as normal accrued pension.  I don’t know if this could be a problem?

DIR and DID calc specs are very vague but don’t suggest anything complicated.

The rest of the calc types use some combination of the above elements, which I think we should have available.","17/Nov/25 3:50 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;For A>R, we can simplify the Spouse calc strategies into two: one strat for DB elements, and another for CARE.  Please note that although under NPPS we need to consider the member’s retirement pension less any additionally commuted pension, we can still use the same strategy as for PPS, as the pre-commutation values are _before_ any commutation.  The table below shows the steps for these strategies:

{adf:display=block}
{""type"":""table"",""attrs"":{""isNumberColumnEnabled"":false,""layout"":""center"",""localId"":""6c491e88-119e-48b2-9e69-e8a42d0a5c57""},""content"":[{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colwidth"":[80]},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""DB:""}]}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[343,229],""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""member's accruedPensionValues (from CalculateAccruedPensionValues)""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colwidth"":[80]},""content"":[{""type"":""paragraph""}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[343]},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""but set scheme pays = 0"",""marks"":[{""type"":""em""}]}]}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[229]},""content"":[{""type"":""paragraph""}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colwidth"":[80]},""content"":[{""type"":""paragraph""}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[343]},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""pass through CalculateRetirementElements""}]}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[229]},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""these are our pre-com elements""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colwidth"":[80]},""content"":[{""type"":""paragraph""}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[343]},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""on same basis as member"",""marks"":[{""type"":""em""}]}]}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[229]},""content"":[{""type"":""paragraph""}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colwidth"":[80]},""content"":[{""type"":""paragraph""}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[343]},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""apply spouse proportion to PreComPen elements""}]}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[229]},""content"":[{""type"":""paragraph""}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colwidth"":[80]},""content"":[{""type"":""paragraph""}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[343]},""content"":[{""type"":""paragraph""}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[229]},""content"":[{""type"":""paragraph""}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colwidth"":[80]},""content"":[{""type"":""paragraph""}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[343]},""content"":[{""type"":""paragraph""}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[229]},""content"":[{""type"":""paragraph""}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colwidth"":[80]},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""CARE:""}]}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[343,229],""colspan"":2},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""member's accruedPensionValues (from CalculateAccruedPensionValues)""}]}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colwidth"":[80]},""content"":[{""type"":""paragraph""}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[343]},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""but set scheme pays = 0"",""marks"":[{""type"":""em""}]}]}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[229]},""content"":[{""type"":""paragraph""}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colwidth"":[80]},""content"":[{""type"":""paragraph""}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[343]},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""pass through CalculateRetirementElements""}]}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[229]},""content"":[{""type"":""paragraph""}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colwidth"":[80]},""content"":[{""type"":""paragraph""}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[343]},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""on unreduced strategy"",""marks"":[{""type"":""em""}]}]}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[229]},""content"":[{""type"":""paragraph""}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colwidth"":[80]},""content"":[{""type"":""paragraph""}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[343]},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""pass through PCLSCAREPensionOptionStrategy""}]}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[229]},""content"":[{""type"":""paragraph""}]}]},{""type"":""tableRow"",""content"":[{""type"":""tableCell"",""attrs"":{""colwidth"":[80]},""content"":[{""type"":""paragraph""}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[343]},""content"":[{""type"":""paragraph"",""content"":[{""type"":""text"",""text"":""apply spouse proportion to PostComPen elements""}]}]},{""type"":""tableCell"",""attrs"":{""colwidth"":[229]},""content"":[{""type"":""paragraph""}]}]}]}
{adf}

+Coding changes:+

{{SpousesPensionFactory}} set up in Factories region of *Public Sector Death* module, to set the strategy to use, based on member’s category and mccloud option.  We call this in {{PublicSectorRetirementCalculatorSetUp}}

{{CalculateRetirementElements}} in *Public Sector Calculation* module amended to create Spouse elements from Member’s with the necessary adjustments (ie less PSO debit).  These new values are sent through  {{SpousePensionElementCalculator}} or {{SpouseCAREElementCalculator}} to return the values with ERF applied where necessary (DB only).

Strategies have been set up in {{ISpousesPensionStrategy}} also in *Public Sector Death* module:  

* The DB strategy {{DefaultSpousesPensionStrategy}} applies the Spouse proportion to the Spouse’s element value.  
* The CARE strat {{CARESpousesPensionStrategy}} first passes the +Spouse’s+ element through the {{CAREPCLS}} function and then through {{PostCARECommutationPension}}. The Spouse’s proportion is applied to the post-commutation element value.

{{CalculateSpousesElements}} added to *Public Sector Calculation* module, which runs the Spouse element values through the strategies determined earlier by the factory.  This is called in {{ActiveToRetiredCalculator}} and the Spouse values returned are added to each of the Pension Options for that mccloud option.



+Testing:+

Testing function set up in PS Death: {{FullSpousesPensionTest}} which tests both the setting of the strategies through the factory, and the strategies themselves.  8 tests added to this module covering all of the scheme and mccloud options.  Tests confirm that Spouse entitlement is calculated correctly, given that the Spouse element values (as mentioned above) have already been calculated.

I’ve added the Spouse pension values from Altair to our A>R tests against expected outcome values.  The only scenario I’m not yet able to test against is one we’ve not yet coded for: where member is eligible for DB benefits but CARE must be deferred.  In this case the Spouse’s CARE entitlement would be calculated on the A>D basis rather than A>R.  I’ve raised a ticket for this (linked).  Values pass on all other scenarios.

I also obtained copies of the ‘real’ A>R tests that Tracy has been running with Admin, as knew these Spouse figures would be more reliable as have been checked.  I just checked the logic and values in each of these to make sure they aligned with our structure, which they do.

I wanted to set up a test function at PS Calculation level for {{CalculateRetirementElements}} so that I could add tests for these real A>R tests, but having a lot of trouble due to all of the factories and strategies that need setting before reaching this point.  It seems I’d almost have to recreate most of the A>R Calculate() function, in which case there’s not much point testing at PS level.

[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] please let me know your thoughts.  I’m happy that our code has been sufficiently tested between global and client modules, but perhaps not been evidenced enough?","17/Nov/25 6:54 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;All of the above refers directly to Police, however all of the same logic applies to Fire (again please note that we do not need to consider any cash commuted/calculated for DB as we consider the pre-comm values).

+Regarding coding changes:+

Again all of the above for global modules applies.

I have made an additional change to {{CommutationFactor}} in *Public Sector Member Info* module, as this was setting the CF for Fire CAREPreCom elements as 12, when it should in fact be 0.25. (Dependency updated all the way through to Public Sector Calculation.  Not yet published that as others have made changes today and I don’t know if they’re ready)

I have made a couple of changes in *Fire A>R* around line 150 onwards to stop restricting the pre-com pension lists based on Key name (this code was for an issue on police ages ago that has since been resolved).",18/Nov/25 7:03 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388]  Starting to look through. First question - how does it work for PPS 2006 members? I thought we needed to inversely commute the member’s cash into pension to get the spouses full pension entitlement? Is this not the case?,"18/Nov/25 7:23 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] I need to split CalculateRetirementElements into 2 - one half for summing up accrued correctly, and other half for applying er factors. When we do this, it might be a good point to set up some tests on each of these. There should be a way to do it - even if it involves creating some pseudo test calculations. I think we need this now, as this is becoming crucial code that should be tested.",,,,,,,,,,,,,,,,,,16726,PHX5-642,Spouses pensions,Done,18/Nov/25 3:30 PM
Service Module - Testing,PHX5-289,14302,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,April Woods,712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,16/Jul/25 3:59 PM,24/Oct/25 2:10 PM,,24/Oct/25 2:10 PM,,,,,,,,,,,,,0,Accrual,Batch1,TEST_CASES,,"Hi Iain, April, Charlotte

We have completed our initial testing of the accrual module. Details can are in the matrix ([Accrual Module Matrix.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EeU6EymCICFLnEoaHzFoTvEBskcWdDV57qiW0mIpeNIb1A?e=lwWk3y])

We have compared the results of the global service module with those produced by the McCloud code and Altair. All module results match the McCloud results. There are several Altair results that don’t match the module results. We’ve added comments to the matrix for these.

Please record any issues or queries you have to this ticket (happy to talk you through this).

Thanks

Matt",,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@35aecb2b,,,,,Police,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,UAT #1,,,,,0|i00hsv:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_8633474065,,,,,,,,,,,,,,,,,,,,,,,,,,13808,PHX5-198,Accrual Module,Done,24/Oct/25 2:10 PM
ER Buyout,PHX5-288,14300,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,16/Jul/25 3:25 PM,24/Nov/25 2:45 PM,,,,,,,,,,,,,,,0,TEST_CASES,,,,"The PCLS spec (PCLS 2015 Scheme) ([PPS PCLS Module Specification - V2.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/ETV45cXCRWZBpl5oZNpNXdQB4jL9StIFBOQx_H8Kn21FcQ?e=CdWgnf]) contains a section for Early Retirement Buyout. This needs to be included in the code, need test cases etc



Need to calculate, but only include in final figures if elected. So will need an input.

At the quotation stage 2 options quoted - Max Cash and zero cash, neither include the buyout option data which is quoted separately.",,Chris Marshall,Matt Lilwall,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4a11bd08,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00hsn:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,0.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-11-24 11:06:12.422,,,24/Nov/25 11:06 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;ER Buyout is not relevant to the Fire scheme and is police only,,,,,,,,,,,,,,,,,,,,,,,,16738,PHX5-654,ER Buyout,To Do,16/Jul/25 3:25 PM
GAD Contributions,PHX5-287,14299,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,16/Jul/25 3:22 PM,13/Nov/25 11:16 AM,,,,,,,,,,,,,,,0,,,,,"GAD Contributions are listed in the PCLS spec ([PPS PCLS Module Specification - V2.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/ETV45cXCRWZBpl5oZNpNXdQB4jL9StIFBOQx_H8Kn21FcQ?e=9a1wZj]).

It is unclear if this is GAD Contribution is to be calculated, or be taken from data.",,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@256e381a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00hsf:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,0.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,16725,PHX5-641,Remedy Contribution Process (GAD),To Do,16/Jul/25 3:22 PM
New table for Lump Sum Allowance,PHX5-286,14298,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,16/Jul/25 3:16 PM,31/Jul/25 3:19 PM,,31/Jul/25 3:19 PM,Batch 1,,,,,,,,,,,,0,Batch1,,,,Check if this exists in global level factors already. Create if not,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3ac273b8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x0d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_1296207353,,,,,,,,,,,,,,,,,,,,,,,,,,10708,PHX5-195,General Calculation Items,Done,31/Jul/25 3:19 PM
Pension element module - service <=25 no pension,PHX5-285,14296,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,16/Jul/25 3:12 PM,24/Oct/25 2:04 PM,,24/Oct/25 2:04 PM,Batch 1,,,,,,,,,,,,0,Batch1,,,,"The PCLS module contains the variable DB_MaxLS. The definition of this contains the condition:

_IF Age >= 50 and service<25 -- n/a as deferred pension_

Is this something that only affects the lump sum, or does it apply to the member’s ability to retire at all?",,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-541,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@580938f7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00008xi,,,,,,,,,,,,,,,,1987 PPS,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,0.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10354_*:*_1_*:*_3700_*|*_10056_*:*_1_*:*_6479292321_*|*_10355_*:*_1_*:*_0,,29/Sep/25 3:01 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Possible further queries r.e. warnings required for members not old enough to retire or without enough service,,,,,,,,,,,,,,,,,,,,,,,,10708,PHX5-195,General Calculation Items,Done,24/Oct/25 2:04 PM
Lump Sum Tax,PHX5-284,14282,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,16/Jul/25 9:43 AM,06/Aug/25 12:28 PM,,06/Aug/25 10:41 AM,Batch 1,,,,,,,,,,,,0,,,,,"There is a function LumpSumAfterTax

that takes: decimal dbPostComPension, decimal dbMaxLumpSum, decimal carePostComPen, decimal carePCLS, decimal lsaLimit

(where dbMaxLumpSum is obtained via MaxLumpSum)

and returns lumpSumAfterTax",,Andrew Wilson,Annabelle Stephenson,Matt Lilwall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@678dbb3f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004y:jw,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 6,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-07-16 08:50:24.13,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_421071239_*|*_10252_*:*_1_*:*_602762272_*|*_10056_*:*_1_*:*_794023838,,16/Jul/25 9:50 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;PPS 1987 example calc from Iain Wilson linked to this ticket.,"16/Jul/25 12:12 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;I’ve added a sheet named to ‘IncSpecNames’ to the PPS 1987 example calc (linked), which maps to the spec names","06/Aug/25 12:28 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;10 test cases added to Public Sector Calculation module [Public Sector Calculation - Global Module Editor|https://calculate.calcuat.xpsplc.com/global-modules/63]

All passing - used admin and McCloud test cases",,,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,06/Aug/25 10:41 AM
Early Retirement Factors - Testing,PHX5-283,14258,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Iain Wilson,712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,15/Jul/25 2:31 PM,24/Oct/25 2:10 PM,,24/Oct/25 2:10 PM,,,,,,,,,,,,22/Jul/25 12:00 AM,0,TEST_CASES,,,,"Hi Iain, April, Charlotte

We have completed our initial testing of the Early Retirement Factors. Details can are in the matrix ([ERF Matrix.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EVvxVd7qPUpEj6rhCVLDEaIBJWRxD5Huy1Yt2-FKra6epQ?e=bbhvyk&xsdata=MDV8MDJ8fGViNWMwZjA4ZTJkYjRlYzFhYzVhMDhkZGMzYTUxNWNifGVkYjZhNDNkN2NmMTRlODBhMmQ4NTE4NzQxMWM4NmZifDB8MHw2Mzg4ODE4MzU5NTkxNjgwOTB8VW5rbm93bnxWR1ZoYlhOVFpXTjFjbWwwZVZObGNuWnBZMlY4ZXlKRFFTSTZJbFJsWVcxelgwRlVVRk5sY25acFkyVmZVMUJQVEU5R0lpd2lWaUk2SWpBdU1DNHdNREF3SWl3aVVDSTZJbGRwYmpNeUlpd2lRVTRpT2lKUGRHaGxjaUlzSWxkVUlqb3hNWDA9fDF8TDJOb1lYUnpMekU1T2pjMU9HRXdPR0U0TFdZeU5tTXROREZrT1MwNU16STVMV1JpWmpJd01ESXlaR1l6Tmw5a1lUVTRPV1prTnkwek16RTVMVFJtWkdJdE9EQTJNeTAyT1RZeU16QTVZVEpoWXpsQWRXNXhMbWRpYkM1emNHRmpaWE12YldWemMyRm5aWE12TVRjMU1qVTROamM1TlRRNE13PT18YTc0NWMwZmYzZjY5NGY0ZGFjNWEwOGRkYzNhNTE1Y2J8M2U5MmI3NGM2OGRmNDEzZGE1ZDgzZjVhNjY1MTlkZWY%3D&sdata=bHp5TGNMeTdrdXFmaWhjdmh2NnkvRnNpQkRCMzJIZWpaSTVtdDRrQVJSZz0%3D&ovuser=edb6a43d-7cf1-4e80-a2d8-5187411c86fb%2CChris.Marshall1%40xpsplc.com])

We have compared the results of the global service module with those produced by Altair. All of these match. ",,April Woods,Chris Marshall,,,,712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@12cdecb5,,,,,Police,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,UAT #1,,,,,0|i00hn3:,,,,,,,,,,,,,,,,2015 CARE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,15/Jul/25 12:00 AM,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-07-17 09:18:20.746,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_8725130084,,"17/Jul/25 10:18 AM;712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd; [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]

Hi, We’ve reviewed this module testing and have some comments to make. 

# We agree all factors are being picked up correctly for the test subjects, barring ERF 4. At the date of retirement quoted member is only 30, so cannot take benefits. Can you clarify?
# We are checking factors only, not pension values, so not sure why these are quoted, and with PI. 
# This module contains the age addition factors, however this should be under the CARE module. As this is being built we cannot test age addition under the ER/LR module. 
# LRF factors are also on the spec but we do not have any test subjects to review. 

Thanks, 

April & Charlotte","17/Jul/25 10:25 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Hi April

1 - Member ref is 513539 so was incorrectly stated on the matrix. I have updated this now

2 - I added these just to show the factors were correct when applied to the pension. I quoted them with PI so we had everything covered. More for info.

3 - Yes the Age Addition is blocked await dev

4 - What schemes are the LRF applied? Test cases required

[~accountid:712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd] ","17/Jul/25 4:39 PM;712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] Hi Chris, We now agree results in all test cases shown. 

Thanks, April",,,,,,,,,,,,,,,,,,,,,,,,,Done,24/Oct/25 2:10 PM
Accrual - Module results match McCloud but not Altair,PHX5-282,14253,Bug,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,15/Jul/25 9:49 AM,24/Oct/25 2:10 PM,,24/Oct/25 2:10 PM,Batch 1,,,,,,,,,,,,0,Accrual,,,,,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,PHX5-198,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7c28f85b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00hmf:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_8742080436,,"15/Jul/25 9:53 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;The following accrual test cases don’t match Altair. We are proceeding to UAT based on matching the module results with McCloud.


* Accrual Test 2
* Accrual Test 4
* Accrual Test 7
* Accrual Test 8
* Accrual Test 9
* Accrual Test 13
* Accrual Test 15
* Accrual Test 17",,,,,,,,,,,,,,,,,,,,,,,,13808,PHX5-198,Accrual Module,Done,24/Oct/25 2:10 PM
Set up Test Cases in Calculate,PHX5-280,14237,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,14/Jul/25 1:38 PM,13/Nov/25 11:15 AM,,,,,,,,,,,,,,,0,Batch1,TEST_CASES,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5155e9d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zzv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14233,PHX5-276,Fire - Death In Service,To Do,14/Jul/25 1:38 PM
Set up Test Cases in Calculate,PHX5-279,14236,Epic,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,14/Jul/25 1:36 PM,14/Jul/25 1:38 PM,,14/Jul/25 1:38 PM,,,,,,,,,,,,,0,Batch1,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6491269e,,,,,Fire,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00hkn:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_97289,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,14/Jul/25 1:38 PM
Fire - Death In Service,PHX5-276,14233,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,14/Jul/25 1:29 PM,03/Dec/25 10:32 AM,,,,,,,,,,,,,,,0,Batch1,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5f734a7c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-1,,,,,,,,,,,,,,dark_grey,,,,,,,,,,,,,0|i00fzx:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,14/Jul/25 1:29 PM
Set up Test Cases in Calculate,PHX5-274,14231,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,14/Jul/25 1:27 PM,13/Nov/25 11:15 AM,,,,,,,,,,,,,,,0,Batch1,TEST_CASES,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7b965b61,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zzx,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14228,PHX5-271,Fire - Active to Deferred,To Do,14/Jul/25 1:27 PM
Fire - Active to Deferred,PHX5-271,14228,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,14/Jul/25 1:21 PM,14/Jul/25 1:40 PM,,,,,,,,,,,,,,,0,Batch1,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@11f07094,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fzv:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,14/Jul/25 1:21 PM
Service calc with previous Service History,PHX5-270,14128,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,11/Jul/25 3:58 PM,10/Sep/25 9:45 AM,,04/Sep/25 2:27 PM,Batch 1,,,,,,,,,,,,0,,,,,"Where a member has service prior to DCPS in service history this is not being counted in service calc. Need to look up service dates that are prior to DCPS in service history and count reckonable service in service calc



Will need to be solved in Service Static.   PensionableService.GetCompleteServicePeriods

Either need to create a new ServicePeriodFillType type “LastPeriodFilledAndPriorIncluded“, or assume that this will apply to all LastPeriodToBeFilled cases (as that was created for public sector)

Then after missing service periods have been added to fullServicePeriods, and before the amendments to EffectiveTo, we can add the following:

{noformat}if (servicePeriodType == ServicePeriodFillType.LastPeriodFilledAndPriorIncluded)
{
	fullServicePeriodList.AddRange(servicePeriods.Where(x=> x.EffectiveTo < dateCommencedPensionableService));
}{noformat}

If we do this, then the standard code will deal with all service from dcps to calc date. Then this snippet of code will add any service periods prior to the dcps into the list also. This will leave a gap between this bit of service and the dcps, but that is what we would expected. The rest of the service code calculation will then work as normal calculating reckonable for all of this.

We should set up the case that led to this as a test cased in Service Static.",,Andrew Wilson,Chris Marshall,Matt Lilwall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,PHX5-240,,,,,,,,,22/Aug/25 11:37 AM;862ca789-6c5f-4d0a-b054-60929f0a27a7;Downloading and debugging in VS.msg;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10341,26/Aug/25 8:43 AM;5796a187-7241-414b-bea0-2d22260a9bed;image-20250826-073947.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10342,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3ba1b3b7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jm5:9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 8,PHX5 Sprint 9,PHX5 Sprint 10,PHX5 Sprint 11,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-08-20 11:25:48.177,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_1274777213_*|*_10252_*:*_1_*:*_2247156656_*|*_10056_*:*_1_*:*_1204014060,,20/Aug/25 12:25 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;I’ve tried to follow Andrew’s instructions and have fallen at the first hurdle. I don’t know where ‘Service Static.   PensionableService.GetCompleteServicePeriods’ is. I don’t think it’s in PublicSectorCalculation or the Service module,"20/Aug/25 1:39 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;I’ve saved the drafted code here:

[Service Static - Global Module Editor|https://calculate.calcuat.xpsplc.com/global-modules/20]

Figuring out adding a test case now","22/Aug/25 11:37 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] 


* I’ve made this code change in Service Static (reminder that this is to make the code handle service periods before DCPS)
* Added test case ‘1214-GetCompleteServicePeriods-ServicePeriodPreDCPS’
* All tests still passed, so published (v18)
* Updated Service module dependencies to use v18
* Reran the ‘McCloudTest12’ test of the ‘CalculateServiceHistoryDuration_PublicSectorPPS’ function in the ‘Service’ module. This isn’t producing the correct result (results below):


{noformat}[
  {
    ""TrancheKey"": ""DB"",
    ""IsAddedService"": false,
    ""TotalDurationAmount"": 1119.0,
    ""QualifyingPeriod"": ""P3Y24D"",
    ""QualifyingDurationAmount"": 1119.0,
    ""QualifyingDecimalAmount"": 3.0657534246575342465753424658,
    ""PartTimeAdjustedPeriod"": ""P3Y24D"",
    ""PartTimeAdjustedDurationAmount"": 1119.0,
    ""FinalPeriod"": ""P3Y24D"",
    ""FinalDecimalAmount"": 3.0657534246575342465753424658,
    ""EffectiveFrom"": ""1990-10-22"",
    ""EffectiveTo"": ""1993-11-14"",
    ""Tranche"": null,
    ""ServicePeriodsOrBreaks"": null,
    ""TotalDuration"": ""P3Y24D"",
    ""TotalDurationInMonths"": 0
  },
  {
    ""TrancheKey"": ""DB"",
    ""IsAddedService"": false,
    ""TotalDurationAmount"": 49.0,
    ""QualifyingPeriod"": ""P0D"",
    ""QualifyingDurationAmount"": 0.0,
    ""QualifyingDecimalAmount"": 0.0,
    ""PartTimeAdjustedPeriod"": ""P0D"",
    ""PartTimeAdjustedDurationAmount"": 0.0,
    ""FinalPeriod"": ""P0D"",
    ""FinalDecimalAmount"": 0.0,
    ""EffectiveFrom"": ""1993-11-15"",
    ""EffectiveTo"": ""1994-01-02"",
    ""Tranche"": null,
    ""ServicePeriodsOrBreaks"": null,
    ""TotalDuration"": ""P49D"",
    ""TotalDurationInMonths"": 0
  },
  {
    ""TrancheKey"": ""DB"",
    ""IsAddedService"": false,
    ""TotalDurationAmount"": 9265.0,
    ""QualifyingPeriod"": ""P25Y140D"",
    ""QualifyingDurationAmount"": 9265.0,
    ""QualifyingDecimalAmount"": 25.383561643835616438356164384,
    ""PartTimeAdjustedPeriod"": ""P25Y140D"",
    ""PartTimeAdjustedDurationAmount"": 9265.0,
    ""FinalPeriod"": ""P25Y140D"",
    ""FinalDecimalAmount"": 25.383561643835616438356164384,
    ""EffectiveFrom"": ""1994-01-03"",
    ""EffectiveTo"": ""2019-05-22"",
    ""Tranche"": null,
    ""ServicePeriodsOrBreaks"": null,
    ""TotalDuration"": ""P25Y140D"",
    ""TotalDurationInMonths"": 0
  }
]{noformat}

The results don’t include the service and service gap before the DCPS. I was having issues getting debugging working, so Annabelle looked into this for me. Her message is below. 

[^Downloading and debugging in VS.msg] 

Would you be able to investigate for us? 

Thanks

Matt","26/Aug/25 8:43 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] 

The issue is most likely here:

!image-20250826-073947.png|width=812,height=254,alt=""image-20250826-073947.png""!

The code will hit if (fullServicePeriod.Any()) first. And so it will go into that logic and never reach the new logic for LastPeriodFilledAndPriorIncluded.   

In fact - I don’t think this should be past of the else if at all. As you still want to set the schemeServiceEndDate. I would go with the code as written in the description - just a new if statement not attached to any other if statement.","29/Aug/25 12:21 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] , as discussed, I’ve made the code change that fixes the issue with GetCompleteServicePeriods when there is a service period before DCPS. You said you’d need to refactor other parts of the code, which won’t do anything with the service periods before DCPS.

Thanks

Matt",29/Aug/25 12:28 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Looks like initial solution is no good. We need to refactor service calculator so that we can override the calls to pensionable service to use a different value for dcps,"04/Sep/25 8:45 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] I think this is all done now. All test cases are passing - bar McCloud 12 which is the case in question. I think that is working though, and just needs a reset of the expected. Can you take a look and confirm you are happy with the results now.","04/Sep/25 2:00 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] McCloudTest12 now matches, except the TV-in, which requires further coding, covered in [[PHX5-392] Service Transfer In Added Service - Jira|https://xps-jira.atlassian.net/browse/PHX5-392]. I’ve updated the test case to match, and a further test case including the TV-in will need to be made once that code change is sorted. ",,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,04/Sep/25 2:27 PM
FPS differences to PPS,PHX5-269,14123,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,11/Jul/25 10:34 AM,17/Sep/25 9:52 AM,,10/Sep/25 2:56 PM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Chris Marshall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4331fc7f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008zx,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 12,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-09-10 11:12:28.523,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_3869_*|*_10252_*:*_1_*:*_9753512_*|*_10354_*:*_1_*:*_2627_*|*_10056_*:*_1_*:*_5276325391,,"10/Sep/25 12:12 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;See link to document showing full comparison of the Police & Fire schemes 

[Police and Fire scheme comparison.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EdYEJafyQuNHm9IAuLDdgV0BPChm-WtPQqx6QAC44u3-hg?e=bE6Y67]",,,,,,,,,,,,,,,,,,,,,,,,13856,PHX5-223,Fire - Active to Retirement,Done,10/Sep/25 2:56 PM
FPS 2006 Special members,PHX5-268,14122,Story,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,11/Jul/25 10:31 AM,13/Nov/25 11:22 AM,,,Batch 1,,,,,,,,,,,,0,TEST_CASES,,,,,,Andrew Wilson,Annabelle Stephenson,Chris Marshall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@729a60e4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00008zv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-09-10 13:16:13.609,,,10/Sep/25 2:16 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Further information requested from admin,"12/Nov/25 1:46 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Service spec indicates that members' retained service is held on the system (maybe this is calculated annually across the scheme? Not sure where held yet).

‘Special membership service’ is TBC.  I’m not entirely sure whether special and retained members are supposed to be different",,,,,,,,,,,,,,,,,,,,,,,13856,PHX5-223,Fire - Active to Retirement,To Do,11/Jul/25 10:31 AM
Define A to R outputs,PHX5-267,14121,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,11/Jul/25 10:27 AM,23/Jul/25 9:39 AM,,22/Jul/25 9:40 AM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Chris Marshall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,21/Jul/25 3:39 PM;5e266667-8b87-4eb6-9386-71980feac557;A to R Legacy comm.docx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10247,21/Jul/25 3:39 PM;5e266667-8b87-4eb6-9386-71980feac557;A to R Legacy no comm.docx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10248,21/Jul/25 3:38 PM;5e266667-8b87-4eb6-9386-71980feac557;A to R comm.docx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10245,21/Jul/25 3:38 PM;5e266667-8b87-4eb6-9386-71980feac557;A to R no comm.docx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10246,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7ce67a5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004v:79,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 4,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-07-21 14:37:23.138,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_430049713_*|*_10252_*:*_1_*:*_187790268_*|*_10056_*:*_1_*:*_264946460,,21/Jul/25 3:37 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;A>R output for both Aurora and Altair attached. Included with and without commutation. Also included any differences between the outputs,,,,,,,,,,,,,,,,,,,,,,,,13854,PHX5-221,Police - Active to Retirement,Done,22/Jul/25 9:40 AM
Define A to D Outputs,PHX5-266,14120,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,11/Jul/25 10:26 AM,23/Jul/25 9:39 AM,,22/Jul/25 9:40 AM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Chris Marshall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,21/Jul/25 3:36 PM;5e266667-8b87-4eb6-9386-71980feac557;A to D (9860ed9e-5c7f-4fad-a1df-0e0f90ca6a08).docx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10244,21/Jul/25 3:36 PM;5e266667-8b87-4eb6-9386-71980feac557;A to D.docx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10243,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1c40cbbf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004v:78,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 4,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-07-21 14:36:20.369,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_264305616_*|*_10252_*:*_1_*:*_353529946_*|*_10056_*:*_1_*:*_265003504,,21/Jul/25 3:36 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;A>D output for both Aurora and Altair attached. Also included any differences between the outputs,,,,,,,,,,,,,,,,,,,,,,,,13853,PHX5-220,Police - Active to Deferred,Done,22/Jul/25 9:40 AM
Define DIS outputs,PHX5-265,14119,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,11/Jul/25 10:24 AM,23/Jul/25 9:39 AM,,22/Jul/25 9:40 AM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Chris Marshall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,21/Jul/25 3:40 PM;5e266667-8b87-4eb6-9386-71980feac557;DIS (5c56151d-ce44-4cc2-90df-6a941c27c340).docx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10250,21/Jul/25 3:40 PM;5e266667-8b87-4eb6-9386-71980feac557;DIS.docx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10249,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@dcef81f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004v:7a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 4,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-07-21 14:39:56.246,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_264293910_*|*_10252_*:*_1_*:*_353531635_*|*_10056_*:*_1_*:*_265133058,,21/Jul/25 3:39 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;DIS output for both Aurora and Altair attached. Also included any differences between the outputs,,,,,,,,,,,,,,,,,,,,,,,,13855,PHX5-222,Police - Death in Service,Done,22/Jul/25 9:40 AM
Create base level DIS calculation,PHX5-264,14118,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,11/Jul/25 10:22 AM,11/Dec/25 9:41 AM,,03/Dec/25 1:55 PM,Client 176 Police DIS Version 1,Death In Service Day 1,,,,,,,,,,,0,,,,,"Need to update the death in service calculation to use the new property added to the DeathInServiceResult:

{{public Dictionary<string, DeathResult> MemberDeaths { get; set; } = [];}}

This is populating a death result for each member (string being auroraid)

Each Death Result needs to populate:

{noformat}public class DeathResult // Member level
{
    public Dictionary<McCloudOption, DeathResultDetails> DeathOptions { get; set; } = [];
    public decimal DeathGrant { get; set; }
    public decimal TotalCapitalValue { get; set; }
}{noformat}

With deathresultdetails being populated for each mccloud option.



{noformat}public class DeathResultDetails // Option level
{
    public decimal DeathGrant { get; set; } 
    public decimal PayUsedInDeathGrant { get; set; }
    public decimal LumpSumDeathBenefitAllowanceUsed { get; set; }

    public List<ElementValue> SpousesPensionElements { get; set; } = [];
    public List<ElementValue> ChildrensPensionElements { get; set; } = [];
    public List<ElementValue> OtherValues { get; set; } = [];
}{noformat}",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,PHX5A-263,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@64435d3b,,,,,,,,,,,,,,,,,,,,,Confirmed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oli:xzhz,,,"A base level DIS calculation is now set up to run through both members and both McCloud options (if applicable).

This is just the code to ensure that a calculation runs through, using all existing modules. There is still work to do to ensure that all relevant results are being saved correctly and any DIS specific code is added.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 23,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10281_*:*_2_*:*_800272106_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_58993480_*|*_10252_*:*_2_*:*_1569739971_*|*_10354_*:*_4_*:*_27057724_*|*_10056_*:*_1_*:*_1633595723_*|*_10356_*:*_1_*:*_8365595828_*|*_10355_*:*_1_*:*_62934238,,30/Jul/25 8:09 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;This is blocked by ill health calculations,"01/Dec/25 1:16 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Currently blocked as awaiting details on outputs.

Email sent by Barrie 26/11/2025:

“We have been doing a further review of the Death in Service Specification: [ PPS DIS Calc Spec V2.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/IQB3-Qe6QeqcRbwQ2mYB5GnjAf0nY1bOLJM0i_Ouh-Wak3o?e=qqsMbY]

 Regarding the Standard Output Results fields found under each scheme tab, pleased could you update these sections so we can link these fields in with the relevant calculation results for each member.”",,,,,,,,,,,,,,,,,,,,,,,13855,PHX5-222,Police - Death in Service,Done,03/Dec/25 1:55 PM
Injury retirement,PHX5-263,14116,Story,ADMIN QUERY,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,11/Jul/25 10:00 AM,16/Oct/25 9:49 AM,,,Batch 1,,,,,,,,,,,,0,TEST_CASES,,,,,,Andrew Wilson,Chris Marshall,Matt Lilwall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-119,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1e13d095,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00008x,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-09-10 11:10:46.74,,,"02/Sep/25 11:41 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  as discussed, can you flesh this out with the requirements","10/Sep/25 12:10 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Message sent to admin

Are you able to forward anything on you may have regarding injury retirement? Thanks",16/Oct/25 9:49 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Understand the coding isn’t required for go-live.,,,,,,,,,,,,,,,,,,,,,,13855,PHX5-222,Police - Death in Service,To Do,11/Jul/25 10:00 AM
Top level Active to Retired code,PHX5-262,14103,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,11/Jul/25 8:52 AM,23/Jul/25 9:39 AM,,22/Jul/25 3:53 PM,,,,,,,,,,,,,0,,,,,"The top level calculate code needs to be refactored so that the top level is an active to retired calculation.

And need to ensure that it creates the correct number of calculations based on the multiple members passed in.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4c998db7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004v:6r,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 4,,,,,,5.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_426951002_*|*_10252_*:*_1_*:*_68203639_*|*_10056_*:*_1_*:*_452657049,,,,,,,,,,,,,,,,,,,,,,,,,,13854,PHX5-221,Police - Active to Retirement,Done,22/Jul/25 3:53 PM
Create an FPS definition that is just based on an input,PHX5-261,14102,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,11/Jul/25 8:50 AM,30/Jul/25 9:33 AM,,30/Jul/25 9:33 AM,Batch 1,,,,,,,,,,,,0,,,,,"So that the main code does not need to know or care if FPS comes from an input, we should create and FPS calculator that is designed to just store the FPS input and return it when asked for it.



As well as this we need to update AveragePensionalPayFactory in Public Sector Calculations. This needs to use the new FPP override method, and we need to ensure that the FPP override is passed down into this.

I would create a parameters class with an FPP property, that is sent into the builder and which can then be passed down via:

* PublicSectorActiveToRetirementCalculatorFactory
* PublicSectorActiveToDeferredCalculatorFactory
* PublicSectorDeathInServiceCalculatorFactory
* PublicSectorCalculatorSetUp

This will require the builder to be passed the information, so we will need a new:

public IPublicSectorCalculationBuilder WithParameters(Parameters parameters)

which can take the parameters and set as a property

So we will need PublicSectorCalculationBuilder and IPublicSectorCalculationBuilder to also have the parameters as a property",,Andrew Wilson,Chris Marshall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@270a5a8e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004y:tr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 5,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-07-24 07:48:12.587,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_61924159_*|*_10252_*:*_1_*:*_180638054_*|*_10056_*:*_1_*:*_883161708,,24/Jul/25 8:48 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Updated code added to Public Sector Calculation module,,,,,,,,,,,,,,,,,,,,,,,,13809,PHX5-199,FPS Module,Done,30/Jul/25 9:33 AM
Update PensionOptionCalculatorFactory for NRA function,PHX5-260,14101,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,11/Jul/25 8:47 AM,28/Jul/25 8:22 AM,,18/Jul/25 2:40 PM,Batch 1,,,,,,,,,,,,0,,,,,"Now that the NRA function is dependent on service, we need to update the PensionOptionCalculatorFactory code so that the logic that relies on NRA is moved to a place that has access to the service.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4d758c2f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004v:75,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 4,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_3657_*|*_10252_*:*_1_*:*_2191_*|*_10056_*:*_1_*:*_625935202,,,,,,,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,18/Jul/25 2:40 PM
Update PublicSectorCAREFactory logic,PHX5-259,14100,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,11/Jul/25 8:46 AM,02/Sep/25 11:35 AM,,02/Sep/25 11:35 AM,Batch 1,,,,,,,,,,,,0,,,,,We need to update PublicSectorCAREFactory so that the CARE calculation module is set up with all the correct inputs based on the member data and calculation being run,,Andrew Wilson,Annabelle Stephenson,Chris Marshall,Matt Lilwall,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,PHX5-131,PHX5-397,,,,,,,,,,,,,,,,,,,04/Aug/25 11:47 AM;18934601-32fa-4c76-9b74-159dc94fd206;image-20250804-104444.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10286,04/Aug/25 11:47 AM;18934601-32fa-4c76-9b74-159dc94fd206;image-20250804-104706.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10287,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5cd27c97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-07-16 08:11:52.919,10281_*:*_2_*:*_429344779_*|*_10252_*:*_1_*:*_6657476_*|*_10056_*:*_1_*:*_4193681,,16/Jul/25 9:11 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Unblocked as received test cases for age addition,04/Aug/25 9:45 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] [~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388]  Do we have the CARE increase table on any of the specs that we could load on to the system ahead of time?,"04/Aug/25 11:47 AM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] We have this in the CARE module spec: 

!image-20250804-104444.png|width=100%,alt=""image-20250804-104444.png""!

and this table in one of the age addition test cases, which is the September CPI rates + 1.25: 

!image-20250804-104706.png|width=173,height=304,alt=""image-20250804-104706.png""!","04/Aug/25 11:50 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Thanks [~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] .  [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] We should find out from the admin team if we are expecting these CARE factors to be on pre loaded tables or calculated on the fly in the code. If the former, we will need these tables.","04/Aug/25 1:18 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388] , [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452], I’ve emailed Iain requesting clarification.",02/Sep/25 11:35 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Might be a non issue now. Care reval is on pre loaded tables. and care data coming on each of the separate member records.,,,,,,,,,,,,,,,,,,,13807,PHX5-197,CARE Module,Done,02/Sep/25 11:35 AM
Update PublicSectorServiceFactory logic,PHX5-258,14099,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,11/Jul/25 8:45 AM,27/Aug/25 11:19 AM,,20/Aug/25 2:51 PM,Batch 1,,,,,,,,,,,,0,,,,,"PublicSectorServiceFactory has been updated to set up the service tranches correctly.

We need to find a way to test the new code. Service calculations are tested in the service module, so all we would be testing is the logic directly in PublicSectorServiceFactory

* Have service tranches been set up correctly?
* Is it using the correct service cap?

We can set up a function to test PublicSectorServiceFactory , add some interim values for service tranches and service cap, and test against those.",,Andrew Wilson,Annabelle Stephenson,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,19/Aug/25 9:15 PM;18934601-32fa-4c76-9b74-159dc94fd206;Capped service factory testing v2.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10335,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@45efb508,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00g9z:4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 8,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-08-14 12:20:18.967,10281_*:*_1_*:*_4904_*|*_10251_*:*_2_*:*_63124312_*|*_10250_*:*_2_*:*_365633981_*|*_10253_*:*_1_*:*_38191_*|*_10252_*:*_2_*:*_1304166336_*|*_10354_*:*_1_*:*_6448_*|*_10056_*:*_1_*:*_1744920469_*|*_10058_*:*_1_*:*_84157,,"14/Aug/25 1:20 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Amended new test function {{PublicSectorServiceFactory}} in Public Sector Calc to use PublicSector units rather than months.

Note to self:  see final tab of capped factory testing for test scenarios","19/Aug/25 7:22 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Interim values added:

* totalQualifyingService = sum of QualifyingDecimalAmount
* totalUncappedService = sum of PartTimeAdjustedDurationAmount / 365
* totalService = sum of FinalDecimalAmount



Tested the following:

* Simple cases: correct cap selected, warning message, and tranches named (DB/CARE)
* Service 1d under and 1d over the cap
* Service exactly matching cap, with and without leap year in final year (not re-testing leap year svc logic, just that it follows through and cap hits when we are in a LY)
* PT and breaks: checking cap and warning apply only to FinalDecimalAmount (totalService in interim values), not qualifying or PT adjusted



[^Capped service factory testing v2.xlsx] ",,,,,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,20/Aug/25 2:51 PM
Application of NRA code & testing,PHX5-257,14098,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,11/Jul/25 8:44 AM,28/Jul/25 8:21 AM,,15/Jul/25 2:27 PM,Batch 1,,,,,,,,,,,,0,,,,,"An extension method to the member object that will return the NRA

So far we have:

{noformat}public static int NRA(this MemberInfo memberInfo)
{
	switch (memberInfo.Category)
	{
        case ""PPS1987"":
            return (memberInfo.Rank() == ""C1"" || memberInfo.Rank() == ""S1"" || memberInfo.Rank() == ""01"") ? 55 : 60;
        case ""NFPS2006"":
        case ""NPPS2006"":
        case ""NFPS2006MOD"":
        case ""NFPS2006RET"":
            return 55;
        case ""FPS1992"":
        default:
			break;
	}
	
}{noformat}

We need to flesh this out for all options. If other inputs are required, we can look at adding them. I know technically the 1987 also relies on service, but I am keeping that separate as without it we have something that can be called from anywhere in the code.",,Chris Marshall,Matt Lilwall,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@8c28031,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004v:6i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 3,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-07-14 13:30:07.017,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_254352752_*|*_10252_*:*_1_*:*_2431_*|*_10056_*:*_1_*:*_25474,,"11/Jul/25 9:14 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Saved NRA for each separate category below:

+*Active Police*+

PPS 1987

Can retire with 30 calendar years at any age, at age 50 with over 25 years service, otherwise age 55 for ranks up to Sgt, and age 60 for ranks above this.

 

NPPS 2006

Age 55

 

2015

60. Can retire from age 55 with reduction

 

+*Deferred Police*+

PPS 1987

60. 50 if left with over 25 years service and no entitlement to immediate benefits.

 

NPPS 2006

65. Can retire from age 55 with reduction.

 

2015

SPA. Can retire from age 55 with reduction.

 

+*Active Fire*+

FPS 1992

Age 55 but can retire from age 50 with over 25 years service.

 

NFPS 2006

60. Can retire from age 55 with reduction

 

Modified Retained

55

 

2015

60. Can retire from age 55 with reduction

 

+*Deferred Fire*+

FPS 1992

60

 

NFPS 2006

65. Can retire from age 55 with reduction.

 

Modified Retained

60

 

2015

SPA. Can retire from age 55 with reduction.

 ","14/Jul/25 2:30 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Set up the following tests here:

[Public Sector Calculation - Global Module Editor|https://calculate.calcuat.xpsplc.com/global-modules/63]



* NRA - FPS1992 not active
* NRA - FPS1992 active
* NRA - NFPS2006 not active
* NRA - NPPS2006 active
* NRA - PPS1987 active and totalService > 25
* NRA - PPS1987 active, totalService <= 25, rank is C1
* NRA - PPS1987 not active and totalService <= 25
* NRA - Unknown category, logging error",15/Jul/25 2:27 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Reviewed and happy all NRA’s being output for each scenario are correct,,,,,,,,,,,,,,,,,,,,,,13810,PHX5-200,ER/LR Factors Module,Done,15/Jul/25 2:27 PM
NRA Function,PHX5-256,14078,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,10/Jul/25 8:08 AM,28/Jul/25 8:21 AM,,11/Jul/25 9:14 AM,Batch 1,,,,,,,,,,,,0,,,,,"An extension method to the member object that will return the NRA

So far we have:

{noformat}public static int NRA(this MemberInfo memberInfo)
{
	switch (memberInfo.Category)
	{
        case ""PPS1987"":
            return (memberInfo.Rank() == ""C1"" || memberInfo.Rank() == ""S1"" || memberInfo.Rank() == ""01"") ? 55 : 60;
        case ""NFPS2006"":
        case ""NPPS2006"":
        case ""NFPS2006MOD"":
        case ""NFPS2006RET"":
            return 55;
        case ""FPS1992"":
        default:
			break;
	}
	
}{noformat}

We need to flesh this out for all options. If other inputs are required, we can look at adding them. I know technically the 1987 also relies on service, but I am keeping that separate as without it we have something that can be called from anywhere in the code.",,Andrew Wilson,Chris Marshall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@10d00f04,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004v:7b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-07-10 13:05:09.792,10252_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_88338154,,"10/Jul/25 2:05 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Saved NRA for each separate category below:

+*Active Police*+

PPS 1987

Can retire with 30 calendar years at any age, at age 50 with over 25 years service, otherwise age 55 for ranks up to Sgt, and age 60 for ranks above this.

 

NPPS 2006

Age 55

 

2015

60. Can retire from age 55 with reduction

 

+*Deferred Police*+

PPS 1987

60. 50 if left with over 25 years service and no entitlement to immediate benefits.

 

NPPS 2006

65. Can retire from age 55 with reduction.

 

2015

SPA. Can retire from age 55 with reduction.

 

+*Active Fire*+

FPS 1992

Age 55 but can retire from age 50 with over 25 years service.

 

NFPS 2006

60. Can retire from age 55 with reduction

 

Modified Retained

55

 

2015

60. Can retire from age 55 with reduction

 

+*Deferred Fire*+

FPS 1992

60

 

NFPS 2006

65. Can retire from age 55 with reduction.

 

Modified Retained

60

 

2015

SPA. Can retire from age 55 with reduction.

 ",,,,,,,,,,,,,,,,,,,,,,,,13810,PHX5-200,ER/LR Factors Module,Done,11/Jul/25 9:14 AM
Add full Test cases to Service Builder,PHX5-254,14070,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,09/Jul/25 9:46 AM,28/Jul/25 8:18 AM,,16/Jul/25 2:34 PM,Batch 1,,,,,,,,,,,,0,,,,,"Need test cases that include TVin, overtime and capping of service",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@32da276f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:y,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10252_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_30999,,,,,,,,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,16/Jul/25 2:34 PM
Create base level Active to Deferred Calculation,PHX5-253,14044,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,08/Jul/25 8:55 AM,01/Oct/25 10:41 AM,,01/Oct/25 10:41 AM,,,,,,,,,,,,,0,,,,,"We need a base level active to deferred calculation. This will use the existing modules, but will provide a set of outputs for the active to deferred calculation",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,PHX5-503,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@527372a1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00001i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 6,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10281_*:*_1_*:*_3536_*|*_10251_*:*_1_*:*_8111755_*|*_10250_*:*_1_*:*_420942392_*|*_10253_*:*_1_*:*_3026128336_*|*_10252_*:*_1_*:*_2082767789_*|*_10354_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_92254_*|*_10058_*:*_1_*:*_105560,,,,,,,,,,,,,,,,,,,,,,,,,,13853,PHX5-220,Police - Active to Deferred,Done,01/Oct/25 10:41 AM
Split tranche into CARE and NON CARE,PHX5-252,14013,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,07/Jul/25 7:10 AM,28/Jul/25 8:18 AM,,09/Jul/25 10:17 AM,Batch 1,,,,,,,,,,,,0,,,,,"In order for the accrual code to be able to calculate total qualifying with CARE and total reckonable without, but without doing two service calculations, we need the service code to do the full calculation, but to differentiate between CARE and non CARE,

The easiest way to do this, is to start using tranches. Rather than use tranches set at a client level, we can create tranches in the factory code prior to passing into service. We need to do this, because the CARE start date could vary based on the member and the calculation we are running.

So rather than a service tranche being: 

{noformat}[
    {
        ""Id"": 0,
        ""CategoryId"": null,
        ""Category"": null,
        ""Key"": ""All Service"",
        ""Name"": null,
        ""AccrualNominator"": 0.0,
        ""AccrualDenominator"": 0.0,
        ""UpdatedAt"": ""0001-01-01T00:00:00"",
        ""UpdatedBy"": null,
        ""EffectiveFrom"": ""0001-01-01"",
        ""EffectiveTo"": ""2026-01-01""
    }
]{noformat}

it would instead be:

{noformat}[
    {
        ""Id"": 0,
        ""CategoryId"": null,
        ""Category"": null,
        ""Key"": ""DB"",
        ""Name"": null,
        ""AccrualNominator"": 0.0,
        ""AccrualDenominator"": 0.0,
        ""UpdatedAt"": ""0001-01-01T00:00:00"",
        ""UpdatedBy"": null,
        ""EffectiveFrom"": ""0001-01-01"",
        ""EffectiveTo"": ""2022-03-31""
    },
	{
        ""Id"": 0,
        ""CategoryId"": null,
        ""Category"": null,
        ""Key"": ""CARE"",
        ""Name"": null,
        ""AccrualNominator"": 0.0,
        ""AccrualDenominator"": 0.0,
        ""UpdatedAt"": ""0001-01-01T00:00:00"",
        ""UpdatedBy"": null,
        ""EffectiveFrom"": ""2022-04-01"",
        ""EffectiveTo"": ""2026-01-01""
    }
]{noformat}

All our existing test cases are still valid, but we need new test cases to cover:

* Member with CARE date = 2015
* Member with CARE date = 2022
* Member with CARE date between 2015 and 2022

For checking purposes, we should be checking total reckonable excluding CARE and total qualifying including CARE - as these are what we will actually use.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@166092c1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004v:8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10252_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_24934632,,,,,,,,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,09/Jul/25 10:17 AM
Service Module - Update for DB and CARE tranches,PHX5-251,14010,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,04/Jul/25 12:55 PM,28/Jul/25 8:18 AM,,14/Jul/25 11:32 AM,Batch 1,,,,,,,,,,,,0,,,,,"Updates to the service module are required to include service tranches, which will be needed to run the service code over DB and CARE service tranches.



In order for the accrual code to be able to calculate total qualifying with CARE and total reckonable without, but without doing two service calculations, we need the service code to do the full calculation, but to differentiate between CARE and non CARE,

The easiest way to do this, is to start using tranches. Rather than use tranches set at a client level, we can create tranches in the factory code prior to passing into service. We need to do this, because the CARE start date could vary based on the member and the calculation we are running.

So rather than a service tranche being:

{noformat}[
    {
        ""Id"": 0,
        ""CategoryId"": null,
        ""Category"": null,
        ""Key"": ""All Service"",
        ""Name"": null,
        ""AccrualNominator"": 0.0,
        ""AccrualDenominator"": 0.0,
        ""UpdatedAt"": ""0001-01-01T00:00:00"",
        ""UpdatedBy"": null,
        ""EffectiveFrom"": ""0001-01-01"",
        ""EffectiveTo"": ""2026-01-01""
    }
]{noformat}

it would instead be:

{noformat}[
    {
        ""Id"": 0,
        ""CategoryId"": null,
        ""Category"": null,
        ""Key"": ""DB"",
        ""Name"": null,
        ""AccrualNominator"": 0.0,
        ""AccrualDenominator"": 0.0,
        ""UpdatedAt"": ""0001-01-01T00:00:00"",
        ""UpdatedBy"": null,
        ""EffectiveFrom"": ""0001-01-01"",
        ""EffectiveTo"": ""2022-03-31""
    },
	{
        ""Id"": 0,
        ""CategoryId"": null,
        ""Category"": null,
        ""Key"": ""CARE"",
        ""Name"": null,
        ""AccrualNominator"": 0.0,
        ""AccrualDenominator"": 0.0,
        ""UpdatedAt"": ""0001-01-01T00:00:00"",
        ""UpdatedBy"": null,
        ""EffectiveFrom"": ""2022-04-01"",
        ""EffectiveTo"": ""2026-01-01""
    }
]{noformat}

All our existing test cases are still valid, but we need new test cases to cover:

* Member with CARE date = 2015
* Member with CARE date = 2022
* Member with CARE date between 2015 and 2022

For checking purposes, we should be checking total reckonable excluding CARE and total qualifying including CARE - as these are what we will actually use.",,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2fa36dd4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004v:1,,,,,,,,,,,,,,,,1987 PPS,,,,,,,,,,,,,,,,,,,,,,,0,,,PHX5 Sprint 3,,,,,,2.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_6231_*|*_10252_*:*_1_*:*_436582419_*|*_10056_*:*_1_*:*_422419125,,"14/Jul/25 11:31 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Updated all test Phase 5 cases in the Service Global Module to have  a ‘DB’ tranche key (and a ‘CARE’ one, if applicable).

Example:

McCloudTest1


{code:json}[
    {
        ""Id"": 0,
        ""CategoryId"": null,
        ""Category"": null,
        ""Key"": ""DB"",
        ""Name"": null,
        ""AccrualNominator"": 0.0,
        ""AccrualDenominator"": 0.0,
        ""UpdatedAt"": ""0001-01-01T00:00:00"",
        ""UpdatedBy"": null,
        ""EffectiveFrom"": ""0001-01-01"",
        ""EffectiveTo"": ""2026-01-01""
    }
]{code}",,,,,,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,14/Jul/25 11:32 AM
Service Module - Date Commenced Pensionable Service,PHX5-250,13983,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,03/Jul/25 10:27 AM,28/Jul/25 8:18 AM,,11/Jul/25 9:57 AM,Batch 1,,,,,,,,,,,,0,,,,,"In Altair, where a member has service data in MEMBER_SERVICE, Date Commenced Pensionable Service (DCPS) contains their latest service period. We have checked what the current Aurora mapping rules are. Neil Murrey confirmed we are mapping as is to DCPS in Aurora. 

This may cause issues in the code. Neil is checking with the admin team if we can change the mapping so that DCPS is always actually DCPS.",,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3b832a2c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004y:v,,,,,,,,,,,,,,,,1987 PPS,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_689351212,,,,,,,,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,11/Jul/25 9:57 AM
CARE Module - Testing,PHX5-243,13947,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Iain Wilson,712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,01/Jul/25 5:03 PM,24/Oct/25 2:10 PM,,24/Oct/25 2:10 PM,,,,,,,,,,,,08/Jul/25 12:00 AM,0,TEST_CASES,,,,"Hi Iain, April, Charlotte

We have completed our initial testing of the CARE module. Details can are in the matrix ([CARE Module Matrix.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EVeg9nh79FRFlthuiwqr5_UBW__URtgjcA711HI7I-wuPA?e=hWIh8v])

We have compared the results of the global service module with those produced by the McCloud code and Altair. All match where it was possible to make the comparison see notes in matrix for further details). 

Breakdowns of each test case can be found here - [Project Phoenix - Documents|https://xpsplc.sharepoint.com/sites/ProjectPhoenix/Shared%20Documents/Forms/AllItems.aspx?FolderCTID=0x012000D0A96E2B8CB4EC4396DA3F769815D15D&id=%2Fsites%2FProjectPhoenix%2FShared%20Documents%2FPhase%205%2FImplementation%20Services%20Team%2FCalculations%2FModule%20Testing%2FCARE].

Please note that TV-ins and the Age Addition have not be included in this round of work on this module. This will be included in a later version of the module.

Please add any issues or queries you have to this ticket (happy to talk you through this).

Thanks",,April Woods,Matt Lilwall,,,,712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,30/Sep/25 12:55 PM;862ca789-6c5f-4d0a-b054-60929f0a27a7;image-20250930-113826.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10563,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5c1f79f0,,,,,Police,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,UAT #1,,,,,0|i00gg7:,,,,,,,,,,,,,,,,2015 CARE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,01/Jul/25 12:00 AM,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-07-03 10:14:28.96,10250_*:*_1_*:*_0_*|*_10252_*:*_1_*:*_4843_*|*_10056_*:*_1_*:*_839713966,,"03/Jul/25 11:14 AM;712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd;Hi Matt, 

Charlotte and I have reviewed the test cases where comments are present and we agree, other than test case 9, reference 10401. Can we check that this is the correct reference as this is in the line above and the CARE end date does not agree?

Thanks, 

April [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]","03/Jul/25 2:53 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd] McCloudCARETest7 is the same as McCloudCARETest6 except we’ve changed the CARE end date, for the purposes of testing the revaluation applied after the member’s CARE accrual has ended. Does that make sense? You wrote test case 9 in your message above, but this doesn’t exist, so assume you meant the test case in row 9, which is McCloudCARETest7.","10/Jul/25 12:33 PM;712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] Hi Matt, sorry we did mean test 7. When you say you’ve just extended the DOL to test the reval do you mean you’ve taken the £5275.38 at original date of leaving and just added reval on from 8.2.22 to 1.6.24? So full reval for 2022, 2023 and 2024 and part year reval from 1.4.24 to 1.6.24?

Thanks, 

April","11/Jul/25 11:30 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd] Hi April, apologies for the delay getting back to you. Yes, that’s right. Thanks, Matt","16/Jul/25 4:53 PM;712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] Hi Matt, thanks but we cannot balance to this figure of £6622.66. If we take the pension of £5275.39 and add reval for 2022, 2023 and 2024 we get a figure of £6616.98, so £5.68 adrift. If we try add part year reval for 2025 this is even further out, likewise adding part year for 2022, then full reval from this point onwards. Can you clarify the reval for each year?

Thanks, April","30/Sep/25 12:55 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd] , please accept my apologies for the delay in getting back to you on this. It managed to completely fall off my radar. 

The breakdown of test 7 is here:

[McCloudCARETest7 _results.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/ERsRYYmBIEVCk4QfinRjDdQB-MZuWMhv8Cn9KuCr7NKgOw?e=gf4soA&nav=MTVfe0U4NkY3MzQ3LUEyRjEtNDI5OC05RTdBLTA2NkIxNjEzNzM0OH0]


!image-20250930-113826.png|width=819,alt=""image-20250930-113826.png""!

5275.38 is taken from the TotalPension at 31/03/2021, plus the PeriodPension for 01/04/2021 - 31/03/2022:

4637.87 + 637.51 = 5275.38


Inflation of 4.35% is therefore applied to the pension accrued between 01/04/2021 - 31/03/2022:

637.51 * 4.35% = 27.73

This is then added to the PreviousInflation of 201.75, so the TotalPension at 31/03/2022 is:

5275.38 + 27.73 + 201.75 = 5504.86

This then has inflation of 11.26% (31/03/2023), 7.95% (31/03/2024) and part year inflation of 0.167% (to 01/06/2024) applied

5504.86 + (5504.86 * 11.26%) = 6124.71

6124.71 + (6124.71 * 7.95%) = 6611.62

6611.62 + (6611.62 * 0.167%) = 6622.66

Regards",,,,,,,,,,,,,,,,,,,,,,Done,24/Oct/25 2:10 PM
CARE module - can't find an inflation rate to apply due to missing end dates,PHX5-242,13936,Bug,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,30/Jun/25 4:56 PM,28/Jul/25 8:19 AM,,01/Jul/25 4:05 PM,Batch 1,,,,,,,,,,,,0,,,,,"[CARE - Global Module Editor|https://calculate.calcuat.xpsplc.com/global-modules/53]

See errors in McCloudCARETest6, McCloudCARETest7


Error running test, inner stack trace: at System.Nullable`1.get_Value() at CAREInflationTemplate.PopulateMemberCareIncreaseRate(List`1 MemberCare, List`1 IncreaseRates, ReferenceData globalReference, Decimal FutureInflation, LocalDate calculationDate) at CARETemplate.CalculateMemberCare(LocalDate StartDate, LocalDate EndDate, List`1 ExistingMemberCare, List`1 SalHistory, List`1 IncreaseRates, ReferenceData globalReference, Int32 CAREMonth, Int32 CAREDay, Decimal accrualRate, CAREPeriod carePeriod, Decimal FutureInflation) at TestCARE.CalculateMemberCareProRate(LocalDate StartDate, LocalDate EndDate, List`1 ExistingMemberCare, List`1 SalHistory, List`1 IncreaseRates, Int32 CAREMonth, Int32 CAREDay, Decimal accrualRate, CAREPeriod carePeriod, Decimal FutureInflation, ProRateMethod proRateFirst, ProRateMethod proRateLast, Int32 inflationMonth, Decimal maximum, Decimal minimum, ReferenceData globalReference) at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor) at System.Reflection.MethodBaseInvoker.InvokeWithManyArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)",,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5334d3dc,,,,,Police,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fln:,,,,,,,,,,,,,,,,2015 CARE,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 1,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-07-01 08:01:35.575,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_9290_*|*_10252_*:*_1_*:*_2356_*|*_10056_*:*_1_*:*_59776049,,"01/Jul/25 9:01 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] / [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  In the scenario where we have the member salarie son the care record - but still need to calculate the rest of the care values, would we ever have to add additional years CARE that were not already dealt with? i.e. would we ever have a scenario where the majority of salaries are on the care record, but we need to add an extra year taking salary from salaryhistory as well?",01/Jul/25 9:07 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]  / [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  Also - would we ever have a case where the first record of the member care data has a start date after the start date of the calculation?  (this could cause issues as the code would think there is a missing record at the start that it needs to populate),"01/Jul/25 9:25 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]  Case 6 is now fixed. Case 7 we need to change the input data. The case is set to calculate CARE between 2022 and 2023, existing care data only goes up to 2021, and no other salaries are input. So it does not have the salaries to do the calculation - and so the errors are correct to appear.",,,,,,,,,,,,,,,,,,,,,,13807,PHX5-197,CARE Module,Done,01/Jul/25 4:05 PM
Service Module - inclusion of leap year logic,PHX5-241,13925,Bug,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,30/Jun/25 12:22 PM,28/Jul/25 8:18 AM,,11/Jul/25 9:57 AM,Batch 1,,,,,,,,,,,,0,Service,,,,Iain requested some additional functionality to the service module. The code includes a leap day in the service calculation if the leap day is within a year of the service end date. The code needs an additional boolean argument that allows us to set if the leap year should be included or not. This is because there may be some applications of the service module where the leap year shouldn’t be included. ,,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@175d52c8,,,,,Police,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004y:z,,,,,,,,,,,,,,,,1987 PPS,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-06-30 13:22:23.261,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_941706552,,30/Jun/25 2:22 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Need more information on why and when this logic goes in.,"01/Jul/25 7:40 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The code applies the leap year logic by using {{ServiceUnitCalculationPublicSectorPPS}} instead of {{ServiceUnitCalculationYearsAndDaysIgnoreLeapYears}}. The only difference between these two bits of code is the inclusion of the leap year in the last year of service. So effectively, we have already delivered the additional functionality Iain has asked for.  

If we want to not use the leap year logic, it should be as simple as setting up the service module with a different ServiceUnit Calculation. This would be done in the service factory - which would have access to the member data and the calc type (care remedy/legacy remedy) and the input retirement date. So we should resolve this issue by ensuring there is a condition to cater for this in the Service Factory. To do this, we would need to understand what the scenario is that would require us to ignore the leap year entirely.

[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] / [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  / [~accountid:712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97]   Can we find this information out from the admin team?",,,,,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,11/Jul/25 9:57 AM
Service Module - McCloudTest12 - test case doesn't agree,PHX5-240,13924,Bug,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,30/Jun/25 11:43 AM,04/Sep/25 12:32 PM,,14/Jul/25 9:15 AM,Batch 1,,,,,,,,,,,,0,Service,,,,"AuroraID: 7853301
The member has a service gap between 1985 and 1990. This is incorrectly being included as service in the service calculation. 

Expected:
21/06/1984 - 08/09/1985 (Service from Service Periods)

09/09/1995 - 21/10/1990 (Service gap i.e the period from the last Service Period end date and Date commenced pensionable service)
22/10/1990 - 14/11/1993 (Service from Date commenced pensionable service to service break)

15/11/1993 - 02/01/1994 (Service break)

03/01/1994 to 22/05/2019 (Service after break to DOR)",,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-270,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1a4b841f,,,,,Police,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004v:3,,,,,,,,,,,,,,,,1987 PPS,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 2,PHX5 Sprint 3,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-07-02 14:49:35.677,10250_*:*_1_*:*_0_*|*_10252_*:*_1_*:*_847326598_*|*_10056_*:*_1_*:*_9142796,,"02/Jul/25 3:49 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]  The issue here is that our code is set to fill the last service period with a service period up to today’s date. However, when it does this, it is not referencing the service breaks. So it sees the last service period as the one up until 1985 and creates a service period from 1985 to todays date.

I would need to adapt the code to be aware of the service breaks at the point that it fills the last period, but this would not be straight forward. Its looking like I will either have to break existing functionality, or create a whole new function just for public sector.",08/Jul/25 9:34 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] Agreed to just update the inputs for the dcps based on the decision to update dcps migration logic,"11/Jul/25 12:05 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Tried setting DCPS to 22/10/1990. This ignores the service period 21/06/1984 - 08/09/1985, which causes the service calculation to be too low (28.449315068493150684931506850, with 30 expected, capped).

If DCPS set to 21/06/1984, the service gap between 09/09/1995 - 21/10/1990 is incorrectly treated as service.","11/Jul/25 1:37 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] How many issues are there here now?

I can fix the second issue, as have already written code to deal with it. But if setting the dcps to the dcps as it will be stored on the record creates incorrect results - is this a problem?

Is that dcps the value that will be taken from altair as per discussion with Neil the other day?","04/Sep/25 12:32 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] , McCloudTest12 now agrees with the exception of the added service, which is further coding covered in another ticket ([[PHX5-392] Service Transfer In Added Service - Jira|https://xps-jira.atlassian.net/browse/PHX5-392]). ",,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,14/Jul/25 9:15 AM
Set up Test Cases in Calculate,PHX5-238,13914,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,30/Jun/25 9:20 AM,28/Nov/25 5:15 PM,,08/Oct/25 6:22 AM,Client 164 Fire A to R Version 1,,,,,,,,,,,,0,TEST_CASES,,,,,,Barrie Moroney,Chris Marshall,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2007c21e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 15,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-10-07 15:30:17.383,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_348890815_*|*_10252_*:*_1_*:*_192139055_*|*_10354_*:*_1_*:*_4590_*|*_10056_*:*_1_*:*_8038340874,,07/Oct/25 4:30 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Fire A>R tests setup in UAT. Also added factor tables,,,,,,,,,,,,,,,,,,,,,,,,13856,PHX5-223,Fire - Active to Retirement,Done,08/Oct/25 6:22 AM
Set up Test Cases in Calculate,PHX5-234,13909,Task,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,30/Jun/25 9:15 AM,13/Nov/25 11:15 AM,,,,,,,,,,,,,,,0,TEST_CASES,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@30e96a7a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o2q:zzy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13855,PHX5-222,Police - Death in Service,To Do,30/Jun/25 9:15 AM
Set up Test Cases in Calculate,PHX5-230,13904,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,30/Jun/25 9:11 AM,29/Sep/25 2:57 PM,,29/Sep/25 2:57 PM,,,,,,,,,,,,,0,TEST_CASES,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@29a131d7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i002xj:y,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10354_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_6226361621,,,,,,,,,,,,,,,,,,,,,,,,,,13854,PHX5-221,Police - Active to Retirement,Done,29/Sep/25 2:57 PM
Set up Police AtoD Test Cases in Calculate,PHX5-226,13900,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,30/Jun/25 9:07 AM,28/Nov/25 4:26 PM,,29/Oct/25 12:36 PM,Client 162 Police A to D Version 1,,,,,,,,,,,,0,TEST_CASES,,,,,,Barrie Moroney,Chris Marshall,Naomi Robinson,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:ffa445ab-b813-4226-9ed2-507a454e9272,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2bfbf1f0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1u:zzbzzu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 18,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-10-29 12:36:18.833,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_439139761_*|*_10252_*:*_1_*:*_3762_*|*_10354_*:*_1_*:*_4987_*|*_10056_*:*_1_*:*_10031409023,,"29/Oct/25 12:36 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Test cases all set up here:
[ActiveToDeferred - Client Calculation Editor|https://calculate.uat.xpsplc.com/Clients/144/Calculations/2]

Further ticket raised as PPS test cases are erroring to investigate","28/Nov/25 2:54 PM;712020:ffa445ab-b813-4226-9ed2-507a454e9272;Adding to “Fix version” Client 162 A to D Version 1, as these test cases were moved to client 162 and not part of a release until 14/11/2025. Previous release was in client 150 on 20/10/2025 prior to this set up.",,,,,,,,,,,,,,,,,,,,,,,13853,PHX5-220,Police - Active to Deferred,Done,29/Oct/25 12:36 PM
Fire - Active to Retirement,PHX5-223,13856,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,27/Jun/25 4:57 PM,10/Sep/25 10:43 AM,,,,,,,,,,,,,,,0,Batch1,,,,,,Barrie Moroney,Steven Wright,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5fc0cd57,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fzr:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,27/Jun/25 4:57 PM
Police - Death in Service,PHX5-222,13855,Epic,READINESS REVIEW,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,27/Jun/25 4:57 PM,02/Dec/25 7:13 AM,,,,,,,,,,,,,,,0,Batch1,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,PHX5A-263,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6f78f75a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghx-label-1,,,,,,,,,,,,,,dark_grey,,,,,,,,,,,,,0|i00fzj:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,27/Jun/25 4:57 PM
Police - Active to Retirement,PHX5-221,13854,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,27/Jun/25 4:56 PM,18/Sep/25 1:03 PM,,,,,,,,,,,,,,,0,Batch1,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,PHX5-473,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4d5e688,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fzb:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,27/Jun/25 4:56 PM
Police - Active to Deferred,PHX5-220,13853,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,27/Jun/25 4:56 PM,02/Oct/25 9:43 AM,,,,,,,,,,,,,,,0,Batch1,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@21fc85aa,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fz3:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,27/Jun/25 4:56 PM
Set up Test Cases in Calculate,PHX5-218,13850,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,27/Jun/25 4:35 PM,30/Jul/25 9:33 AM,,30/Jul/25 9:33 AM,Batch 1,,,,,,,,,,,,0,PCLS,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5964711e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004y:td,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 5,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10250_*:*_1_*:*_0_*|*_10252_*:*_1_*:*_1892865086_*|*_10056_*:*_1_*:*_855242312,,,,,,,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,30/Jul/25 9:33 AM
Set up Test Cases in Calculate,PHX5-215,13847,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,27/Jun/25 4:28 PM,28/Jul/25 8:21 AM,,15/Jul/25 2:27 PM,Batch 1,,,,,,,,,,,,0,Factors,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@27f656df,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004v:6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 2,PHX5 Sprint 3,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_2_*:*_66346630_*|*_10250_*:*_2_*:*_444929556_*|*_10252_*:*_1_*:*_22270689_*|*_10056_*:*_1_*:*_1014419889,,,,,,,,,,,,,,,,,,,,,,,,,,13810,PHX5-200,ER/LR Factors Module,Done,15/Jul/25 2:27 PM
Set up Test Cases in Calculate,PHX5-212,13844,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,27/Jun/25 4:21 PM,30/Jul/25 9:33 AM,,30/Jul/25 9:33 AM,Batch 1,,,,,,,,,,,,0,FPS,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@341ac9a6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004y:ud,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 5,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_61925883_*|*_10252_*:*_1_*:*_1389317433_*|*_10056_*:*_1_*:*_857016490,,,,,,,,,,,,,,,,,,,,,,,,,,13809,PHX5-199,FPS Module,Done,30/Jul/25 9:33 AM
Set up Test Cases in Calculate,PHX5-209,13841,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,27/Jun/25 4:13 PM,28/Jul/25 8:20 AM,,14/Jul/25 11:47 AM,Batch 1,,,,,,,,,,,,0,Accrual,,,,,,Barrie Moroney,Matt Lilwall,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@af6c35c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004v:0i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 2,PHX5 Sprint 3,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-07-14 10:46:49.288,10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_173205123_*|*_10252_*:*_1_*:*_674774306_*|*_10056_*:*_1_*:*_251519434,,"14/Jul/25 11:46 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Test cases set up here:

[Public Sector Calculation - Global Module Editor|https://calculate.calcuat.xpsplc.com/global-modules/63]",,,,,,,,,,,,,,,,,,,,,,,,13808,PHX5-198,Accrual Module,Done,14/Jul/25 11:47 AM
Aurora Items,PHX5-205,13836,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,27/Jun/25 3:37 PM,27/Jun/25 3:38 PM,,,,,,,,,,,,,,,0,,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@63e1ad8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00387:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,27/Jun/25 3:37 PM
PPS ER/LR Factors - Different ERF for CARE,PHX5-204,13815,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,26/Jun/25 11:05 AM,28/Jul/25 8:21 AM,,11/Jul/25 10:06 AM,Batch 1,,,,,,,,,,,,0,Factors,,,,Consideration of different ERF for CARE needs to be considered as part of CARE module,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4e8286d1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i000dw:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_1292512028,,,,,,,,,,,,,,,,,,,,,,,,,,13810,PHX5-200,ER/LR Factors Module,Done,11/Jul/25 10:06 AM
CARE Module - ill Health Retirement,PHX5-203,13814,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,26/Jun/25 10:58 AM,30/Sep/25 10:39 AM,,30/Sep/25 10:39 AM,Batch 1,,,,,,,,,,,,0,CARE,TEST_CASES,,,Consideration needs to be taken of ill health retirement as part of the CARE module,,Annabelle Stephenson,Barrie Moroney,Matt Lilwall,,,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7343964b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i000dr:00i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-08-19 14:37:23.868,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_8293310537,,19/Aug/25 3:37 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;this might be a duplicate of 385 - can we delete?,"30/Sep/25 10:39 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Agree that this is a duplicate of 385, so closed.",,,,,,,,,,,,,,,,,,,,,,,13807,PHX5-197,CARE Module,Done,30/Sep/25 10:39 AM
PCLS (Pre Commutation) Module,PHX5-201,13811,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,26/Jun/25 10:10 AM,23/Jul/25 8:39 AM,,,,,,,,,,,,,,,0,,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1f980637,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ftr:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,26/Jun/25 10:10 AM
ER/LR Factors Module,PHX5-200,13810,Epic,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,26/Jun/25 10:10 AM,12/Nov/25 12:18 PM,,12/Nov/25 12:18 PM,,,,,,,,,,,,,0,,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@c2bdcc7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ftj:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_12020850205,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,12/Nov/25 12:18 PM
FPS Module,PHX5-199,13809,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,26/Jun/25 10:10 AM,26/Jun/25 10:10 AM,,,,,,,,,,,,,,,0,,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@17ec2259,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ftb:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,26/Jun/25 10:10 AM
Accrual Module,PHX5-198,13808,Epic,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,26/Jun/25 10:09 AM,12/Nov/25 12:18 PM,,12/Nov/25 12:18 PM,,,,,,,,,,,,,0,,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,PHX5-282,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@85e84f8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ft3:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_12020912986,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,12/Nov/25 12:18 PM
CARE Module,PHX5-197,13807,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,26/Jun/25 10:09 AM,30/Sep/25 12:05 PM,,,,,,,,,,,,,,,0,,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,PHX5-398,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@f52ec77,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fsv:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,26/Jun/25 10:09 AM
Service Module,PHX5-196,13806,Epic,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,26/Jun/25 10:08 AM,13/Nov/25 11:22 AM,,13/Nov/25 11:22 AM,,,,,,,,,,,,,0,,,,,,,Barrie Moroney,,,,,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4d8927c4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fsn:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_12104029369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,13/Nov/25 11:22 AM
Scheme Pays - picking up existing data,PHX5-133,13782,Story,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,25/Jun/25 1:16 PM,08/Sep/25 2:41 PM,,,Batch 1,,,,,,,,,,,,0,McCloud,TEST_CASES,,,"Review spec, including Additional McCloud debit

This ticket covers just picking up values from the member’s record on the assumption that they are up to date with the latest pension increases.",,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2289c6f2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Documentation,,,Amber,,0|i002xj:r,,,,,,,,,,,,,,,,1987 PPS,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-07-17 09:21:36.408,,,"17/Jul/25 10:21 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The specs mention

*  Scheme_Pays_debit_2006Pen
* Scheme_Pays_debit_McCloud_2006Pen
* Scheme_Pays_debit_2006LS
* Scheme_Pays_debit_McCloud_2006LS

The spec says the same for each of these - just “Obtain original scheme pays debit“

For this ticket to be ready - we need to understand how we know the difference between each of the above in the data. Is it ElementType on the MemberSchemePayDebits record?

[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] / [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]  One to answer when we have a moment.","25/Jul/25 2:58 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] To clarify what data is held, how many scheme pay records. Need test cases.",08/Sep/25 2:41 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Waiting for test cases from admin.,,,,,,,,,,,,,,,,,,,,,,10708,PHX5-195,General Calculation Items,To Do,25/Jun/25 1:16 PM
Divorce ,PHX5-132,13781,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,25/Jun/25 1:15 PM,30/Jan/26 3:20 PM,,30/Jan/26 3:19 PM,Batch 1,,,,,,,,,,,,0,Divorce,TEST_CASES,,,Review spec,,Andrew Wilson,Annabelle Stephenson,Chris Marshall,Matt Lilwall,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5A-120,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3ea1804b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Documentation,,,Amber,,0|hzzzxi:x00008zi,,,,,,,,,,,,,,,,1987 PPS,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,3.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-07-17 09:43:08.22,10354_*:*_1_*:*_1887903054_*|*_10056_*:*_1_*:*_4761743371_*|*_10355_*:*_1_*:*_0,,"17/Jul/25 10:43 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Very briefly looking at the data, there are many different types of divorce elements (PEN, PIP, CARE etc).  Need to understand how we deal with all of these. Is it just a summation, or something different for each type?

[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] / [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]  FYI - One to answer to get this ticket ready.","17/Jul/25 10:53 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] The Divorce elements are stated the same as the pension details (effectively the divorce is a pension). The elements work in that the PEN is an ADD element and the others IGNORE. All elements are summed up in the PEN.

We may see the odd further add element. But effectively the PEN will only be the add element and hold all the other elements.

However if a member is CARE only, then CARE takes the place of PEN.

If you need anymore or this doesn’t make sense, please let me know","25/Jul/25 2:55 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  To clarify how PSO debits will be split pre and post 2015. Also need test cases.

Do they use same ERF or different?",01/Aug/25 10:46 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Example member - 143464 (Altair) 14346401 (Aurora),"19/Aug/25 3:57 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] - please create 2nd ticket for the actual divorce element calc (batch 2, this ticket should be for batch 1 as is part of A-R)",08/Sep/25 2:40 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Still not ready. Waiting for test cases from admin.,30/Jan/26 3:20 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Closed as superseded by later PSO tickets,,,,,,,,,,,,,,,,,,10708,PHX5-195,General Calculation Items,Done,30/Jan/26 3:19 PM
Age Addition ,PHX5-131,13780,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,25/Jun/25 1:14 PM,19/Sep/25 7:02 AM,,19/Sep/25 7:02 AM,Batch 1,,,,,,,,,,,,0,Accrual,,,,"This ticket covers coding CAREAgeAdditionTemplate so that it calculates and populates the new AdditionalCredit field with the AgeAddition.

Once this has been done, fully tested and published AND we have the latest dev updates that add the new fields to MemberCare, we can tie this into public sector code.",,Andrew Wilson,Annabelle Stephenson,Chris Marshall,Matt Lilwall,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,PHX5-259,,PHX5-397,,,,,,,,,,,,,,,,16/Jul/25 9:13 AM;5e266667-8b87-4eb6-9386-71980feac557;Age Addition.docx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10238,12/Aug/25 3:21 PM;18934601-32fa-4c76-9b74-159dc94fd206;Age addition - template for testing.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10294,12/Aug/25 3:21 PM;18934601-32fa-4c76-9b74-159dc94fd206;Age addition plus assumed example 2 - AS amends.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10295,12/Aug/25 4:43 PM;18934601-32fa-4c76-9b74-159dc94fd206;Age addition testing notes.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10297,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3410086b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Documentation,,,Amber,,0|hzzzxi:x0h9,,,,,,,,,,,,,,,,2015 CARE,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 7,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-07-16 08:08:20.033,10281_*:*_4_*:*_2425380383_*|*_10251_*:*_2_*:*_511470065_*|*_10250_*:*_2_*:*_10820_*|*_10253_*:*_2_*:*_2038004745_*|*_10252_*:*_3_*:*_547049768_*|*_10354_*:*_1_*:*_6241_*|*_10056_*:*_1_*:*_1188392281_*|*_10058_*:*_2_*:*_697762600,,16/Jul/25 9:08 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Waiting for test cases to be provided by admin ,"16/Jul/25 9:11 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Test cases saved here:

\\ad.xafinity.com\London\Data\Admin Services Group\Management Controls (Procedures)\_ Phoenix Phase 5\Calculations\A to R\Example cases age addition",16/Jul/25 11:02 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Waiting for data changes to CARE for additional credit,"01/Aug/25 8:09 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;We will need a new CARE template - most likely making use of {{CARESalaryTemplate}} for the salary logic, but which adds functionality for age addition.",01/Aug/25 8:32 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Test cases saved here: [CARE (2015)|https://xpsplc.sharepoint.com/:f:/s/ProjectPhoenix/Es9zr5w29YpHvZhGbpZeCbIBCamUZTMk1jsSLe1alRxhWA?e=vjlcfH],"12/Aug/25 1:05 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Code changes:

* Override functions created for CreateMemberCAREList and CalculateCARERunningTotals.  Age addition calculated within running totals, added to AdditionalCredit, and included within TotalPension
* PopulateMemberCareSalary - I made an amend from == to >= following salaries not being picked up in my test cases, comment added to code to explain this
* Admin have two different sets of age addition factors for use, dependant on CARE date (ie. both tables may be used within one member calc).  We’ve not coded for this as I assume that is scheme level?
* RollingTotal / TotalPension is calculated from scratch year on year, regardless of totals already recorded in existing CARE history.  This means that any existing CARE history must be complete and accurate RE accrued inflation etc, or the TotalPension (and therefore the Age Addition pension) will be incorrect","12/Aug/25 3:17 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Testing:

* Testing function CalculateMemberCareWithAgeAddition been set up.  Tested on interim values TotalAdditionalCredit and TotalCAREAtEndDate
* 3 admin test cases set up. Queried test 2 as I think there has been user error, awaiting response.  Set it up with my amends
* Tested NPA and calc dates falling on the CARE end/start dates to test the counting of months at boundary dates
* Also NPA date on 2nd day of CARE pd as factor is determined by age as at 01/04 (so testing selection of correct factor) 
* Tested calc date falling just under/over 1m to/from NPA date
* Tested start date before NPA, showing CARE calc still correct when no AA calculated
* Tested incorrect existing history input, to show accurate recalculation of TotalPension each CARE period
* Tested NPA date occurring within existing history, so AA needs calculating and adding to existing as well as new",15/Aug/25 3:33 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;admin have confirmed that my amended test 2 is correct,,,,,,,,,,,,,,,,,13807,PHX5-197,CARE Module,Done,19/Sep/25 7:02 AM
Review Care Spec,PHX5-134,13776,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,25/Jun/25 9:57 AM,28/Jul/25 8:19 AM,,01/Jul/25 4:03 PM,Batch 1,,,,,,,,,,,,0,Accrual,CARE,,,"To fully review spec and create CARE tickets



* Deal with input for last years pay (run time input)
* CARE factory needs to deal with different salary types for different schemes
* This is an additional CARE credit given when a member reaches 60 in a scheme year as an active officer. Age addition is granted per scheme year, assumed age addition is in the final year.
* Need a full list of scenarios, member types and where data will come from for CARE - with examples of Aurora data (e.g. CARE records with only salaries - when does this apply?)





to follow up:

* CARE pay is calculated in months and part months, rather than days.",,Andrew Wilson,Chris Marshall,Matt Lilwall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@60f289ee,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00flz:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 1,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-06-26 10:31:48.043,10060_*:*_1_*:*_83557373_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_370385075_*|*_10252_*:*_1_*:*_4804_*|*_10056_*:*_1_*:*_86376238,,"26/Jun/25 11:31 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Age Addition has been added as its own ticket

[[PHX5-131] Age Addition - Jira|https://xps-jira.atlassian.net/browse/PHX5-131]","26/Jun/25 11:36 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;There are two main permutations for the CARE calculation:


#  Calculate whole CARE history. This is required for the ‘Reform option’ for McCloud members.
# Calculate latest year using previous years of CARE data","26/Jun/25 11:38 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Checking Altair for part year revaluation method, and also checking if there is any difference between part start year and part end year (complete months etc).",01/Jul/25 4:02 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Tested CARE pension against a salary linked McCloud record and CARE only non McCloud and a future inflation salary linked McCloud record. All testing is outputting expected results,,,,,,,,,,,,,,,,,,,,,13807,PHX5-197,CARE Module,Done,01/Jul/25 4:03 PM
Set up test cases in Calculate,PHX5-136,13775,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,25/Jun/25 9:48 AM,28/Jul/25 8:19 AM,,01/Jul/25 4:02 PM,Batch 1,,,,,,,,,,,,0,CARE,,,,,,Andrew Wilson,Chris Marshall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@30bd23d4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00flr:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 1,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-07-01 15:02:25.98,10060_*:*_1_*:*_1419527_*|*_10061_*:*_1_*:*_82682812_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_456738151,,01/Jul/25 4:02 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Tested CARE pension against a salary linked McCloud record and CARE only non McCloud and a future inflation salary linked McCloud record. All testing is outputting expected results,,,,,,,,,,,,,,,,,,,,,,,,13807,PHX5-197,CARE Module,Done,01/Jul/25 4:02 PM
Service Module - Testing,PHX5-130,13772,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Iain Wilson,712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,24/Jun/25 4:39 PM,11/Jul/25 10:15 AM,,11/Jul/25 10:15 AM,,,,,,,,,,,,01/Jul/25 12:00 AM,0,Batch1,,,,"Hi Iain, April, Charlotte

We have completed our initial testing of the service module. Details can are in the matrix ([Service Module Matrix.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EU2qAx7_yyxMjY8jgQ8tZG0BeEcrKP-nZt6J_pcy_oprUQ?e=AfM3bf])

We have compared the results of the global service module with those produced by the McCloud code and Altair. All match with the exception of the following:

 

352274 - McCloudTest4, 355660 - McCloudTest6
There is a day reckonable service difference between Altair and the service module. We don’t have enough information in the Altair calculation trace to show how it is being calculated. The McCloud and service module results are shown:

[McCloud4_35227401.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/ESNw0efiHOpNpzhphLXGS-EBUbbN20i-DA8_RvvqWbDoSg?e=G77dn6]
[McCloud6_35566001.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EXTQdJ1jnppFsBtnk4dQUogBCun2CHvw5tl21Ikl5TPQww?e=P1hmjK]


357247- McCloudTest5

Chris spoke to April. We think there is a data issue where the member has a service break during a gap in service.


 78533 - McCloudTest12

The Altair results are different to those produced by McCloud and global service code. The member has 2 service gaps, and 2 periods of transferred-in service. While Altair holds the member’s TV-ins in their service data, for McCloud they are held in External Benefits -> Transfer In Element.  This difference is causing the member’s service gaps to be incorrectly treated as service in the global module and McCloud code.

 

357349 - McCloudTest15

There is a leap year within the member’s last year of service (29/02/2020). The McCloud code is removing this, whereas the global module is not. I think the global module is correct. Please can you review.

[McCloud15_35734901.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EVn7R-ADYrBMsh-5SrgH4N0BEXOJ49YKD5x9GwPnhfjbWQ?e=ZCVJJk]

As the core service calculation is the same across PPS and NPPS, we haven’t tested all NPPS members from the McCloud NPPS A-R, but a sample to show the code is working correctly.

Please note that TV-ins and overtime have not been included in our testing.  We intend to add this prior to work on the accrued pension module.



Please record any issues or queries you have as sub-tasks to this ticket (happy to talk you through this).",,April Woods,Charlotte Knott,Iain Wilson,Matt Lilwall,,712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd,712020:e8f662cc-24ff-4dd8-9bde-c471f22fbabc,712020:ae0ade3b-11b1-4b0c-911d-202eff22fc87,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1bc46b1b,,,,,Police,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,UAT #1,,,Amber,,0|i00fl3:,,,,,,,,,,,,,,,,1987 PPS,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24/Jun/25 12:00 AM,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-06-26 16:00:07.274,10056_*:*_2_*:*_757_*|*_10059_*:*_1_*:*_1268883661,,"26/Jun/25 5:00 PM;712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] Hi Matt, we’re adding feedback here, but let us know if we need to open subtasks. 

Member 357224. We agree the service picked up by the service module and the McCloud module and cannot balance to the Altair calc. 

Member 357247. This is a data error on Altair with a period of missing service.

Member 78533. Service in code is pulling from earliest transfer date held to DOL, less service break. So 21/06/1984 to 22/05/2019 = 34/336, less service break from 15/11/1993 to 02/01/1994 = 49 days, so total 34/336-0/049 = 34/287. This is not correct as the service should omit any gaps. So it should pull from 21/06/1984 to 08/09/1985, and then 22/10/1990 to 22/05/2019, and then add 0/121 from the transfer, and deduct the 0/049 for the service break. 

Member 357349. We agree the service reached by the McCloud module and Altair and it does look like the service module is giving an additional day. It should not give an additional day for the leap year for any year other than the final year where applicable. 

*Member 355660. We will confirm on this one tomorrow but this is to do with the leap reckonable service. *

Thanks, ","27/Jun/25 11:06 AM;712020:e8f662cc-24ff-4dd8-9bde-c471f22fbabc;Hi [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a], further to April’s message below I have had another look at the final case. 

Member 355660. Altair service appears to be adding a day to reflect the 29th February as the member retired in a leap year. However, we agree with the McCloud and service module results as the 29th February should be included in the final complete year. 

Thank you ",,,,,,,,,,,,,,,,,,,,,,,10479,PHX5-26,Police West Yorkshire - Client Coding,Done,11/Jul/25 10:15 AM
Create CARE test cases in global module,PHX5-143,13765,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,24/Jun/25 9:40 AM,28/Jul/25 8:19 AM,,11/Jul/25 10:14 AM,Batch 1,,,,,,,,,,,,0,Batch1,,,,,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1eb74fac,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fjr:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_170980937_*|*_10056_*:*_1_*:*_0,,30/Jun/25 11:38 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;The McCloud test cases need to be changed so that data is passed in to ExistingMemberCare,,,,,,,,,,,,,,,,,,,,,,,,13807,PHX5-197,CARE Module,Done,11/Jul/25 10:14 AM
Transfer In Percentage Adjustment,PHX5-174,13736,Story,READINESS REVIEW,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,23/Jun/25 9:20 AM,29/Sep/25 3:13 PM,,,,,,,,,,,,,,,0,TEST_CASES,TransferIn,,,Some TVin’s may have percentage adjustment which is factored into the reckonable service.,,Andrew Wilson,Annabelle Stephenson,Barrie Moroney,Matt Lilwall,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,PHX5-156,,,,,,,,,,,PHX5-392,,,,,,,,,08/Sep/25 4:40 PM;18934601-32fa-4c76-9b74-159dc94fd206;POLICE_EW_1987_Police_England__Wales_-_Transfer_In_guidance_-_10_December_2020.pdf;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10401,08/Sep/25 4:40 PM;18934601-32fa-4c76-9b74-159dc94fd206;POLICE_EW_2006_Police_England__Wales_-_Transfer_In_guidance_-_10_December_2020.pdf;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10400,08/Sep/25 3:56 PM;18934601-32fa-4c76-9b74-159dc94fd206;POLICE_EW_2015_Police_England__Wales_-_Transfer_In_guidance_-_10_December_2020.pdf;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10398,08/Sep/25 3:56 PM;18934601-32fa-4c76-9b74-159dc94fd206;Police Pension Scheme Transfer In Club Specification.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10397,08/Sep/25 3:56 PM;18934601-32fa-4c76-9b74-159dc94fd206;Police Pension Scheme Transfer In Non Club Specification.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10399,19/Aug/25 3:35 PM;862ca789-6c5f-4d0a-b054-60929f0a27a7;image-20250819-143544.png;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10334,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@32d4d51c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x00001r,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-08-01 11:18:01.526,,,01/Aug/25 12:18 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;ensure we have test cases - should be covered already,"19/Aug/25 3:35 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;I suspect this is in relation to CARE revaluation for the different types of TV-in. See CARE Revaluation section of CARE module:

!image-20250819-143544.png|width=1276,height=309,alt=""image-20250819-143544.png""!



","19/Aug/25 4:07 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Additional ticket needed?  Two things happening here: 

# CARE revaluation for different TVin types, need the reval data
## Need to create additional ticket for this one - shouldnt need test cases (?)
# Percentage adj to apply to reckonable service from a TV",08/Sep/25 2:46 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388]  can you flesh this out with the requirements please,"08/Sep/25 4:40 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;The GAD guidance on TVins is really helpful and includes examples with figures that we can use for basic testing - i’ve attached the 3 PDFs for the 3 police schemes, as well as the 2 specs for club and non-club transfers.

There are a number of different methods for the different schemes, and Club vs Non-Club transfer types.

We’ll need: 

* the relevant factor tables (these are within the consolidated factors file we’ve got from admin)
* transfer value amount
* date of transfer (I think)
* pensionable pay - 1987 and 2006 schemes only (as at date of transfer I think?  The 2006 guidance suggests we’d want the same annual rate as would be calculated for death calcs)
* member’s age/DoB (1987 only, different calcs for under/over 55)
* total service excluding transfer (reckonable or qualifying? TBD)
** wont need service history over tranches, just a single decimal figure, as different calc to use depending on length of service (1987 only)

We will need to calculate the cost of purchasing 1 year of added service in the scheme at the time of transfer, using the relevant factors and the member’s PP.  

We then divide the transfer value by this figure, to obtain the service credit as a decimal (to then be converted to years and days, covered under ticket 392 as we need further guidance on this).","08/Sep/25 4:51 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;Although test cases from admin will likely be necessary to sign off, I think there are enough examples in the gov guidance that we can start coding.

Something to note: 2015 non-club transfers are the only ones in the spec that refer to calculating a pension credit rather than a service credit.  The calc method is broadly the same, as we divide the TV amount by the cost of purchasing £1 in the scheme (rather than 1yr).",,,,,,,,,,,,,,,,,,,13836,PHX5-205,Aurora Items,To Do,23/Jun/25 9:20 AM
Transfer Ins stored on CARE Record,PHX5-173,13735,Story,READINESS REVIEW,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Steven Wright,712020:6cc63f41-a8a2-4f07-b6ae-bfedd95b8e0e,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,23/Jun/25 9:18 AM,06/Oct/25 3:06 PM,,,Batch 1,,,,,,,,,,,,0,Aurora,CARE,,,"Retained pension - Held on Transfer in data view and also as a separate CARE tranche in CARE data view. Calc uses the data held in CARE data view.



There are two types of transfer in held on the system:

# Transfer in held as a separate CARE record
# As an additional credit on the main CARE record

The first of these will be held under a different type in aurora. So will effectively have all the CARE columns available and be able to be revalued at a different revaluation rate to the main CARE benefit.

The second of these will have been added as additional credit because they have the same revaluation rate as the main benefit. The problem comes in with age addition, as in Altair this can be stored in the same column, and in some cases the two are added together, and there is no way to tell them apart.

Because it will be a lot of work to split these values out, some cases will have both historic age addition and pension credit as one value.

Going forward,  for new calculations, we should get the ability to have both of these separated out. So we should have any additional credit in a new additional pension column and age addition in its own column.

Potential issues:

# What if someone has an additional credit added after 60, and we cannot tell what the initial additional credit was, and we are asked to do a reform calculation?       We think this is not possible? [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  Were you able to confirm if we cannot TVin after 60? If so, then we may just need a warning to flag this case - a flag that would only ever be hit if the data is bad.",,Andrew Wilson,April Woods,Barrie Moroney,Chris Marshall,Matt Lilwall,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-484,PHX5-487,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@159afa15,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979r,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-08-01 07:07:08.261,,,"01/Aug/25 8:07 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;The code currently sets up just one publicSectorCalculator with a single increase rate. We will need to introduce the concept of a Dictionary<string, publicSectorCalculator> where

string = the type of the CARE tranche (should tie up with the new type column on the care table

publicSectorCalculator - one for each type - so that revaluation can be different.","01/Aug/25 10:26 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Agree with this.

Regarding the potential issue:

police and fire members who are age 60 and above are they still able to transfer membership in?

Reply from admin

If they are in 2015 scheme I would say yes (though have the 12 month period from starting unless scheme manager allows them) due to normal retirement age being linked to state pension age. Only proviso would be if they are within 12 months of SPA. The other schemes are closed so can't accept transfers now (unless another court case will allow it as a contingent decision) 

I think we will need the warning","04/Aug/25 2:45 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] 

Can we define the difference sin the calculation for the different benefit types. i.e. different reval rate/ accrual etc",02/Sep/25 11:32 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  Can you confirm if we have a list of which reval rates apply to which CARE types.,"10/Sep/25 11:15 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Message to admin

Hi Isobel you dont happen to have a copy of the CARE revaluation rates for transfers into the police scheme do you for the different CARE tranches? For example if it is LGPS transferred in the revaluation rate would have the 1.25 addition","10/Sep/25 11:20 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Admin reply

Hi Chris not to hand but leave it with me and ill speak with April and see where these are ","22/Sep/25 4:35 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd] , as discussed, please can you share the information you have sent to the data migration team r.e. CARE types and revaluation rates.

Thanks","23/Sep/25 10:11 AM;712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] Hi Matt, this is the table I’ve put together for the data team, showing the reval rate depending on the type of transfer. They have not yet reviewed this but you’ll see from the comments that the suggestion is that a couple of the types  are removed. The reval rates are updated each year at the same time as the main Pension Increase factor tables (usually around mid February when HMT release that years cumulative PI factors) and are then available not only for the bulk PI updates, but any calculation that needs to include PI. Let me know if you need anything else, thanks, April

[CARE types and reval rates.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EeS4CtGrTSpMlVKReYdmLa0BBpXIu8tsv-J-2myNwJdnZQ?e=G6yudY]","23/Sep/25 10:47 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd] thanks for this. Are there revaluation tables for each of the revaluation?

* CPI + average weekly earnings
* CPI
* CPI + 1%
* CPI + 1.25%
* CPI +1.5%
* CPI + 1.6%

I have looked at the consolidated factors spreadsheet ([Police_EW_Consolidated_Factors_2025-01.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EcLUg2l-d8tAjJ5I_jxm2ZUBl11iIQvNiTdvfEw93Q9Ymg?e=MACuXC]) and they don’t appear to be in there. Thanks, Matt","23/Sep/25 5:21 PM;712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] Hi Matt, those are the just the latest GAD factors linked above, so won’t include PI or CARE reval. The PI and associated CARE tables are updated by Heywood each year and then input into the system is my understanding. I’ve linked the guidance on PI and reval that is used each year to do the updates which will hopefully explain this better than me. There is a section on the different club rates mentioned. Let me know if you need anything else, 

Thanks, April

[""\\ad.xafinity.com\London\Data\Admin Services Group\Management Controls (Procedures)\_ Phoenix Phase 5\Calculations\Pension Increase Table Validation_2025.docx""|http://ad.xafinity.com]","29/Sep/25 11:40 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] , do you have access to the tables April is referring to? The ones Heywood update each year with PI and CARE reval?",30/Sep/25 8:49 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] yes I have access to these tables,"30/Sep/25 11:26 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] great, thanks. Please can you upload these tables to SharePoint and link them here. Thanks",,,,,,,,,,,,13807,PHX5-197,CARE Module,To Do,23/Jun/25 9:18 AM
Service Module PPS - Capture of Service Breaks from CARE Record ,PHX5-172,13725,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Annabelle Stephenson,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,20/Jun/25 4:52 PM,28/Nov/25 5:21 PM,,30/Sep/25 3:12 PM,Batch 1,Client 150 Police A to D Version 1,Client 150 Police A to R Version 5,Client 164 Fire A to D Version 1,Client 164 Fire A to R Version 1,,,,,,,,0,CARE,Service,,,"For Active calcs, need service breaks from care record to use in the deferred record

affects code that pulls in the service break information",,Andrew Wilson,Annabelle Stephenson,Barrie Moroney,Chris Marshall,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,PHX5-429,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@78acc66c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x000008x020979f9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 14,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-07-25 13:44:17.062,10060_*:*_1_*:*_490654871_*|*_10281_*:*_1_*:*_2478_*|*_10251_*:*_2_*:*_1057734_*|*_10250_*:*_2_*:*_73699487_*|*_10252_*:*_2_*:*_1559693607_*|*_10354_*:*_2_*:*_1992163799_*|*_10056_*:*_1_*:*_4689321875,,"20/Jun/25 4:57 PM;712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97;Issue raised by Iain in email dated 19/6/25;

[FW Potential issue for data needed in calculations.msg|https://xpsplc.sharepoint.com/:u:/s/ProjectPhoenix/EcAeX4Gpb9tOobAk5bA5zwcBKLDj3fqcAvGEE7n6yq1Klw?e=VPJHnK]",25/Jul/25 2:44 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]  to clarify if we need to consider post 2022 service (we assume not),19/Aug/25 3:45 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] to check with Iain RE necessity for this. A brief test case/example would be helpful,"08/Sep/25 2:34 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Admin reply. This is a requirement


Yeah, so it's for the 1987 scheme members with greater than 20 years total service at DOL. Accrual calc A, which is part of the weighted accrual calculation, is total qualifying service to DOL so that's where we need those breaks ","08/Sep/25 2:34 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Code change would be at the client level, to combine service breaks when converting to a MemberData object","22/Sep/25 2:36 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Will there be a case where we need to calculate:

* Pre 2022 including service breaks
* Post 2022 including service breaks

and also calculate

* Pre 2022 including service breaks
* Post 2022 without service breaks",29/Sep/25 6:43 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I’ve added code to {{ActiveSalaryLinkedMemberData}} which is adding any active member service breaks to the salary linked data.  I need to follow this data through to the accrual calcs to make sure its correctly used/stored.  I’ve added an A-R test so that I could debug this - need to remember to delete or update once i’m finished,"29/Sep/25 6:46 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] no, I don’t believe so.  Hard to explain why, other than saying I have thought through all the scenarios I can think of, and instances in our calcs that use service figures, and cannot come up with a reason we would need to look at the post-22 (or active) service without the breaks.","30/Sep/25 12:54 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;I’m happy with a sense check on fabricated member data (as none of our existing A-R tests have post-22 breaks) but we could do with an actual test member with results to check against.  As this change is at client level, do we require further testing?  [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] ","30/Sep/25 1:11 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:81df5c31-ac79-43f1-a664-c91d8cf8a388]  Yes - I think it would be good to have a test case for this. Even if it is not a real case, but just something that would produce different results if we had not made this change. It can be at client level, and we don’t even need to test every end result, just a result that would be impacted by this change.","30/Sep/25 3:09 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] I’ve added a test “Service breaks post22” which just tests against AccrualCalcA, as this figure represents the member’s full duration of service beyond their CARE date.  The test is a replica of A-R test 4, with one post-22 break added amounting to 62 days.

Without the new code, the AccrualCalcA value would be the same as in the original test 4 (29.884931).  However the value we are currently getting (29.715068) is 62 days less than the original, and therefore correct",,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,30/Sep/25 3:12 PM
McCloudTest17,PHX5-147,13685,Bug,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,18/Jun/25 1:42 PM,12/Sep/25 9:08 AM,,24/Jun/25 9:32 AM,Batch 1,,,,,,,,,,,,0,McCloud,Service,,,"[McCloud17_35657201.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EeFmUYScnfpFt78ApAp43PgBt0G7Vb9g3GoIcZoTO5Hhkg?e=AQUlLA]

A service gap is being incorrectly calculated as a service period and included in service calculation.",,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3e84a8cc,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxa:v,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-06-19 08:58:05.296,10060_*:*_1_*:*_72928062_*|*_10061_*:*_1_*:*_3078_*|*_10145_*:*_1_*:*_0,,19/Jun/25 9:58 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]  Same as other case - change the input for ServicePeriodFillType to 2,,,,,,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,24/Jun/25 9:32 AM
Service Module - McCloudTest15,PHX5-146,13681,Bug,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,18/Jun/25 1:01 PM,12/Sep/25 9:08 AM,,24/Jun/25 9:32 AM,Batch 1,,,,,,,,,,,,0,McCloud,Service,,,"[McCloud15_35734901.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EVn7R-ADYrBMsh-5SrgH4N0BEXOJ49YKD5x9GwPnhfjbWQ?e=tISeE8]

The duration of the final period of service has one more day than expected.",,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@799a48e2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxa:r,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-06-18 15:11:35.936,10060_*:*_1_*:*_76402962_*|*_10061_*:*_1_*:*_19491082_*|*_10145_*:*_1_*:*_0,,18/Jun/25 4:11 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] Do we have confirmation on the exact logic of when leap years are included or not?,"19/Jun/25 12:48 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] , as discussed, the details are contained within this document. 

[https://xpsplc.sharepoint.com/sites/ProjectPhoenix/Shared%20Documents/Phase%205/Implementation%20Services%20Team/Calculations/Calc%20Specs/leap%20year.doc?web=1|https://xpsplc.sharepoint.com/sites/ProjectPhoenix/Shared%20Documents/Phase%205/Implementation%20Services%20Team/Calculations/Calc%20Specs/leap%20year.doc?web=1|smart-link] 

In summary, leap years are to be ignored except if one falls in the last year of service.
","19/Jun/25 3:52 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]  As discussed , have coded this one based on our understanding, but I disagree the mccloud case, as it is deducting the feb 29th in the last year of service.



I have updated the code to deal with cases where the feb 29th may be in the last year but not the last period of service. We should probably create a test case to cover that.",,,,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,24/Jun/25 9:32 AM
Service Module - McCloudTest14,PHX5-145,13680,Bug,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,18/Jun/25 12:02 PM,12/Sep/25 9:08 AM,,19/Jun/25 12:44 PM,Batch 1,,,,,,,,,,,,0,McCloud,Service,,,"[McCloud14_35733001.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/EW7LCBT5co5EpsqjZIv8N_8ByMdGTLx1-tbRDFXwrp7tUA?e=dU1Sig]

Code is creating a service period of 1 day (31/03/2006) when this should be a gap in service

",,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@68c774dd,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxa:i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-06-19 08:55:29.456,10060_*:*_1_*:*_78725811_*|*_10061_*:*_1_*:*_62851_*|*_10145_*:*_1_*:*_0,,19/Jun/25 9:55 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]  The input for ServicePeriodFillType is set to GapsToBeFilled for this test case. I created the fill type LastPeriodToBeFilled = 2 for public sector.  Switching to this input should fix this test case.,"19/Jun/25 12:44 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Thanks [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] , I’ve changed this and the test case is now agreeing. I’ve updated all McCloud test cases to  LastPeriodToBeFilled = 2 and it hasn’t knocked anything out, so I’ll close the issue.",,,,,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,19/Jun/25 12:44 PM
Service Module - McCloudTest5,PHX5-144,13679,Bug,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,18/Jun/25 11:58 AM,12/Sep/25 9:08 AM,,24/Jun/25 9:32 AM,Batch 1,,,,,,,,,,,,0,McCloud,Service,,,"[McCloud5_35724701.xlsx|https://xpsplc.sharepoint.com/:x:/s/ProjectPhoenix/ESi4OrIlPRtKs6F9WZG_dn8B7T456Yjk29nVidjnsluAnQ?e=yrPTVN]

Code is creating a service period after member’s DB service end date",,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3937e9bf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxa:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-06-18 15:01:58.94,10060_*:*_1_*:*_92029_*|*_10061_*:*_1_*:*_14433403_*|*_10145_*:*_1_*:*_0,,18/Jun/25 4:01 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] I have fixed this issue via a change in service static class. Do you want to take a look at the test case and confirm you are happy it is fixed?   The test cases is still failing - but I think this is the one you said that the mccloud one was incorrect.,"19/Jun/25 1:09 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] , I’ve re-run this case and looked at breakdown, saved here:

[https://xpsplc.sharepoint.com/sites/ProjectPhoenix/Shared%20Documents/Phase%205/Implementation%20Services%20Team/Calculations/Module%20Testing/Service/McCloud5_35724701_v2.xlsx?web=1|https://xpsplc.sharepoint.com/sites/ProjectPhoenix/Shared%20Documents/Phase%205/Implementation%20Services%20Team/Calculations/Module%20Testing/Service/McCloud5_35724701_v2.xlsx?web=1|smart-link] 

We’re going to need to check this one with admin, as they seem to have service break within a service gap. This may be a data issue.",,,,,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,24/Jun/25 9:32 AM
PPS A-R Spec updates,PHX5-171,13553,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,16/Jun/25 9:40 AM,29/Sep/25 2:54 PM,,29/Sep/25 2:54 PM,Batch 1,,,,,,,,,,,,0,PCLS,,,,,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@619e998a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004y:k,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_26481515_*|*_10061_*:*_1_*:*_835703837_*|*_10250_*:*_1_*:*_0,,"16/Jun/25 5:08 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Reword spec to show lump sum calculations stopping at 

* initial scheme max 
* PCLS

Additional module required to calculate taxable lump sum etc",,,,,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,29/Sep/25 2:54 PM
Add McCloud test cases to global module,PHX5-178,13552,Subtask,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,16/Jun/25 9:39 AM,27/Aug/25 11:23 AM,,25/Jun/25 9:33 AM,,,,,,,,,,,,,0,,,,,,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1231b7ae,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ebb:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_777221332_*|*_10061_*:*_1_*:*_2222_*|*_10145_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,13550,PHX5-170,Global Service Module testing,Done,25/Jun/25 9:33 AM
Global Service Module testing,PHX5-170,13550,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,16/Jun/25 9:37 AM,12/Sep/25 9:08 AM,,25/Jun/25 9:32 AM,Batch 1,,,,,,,,,,,,0,Service,,,,,,Chris Marshall,Matt Lilwall,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,20/Jun/25 3:10 PM;5e266667-8b87-4eb6-9386-71980feac557;Service.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10204,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@16daf65d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzx9:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-06-17 11:30:58.785,10060_*:*_1_*:*_26673864_*|*_10061_*:*_1_*:*_664256830_*|*_10145_*:*_1_*:*_0,,16/Jun/25 11:17 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;The test matrix is drafted and updated with the McCloud test cases,"16/Jun/25 4:28 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] , please could you check with Neil how the different service break types are being migrated.","16/Jun/25 5:09 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] , can we go through each of the test cases to identify which service break types they have.","17/Jun/25 12:30 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;The service breaks are migrated through a decode table. There is a flag to show if this is pensionable or not. The only one that is set to be pensionable is ‘Conts Paid Back’.

However ‘Maternity Leave’ is classed as pensionable. The pensionable period is 39 weeks. Any maternity leave after 39 weeks is a non-pensionable service break.

Admin have confirmed that any maternity leave breaks up to 39 weeks, are held as  ‘Conts Paid Back’.",17/Jun/25 1:57 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;From the test members the only service breaks stated are ‘Leave of Absence’ & ‘Paternity’,20/Jun/25 3:02 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Comparison from calculate and previous results completed. Attached is sheet with results. Issues raised and discussed,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,25/Jun/25 9:32 AM
PCLS - PPS Pension Option Strategies,PHX5-169,13549,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,16/Jun/25 9:09 AM,30/Jul/25 9:33 AM,,30/Jul/25 9:33 AM,Batch 1,,,,,,,,,,,,0,PCLS,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4c3b8369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004y:u9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 5,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_864049236_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_442193604_*|*_10252_*:*_1_*:*_1451601058_*|*_10056_*:*_1_*:*_968946071,,,,,,,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,30/Jul/25 9:33 AM
PCLS - Low Level Functions,PHX5-168,13548,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,16/Jun/25 9:08 AM,30/Jul/25 9:33 AM,,30/Jul/25 9:33 AM,Batch 1,,,,,,,,,,,,0,PCLS,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@63675d6f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004y:u,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 4,PHX5 Sprint 5,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_864115356_*|*_10250_*:*_1_*:*_0_*|*_10252_*:*_1_*:*_1279298553_*|*_10056_*:*_1_*:*_968944698,,,,,,,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,30/Jul/25 9:33 AM
Outputs,PHX5-166,13546,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Jun/25 4:06 PM,11/Jul/25 10:29 AM,,11/Jul/25 10:29 AM,,,,,,,,,,,,,0,Aurora,,,,Need to define all the outputs required by the calculation.,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7164ef6e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i000dv:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_1098208274_*|*_10056_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,13836,PHX5-205,Aurora Items,Done,11/Jul/25 10:29 AM
Target Lump Sum,PHX5-167,13545,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Jun/25 3:57 PM,02/Sep/25 11:18 AM,,11/Jul/25 9:55 AM,Batch 1,,,,,,,,,,,,0,PCLS,,,,"Where target lump sum is between PCLS and max lump sum, calculation needs to work out what the lump sum before and after tax needs to be.",,Andrew Wilson,Chris Marshall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-423,,,18/Jun/25 11:47 AM;5e266667-8b87-4eb6-9386-71980feac557;LS calc.docx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10197,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@f0ff630,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004y:n,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-06-16 13:40:05.523,10060_*:*_2_*:*_237041921_*|*_10061_*:*_2_*:*_180016303_*|*_10251_*:*_1_*:*_0_*|*_10074_*:*_1_*:*_255186_*|*_10145_*:*_1_*:*_681473906,,"16/Jun/25 2:40 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Max lump sum worked out below

*Converted Pension = Standard pension * 0.25*

*Max lump sum = Converted Pension * Comm fac / 100*

Next calculate 25% of max lump sum

*HMRC25 = Converted Pension * 20 + max lump sum * 0.25*

Deduct 25% amount to calculate taxable amount

*Taxable amount = Max lump sum - HMRC25*

Taxable amount is liable for 40% tax

*Actual tax = Taxable amount * 0.40*

Target lump sum with tax deduction

*Target Lump sum = max lump sum - taxable amount*

Total lump sum = Target Lum sum  + CARE lump sum","18/Jun/25 11:17 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;The target lump sum if falls in between PCLS & max, the tax will be calculated in the same way it would be if the Max lump sum was elected for.","18/Jun/25 11:47 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;CARE LS is calculated before FS LS. These are then added together later in the calculation to give Taxable/Tax free LS.

Attached document showing how each part of the taxable/tax free & CARE lump sums are derived",,,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,11/Jul/25 9:55 AM
PensionOptionCalculatorFactory - PPS,PHX5-176,13533,Subtask,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Jun/25 7:34 AM,30/Jul/25 9:38 AM,,30/Jul/25 9:38 AM,,,,,,,,,,,,,0,,,,,"Then need to ensure interim values are created on each branch, and that the logic is correct for each branch

Add test cases.





Need to know:



If Mccloud - how? where in data

How many times do you need to run it? Legacy/reform? Need to know if the member is pre 2022 or post 2022

Illhealth - run time input

Injury? is that different?

PPS - how we know PPS?",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@57718029,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00e7z:1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 5,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_1128969548_*|*_10056_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,13524,PHX5-165,PCLS Top Level,Done,30/Jul/25 9:38 AM
CappedLumpSum,PHX5-191,13527,Subtask,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Jun/25 7:17 AM,30/Jul/25 9:37 AM,,30/Jul/25 9:37 AM,,,,,,,,,,,,,0,,,,,"add test case for (preCommutationPension * 2.25m).Round(Rounding);

is this the correct name for this function

*MaxLumpSum*",,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3f991c5e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00e81:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 4,PHX5 Sprint 5,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-07-18 15:48:24.405,10060_*:*_1_*:*_1129973287_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2595_*|*_10252_*:*_1_*:*_3041_*|*_10056_*:*_1_*:*_1928445709,,"18/Jul/25 4:48 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Added CappedLumpSum_Test1, which passes",,,,,,,,,,,,,,,,,,,,,,,,13548,PHX5-168,PCLS - Low Level Functions,Done,30/Jul/25 9:37 AM
FullLumpSum,PHX5-190,13526,Subtask,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Jun/25 7:17 AM,30/Jul/25 9:37 AM,,30/Jul/25 9:37 AM,,,,,,,,,,,,,0,,,,,"add test case for (preCommutationPension * 0.25m * commutationFactor).Round(Rounding);

Rename *PCLS*?",,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@448ca4d4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00e83:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 4,PHX5 Sprint 5,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-07-18 15:44:40.257,10060_*:*_1_*:*_1129979204_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_2498_*|*_10252_*:*_1_*:*_3429_*|*_10056_*:*_1_*:*_1928053793,,"18/Jul/25 4:44 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Added FullLumpSum_Test1, which passes",,,,,,,,,,,,,,,,,,,,,,,,13548,PHX5-168,PCLS - Low Level Functions,Done,30/Jul/25 9:37 AM
PCLS,PHX5-189,13525,Subtask,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Jun/25 7:17 AM,30/Jul/25 9:37 AM,,30/Jul/25 9:37 AM,,,,,,,,,,,,,0,,,,,"Add tests for the code:

(preCommutationPension * 20 * commutationFactor / (20 + (3 * commutationFactor))).Round(Rounding);",,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@757e9a57,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00e87:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 4,PHX5 Sprint 5,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-07-18 14:34:11.41,10060_*:*_1_*:*_1129990240_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_6306_*|*_10252_*:*_1_*:*_82884_*|*_10056_*:*_1_*:*_1923141718,,"18/Jul/25 3:34 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Added PCLS_Test1, which passes.",,,,,,,,,,,,,,,,,,,,,,,,13548,PHX5-168,PCLS - Low Level Functions,Done,30/Jul/25 9:37 AM
PCLS Top Level,PHX5-165,13524,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,13/Jun/25 7:16 AM,30/Jul/25 9:36 AM,,30/Jul/25 9:36 AM,Batch 1,,,,,,,,,,,,0,PCLS,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@61d481e3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004y:uf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 5,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_1130009574_*|*_10250_*:*_1_*:*_0_*|*_10252_*:*_1_*:*_1451624710_*|*_10056_*:*_1_*:*_968949355,,,,,,,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,30/Jul/25 9:36 AM
LR Factors,PHX5-164,13481,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,09/Jun/25 8:59 AM,29/Sep/25 2:56 PM,,29/Sep/25 2:56 PM,,,,,,,,,,,,,0,Factors,,,,LRF only applies to Deferred from Retired,,Andrew Wilson,Annabelle Stephenson,Chris Marshall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:81df5c31-ac79-43f1-a664-c91d8cf8a388,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5cdc7adf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i002xj:x,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-08-19 15:11:34.925,10060_*:*_1_*:*_1469449848_*|*_10281_*:*_1_*:*_2412_*|*_10252_*:*_1_*:*_12588_*|*_10354_*:*_2_*:*_2822_*|*_10056_*:*_1_*:*_6578380075,,"19/Aug/25 4:11 PM;712020:81df5c31-ac79-43f1-a664-c91d8cf8a388;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  to determine if this is a duplicate of 291, or required for the other schemes",10/Sep/25 12:26 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] this is a duplicate of [[PHX5-291] LRF for CARE deferred members - Jira|https://xps-jira.atlassian.net/browse/PHX5-291] so can be deleted,,,,,,,,,,,,,,,,,,,,,,,13810,PHX5-200,ER/LR Factors Module,Done,29/Sep/25 2:56 PM
Set up Power Automate to be able to export inputs and outputs into another format,PHX5-188,13480,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,09/Jun/25 7:36 AM,26/Jun/25 9:10 AM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@65916415,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00dz3:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13478,PHX5-163,Create process to be able to produce reports for global modules,To Do,09/Jun/25 7:36 AM
Work out required comparison results by looking at Altair,PHX5-187,13479,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,09/Jun/25 7:36 AM,26/Jun/25 9:10 AM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6116df5c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00dyv:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13478,PHX5-163,Create process to be able to produce reports for global modules,To Do,09/Jun/25 7:36 AM
Create process to be able to produce reports for global modules,PHX5-163,13478,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Low,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,09/Jun/25 7:34 AM,11/Jul/25 10:12 AM,,11/Jul/25 10:12 AM,,,,,,,,,,,,,0,Aurora,,,,We need a repeatable process that can export inputs and outputs from global test cases into a report that can be signed off by admin.,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@e40f092,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i000dy:zzr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_1474558453_*|*_10056_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,13836,PHX5-205,Aurora Items,Done,11/Jul/25 10:12 AM
CARE Transfer In,PHX5-162,13477,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,09/Jun/25 7:23 AM,28/Jul/25 8:18 AM,,11/Jul/25 10:07 AM,Batch 1,,,,,,,,,,,,0,Service,,,,"We need code that can transfer in pension into a specific CARE year and then apply all subsequent revaluations.

The problem will be that the transfer in may have a different increase rate. We can calculate this separately, but how would this data be stored after writing back to the record? How would we know how much of the pension is transferred in and how much is standard? Is it possible to have multiple transfers in - all with different revaluation rates?



Coding wise - if there are different rates, it would be easier to call CARE separately for the Transfer in, and then just have code that can add to CARE histories together. However - this would not create data that could be easily written back and revalued again in subsequent years.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@b9a56e9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i000dy:i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_1475223290_*|*_10056_*:*_1_*:*_0,,09/Jun/25 7:28 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] / [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]  Re: CARE Transfer Ins. I Have set up this ticket to deal with the issues coming out of last weeks meeting. I have put a few questions in the description of this ticket that we will need to answer - and there are likely more issues I have not thought of.,,,,,,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,11/Jul/25 10:07 AM
A>R calculation logic,PHX5-124,13131,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,22/May/25 10:30 AM,11/Jul/25 10:14 AM,,11/Jul/25 10:14 AM,,,,,,,,,,,,,0,Phase5,,,,A>R calculation logic diagram,,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,PHX5-123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@716c39e1,,,,,Police,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Documentation,,,,,0|i00c4n:,,,,,,,,,,,,,,,,2015 CARE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,43bf5bd9-1854-4b89-9168-e535aede7a60,Implementations,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_4319019807,,,,,,,,,,,,,,,,,,,,,,,,,,10731,PHX5-42,Data - Police,Done,11/Jul/25 10:14 AM
Divorce calculation logic,PHX5-123,13130,Task,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,22/May/25 10:25 AM,27/Aug/25 11:23 AM,,22/May/25 10:26 AM,,,,,,,,,,,,,0,Phase5,,,,Divorce calculation logic diagram,,Chris Marshall,,,,,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,PHX5-124,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6f9e107e,,,,,Police,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Documentation,,,,,0|i00c4f:,,,,,,,,,,,,,,,,2015 CARE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,43bf5bd9-1854-4b89-9168-e535aede7a60,Implementations,,,,,,,,,,,,,,,,,,,,,10056_*:*_1_*:*_24108_*|*_10058_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,10731,PHX5-42,Data - Police,Done,22/May/25 10:26 AM
Calculation of accrued pension,PHX5-161,12394,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,28/Apr/25 9:19 AM,28/Jul/25 8:20 AM,,16/Jul/25 4:03 PM,Batch 1,,,,,,,,,,,,0,Accrual,CARE,,,CalculateDeferredElementValues - logic to create list of deferred elements,,Andrew Wilson,Chris Marshall,Matt Lilwall,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@17d0b2f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004v:7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 2,PHX5 Sprint 3,PHX5 Sprint 4,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-07-10 13:25:40.35,10060_*:*_1_*:*_4415414633_*|*_10061_*:*_1_*:*_681658828_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_696875273,,"06/Jun/25 8:45 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] The double accrual method takes totalServiceDuration and totalServiceBeyondTransition as inputs:

{noformat}public decimal GetAccruedPension(decimal salary, decimal totalServiceDuration, decimal totalServiceBeyondTransition)
{
	
    if (totalServiceBeyondTransition >= 30 || totalServiceDuration >= 30)
    {
        Log.Warning(""Service has been capped"");
    }
	
    totalServiceBeyondTransition = Min(totalServiceBeyondTransition, 30);
    totalServiceDuration = Min(totalServiceDuration, 30);
	
    var accrualEnhancement = (totalServiceBeyondTransition * 2) - Min(totalServiceBeyondTransition, 20);
	
    var serviceForAccrual = totalServiceDuration / totalServiceBeyondTransition * accrualEnhancement;
	
    return salary * serviceForAccrual / 60; ;
	
}{noformat}

Can we find out what the difference between totalServiceDuration and totalServiceBeyondTransition is and how we calculate them?

As part of this it would be useful to think about how any why they might differ so we can create test cases.

FYI [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] ","04/Jul/25 10:45 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] I have coded this now in line with the spec, let me know if any issues","10/Jul/25 2:25 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Accrual rates for each category of police and fire schemes [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] 

+*Police*+

PPS 1987

60th. Maximum 30 years with double accrual after 20.

 

NPPS 2006

Pension - 70th. Maximum 35 years.

Lump Sum - 4/70th

 

2015

Accrual of 55.3 of pensionable pay

 

 

+*Fire*+

FPS 1992

60th. Maximum 30 years with double accrual after 20.

 

NFPS 2006

60th. Maximum 40 years

 

Modified Retained

45th. Hybrid scheme of the NFPS 2006 which mirrors some of the 1992 scheme. Maximum 30 years.

 

2015

Accrual of 59.7 of pensionable pay","16/Jul/25 12:23 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;We are nearly ready to send the results of the accrual module to admin for testing. All of the module results match the McCloud ones. Chris has the following test cases to check why the following don’t match Altair:

35554401  Accrual Test 2
35609601  Accrual Test 6
35535801  Accrual Test 9
35496601  Accrual Test 13
35227401  Accrual Test 15","16/Jul/25 3:52 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Accrual Test 2 - Module result matches McCloud calc. Double accrual
Reckonable Service not being capped to 30.

Accrual Test 4 - Module result matches McCloud calc.
Altair vs module - reason for difference: Altair is not calculating the double accrual over 20 qualifying years The service being used is 19.7424. McCloud & Calculate are doing this so the service used is 20.1995 to calculate pension

Accrual Test 6 - Module result matches McCloud calc.
Altair vs module - reason for difference TBC
Previous comments: Amended APP used now showing as correct. McCloud result using incorrect APP

Accrual Test 7 - Module result matches McCloud calc.
Altair vs module - reason for difference TBC
Previous comments: Originally run 17/06 Altair gives 28.3917. Further run on 03/07 Altair now showing 28.4520. Has there been amendments to record within this time or the coding? When was 25.2 added to Test 2?

Accrual Test 8 - Module result matches McCloud calc.
Service for accrual calculate is 30.8347 Altair is 30.8739 this difference is days used is 305 to 318-so-13-day difference in tota.l Looks like could be overtime causing the issue 

Accrual Test 9 - Module result matches McCloud calc.
Amended APP used now showing as correct. McCloud result using incorrect APP

Accrual Test 13 - Module result matches McCloud calc.
Altair vs module - reason for difference TBC -
Member DOB 07/12/1977. Altair won't run a pension calc due to age. Don't think this is a genuine reflection to compare. Member is unprotected with CARE start date of 01/04/2015

Accrual test 15 - Module result matches McCloud calc.
Altair vs module - reason for difference TBC
Member DOB 09/05/1974. Altair won't run a pension calc due to age. Don't think this is a genuine reflection to compare. Member is unprotected with CARE start date of 01/04/2015",,,,,,,,,,,,,,,,,,,,13808,PHX5-198,Accrual Module,Done,16/Jul/25 4:03 PM
Application of ER,PHX5-160,12393,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,28/Apr/25 9:18 AM,28/Jul/25 8:21 AM,,15/Jul/25 2:31 PM,Batch 1,,,,,,,,,,,,0,Factors,,,,"CalculateRetirementElementsA2R logic to convert deferred elements into List<ElementValue>

Need to understand logic of how and when Factors are applied.",,Andrew Wilson,Chris Marshall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,06/Jun/25 12:36 PM;5e266667-8b87-4eb6-9386-71980feac557;ERF example.docx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10174,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@322e1801,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004v:09,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 3,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-06-06 09:12:00.157,10060_*:*_1_*:*_5097091919_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_83187326_*|*_10252_*:*_1_*:*_84146621_*|*_10056_*:*_1_*:*_1127078238,,"06/Jun/25 8:55 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] / [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]  Do we have details anywhere on how and when ER/LR factors are applied?

Chris - you mentioned something about CARE and DB being different?","06/Jun/25 10:12 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Added example of calc with ERF. Message sent to April regarding LRF as I am not sure how many members are actually affected by this. If there are multiple then will add an example of this.

Member may have a different NRD as CARE NRD is linked to SPA whereas DB NRD is not","06/Jun/25 10:24 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] Do we have details on what conditions would make ER application different?

i.e. CARE vs DB, NPS vs PPS?

Even if we don’t have the ER factors/test cases to hand, if we know that they would be different then I can set up the structure to allow for different strategies for each scenario",06/Jun/25 12:36 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] Updated the attached doc now to advise of ERF’s. Only deferred members in 2006 scheme can be subject to ERF and active and deferred in 2015 can be. No ERF for 1987 scheme,15/Jul/25 2:28 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855; [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452]I think this can be moved to done now?,,,,,,,,,,,,,,,,,,,,13810,PHX5-200,ER/LR Factors Module,Done,15/Jul/25 2:31 PM
PublicSectorCalculatorFactory - update where we get CARE data,PHX5-159,12391,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,28/Apr/25 9:17 AM,11/Jul/25 10:08 AM,,11/Jul/25 10:08 AM,,,,,,,,,,,,,0,Aurora,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@50bce5f2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i000dy:x,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_5097144412_*|*_10056_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,13836,PHX5-205,Aurora Items,Done,11/Jul/25 10:08 AM
AccruedPensionCalculatorFactory decision logic,PHX5-158,12390,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,28/Apr/25 9:16 AM,27/Aug/25 11:23 AM,,19/Aug/25 9:39 AM,,,,,,,,,,,,,0,Accrual,Aurora,,,needs test cases adding,,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@748945d2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxi:x0hd,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 7,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-08-12 08:53:07.804,10060_*:*_1_*:*_5097220598_*|*_10281_*:*_1_*:*_4671_*|*_10251_*:*_2_*:*_535789566_*|*_10250_*:*_2_*:*_11136_*|*_10253_*:*_1_*:*_66376825_*|*_10252_*:*_2_*:*_1541018117_*|*_10354_*:*_1_*:*_4117_*|*_10056_*:*_1_*:*_2523905682_*|*_10058_*:*_1_*:*_215197,,12/Aug/25 9:53 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Added test cases AccruedPensionCalculatorFactory_Test1 to AccruedPensionCalculatorFactory_Test9. All as expected.,,,,,,,,,,,,,,,,,,,,,,,,13836,PHX5-205,Aurora Items,Done,19/Aug/25 9:39 AM
Average Pensionable Pay,PHX5-157,12389,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,28/Apr/25 9:15 AM,28/Jul/25 8:21 AM,,11/Jul/25 10:09 AM,Batch 1,,,,,,,,,,,,0,FPS,,,,"I have set this up to use IFPPCalculator

We should have a definition which is just get the latest salary for a particular salary type. This will resolve instead need.

However, this also allows us so easily switch in a new definition later.

Still need to understand what the inputs would be (also think which member record we are getting them from)",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@54dc18bb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i000dy:z,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_5097266811_*|*_10056_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,13809,PHX5-199,FPS Module,Done,11/Jul/25 10:09 AM
Service TVin,PHX5-156,12388,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,28/Apr/25 9:15 AM,06/Oct/25 3:06 PM,,01/Jul/25 4:02 PM,Batch 1,,,,,,,,,,,,0,Service,,,,"Need to understand what the inputs are - and where we get them  (also think which member record we are getting them from)

Also need to understand what values this affects.

Is this just an add on after all reckonable service has been calculated? Or does it need to be considered within the main service calculation?

* should just be added on after the service calculation.



Also need to understand if this is unique to public sector, or whether we can consider all TVin service and write something more generic.",,Andrew Wilson,Chris Marshall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,CALC-114,,PHX5-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@299a1036,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzx7:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 1,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-06-18 10:54:38.562,10060_*:*_1_*:*_4235640331_*|*_10061_*:*_1_*:*_861644032_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_86382371,,"06/Jun/25 9:27 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] / [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]  Similar to the overtime. Same questions:

* where does service TV in come from? What format will the data be in
* is this added on to the total at the end of the service calculation - or does it need to be added to particular period?
* you may not know the answer - but from your experience is the public sector way of dealing with this bespoke or a very generic approach?",18/Jun/25 11:54 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;[~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] do you need me to answer the below here?,"18/Jun/25 11:58 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] If you can just clarify here, yes please. I think I know all the answers, but good to get them written down so no ambiguity.","18/Jun/25 2:26 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;* where does service TV in come from? What format will the data be in

*Retained pension - Held on Transfer in data view and also as a separate CARE tranche in CARE data view. Calc uses the data held in CARE data view.* 

*Service* - *TVIN service is held in both Transfer in data view as ‘Back Service Credit’ and also the Service History data view is updated with qualifying and reckonable service. The service is shown in years and days. Some may also have percentage adjustment which is factored in the reckonable service.* 

* is this added on to the total at the end of the service calculation - or does it need to be added to particular period?

*Retained Pension -*  *the output is a separate pension added to scheme pension*

*Service - TVIN service is added after to the actual full scheme reckonable service*

* you may not know the answer - but from your experience is the public sector way of dealing with this bespoke or a very generic approach?

*My opinion is there is a generic way within public sector of dealing with the TVIN service/pension*","23/Jun/25 7:39 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Thanks [~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855] 

When we include added service, what values does it need to be included in?

* Qualifying service?
* Reckonable service?
* anything else?

[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] / [~accountid:712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97] ",23/Jun/25 8:19 AM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;We only need to include the reckonable service,"23/Jun/25 8:53 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Thanks Chris

[~accountid:712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97] If we don’t have one already - we will need a ticket to cover dealing with TVINs stored on the CARE record. We will also need a ticket to deal with the percentage adjustment which Chris mentions below.",,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,01/Jul/25 4:02 PM
Service Overtime,PHX5-155,12387,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,28/Apr/25 9:15 AM,12/Sep/25 9:08 AM,,01/Jul/25 4:02 PM,Batch 1,,,,,,,,,,,,0,Service,,,,"Need to understand what the inputs are - and where we get them  (also think which member record we are getting them from)

Also need to understand what values this affects.

Is this just an add on after all reckonable service has been calculated? Or does it need to be considered within the main service calculation?",,Andrew Wilson,Chris Marshall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@560a9e31,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzx3:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 1,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-06-20 14:49:05.23,10060_*:*_1_*:*_4597711521_*|*_10061_*:*_1_*:*_499582527_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_86384881,,"06/Jun/25 9:25 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;[~accountid:712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855]  [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] More questions on this one. Service overtime:

* where does the information for overtime come from?
* is this added on after all other service has been calculated? or does it need to be considered against a particular section of service - (and so need to be part of the main service calculation)","20/Jun/25 3:49 PM;712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855;Overtime is held on a data view. The data view is APB/Overtime dets. These over time figures are held in an AVC list the start date, end date, total hours and the added years. Each year has separate amounts.

The added years are picked up in the calc by taking each separate years added service then each following year is added to accumulate the final added years as a decimal.

This is then added to the reckonable service to use within the calc.",,,,,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,01/Jul/25 4:02 PM
Public Sector Calculation,PHX5-154,11854,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,22/Apr/25 11:37 AM,27/Aug/25 11:23 AM,,13/Jun/25 2:53 PM,,,,,,,,,,,,,0,Aurora,,,,We need a top level calculation level that will set up various strategies.,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@13c077e6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i002xb:4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_4504545554_*|*_10062_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,13836,PHX5-205,Aurora Items,Done,13/Jun/25 2:53 PM
Document calc / data process flow for Carolyn,PHX5-122,11672,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,15/Apr/25 12:28 PM,15/Apr/25 12:31 PM,,,,,,,,,,,,,,17/Apr/25 12:00 AM,0,,,,,Carolyn requested the current calc / data structure to be documented ,,Dan Reynolds,,,,,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@56007ebf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Documentation,,,,,0|i008iv:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,15/Apr/25 12:31 PM;712020:1e6e1696-9716-406d-bbf5-0d46641d3cda;Sent an exert from the current Phase 5 calc flow as a draft with some comments to Carolyn for review. She will review and come back to me with any queries / comments,,,,,,,,,,,,,,,,,,,,,,,,10079,PHX5-3,Define Calculation Methodology for the Project,To Do,15/Apr/25 12:28 PM
Calculation Spec / Automation Scope,PHX5-121,11637,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,April Woods,712020:97fcb0ba-0fbf-448a-a48b-5c0a85b8acbd,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,10/Apr/25 3:01 PM,09/Jul/25 9:07 AM,,,,,,,,,,,,,,24/Apr/25 12:00 AM,0,,,,,Identifying calculations and processes in scope for Phase 5 automation,,Dan Reynolds,,,,,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@74c3e0b3,,,,,Fire,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Documentation,,,Amber,,0|i008c7:,,,,,,,,,,,,,,,,2006 NPPS,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Apr/25 3:16 PM;712020:1e6e1696-9716-406d-bbf5-0d46641d3cda;We’re currently drafting high-level calc specs for Fire (FPS 1992, NFPS 2006, and FPS 2015) with a view to handing these over to admin to fill in the blanks and the finer details. 

We understand that there is an additional ‘Modified Retained’ membership element to the 2006 scheme and these are treated as special members; benefits being akin to the 1992 with some differences.

Our understanding is that these members are currently held on Altair as data only and all calc types are processed manually and we therefore need to understand and agree the expectation in respect of this membership. ",,,,,,,,,,,,,,,,,,,,,,,,10079,PHX5-3,Define Calculation Methodology for the Project,To Do,11/Apr/25 2:39 PM
Visual diagram of how the calc would work for a member of different scenarios,PHX5-119,11618,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Peter Dimsdale,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,Anthony Fisher,621ce616a687c5006a5d4bf2,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,09/Apr/25 12:51 PM,09/Apr/25 12:52 PM,,,,,,,,,,,,,,,0,,,,,,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@739489e9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00893:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10079,PHX5-3,Define Calculation Methodology for the Project,To Do,09/Apr/25 12:51 PM
"Agreed list of assumptions need to be made upfront and agreed, mitigation if these aren't met, what does it mean?",PHX5-118,11617,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Peter Dimsdale,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,Anthony Fisher,621ce616a687c5006a5d4bf2,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,09/Apr/25 12:50 PM,09/Apr/25 12:52 PM,,,,,,,,,,,,,,,0,,,,,,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@531b21c5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Documentation,,,,,0|i0088v:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-04-09 11:50:42.922,,,09/Apr/25 12:50 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Discussed during the 9th April stand up,,,,,,,,,,,,,,,,,,,,,,,,10079,PHX5-3,Define Calculation Methodology for the Project,To Do,09/Apr/25 12:50 PM
"Push for scheme letter tags, and the use of interim values into letters",PHX5-117,11616,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Peter Dimsdale,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,Anthony Fisher,621ce616a687c5006a5d4bf2,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,09/Apr/25 12:49 PM,09/Apr/25 12:52 PM,,,,,,,,,,,,,,,0,,,,,,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@737217ad,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Documentation,,,,,0|i0088n:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-04-09 11:49:32.015,,,09/Apr/25 12:49 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Discussed as action during 9th April stand up,,,,,,,,,,,,,,,,,,,,,,,,10079,PHX5-3,Define Calculation Methodology for the Project,To Do,09/Apr/25 12:49 PM
List all dev work needed for new calc types,PHX5-116,11615,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Peter Dimsdale,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,Anthony Fisher,621ce616a687c5006a5d4bf2,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,09/Apr/25 12:43 PM,09/Apr/25 12:44 PM,,,,,,,,,,,,,,,0,,,,,,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@55a35d6e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0088f:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-04-09 11:44:36.266,,,"09/Apr/25 12:44 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Discussed during the 9th April stand up. 

All dev work needed for new calc types, or new result outputs needed for these calcs (probably different to standard calcs)",,,,,,,,,,,,,,,,,,,,,,,,10079,PHX5-3,Define Calculation Methodology for the Project,To Do,09/Apr/25 12:43 PM
List of outputs for letters,PHX5-115,11614,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Neale Watson,712020:53a4cfae-f34b-43de-aba9-7b0c0d9946ed,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,09/Apr/25 12:28 PM,09/Jul/25 9:07 AM,,,,,,,,,,,,,,16/Apr/25 12:00 AM,0,,,,,,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@65b52891,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Documentation,,,,,0|i00887:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Apr/25 12:31 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;During the stand up on 9th April, we discussed that getting a list of outputs needed for letters for each calc type would be really useful in ensuring we don’t miss any requirements during coding. Please can these provided in batch order i.e. batch 1 calcs first, followed by batch 2, 3. Batch 1 (is Police A-R, A-D, DIS. Batch 2 is other Police calcs. Batch 3 is Fire.",,,,,,,,,,,,,,,,,,,,,,,,10079,PHX5-3,Define Calculation Methodology for the Project,To Do,09/Apr/25 12:43 PM
Calculation process flow with data setup and categories/schemes/forces,PHX5-114,11613,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Chris Marshall,712020:9a8f0e92-c7ec-43a0-a149-bbef7504f855,Anthony Fisher,621ce616a687c5006a5d4bf2,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,09/Apr/25 12:23 PM,17/Apr/25 1:12 PM,,,,,,,,,,,,,,16/Apr/25 12:00 AM,0,,,,,,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@43f4cf11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Documentation,,,,,0|i0087z:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-04-09 11:27:09.621,,,09/Apr/25 12:27 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Discussed this would be useful in the stand up on 9th April.,"09/Apr/25 12:32 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Adding as a reminder:

 Additional item for the flow chart, how does the linked accounts work. I know Aurora can do this, but what are the mechanics of it working. There may be a data question underneath. Might be a bit of a workshop with Neil, Matt and Pete.","17/Apr/25 1:12 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] 

I’ve attached the draft calc flow for the Police A-R. Please can we discuss this when you’re back from leave.",,,,,,,,,,,,,,,,,,,,,,10079,PHX5-3,Define Calculation Methodology for the Project,To Do,09/Apr/25 12:23 PM
Part time hours inconsistently as either % or fraction,PHX5-113,11578,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Neil Murrey,6267edd8e2f47a00682db88c,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,08/Apr/25 10:35 AM,08/Apr/25 11:01 AM,,,,,,,,,,,,,,,0,,,,,,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,08/Apr/25 10:51 AM;862ca789-6c5f-4d0a-b054-60929f0a27a7;MEMBER_SERVICE transformations (M code).txt;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10017,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1ff18811,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Documentation,,,,,0|i0081z:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Apr/25 10:46 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;During McCloud, discovered that MEMBER_SERVICE.ADDL_BRK  contains both a number of hours worked out of 40 as a fraction and as a percentage.  The McCloud calc code can’t deal with both. 

The data was transformed for the McCloud data migrations to Aurora, so that percentages were converted to fractions.

Need to establish if the code should be modified to deal with the un-transformed data or if we perform the same transformations in Phase 5.

M code used in transformation of data for Annual Allowance spreadsheet calculation are attached. Neil Murrey is aware of the equivalent transformations that occurred in the data migrations for McCloud.",,,,,,,,,,,,,,,,,,,,,,,,11576,PHX5-111,Pre TD1 - potential issues,To Do,08/Apr/25 10:35 AM
Members with split CARE years i.e. multiple records per year in MEMBER_CARE_BEN,PHX5-112,11577,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Neil Murrey,6267edd8e2f47a00682db88c,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,08/Apr/25 10:17 AM,08/Apr/25 11:01 AM,,,,,,,,,,,,,,,0,,,,,,,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7410d9f1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0081r:,,,,,,,,,,,,,,,,2015 CARE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Apr/25 10:28 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;In the McCloud project, some members have splt CARE years where they have transferred in from another force (genuine transfers show as a credit) this reults in only the salary from 1 of that years entries being used in the CARE calcs. As this caused an issue with the CARE calculations, the affected records were aggregated as part of the data migration. Need to consider if this needs to be done for phase 5 or as part of post-migration data cleanse.",,,,,,,,,,,,,,,,,,,,,,,,11576,PHX5-111,Pre TD1 - potential issues,To Do,08/Apr/25 10:17 AM
Pre TD1 - potential issues,PHX5-111,11576,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,08/Apr/25 10:13 AM,03/Dec/25 11:05 AM,,03/Dec/25 11:05 AM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@451106e5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Documentation,,,Green,,0|i0081j:,,,,,,,,,,,,,,,,2015 CARE,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,0.0,,,,,,,,,,,,,,,,,0,,,0,,,,,,,,,,,,,,,,2025-12-03 11:05:52.127,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_20656333387,,03/Dec/25 11:05 AM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Closing as think we have moved on from here now,,,,,,,,,,,,,,,,,,,,,,,,10731,PHX5-42,Data - Police,Done,03/Dec/25 11:05 AM
Scheme/Force Attachment to Client Level Code,PHX5-110,11540,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Peter Dimsdale,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,Anthony Fisher,621ce616a687c5006a5d4bf2,Anthony Fisher,621ce616a687c5006a5d4bf2,04/Apr/25 4:12 PM,04/Apr/25 4:20 PM,,,,,,,,,,,,,,30/Apr/25 12:00 AM,0,,,,,,,Anthony Fisher,Carolyn Goldsmith,,,,621ce616a687c5006a5d4bf2,712020:6c817202-9730-4d8b-bae8-033bb3c96e42,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7c6a6bb5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i007vz:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Apr/25 4:20 PM;621ce616a687c5006a5d4bf2;Following the data structure sign off we need to formalise the plan on how we will attach subsequent forces to the client code and test their compatibility.

We will have built the client by looking at once representative force(s) but not all of them. When we attach more forces I can see that we need to do a staging check to ensure that it works as intended that is predominantly IST lead.

The other test is one where we need to know if there are any member circumstances that are outside of the test pack, and those cases either enter a change control process to bring them in scope or we mark them as manual only calculations? What would our options be?

[~accountid:712020:6c817202-9730-4d8b-bae8-033bb3c96e42] there is a potential role for Data Services in Phase 5 and later new business to identify any members that fall outside of the calculation scope so that relevant action can be taken. It may be too late in the process to act if we are identifying them at the calc attachment stage.",,,,,,,,,,,,,,,,,,,,,,,,10079,PHX5-3,Define Calculation Methodology for the Project,To Do,04/Apr/25 4:12 PM
Review Project Dates with PM and Admin Team,PHX5-108,11537,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Anthony Fisher,621ce616a687c5006a5d4bf2,Anthony Fisher,621ce616a687c5006a5d4bf2,04/Apr/25 3:51 PM,04/Apr/25 3:52 PM,,,,,,,,,,,,,,11/Apr/25 12:00 AM,0,,,,,"When the full Product Batches are in JIRA, review the delivery dates with PM and Admin team for comment/sign off.",,Anthony Fisher,Carolyn Goldsmith,Matt Lilwall,Peter Dimsdale,,621ce616a687c5006a5d4bf2,712020:6c817202-9730-4d8b-bae8-033bb3c96e42,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@66c16f7b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i007vb:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10412,PHX5-4,Calculation Plan V3,To Do,04/Apr/25 3:51 PM
Cheshire Fire - Client Coding,PHX5-69,10779,Epic,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,04/Apr/25 11:50 AM,12/Nov/25 1:09 PM,,12/Nov/25 1:09 PM,,,,,,,,,,,,,0,,,,,"April has commented as follows:

So Graeme and I have had a chat and we think the employers to use would be West Yorkshire for Police (sizeable and should have plenty of calculation activity and lots of members with things like Added Years) Also, this is the force that Carolyn was looking at as well. Thames Valley would be another contender for Police, decent size and data. For fire it would be Cheshire Fire. Largest of the fire clients, best data and will have things such as modified retained members, CPD screens up to date etc.",,Matt Lilwall,,,,,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,PHX5-26,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@52a0fea6,,,,,Police,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,purple,,,,,,,,,,,,,0|i0037j:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31/Mar/25 12:00 AM,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_19189094862,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,12/Nov/25 1:09 PM
Data - Fire,PHX5-43,10732,Epic,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Peter Dimsdale,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,Peter Dimsdale,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,03/Apr/25 3:57 PM,12/Nov/25 12:17 PM,,12/Nov/25 12:17 PM,,,,,,,,,,,,,0,,,,,,,Peter Dimsdale,,,,,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1cb39fe9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i002yv:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_19257593461,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,12/Nov/25 12:17 PM
Data - Police,PHX5-42,10731,Epic,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Peter Dimsdale,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,Peter Dimsdale,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,03/Apr/25 3:57 PM,12/Nov/25 12:17 PM,,12/Nov/25 12:17 PM,,,,,,,,,,,,,0,,,,,,,Peter Dimsdale,,,,,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@72ecec6d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i002yn:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10057_*:*_1_*:*_7943735637_*|*_10056_*:*_2_*:*_412506571,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,12/Nov/25 12:17 PM
Accrual code structure,PHX5-194,10725,Subtask,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,03/Apr/25 12:59 PM,27/Jun/25 9:48 AM,,27/Jun/25 9:48 AM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1886a499,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i002y1:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_7243881327_*|*_10056_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,10722,PHX5-153,Accrual,Done,27/Jun/25 9:48 AM
Accrual - CARE Schemes,PHX5-193,10724,Subtask,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,03/Apr/25 12:58 PM,27/Jun/25 9:48 AM,,27/Jun/25 9:48 AM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3284b8f6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i002y3:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_7243907663_*|*_10056_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,10722,PHX5-153,Accrual,Done,27/Jun/25 9:48 AM
Double Accrual,PHX5-192,10723,Subtask,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,03/Apr/25 12:58 PM,27/Jun/25 9:48 AM,,27/Jun/25 9:48 AM,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4e01931a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i002y7:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_7243933363_*|*_10056_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,10722,PHX5-153,Accrual,Done,27/Jun/25 9:48 AM
Accrual,PHX5-153,10722,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,03/Apr/25 12:56 PM,28/Jul/25 8:20 AM,,27/Jun/25 9:47 AM,Batch 1,,,,,,,,,,,,0,Accrual,,,,"Accrual of benefits is mostly straightforward and standard process, however ""double accrual"" is available under some schemes and is linked to service

* CARE schemes straightforward: 
** FPS 2015 accrual of 1 / 59.7 (1 / 58.7 also been noted somewhere so just need to clarify which is correct),
** PPS 2015 is 1 / 55.3;
* FPS 2006 is 1 / 60 (max service 45y so max accrual is 45 / 60);
* PPS 2006 is 1 / 70 (max service 35y so max accrual is 35 / 70);
* FPS 1992 is 1 / 60 for first 20y, 2 / 60 beyond this.  Qualifying service is limited to 30y so the max accrual is 40 / 60 (20/60 for first 20y + 10*2/60 for next 10y);
* PPS 1987 same as FPS 1992: 1 / 60 for first 20y, 2 / 60 beyond that, capped at 30y qualifying so maximum 40 / 60 accrual;

* Any adjustment to service for part-time (and breaks? need to confirm) occurs after the original qualifying service has been used to calc the accrual.  So a PPS 1987 member could get the full 40/60ths accrual while their reckonable (PT adjusted) service is less than 30y
** This is based on one example in the member guide, where member had just one part-time service period.  This may be different or more complicated with many PT periods - need to find out

Not entirely linked to accrual, but deferred benefits in the PPS 1987 scheme are calculated based on the hypothetical pension that could be accrued up to member's NRA (I think - might be earliest payment age, need to verify), which is then proportioned by actual service / total hypothetical service. Same for FPS 1992

* actual service / prospective svc to NRD x prospective svc to NRD +with double accrual+ / 60
* eg. if 18y service completed, prospective of 25, then calc is 18/25 x 30/60 x FPS",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-8,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@62165088,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i000dy:zv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_7244021354_*|*_10056_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,13808,PHX5-198,Accrual Module,Done,27/Jun/25 9:47 AM
Service - Retained Firefighters,PHX5-175,10721,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,03/Apr/25 12:53 PM,26/Jun/25 9:10 AM,,,,,,,,,,,,,,,0,,,,,"Need to clarify if this applies to other FPS schemes as well.  There was some sort of settlement specifically for retained firefighters, and I've also found some info about the 2006 ""Special"" scheme, which may be linked to this. [+The Retained Firefighters’ Settlement+|https://www.yourpensionservice.org.uk/media/1474/retained-firefighters-pension-settlement.pdf]; [+FPS scheme comparison chart+|https://fpsmember.org/sites/default/files/FPS-scheme-comparison-chart.pdf] More research to be done.

We will need to find out how a member's record highlights that they are a retained firefighter, as some things are calculated differently for them.

FPP:

* FTE pensionable pay for a similar role, in 365d before leaving service, or in either of the two prior periods of 365d if higher.

Service:

* Accrued over 01/04 - 31/03 each year
* For each (qualifying) year of service as a retained firefighter, the FTE FPP is calculated for the relevant 365d period.  The member's actual earnings for that same period are proportioned against the FTE pay to get a service credit;
* Eg. if FTE for 01/01/23 - 31/12/23 is £26,000 and member actually received £4,500 over that year, this is converted to 0.173077 years of service (4500 / 26000), or approximately 63 days
* Helpful example here: [+How is my pension worked out? | Firefighters' Pension Scheme+|https://fpsmember.org/fps-2006/how-is-my-pension-worked-out]",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@30e46319,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i002xz:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10713,PHX5-149,Service,To Do,03/Apr/25 12:53 PM
PCLS - PPS 2006,PHX5-181,10719,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,03/Apr/25 12:51 PM,26/Jun/25 9:10 AM,,,,,,,,,,,,,,,0,,,,,"Under PPS 2006, rather than exchanging a portion of pension for a cash sum, there is a standard maximum lump sum of 4x the annual pension available.  Part or all of this lump sum can be exchanged for an increase in pension, which is known as ""inverse commutation"", and works very similarly to normal commutation.

Age related factor tables available.  The amount of additional pension is the value of the lump sum being given up divided by the relevant factor.  The additional pension is treated exactly the same as the standard pension (ie. wrt PINCs)

Example:

Annual pension = £30,000

Inverse factor = 15

Maximum lump sum available = £120,000 (30000 x 4)

Member chooses to take reduced lump sum of £50,000, giving up £70,000

Additional pension = 70000 / 15 = £4,666.67

Total pension = £34,666.67

Lump sum = £50,000

Required inputs:

* DoB / age at retirement;
* Sex (different factors for male and female);
* Annual pension;
* Factor tables",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4aa5d818,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i002xl:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10712,PHX5-148,PCLS,To Do,03/Apr/25 12:51 PM
"PCLS - FPS 2006, FPS 2015 & PPS 2015",PHX5-180,10718,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,03/Apr/25 12:51 PM,26/Jun/25 9:10 AM,,,,,,,,,,,,,,,0,,,,,"Should be very straightforward for all 3 schemes, as no benefit tranches to consider, and no factor tables.  Fixed commutation factor of 12 for both schemes, and all members, as far as I can see.

25% limit applies, as with the other schemes, this 25% is the amount of pre-commutation pension that can be commuted, rather than a cap that applies to the overall cash value of the benefits.  See other PCLS ticket for brief example of this",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@4b885f1c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i002xn:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10712,PHX5-148,PCLS,To Do,03/Apr/25 12:51 PM
PCLS - FPS 1992 & PPS 1987,PHX5-179,10717,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,03/Apr/25 12:50 PM,26/Jun/25 9:10 AM,,,,,,,,,,,,,,,0,,,,,"PCLS for both of these schemes is calculated using age related factor tables and a standard formula.  There is a limit to the amount of pension that can be commuted of 25%, which differs slightly from other DB schemes where the 25% limit refers to the total cash value of the benefits.  This public sector calculation is much more straightforward.

Example:

Annual pension of £24,000

Commutation factor of 23.6

25% of pension = £6,000

Maximum cash = 6000 * 23.6 = *£141,600*

Residual pension = 24000 - 6000 = *£18,000*



For ill-health members, only the lower tier ill-health pension can be commuted for cash.

There is an alternative limit to the PCLS of 2.25x the pre-commutation annual pension, which applies in the FPS 1992 scheme to members between ages 50 and 55, who have between 25 and 30yrs service at retirement.  Using the figures in the above example, this member's PCLS would be limited to £54,000.  This restriction also exists under PPS 1987, however I believe may be linked to member's employment rank rather than age, however need to verify this.

Required inputs:

* Factor tables;
* Pre-commutation pension;
* DoB / age at retirement;
* Total service (qualifying? Need to check);
* Potentially details of rank for PPS;",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@442e0e37,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i002xr:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10712,PHX5-148,PCLS,To Do,03/Apr/25 12:50 PM
McCloud,PHX5-152,10716,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,03/Apr/25 12:50 PM,11/Jul/25 10:09 AM,,11/Jul/25 10:09 AM,,,,,,,,,,,,,0,Aurora,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-8,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@29da17cb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i000dy:zx,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_7244392376_*|*_10056_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,13836,PHX5-205,Aurora Items,Done,11/Jul/25 10:09 AM
Ill Health - 1987 Service enhancement in Accrual module,PHX5-151,10715,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,03/Apr/25 12:50 PM,10/Sep/25 9:46 AM,,04/Sep/25 2:26 PM,Batch 1,,,,,,,,,,,,0,Accrual,TEST_CASES,,,"Ill health has some extra additions to the service



|DB_IllHealthSchemeServiceRange| |
|ServiceTo20YearsDOR|MIN(MAX(1, DB Qualifying Service[to DOR]) , 20)|
|ServiceOver20YearsDOR|MAX(DB Qualifying Service[to DOR] - 20, 0)|
| | |
|DB_IllHealthStandardServiceDOR|ServiceTo20YearsDOR + ( 2 * ServiceOver20YearsDOR )|
| | |
|ServiceTo20YearsNRD|MIN(MAX(1, DB Qualifying Service[to NRD]) , 20)|
|ServiceOver20YearsNRD|MAX(DB Qualifying Service[to NRD] - 20, 0)|
| | |
|DB_IllHealthStandardServiceNRD|ServiceTo20YearsNRD + ( 2 * ServiceOver20YearsNRD )|
| | |
|DB_IllHealth_enhancemax|DB_IllHealthStandardServiceNRD - DB_IllHealthStandardServiceDOR|

|LessThan5Years|ServiceTo20YearsDOR < 5|
|Between5And10Years|ServiceTo20YearsDOR >= 5 AND ServiceTo20YearsDOR <= 10|
|Between10And13Years|ServiceTo20YearsDOR >= 10 AND ServiceTo20YearsDOR <= 13|
|MoreThan13Years|ServiceTo20YearsDOR > 13|
| | |
|IF DB_IllHealthSchemeServiceRange = LessThan5Year|DB_IllHealthServiceEnhancement = min ( DB_IllHealth_enhancemax , 0 )|
| | |
|IF DB_IllHealthSchemeServiceRange = Between5And10Years|DB_IllHealthServiceEnhancement = min ( DB_IllHealth_enhancemax , DB_IllHealthStandardServiceDOR )|
| | |
|IF DB_IllHealthSchemeServiceRange = Between10And13Years|DB_IllHealthServiceEnhancement = min ( DB_IllHealth_enhancemax , 20 - DB_IllHealthStandardServiceDOR )|
| | |
|IF DB_IllHealthSchemeServiceRange = MoreThan13Years|DB_IllHealthServiceEnhancement = min ( DB_IllHealth_enhancemax , 7 , 40 - DB_IllHealthServiceDOR )|
| | |
|DB_IllHealthSchemePen|( (DB_IllHealthStandardServiceDOR + DB_IllHealthServiceEnhancement ) * 1/60 * PenPay_for_illhealth ) * (DB Reckonable Service[to DOR] / DB Qualifying Service[to DOR])|



Test cases required.



There is a new strategy PublicSector1987IllHealthStrategy set up.

AccruedPensionCalculatorFactory has already been set up to use this for any ill health 1987 members. We just need the above logic coded in PublicSector1987IllHealthStrategy.



To set up test cases, we can copy the other accrual strategy test methods (e.g. AccruedPensionDoubleStrategy) and just change to use the new strategy",,Andrew Wilson,Matt Lilwall,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-8,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@5a9be3f7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jm6:d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5 Sprint 9,PHX5 Sprint 10,PHX5 Sprint 11,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-09-02 08:05:34.472,10060_*:*_1_*:*_7244398524_*|*_10251_*:*_1_*:*_0_*|*_10250_*:*_1_*:*_12351245_*|*_10252_*:*_1_*:*_3438805186_*|*_10056_*:*_1_*:*_2524760994,,17/Jul/25 4:06 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Also need to consider lower and higher tiers,01/Aug/25 12:01 PM;712020:9c312f5e-c0be-44dc-9eb9-131512b0d452;Need to output these values as given for checking purposes,02/Sep/25 9:05 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Draft code saved to PublicSectorCalculation → {{PublicSector1987IllHealthStrategy}} class. Need to add tests,03/Sep/25 1:08 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Added Ill Health PPS1987 Test 4 to 7. All agree.,,,,,,,,,,,,,,,,,,,,,13808,PHX5-198,Accrual Module,Done,04/Sep/25 2:26 PM
FPP,PHX5-150,10714,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,03/Apr/25 12:50 PM,28/Jul/25 8:21 AM,,11/Jul/25 10:11 AM,Batch 1,,,,,,,,,,,,0,FPS,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-8,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@14f1ad06,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i000dy:zz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_7244407992_*|*_10056_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,13809,PHX5-199,FPS Module,Done,11/Jul/25 10:11 AM
Service,PHX5-149,10713,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,03/Apr/25 12:50 PM,28/Jul/25 8:18 AM,,11/Jul/25 10:12 AM,Batch 1,,,,,,,,,,,,0,Service,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-8,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@786e7b8d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i000dy:zzi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_7244411043_*|*_10056_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,13806,PHX5-196,Service Module,Done,11/Jul/25 10:12 AM
PCLS,PHX5-148,10712,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,03/Apr/25 12:50 PM,27/Aug/25 11:23 AM,,13/Jun/25 2:19 PM,Batch 1,,,,,,,,,,,,0,Accrual,Aurora,PCLS,Spreadsheets,"There are no benefit tranches and therefore no ordered commutation, so calculation will be straightforward.  Some schemes have age related factor tables (PPS 1987, FPS 1992), others have a fixed commutation rate of 12.",,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,PHX5-8,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3bafb069,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i002xj:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10060_*:*_1_*:*_6139758518_*|*_10062_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,13811,PHX5-201,PCLS (Pre Commutation) Module,Done,13/Jun/25 2:19 PM
General Calculation Items,PHX5-195,10708,Epic,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Barrie Moroney,712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,Andrew Wilson,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,03/Apr/25 12:33 PM,26/Jun/25 10:31 AM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,,,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@390d0d68,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0037z:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,To Do,03/Apr/25 12:33 PM
Force Client Code Deployment,PHX5-29,10482,Epic,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Anthony Fisher,621ce616a687c5006a5d4bf2,Anthony Fisher,621ce616a687c5006a5d4bf2,27/Mar/25 4:18 PM,12/Nov/25 12:17 PM,,12/Nov/25 12:17 PM,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@1f9fbf2d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,purple,,,,,,,,,,,,,0|i001nj:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10253_*:*_1_*:*_0_*|*_10056_*:*_1_*:*_19857514153,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,12/Nov/25 12:17 PM
Police West Yorkshire - Client Coding,PHX5-26,10479,Epic,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Anthony Fisher,621ce616a687c5006a5d4bf2,Anthony Fisher,621ce616a687c5006a5d4bf2,27/Mar/25 4:16 PM,12/Nov/25 12:17 PM,,12/Nov/25 12:17 PM,,,,,,,,,,,,,0,,,,,"April has commented as follows:

So Graeme and I have had a chat and we think the employers to use would be West Yorkshire for Police (sizeable and should have plenty of calculation activity and lots of members with things like Added Years) Also, this is the force that Carolyn was looking at as well. Thames Valley would be another contender for Police, decent size and data. For fire it would be Cheshire Fire. Largest of the fire clients, best data and will have things such as modified retained members, CPD screens up to date etc.",,,,,,,,,,,,,,,,,,,,,,,,PHX5-69,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@245410b1,,,,,Police,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,purple,,,,,,,,,,,,,0|i001n3:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31/Mar/25 12:00 AM,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10057_*:*_1_*:*_8357708439_*|*_10056_*:*_2_*:*_598585918,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,12/Nov/25 12:17 PM
Data Source: W Yorks or Full Extract delivery for coding.,PHX5-20,10421,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Peter Dimsdale,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,Anthony Fisher,621ce616a687c5006a5d4bf2,Anthony Fisher,621ce616a687c5006a5d4bf2,26/Mar/25 2:13 PM,09/Jul/25 9:07 AM,,,,,,,,,,,,,,,0,,,,,"The Version 2 plan called for the W Yorks data to be available for V1 coding by end of April, but the Heywood data extract maybe available sooner than was thought. 

# Statement of preference needed from Calcs team
# Statement from Data team on availability dates.",,Anthony Fisher,Carolyn Goldsmith,,,,621ce616a687c5006a5d4bf2,712020:6c817202-9730-4d8b-bae8-033bb3c96e42,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@15ee23a4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i001f7:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Apr/25 1:32 PM;621ce616a687c5006a5d4bf2;They Heywood data may be arriving w/c 7/4, with the data plan that TD1 will be available late May. Calcs workstream needs to resolve this change in plan into the process. What work can be undertaken in this period, and against what data source?",,,,,,,,,,,,,,,,,,,,,,,,10412,PHX5-4,Calculation Plan V3,To Do,03/Apr/25 1:32 PM
Revise the V2 Plan for full user product list.,PHX5-19,10413,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Anthony Fisher,621ce616a687c5006a5d4bf2,Anthony Fisher,621ce616a687c5006a5d4bf2,Anthony Fisher,621ce616a687c5006a5d4bf2,26/Mar/25 1:49 PM,09/Jul/25 9:07 AM,,,,,,,,,,,,,,,0,,,,,"The calcs v2 plan datesto be retained, but the full product stack for each batch to be listed out with relevant milestones.",,Anthony Fisher,,,,,621ce616a687c5006a5d4bf2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@71b4bd44,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i001fb:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,26/Mar/25 12:00 AM,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Apr/25 2:59 PM;621ce616a687c5006a5d4bf2;The product list may change dependant on the data structure. The latest plan from Carolyn would suggest that the PPS/NPPS/CARE schemes would be held as categories in Aurora, which may have an impact on coding and documentation. ","04/Apr/25 3:48 PM;621ce616a687c5006a5d4bf2;We will not be progressing with the excel breakdown, but will be putting all dates and products into JIRA. As at time of comment, Batch 1,2 and 3 are in Jira at the dates from Plan 2. ",,,,,,,,,,,,,,,,,,,,,,,10412,PHX5-4,Calculation Plan V3,To Do,04/Apr/25 3:47 PM
Calculation Plan V3,PHX5-4,10412,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,High,Done,Anthony Fisher,621ce616a687c5006a5d4bf2,Anthony Fisher,621ce616a687c5006a5d4bf2,Anthony Fisher,621ce616a687c5006a5d4bf2,26/Mar/25 1:41 PM,11/Jul/25 9:58 AM,,11/Jul/25 9:58 AM,,,,,,,,,,,,14/Apr/25 12:00 AM,0,,,,,Creation of the V3 plan for full calculation products and milestones.,,Anthony Fisher,,,,,621ce616a687c5006a5d4bf2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@76fe2d78,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004z:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10007_*:*_1_*:*_79537478_*|*_10057_*:*_1_*:*_8364902500_*|*_10056_*:*_2_*:*_607530506,,"03/Apr/25 1:35 PM;621ce616a687c5006a5d4bf2;Batch 1 2 3 structure has been sent to PM and other workstream leads.

the latest data plan is available, and this will affect the batch production, but this needs to be finessed in the plan for correct dates and expectation of progress.

Remaining batches with AF to produce.","04/Apr/25 3:49 PM;621ce616a687c5006a5d4bf2;Batch 1,2 and 3 are in JIRA. Task is being created to review dates w/c 7/4 against data and dev plan.",,,,,,,,,,,,,,,,,,,,,,,10058,PHX5-25,Calculation Planning,Done,11/Jul/25 9:58 AM
List by product of the spec and test pack gaps,PHX5-24,10083,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:47 PM,09/Jul/25 9:07 AM,,,,,,,,,,,,,,,0,,,,,"A draft Matrix has been produced detailing each “product” and our readiness from a calc, test case, and coding perspective. ",,Anthony Fisher,Dan Reynolds,Matt Lilwall,,,621ce616a687c5006a5d4bf2,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14/Mar/25 3:30 PM;dd66cd6d-2ede-4713-a9ad-fd53efaf0d17;Police - active calc gap analysis - with comments 04.03.25.xlsx;https://xps-jira.atlassian.net/rest/api/3/attachment/content/10000,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@56b9fee3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0006g:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-04-04 14:55:07.282,,,"14/Mar/25 2:33 PM;712020:1e6e1696-9716-406d-bbf5-0d46641d3cda;Calc gap analysis in progress identifying areas where we have limited or no information and test cases (i.e. ill health, divorce, etc). No test cases in place for Fire.",14/Mar/25 2:36 PM;712020:1e6e1696-9716-406d-bbf5-0d46641d3cda;Need some input from Matt from a calc perspective (book in some time to review with him next week),"04/Apr/25 3:55 PM;621ce616a687c5006a5d4bf2;Is this task now redundant, as the calc readiness scoring system has been included in the Jira stories for each calc? The job of correctly scoring each product will be down to the owner of the item over the coming week? [~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a]?",,,,,,,,,,,,,,,,,,,,,,10079,PHX5-3,Define Calculation Methodology for the Project,To Do,14/Mar/25 2:36 PM
Review of Specs/Test Packs to support V1,PHX5-23,10082,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:47 PM,04/Apr/25 4:07 PM,,,,,,,,,,,,,,,0,,,,,,,Anthony Fisher,Dan Reynolds,,,,621ce616a687c5006a5d4bf2,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@229ef7f0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0006h:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-04-04 15:00:06.657,,,"14/Mar/25 2:31 PM;712020:1e6e1696-9716-406d-bbf5-0d46641d3cda;High level calc spec for Fire in progress. May need to split out into individual schemes.

Calc gap analysis in progress, identifying the requirement for additional test cases (particularly for Fire, for which we have none)","27/Mar/25 3:15 PM;712020:1e6e1696-9716-406d-bbf5-0d46641d3cda;First draft of high-level calc specs for Fire schemes have been drafted and saved here -

[Calc Specs|https://xpsplc.sharepoint.com/:f:/s/ProjectPhoenix/EqulLzutuL5ApGRg4rp-ZqsBZ5l4ZJHF8wYOlFTescimmQ?e=DhkBJf]

These are works in progress and will require some additional input and fine tuning",04/Apr/25 4:00 PM;621ce616a687c5006a5d4bf2;[~accountid:712020:1e6e1696-9716-406d-bbf5-0d46641d3cda] Can you start scoring the Fire products alongside the outline of the specs that you have written. [~accountid:712020:e08ec5c0-f801-4d2e-b6e9-2bd76b0c8d97] will be able to help you with the scoring as he has performed in on P4.,"04/Apr/25 4:06 PM;712020:1e6e1696-9716-406d-bbf5-0d46641d3cda;[~accountid:621ce616a687c5006a5d4bf2] will do, Matt’s shared a doc which outlines the scoring system but will run through them with Barrie next week with a view to handing them over to admin to drill down into the finer details",,,,,,,,,,,,,,,,,,,,,10079,PHX5-3,Define Calculation Methodology for the Project,To Do,13/Mar/25 4:47 PM
Review of Specs/Test Packs to support Modules,PHX5-22,10081,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:46 PM,27/Mar/25 11:47 AM,,,,,,,,,,,,,,,0,,,,,,,Dan Reynolds,,,,,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@52d025ec,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0006j:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10079,PHX5-3,Define Calculation Methodology for the Project,To Do,13/Mar/25 4:46 PM
Define Calculation Methodology for the Project,PHX5-3,10079,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:45 PM,11/Jul/25 9:58 AM,,11/Jul/25 9:58 AM,,,,,,,,,,,,,0,,,,,"[~accountid:712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a] [~accountid:712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f]  We have had some discussions about the spec process for P5 which I think is summed up below:

Batch 1: McCloud code and Test Case led process given the sign off and testing of the McCloud product. Specs still need to be completed, but as an output of the V1/2 process. If any additional work to capture work items in admin BAU that were to part of McCloud, they need to be added to the spec. I would expect that the specs to be reviewed by admin and signed off as part of project closure.

Batch 2: A more traditional specification led process given that we have no Calculate McCloud code to review.",,Dan Reynolds,Peter Dimsdale,,,,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@7df1fdbb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0006f:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10007_*:*_1_*:*_1191721541_*|*_10056_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,10058,PHX5-25,Calculation Planning,Done,11/Jul/25 9:58 AM
List of data input/output,PHX5-9,10078,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:44 PM,09/Jul/25 9:07 AM,,,,,,,,,,,,,,10/Apr/25 12:00 AM,0,,,,,Carolyn has asked for a list of the data that is required for the autoamtion to be provided for the data team to assist with having the initial mappings calc ready.,,Carolyn Goldsmith,Dan Reynolds,Matt Lilwall,Neil Murrey,Paul Goodfellow,712020:6c817202-9730-4d8b-bae8-033bb3c96e42,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,6267edd8e2f47a00682db88c,712020:399cc5a3-12da-4107-96f1-84b01df5c763,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@61554715,,,,,Police,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Documentation,,,,,0|i0005z:i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-04-10 13:31:15.474,,,"10/Apr/25 2:31 PM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;Hi [~accountid:712020:6c817202-9730-4d8b-bae8-033bb3c96e42] , I’ve linked a list of the data the McCloud A-R calculation uses. Naturally there will be more we need for other calc types, but lots of unknowns around those until the specs and test packs are sorted. Is there anything else you need in meantime?","09/May/25 11:11 AM;712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a;[~accountid:712020:399cc5a3-12da-4107-96f1-84b01df5c763] [~accountid:712020:6c817202-9730-4d8b-bae8-033bb3c96e42] [~accountid:6267edd8e2f47a00682db88c], added you as watchers. I know this is pretty bare bones at the moment, but is this at the right level for you, or do you need more details?",,,,,,,,,,,,,,,,,,,,,,,10072,PHX5-2,Calculate Modules Overview,To Do,03/Apr/25 3:28 PM
List of potential development Calculate,PHX5-8,10077,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Peter Dimsdale,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:43 PM,04/Apr/25 5:38 PM,,,,,,,,,,,,,,,0,,,,,,,Andrew Wilson,Dan Reynolds,Peter Dimsdale,,,712020:9c312f5e-c0be-44dc-9eb9-131512b0d452,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,,,,,,,,,,,,,,,,,,,,,,PHX5-148,PHX5-149,PHX5-150,PHX5-151,PHX5-152,PHX5-153,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@184860bb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00060:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10072,PHX5-2,Calculate Modules Overview,To Do,13/Mar/25 4:43 PM
List of potential development Aurora,PHX5-7,10076,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:42 PM,27/Mar/25 11:47 AM,,,,,,,,,,,,,,,0,,,,,,,Dan Reynolds,,,,,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@518e8c98,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00061:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14/Mar/25 12:26 PM;712020:1e6e1696-9716-406d-bbf5-0d46641d3cda;Need to set up a call with CIT to discuss,,,,,,,,,,,,,,,,,,,,,,,,10072,PHX5-2,Calculate Modules Overview,To Do,13/Mar/25 4:42 PM
Confirm list of required modules Fire,PHX5-6,10075,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:40 PM,27/Mar/25 11:47 AM,,,,,,,,,,,,,,,0,,,,,,,Dan Reynolds,,,,,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3aa4c13e,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00063:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Mar/25 10:17 AM;712020:1e6e1696-9716-406d-bbf5-0d46641d3cda;I’ve asked April Woods for a high-level list of current Altair processes, both automated and manual, to get an understanding of scope","14/Mar/25 3:19 PM;712020:1e6e1696-9716-406d-bbf5-0d46641d3cda;Current understanding is that whatever automation currently in place for Police, also works for Fire. However there are additional scheme specific dependencies for Fire which are not automated, such as Additional Pension Benefit (APB) and Split Pensions, which are calculated by admin manually. Also the special retained membership on Fire is not automated at all",,,,,,,,,,,,,,,,,,,,,,,10072,PHX5-2,Calculate Modules Overview,To Do,13/Mar/25 4:40 PM
Confirm list of required modules Police,PHX5-5,10074,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,,,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:39 PM,27/Mar/25 11:47 AM,,,,,,,,,,,,,,,0,,,,,,,Dan Reynolds,,,,,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@2ee54ccf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00067:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Mar/25 10:17 AM;712020:1e6e1696-9716-406d-bbf5-0d46641d3cda;I’ve asked April Woods for a high-level list of current Altair processes, both automated and manual, to get an understanding of scope",,,,,,,,,,,,,,,,,,,,,,,,10072,PHX5-2,Calculate Modules Overview,To Do,13/Mar/25 4:39 PM
Calculate Modules Overview,PHX5-2,10072,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Peter Dimsdale,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:38 PM,11/Jul/25 9:58 AM,,11/Jul/25 9:58 AM,,,,,,,,,,,,,0,,,,,,,Dan Reynolds,Peter Dimsdale,,,,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@6766764d,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0005r:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-03-13 17:11:47.054,10007_*:*_1_*:*_1192150814_*|*_10056_*:*_1_*:*_0,,"13/Mar/25 5:11 PM;712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f;Going to try something here because why not! [~accountid:712020:9c312f5e-c0be-44dc-9eb9-131512b0d452] this is where we will probably want to add in sub-tasks for the global modules under review in your Azure repo currently? If that doesn’t work, let’s think about how we want to move over to Jira. This is very much a learn as we go thing, and if this all goes wrong over the next week, we will simply start again! but we had to move forward with something to get it off the ground. Thanks",,,,,,,,,,,,,,,,,,,,,,,,10058,PHX5-25,Calculation Planning,Done,11/Jul/25 9:58 AM
Review with P5 PM,PHX5-18,10071,Subtask,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Anthony Fisher,621ce616a687c5006a5d4bf2,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:36 PM,27/Aug/25 11:23 AM,,26/Mar/25 11:45 AM,,,,,,,,,,,,,0,,,,,,,Anthony Fisher,Dan Reynolds,,,,621ce616a687c5006a5d4bf2,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,,,,0,0,,,0,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@79988068,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0005b:1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-03-26 11:45:19.019,10007_*:*_1_*:*_1105730696_*|*_10009_*:*_1_*:*_0,,"26/Mar/25 11:45 AM;621ce616a687c5006a5d4bf2;The plan was issued to Tony, but was superseded on the day by the conversation about go live dates. The plan has now been superseeded and is moving to V3.",,,,,,,,,,,,,,,,,,,,,,,,10060,PHX5-1,Calculations Plan v2 for 20 03 25 Planning Day,Done,26/Mar/25 11:45 AM
IST Internal Review,PHX5-17,10070,Subtask,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Anthony Fisher,621ce616a687c5006a5d4bf2,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:34 PM,27/Aug/25 11:23 AM,,26/Mar/25 11:46 AM,,,,,,,,,,,,,0,,,,,,,Anthony Fisher,Dan Reynolds,,,,621ce616a687c5006a5d4bf2,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@e50de89,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0005b:2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-03-26 11:46:23.447,10007_*:*_1_*:*_1105905818_*|*_10009_*:*_1_*:*_0,,"26/Mar/25 11:46 AM;621ce616a687c5006a5d4bf2;Plan issue for PM and manager comment on 19/03. Dan R excluded in error, issued to Dan on 26/3 ahead of V3 planning work.",,,,,,,,,,,,,,,,,,,,,,,,10060,PHX5-1,Calculations Plan v2 for 20 03 25 Planning Day,Done,26/Mar/25 11:46 AM
Define Risks for P5 Milestones,PHX5-16,10069,Subtask,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:33 PM,27/Aug/25 11:23 AM,,26/Mar/25 11:47 AM,,,,,,,,,,,,,0,,,,,,,Anthony Fisher,Dan Reynolds,,,,621ce616a687c5006a5d4bf2,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3adf0eb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0005b:4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-03-26 11:47:38.747,10007_*:*_1_*:*_1106040643_*|*_10009_*:*_1_*:*_0,,26/Mar/25 11:47 AM;621ce616a687c5006a5d4bf2;High level coding risks discussed with Pete Dimsdale and noted in plan that was issued to PM. To he taken over into V3 planning.,,,,,,,,,,,,,,,,,,,,,,,,10060,PHX5-1,Calculations Plan v2 for 20 03 25 Planning Day,Done,26/Mar/25 11:47 AM
Review Resource Allocation,PHX5-15,10067,Subtask,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Anthony Fisher,621ce616a687c5006a5d4bf2,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:28 PM,27/Aug/25 11:23 AM,,26/Mar/25 11:48 AM,,,,,,,,,,,,,0,,,,,,,Anthony Fisher,Dan Reynolds,,,,621ce616a687c5006a5d4bf2,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@762c3cf7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0005b:9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-03-26 11:48:55.722,10007_*:*_1_*:*_1106393274_*|*_10009_*:*_1_*:*_0,,26/Mar/25 11:48 AM;621ce616a687c5006a5d4bf2;Not performed as part of the V2 plan due to time limits and the plan not being detailed enough. To be taken over into the V3 planning.,,,,,,,,,,,,,,,,,,,,,,,,10060,PHX5-1,Calculations Plan v2 for 20 03 25 Planning Day,Done,26/Mar/25 11:48 AM
"Review dates for P1, P2 and P3",PHX5-14,10066,Subtask,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:27 PM,27/Aug/25 11:24 AM,,26/Mar/25 12:58 PM,,,,,,,,,,,,,0,,,,,,,Anthony Fisher,Dan Reynolds,,,,621ce616a687c5006a5d4bf2,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@cb8a8fa,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0005b:i,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-03-26 12:58:57.358,10007_*:*_1_*:*_1110667099_*|*_10009_*:*_1_*:*_0,,"26/Mar/25 12:58 PM;621ce616a687c5006a5d4bf2;Delivery dates have been clarified as part of the 20/3 planning day. Go live is for 01/11 with Day one calculations identified by the scheme, and V3 planning required to set expectations for what can be accomplished in that time.

Calculations post go live date would be focussed din member level, and then scheme level delivery dates.

The goal should be to automate in our smallest timeframe to free resource for follow on projects.",,,,,,,,,,,,,,,,,,,,,,,,10060,PHX5-1,Calculations Plan v2 for 20 03 25 Planning Day,Done,26/Mar/25 12:58 PM
Allocate calc products to batches,PHX5-13,10065,Subtask,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Peter Dimsdale,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:26 PM,27/Aug/25 11:24 AM,,26/Mar/25 1:01 PM,,,,,,,,,,,,,0,,,,,,,Anthony Fisher,Dan Reynolds,,,,621ce616a687c5006a5d4bf2,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@79933b43,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0005c:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-03-26 13:01:57.912,10007_*:*_1_*:*_1110914500_*|*_10009_*:*_1_*:*_0,,"26/Mar/25 1:01 PM;621ce616a687c5006a5d4bf2;Calculations allocated in V2 plan based on Day 1 deliverable status and McCloud automation.

Batch 1: Police Day 1 deliverable with McCloud code in place.

Batch 2: Police Day 1 with little/no McCloud code.

Batch 3: Fire Day 1

Batch 4: Day 2 deliverables

Batch 5: Low priority or not prioritised calcs.

 ",,,,,,,,,,,,,,,,,,,,,,,,10060,PHX5-1,Calculations Plan v2 for 20 03 25 Planning Day,Done,26/Mar/25 1:01 PM
Confirm Dev Dependency,PHX5-12,10064,Subtask,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Peter Dimsdale,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:25 PM,27/Aug/25 11:24 AM,,26/Mar/25 1:02 PM,,,,,,,,,,,,,0,,,,,,,Anthony Fisher,Dan Reynolds,,,,621ce616a687c5006a5d4bf2,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@578773ee,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0005d:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-03-26 13:02:46.137,10007_*:*_1_*:*_1111034053_*|*_10009_*:*_1_*:*_0,,26/Mar/25 1:02 PM;621ce616a687c5006a5d4bf2;This is outstanding and to be carried over into V3 planning.,,,,,,,,,,,,,,,,,,,,,,,,10060,PHX5-1,Calculations Plan v2 for 20 03 25 Planning Day,Done,26/Mar/25 1:02 PM
Confirm Admin Priority Level,PHX5-11,10063,Subtask,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:23 PM,27/Aug/25 11:24 AM,,26/Mar/25 10:18 AM,,,,,,,,,,,,,0,,,,,Graeme Hall to provide a priority list of day one calcs required in view of a potential phased roll out,,Anthony Fisher,Dan Reynolds,,,,621ce616a687c5006a5d4bf2,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@3a4f17ef,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0005f:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-03-14 11:07:20.901,10008_*:*_1_*:*_0_*|*_10007_*:*_1_*:*_73202353,,"14/Mar/25 11:07 AM;621ce616a687c5006a5d4bf2;Dan R has requested a high level list of both Police and Fire, but April is on leave 14/03. We need this ASAP Monday otherwise it cannot be planned.",17/Mar/25 4:39 PM;712020:1e6e1696-9716-406d-bbf5-0d46641d3cda;A draft calc priority list has been provided but some concerns have been raised about it during the weekly working group call. Call booked in for 18/03 to discuss this further and firm up the priority order.,"18/Mar/25 2:57 PM;712020:1e6e1696-9716-406d-bbf5-0d46641d3cda;Following call today, Graeme is updating the priority list, to also include Fire processes, and is expected by COB today","26/Mar/25 10:18 AM;621ce616a687c5006a5d4bf2;We have the priority list from Ops and Iain Wilson, this is saved in project SharePoint as v6",,,,,,,,,,,,,,,,,,,,,10060,PHX5-1,Calculations Plan v2 for 20 03 25 Planning Day,Done,26/Mar/25 10:18 AM
Confirm Batch Methodology,PHX5-10,10062,Subtask,To Do,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,,Anthony Fisher,621ce616a687c5006a5d4bf2,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,Dan Reynolds,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,13/Mar/25 4:22 PM,09/Jul/25 9:07 AM,,,,,,,,,,,,,,15/Apr/25 12:00 AM,0,,,,,"The calculations have been batched as follows:

# Police Day 1 schemes supported by McCloud Calculate code
# Police Day 1 scheme not support by McCloud Calculate code
# Fire Day 1 
# Day 2 Police and Fire
# Contingency/non-defined.

Batch 1-3 is in play from 01/4, batch 4 and 5 planning not progressed in detail as of 14/04/2025",,Anthony Fisher,Dan Reynolds,,,,621ce616a687c5006a5d4bf2,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@debe0d5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Documentation,,,Green,,0|i0005j:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2025-04-14 08:13:27.849,,,14/Apr/25 9:13 AM;621ce616a687c5006a5d4bf2;Meeting with P5 project team booked for 15/04 for comment on plan.,,,,,,,,,,,,,,,,,,,,,,,,10060,PHX5-1,Calculations Plan v2 for 20 03 25 Planning Day,To Do,14/Apr/25 9:13 AM
Calculations Plan v2 for 20 03 25 Planning Day,PHX5-1,10060,Story,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Anthony Fisher,621ce616a687c5006a5d4bf2,Anthony Fisher,621ce616a687c5006a5d4bf2,13/Mar/25 2:16 PM,27/Aug/25 11:24 AM,,26/Mar/25 2:29 PM,,,,,,,,,,,,,0,,,,,,,Anthony Fisher,,,,,621ce616a687c5006a5d4bf2,,,,,,,,,0,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@13f0bc27,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00053:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10007_*:*_1_*:*_1123970713_*|*_10009_*:*_1_*:*_0,,"26/Mar/25 11:31 AM;621ce616a687c5006a5d4bf2;[~accountid:712020:1e6e1696-9716-406d-bbf5-0d46641d3cda] 

The V2 plan was prepared for the planning day but was not presented, as the day reverted to a high level discussion about the various go-live options for the scheme. The outcome was that we are aiming for a data and calcs go live by 01/11. 

the V2 plan is fundamentally sound, but we need to take this into more detailed planning for each product to tack the dependanvis and critical dates.

The v3 plan needs to recorded in a calculations structure eon Jira once we have agreed that structure.",,,,,,,,,,,,,,,,,,,,,,,,10058,PHX5-25,Calculation Planning,Done,26/Mar/25 2:29 PM
Calculation Planning,PHX5-25,10058,Epic,Closed,PHX5,Implementation Services Phase 5,software,Matt Lilwall,712020:a19ffcd2-7bd0-4089-afda-622aa156bf2a,,Medium,Done,,,Peter Dimsdale,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,Peter Dimsdale,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,12/Mar/25 1:17 PM,12/Nov/25 1:08 PM,,12/Nov/25 1:08 PM,,,,,,,,,,,,,0,,,,,,,Dan Reynolds,Peter Dimsdale,,,,712020:1e6e1696-9716-406d-bbf5-0d46641d3cda,712020:4ae9d5fc-68f8-4200-815c-99a10ae0957f,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,com.atlassian.servicedesk.plugins.approvals.internal.customfield.ApprovalsCFValue@50e118b8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0004n:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10007_*:*_1_*:*_1290575314_*|*_10056_*:*_1_*:*_0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Done,12/Nov/25 1:08 PM
